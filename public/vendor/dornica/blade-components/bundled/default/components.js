var t,e,factory;!function(u,p,s,c){var d,f,h,i,b,y,v,m,g,l,w,k,L,E,a,n,r=p.createElement("canvas").getContext("2d"),x={r:0,g:0,b:0,h:0,s:0,v:0,a:1},A={},C={el:"[data-coloris]",parent:"body",theme:"default",themeMode:"light",rtl:!1,wrap:!0,margin:2,format:"hex",formatToggle:!1,swatches:[],swatchesOnly:!1,alpha:!0,forceAlpha:!1,focusInput:!0,selectInput:!1,inline:!1,defaultColor:"#000000",clearButton:!1,clearLabel:"Clear",closeButton:!1,closeLabel:"Close",onChange:function(){return c},a11y:{open:"Open color picker",close:"Close color picker",clear:"Clear the selected color",marker:"Saturation: {s}. Brightness: {v}.",hueSlider:"Hue slider",alphaSlider:"Opacity slider",input:"Color value field",format:"Color format",swatch:"Color swatch",instruction:"Saturation and brightness selector. Use up, down, left and right arrow keys to select."}},o={},S="",T={},B=!1;function M(t2){if("object"==typeof t2)for(var e2 in t2)switch(e2){case"el":D(t2.el),!1!==t2.wrap&&R(t2.el);break;case"parent":(d=t2.parent instanceof HTMLElement?t2.parent:p.querySelector(t2.parent))&&(d.appendChild(f),C.parent=t2.parent,d===p.body&&(d=c));break;case"themeMode":C.themeMode=t2.themeMode,"auto"===t2.themeMode&&u.matchMedia&&u.matchMedia("(prefers-color-scheme: dark)").matches&&(C.themeMode="dark");case"theme":t2.theme&&(C.theme=t2.theme),f.className="clr-picker clr-"+C.theme+" clr-"+C.themeMode,C.inline&&j();break;case"rtl":C.rtl=!!t2.rtl,Array.from(p.getElementsByClassName("clr-field")).forEach(function(e3){return e3.classList.toggle("clr-rtl",C.rtl)});break;case"margin":t2.margin*=1,C.margin=(isNaN(t2.margin)?C:t2).margin;break;case"wrap":t2.el&&t2.wrap&&R(t2.el);break;case"formatToggle":C.formatToggle=!!t2.formatToggle,V("clr-format").style.display=C.formatToggle?"block":"none",C.formatToggle&&(C.format="auto");break;case"swatches":Array.isArray(t2.swatches)&&function(){var e3=V("clr-swatches"),l3=p.createElement("div");e3.textContent="",t2.swatches.forEach(function(e4,t3){var a3=p.createElement("button");a3.setAttribute("type","button"),a3.setAttribute("id","clr-swatch-"+t3),a3.setAttribute("aria-labelledby","clr-swatch-label clr-swatch-"+t3),a3.style.color=e4,a3.textContent=e4,l3.appendChild(a3)}),t2.swatches.length&&e3.appendChild(l3),C.swatches=t2.swatches.slice()}();break;case"swatchesOnly":C.swatchesOnly=!!t2.swatchesOnly,f.setAttribute("data-minimal",C.swatchesOnly);break;case"alpha":C.alpha=!!t2.alpha,f.setAttribute("data-alpha",C.alpha);break;case"inline":C.inline=!!t2.inline,f.setAttribute("data-inline",C.inline),C.inline&&(l2=t2.defaultColor||C.defaultColor,E=P(l2),j(),Y(l2));break;case"clearButton":"object"==typeof t2.clearButton&&(t2.clearButton.label&&(C.clearLabel=t2.clearButton.label,v.innerHTML=C.clearLabel),t2.clearButton=t2.clearButton.show),C.clearButton=!!t2.clearButton,v.style.display=C.clearButton?"block":"none";break;case"clearLabel":C.clearLabel=t2.clearLabel,v.innerHTML=C.clearLabel;break;case"closeButton":C.closeButton=!!t2.closeButton,C.closeButton?f.insertBefore(m,b):b.appendChild(m);break;case"closeLabel":C.closeLabel=t2.closeLabel,m.innerHTML=C.closeLabel;break;case"a11y":var a2,l2,r2=t2.a11y,n2=!1;if("object"==typeof r2)for(var o2 in r2)r2[o2]&&C.a11y[o2]&&(C.a11y[o2]=r2[o2],n2=!0);n2&&(a2=V("clr-open-label"),l2=V("clr-swatch-label"),a2.innerHTML=C.a11y.open,l2.innerHTML=C.a11y.swatch,m.setAttribute("aria-label",C.a11y.close),v.setAttribute("aria-label",C.a11y.clear),g.setAttribute("aria-label",C.a11y.hueSlider),w.setAttribute("aria-label",C.a11y.alphaSlider),y.setAttribute("aria-label",C.a11y.input),h.setAttribute("aria-label",C.a11y.instruction));break;default:C[e2]=t2[e2]}}function H(e2,t2){"string"==typeof e2&&"object"==typeof t2&&(o[e2]=t2,B=!0)}function N(e2){delete o[e2],0===Object.keys(o).length&&(B=!1,e2===S&&O())}function O(){0<Object.keys(T).length&&(M(T),S="",T={})}function D(e2){e2 instanceof HTMLElement&&(e2=[e2]),Array.isArray(e2)?e2.forEach(function(e3){Z(e3,"click",I),Z(e3,"input",q)}):(Z(p,"click",e2,I),Z(p,"input",e2,q))}function I(e2){C.inline||(function t(l2){if(B){var e2,r2=["el","wrap","rtl","inline","defaultColor","a11y"];for(e2 in o)if("break"===function(e3){var t2=o[e3];if(l2.matches(e3)){for(var a2 in S=e3,T={},r2.forEach(function(e4){return delete t2[e4]}),t2)T[a2]=Array.isArray(C[a2])?C[a2].slice():C[a2];return M(t2),"break"}}(e2))break}}(e2.target),L=e2.target,a=L.value,E=P(a),f.classList.add("clr-open"),j(),Y(a),(C.focusInput||C.selectInput)&&(y.focus({preventScroll:!0}),y.setSelectionRange(L.selectionStart,L.selectionEnd)),C.selectInput&&y.select(),(n||C.swatchesOnly)&&Q().shift().focus(),L.dispatchEvent(new Event("open",{bubbles:!0})))}function j(){var e2,t2,a2,l2,r2=d,n2=u.scrollY,o2=f.offsetWidth,c2=f.offsetHeight,i2={left:!1,top:!1},s2={x:0,y:0};r2&&(a2=u.getComputedStyle(r2),e2=parseFloat(a2.marginTop),l2=parseFloat(a2.borderTopWidth),(s2=r2.getBoundingClientRect()).y+=l2+n2),C.inline||(a2=(t2=L.getBoundingClientRect()).x,l2=n2+t2.y+t2.height+C.margin,r2?(a2-=s2.x,l2-=s2.y,a2+o2>r2.clientWidth&&(a2+=t2.width-o2,i2.left=!0),l2+c2>r2.clientHeight-e2&&c2+C.margin<=t2.top-(s2.y-n2)&&(l2-=t2.height+c2+2*C.margin,i2.top=!0),l2+=r2.scrollTop):(a2+o2>p.documentElement.clientWidth&&(a2+=t2.width-o2,i2.left=!0),l2+c2-n2>p.documentElement.clientHeight&&c2+C.margin<=t2.top&&(l2=n2+t2.y-c2-C.margin,i2.top=!0)),f.classList.toggle("clr-left",i2.left),f.classList.toggle("clr-top",i2.top),f.style.left=a2+"px",f.style.top=l2+"px",s2.x+=f.offsetLeft,s2.y+=f.offsetTop),A={width:h.offsetWidth,height:h.offsetHeight,x:h.offsetLeft+s2.x,y:h.offsetTop+s2.y}}function R(e2){e2 instanceof HTMLElement?W(e2):(Array.isArray(e2)?e2:p.querySelectorAll(e2)).forEach(W)}function W(e2){var t2,a2,l2=e2.parentNode;l2.classList.contains("clr-field")||(t2=p.createElement("div"),a2="clr-field",(C.rtl||e2.classList.contains("clr-rtl"))&&(a2+=" clr-rtl"),t2.innerHTML='<button type="button" aria-labelledby="clr-open-label"></button>',l2.insertBefore(t2,e2),t2.className=a2,t2.style.color=e2.value,t2.appendChild(e2))}function q(e2){var t2=e2.target.parentNode;t2.classList.contains("clr-field")&&(t2.style.color=e2.target.value)}function F(e2){var t2;L&&!C.inline&&(t2=L,e2&&(L=c,a!==t2.value&&(t2.value=a,t2.dispatchEvent(new Event("input",{bubbles:!0})))),setTimeout(function(){a!==t2.value&&t2.dispatchEvent(new Event("change",{bubbles:!0}))}),f.classList.remove("clr-open"),B&&O(),t2.dispatchEvent(new Event("close",{bubbles:!0})),C.focusInput&&t2.focus({preventScroll:!0}),L=c)}function Y(e2){var e3,t2=(e3=e2,r.fillStyle="#000",r.fillStyle=e3,e3=(e3=/^((rgba)|rgb)[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)[\D]*?([\d.]+|$)/i.exec(r.fillStyle))?{r:+e3[3],g:+e3[4],b:+e3[5],a:+e3[6]}:{r:(e3=r.fillStyle.replace("#","").match(/.{2}/g).map(function(e4){return parseInt(e4,16)}))[0],g:e3[1],b:e3[2],a:1});e2=function(e3){var t3=e3.r/255,a2=e3.g/255,l2=e3.b/255,r2=s.max(t3,a2,l2),o2=r2-(n2=s.min(t3,a2,l2)),c2=r2,i2=0,n2=0;return o2&&(r2===t3&&(i2=(a2-l2)/o2),r2===a2&&(i2=2+(l2-t3)/o2),r2===l2&&(i2=4+(t3-a2)/o2),r2&&(n2=o2/r2)),{h:(i2=s.floor(60*i2))<0?i2+360:i2,s:s.round(100*n2),v:s.round(100*c2),a:e3.a}}(t2);G(e2.s,e2.v),z(t2,e2),g.value=e2.h,f.style.color="hsl("+e2.h+", 100%, 50%)",l.style.left=e2.h/360*100+"%",i.style.left=A.width*e2.s/100+"px",i.style.top=A.height-A.height*e2.v/100+"px",w.value=100*e2.a,k.style.left=100*e2.a+"%"}function P(e2){return"rgb"===(e2=e2.substring(0,3).toLowerCase())||"hsl"===e2?e2:"hex"}function U(e2){e2=e2!==c?e2:y.value,L&&(L.value=e2,L.dispatchEvent(new Event("input",{bubbles:!0}))),C.onChange&&C.onChange.call(u,e2,L),p.dispatchEvent(new CustomEvent("coloris:pick",{detail:{color:e2,currentEl:L}}))}function X(e2,t2){var e3,t3,a2,l2,r2,n2,o2;e2={h:+g.value,s:e2/A.width*100,v:100-t2/A.height*100,a:w.value/100},t3=(e3=e2).s/100,a2=e3.v/100,l2=t3*a2,r2=e3.h/60,n2=l2*(1-s.abs(r2%2-1)),a2=[l2+=o2=a2-l2,n2+=o2,o2,o2,n2,l2][t3=s.floor(r2)%6],r2=[n2,l2,l2,n2,o2,o2][t3],t3=[o2,o2,n2,l2,l2,n2][t3],t2={r:s.round(255*a2),g:s.round(255*r2),b:s.round(255*t3),a:e3.a},G(e2.s,e2.v),z(t2,e2),U()}function G(e2,t2){var a2=C.a11y.marker;e2=+e2.toFixed(1),t2=+t2.toFixed(1),a2=(a2=a2.replace("{s}",e2)).replace("{v}",t2),i.setAttribute("aria-label",a2)}function K(e2){var a2=(t2={pageX:((a2=e2).changedTouches?a2.changedTouches[0]:a2).pageX,pageY:(a2.changedTouches?a2.changedTouches[0]:a2).pageY}).pageX-A.x,t2=t2.pageY-A.y;d&&(t2+=d.scrollTop),$2(a2,t2),e2.preventDefault(),e2.stopPropagation()}function $2(e2,t2){e2=e2<0?0:e2>A.width?A.width:e2,t2=t2<0?0:t2>A.height?A.height:t2,i.style.left=e2+"px",i.style.top=t2+"px",X(e2,t2),i.focus()}function z(e2,t2){void 0===t2&&(t2={});var a2,l2,r2=C.format;for(a2 in e2=void 0===e2?{}:e2)x[a2]=e2[a2];for(l2 in t2)x[l2]=t2[l2];var n2,e3,t3,a3,l3,r3,o2=(t3=(e3=x).r.toString(16),a3=e3.g.toString(16),l3=e3.b.toString(16),r3="",e3.r<16&&(t3="0"+t3),e3.g<16&&(a3="0"+a3),e3.b<16&&(l3="0"+l3),C.alpha&&(e3.a<1||C.forceAlpha)&&(r3=(e3=255*e3.a|0).toString(16),e3<16&&(r3="0"+r3)),"#"+t3+a3+l3+r3),c2=o2.substring(0,7);switch(i.style.color=c2,k.parentNode.style.color=c2,k.style.color=o2,b.style.color=o2,h.style.display="none",h.offsetHeight,h.style.display="",k.nextElementSibling.style.display="none",k.nextElementSibling.offsetHeight,k.nextElementSibling.style.display="","mixed"===r2?r2=1===x.a?"hex":"rgb":"auto"===r2&&(r2=E),r2){case"hex":y.value=o2;break;case"rgb":y.value=(n2=x,!C.alpha||1===n2.a&&!C.forceAlpha?"rgb("+n2.r+", "+n2.g+", "+n2.b+")":"rgba("+n2.r+", "+n2.g+", "+n2.b+", "+n2.a+")");break;case"hsl":y.value=(n2=function(e3){var t3,a3=e3.v/100,l3=a3*(1-e3.s/100/2);return 0<l3&&l3<1&&(t3=s.round((a3-l3)/s.min(l3,1-l3)*100)),{h:e3.h,s:t3||0,l:s.round(100*l3),a:e3.a}}(x),!C.alpha||1===n2.a&&!C.forceAlpha?"hsl("+n2.h+", "+n2.s+"%, "+n2.l+"%)":"hsla("+n2.h+", "+n2.s+"%, "+n2.l+"%, "+n2.a+")")}p.querySelector('.clr-format [value="'+r2+'"]').checked=!0}function e(){var e2=+g.value,t2=+i.style.left.replace("px",""),a2=+i.style.top.replace("px","");f.style.color="hsl("+e2+", 100%, 50%)",l.style.left=e2/360*100+"%",X(t2,a2)}function J(){var e2=w.value/100;k.style.left=100*e2+"%",z({a:e2}),U()}function Q(){return Array.from(f.querySelectorAll("input, button")).filter(function(e2){return!!e2.offsetWidth})}function V(e2){return p.getElementById(e2)}function Z(e2,t2,a2,l2){var r2=Element.prototype.matches||Element.prototype.msMatchesSelector;"string"==typeof a2?e2.addEventListener(t2,function(e3){r2.call(e3.target,a2)&&l2.call(e3.target,e3)}):(l2=a2,e2.addEventListener(t2,l2))}function _(e2,t2){t2=t2!==c?t2:[],"loading"!==p.readyState?e2.apply(void 0,t2):p.addEventListener("DOMContentLoaded",function(){e2.apply(void 0,t2)})}NodeList!==c&&NodeList.prototype&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),u.Coloris=function(){var r2={set:M,wrap:R,close:F,setInstance:H,removeInstance:N,updatePosition:j,ready:_};function e2(e3){_(function(){e3&&("string"==typeof e3?D:M)(e3)})}for(var t2 in r2)!function(l2){e2[l2]=function(){for(var e3=arguments.length,t3=new Array(e3),a2=0;a2<e3;a2++)t3[a2]=arguments[a2];_(r2[l2],t3)}}(t2);return e2}(),_(function(){d=c,(f=p.createElement("div")).setAttribute("id","clr-picker"),f.className="clr-picker",f.innerHTML='<input id="clr-color-value" name="clr-color-value" class="clr-color" type="text" value="" spellcheck="false" aria-label="'+C.a11y.input+'"><div id="clr-color-area" class="clr-gradient" role="application" aria-label="'+C.a11y.instruction+'"><div id="clr-color-marker" class="clr-marker" tabindex="0"></div></div><div class="clr-hue"><input id="clr-hue-slider" name="clr-hue-slider" type="range" min="0" max="360" step="1" aria-label="'+C.a11y.hueSlider+'"><div id="clr-hue-marker"></div></div><div class="clr-alpha"><input id="clr-alpha-slider" name="clr-alpha-slider" type="range" min="0" max="100" step="1" aria-label="'+C.a11y.alphaSlider+'"><div id="clr-alpha-marker"></div><span></span></div><div id="clr-format" class="clr-format"><fieldset class="clr-segmented"><legend>'+C.a11y.format+'</legend><input id="clr-f1" type="radio" name="clr-format" value="hex"><label for="clr-f1">Hex</label><input id="clr-f2" type="radio" name="clr-format" value="rgb"><label for="clr-f2">RGB</label><input id="clr-f3" type="radio" name="clr-format" value="hsl"><label for="clr-f3">HSL</label><span></span></fieldset></div><div id="clr-swatches" class="clr-swatches"></div><button type="button" id="clr-clear" class="clr-clear" aria-label="'+C.a11y.clear+'">'+C.clearLabel+'</button><div id="clr-color-preview" class="clr-preview"><button type="button" id="clr-close" class="clr-close" aria-label="'+C.a11y.close+'">'+C.closeLabel+'</button></div><span id="clr-open-label" hidden>'+C.a11y.open+'</span><span id="clr-swatch-label" hidden>'+C.a11y.swatch+"</span>",p.body.appendChild(f),h=V("clr-color-area"),i=V("clr-color-marker"),v=V("clr-clear"),m=V("clr-close"),b=V("clr-color-preview"),y=V("clr-color-value"),g=V("clr-hue-slider"),l=V("clr-hue-marker"),w=V("clr-alpha-slider"),k=V("clr-alpha-marker"),D(C.el),R(C.el),Z(f,"mousedown",function(e2){f.classList.remove("clr-keyboard-nav"),e2.stopPropagation()}),Z(h,"mousedown",function(e2){Z(p,"mousemove",K)}),Z(h,"contextmenu",function(e2){e2.preventDefault()}),Z(h,"touchstart",function(e2){p.addEventListener("touchmove",K,{passive:!1})}),Z(i,"mousedown",function(e2){Z(p,"mousemove",K)}),Z(i,"touchstart",function(e2){p.addEventListener("touchmove",K,{passive:!1})}),Z(y,"change",function(e2){var t2=y.value;(L||C.inline)&&U(""===t2?t2:Y(t2))}),Z(v,"click",function(e2){U(""),F()}),Z(m,"click",function(e2){U(),F()}),Z(V("clr-format"),"click",".clr-format input",function(e2){E=e2.target.value,z(),U()}),Z(f,"click",".clr-swatches button",function(e2){Y(e2.target.textContent),U(),C.swatchesOnly&&F()}),Z(p,"mouseup",function(e2){p.removeEventListener("mousemove",K)}),Z(p,"touchend",function(e2){p.removeEventListener("touchmove",K)}),Z(p,"mousedown",function(e2){n=!1,f.classList.remove("clr-keyboard-nav"),F()}),Z(p,"keydown",function(e2){var t2,a2=e2.key,l2=e2.target,r2=e2.shiftKey;"Escape"===a2?F(!0):["Tab","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(a2)&&(n=!0,f.classList.add("clr-keyboard-nav")),"Tab"===a2&&l2.matches(".clr-picker *")&&(a2=(t2=Q()).shift(),t2=t2.pop(),r2&&l2===a2?(t2.focus(),e2.preventDefault()):r2||l2!==t2||(a2.focus(),e2.preventDefault()))}),Z(p,"click",".clr-field button",function(e2){B&&O(),e2.target.nextElementSibling.dispatchEvent(new Event("click",{bubbles:!0}))}),Z(i,"keydown",function(e2){var t2={ArrowUp:[0,-1],ArrowDown:[0,1],ArrowLeft:[-1,0],ArrowRight:[1,0]};Object.keys(t2).includes(e2.key)&&(function(e3,t3){$2(+i.style.left.replace("px","")+e3,+i.style.top.replace("px","")+t3)}.apply(void 0,t2[e2.key]),e2.preventDefault())}),Z(h,"click",K),Z(g,"input",e),Z(w,"input",J)})}(window,document,Math),t=void 0,e=function(){"use strict";function C(e2,t2){var i2,a2=Object.keys(e2);return Object.getOwnPropertySymbols&&(i2=Object.getOwnPropertySymbols(e2),t2&&(i2=i2.filter(function(t3){return Object.getOwnPropertyDescriptor(e2,t3).enumerable})),a2.push.apply(a2,i2)),a2}function S(a2){for(var t2=1;t2<arguments.length;t2++){var n2=null!=arguments[t2]?arguments[t2]:{};t2%2?C(Object(n2),!0).forEach(function(t3){var e2,i2;e2=a2,i2=n2[t3],(t3=D(t3))in e2?Object.defineProperty(e2,t3,{value:i2,enumerable:!0,configurable:!0,writable:!0}):e2[t3]=i2}):Object.getOwnPropertyDescriptors?Object.defineProperties(a2,Object.getOwnPropertyDescriptors(n2)):C(Object(n2)).forEach(function(t3){Object.defineProperty(a2,t3,Object.getOwnPropertyDescriptor(n2,t3))})}return a2}function D(t2){return"symbol"==typeof(t2=function(t3){if("object"!=typeof t3||!t3)return t3;var i2=t3[Symbol.toPrimitive];if(void 0===i2)return String(t3);if("object"!=typeof(i2=i2.call(t3,"string")))return i2;throw new TypeError("@@toPrimitive must return a primitive value.")}(t2))?t2:t2+""}function j(t2){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t3){return typeof t3}:function(t3){return t3&&"function"==typeof Symbol&&t3.constructor===Symbol&&t3!==Symbol.prototype?"symbol":typeof t3})(t2)}function A(t2,e2){for(var i2=0;i2<e2.length;i2++){var a2=e2[i2];a2.enumerable=a2.enumerable||!1,a2.configurable=!0,"value"in a2&&(a2.writable=!0),Object.defineProperty(t2,D(a2.key),a2)}}function P(t2){return function(t3){if(Array.isArray(t3))return a(t3)}(t2)||function(t3){if("undefined"!=typeof Symbol&&null!=t3[Symbol.iterator]||null!=t3["@@iterator"])return Array.from(t3)}(t2)||function(t3){var i2;if(t3)return"string"==typeof t3?a(t3,void 0):"Map"===(i2="Object"===(i2=Object.prototype.toString.call(t3).slice(8,-1))&&t3.constructor?t3.constructor.name:i2)||"Set"===i2?Array.from(t3):"Arguments"===i2||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i2)?a(t3,void 0):void 0}(t2)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t2,e2){(null==e2||e2>t2.length)&&(e2=t2.length);for(var i2=0,a2=new Array(e2);i2<e2;i2++)a2[i2]=t2[i2];return a2}var h=(t="undefined"!=typeof window&&void 0!==window.document)?window:{},e=!(!t||!h.document.documentElement)&&"ontouchstart"in h.document.documentElement,i=t&&"PointerEvent"in h,c="cropper",I="all",U="crop",q="move",B="e",k="w",O="s",T="n",E="ne",W="nw",H="se",N="sw",Q="".concat(c,"-crop"),K="".concat(c,"-disabled"),L="".concat(c,"-hidden"),Z="".concat(c,"-hide"),G="".concat(c,"-invisible"),n="".concat(c,"-modal"),V="".concat(c,"-move"),d="".concat(c,"Action"),m="".concat(c,"Preview"),F="crop",J="move",_="none",tt="crop",et="cropend",it="cropmove",at="cropstart",nt="dblclick",ot=i?"pointerdown":e?"touchstart":"mousedown",ht=i?"pointermove":e?"touchmove":"mousemove",rt=i?"pointerup pointercancel":e?"touchend touchcancel":"mouseup",st="zoom",ct="image/jpeg",dt=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,lt=/^data:/,pt=/^data:image\/jpeg;base64,/,mt=/^img|canvas$/i,ut={viewMode:0,dragMode:F,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},gt=Number.isNaN||h.isNaN;function p(t2){return"number"==typeof t2&&!gt(t2)}function ft(t2){return 0<t2&&t2<1/0}function vt(t2){return void 0===t2}function o(t2){return"object"===j(t2)&&null!==t2}var wt=Object.prototype.hasOwnProperty;function u(t2){if(!o(t2))return!1;try{var e2=t2.constructor,i2=e2.prototype;return e2&&i2&&wt.call(i2,"isPrototypeOf")}catch(t3){return!1}}function l(t2){return"function"==typeof t2}var bt=Array.prototype.slice;function yt(t2){return Array.from?Array.from(t2):bt.call(t2)}function z(i2,a2){return i2&&l(a2)&&(Array.isArray(i2)||p(i2.length)?yt(i2).forEach(function(t2,e2){a2.call(i2,t2,e2,i2)}):o(i2)&&Object.keys(i2).forEach(function(t2){a2.call(i2,i2[t2],t2,i2)})),i2}var g=Object.assign||function(i2){for(var t2=arguments.length,e2=new Array(1<t2?t2-1:0),a2=1;a2<t2;a2++)e2[a2-1]=arguments[a2];return o(i2)&&0<e2.length&&e2.forEach(function(e3){o(e3)&&Object.keys(e3).forEach(function(t3){i2[t3]=e3[t3]})}),i2},xt=/\.\d*(?:0|9){12}\d*$/;function Y(t2,e2){return e2=1<arguments.length&&void 0!==e2?e2:1e11,xt.test(t2)?Math.round(t2*e2)/e2:t2}var Mt=/^width|height|left|top|marginLeft|marginTop$/;function f(t2,e2){var i2=t2.style;z(e2,function(t3,e3){Mt.test(e3)&&p(t3)&&(t3="".concat(t3,"px")),i2[e3]=t3})}function v(t2,e2){var i2;e2&&(p(t2.length)?z(t2,function(t3){v(t3,e2)}):t2.classList?t2.classList.add(e2):(i2=t2.className.trim())?i2.indexOf(e2)<0&&(t2.className="".concat(i2," ").concat(e2)):t2.className=e2)}function X(t2,e2){e2&&(p(t2.length)?z(t2,function(t3){X(t3,e2)}):t2.classList?t2.classList.remove(e2):0<=t2.className.indexOf(e2)&&(t2.className=t2.className.replace(e2,"")))}function r(t2,e2,i2){e2&&(p(t2.length)?z(t2,function(t3){r(t3,e2,i2)}):(i2?v:X)(t2,e2))}var Ct=/([a-z\d])([A-Z])/g;function Dt(t2){return t2.replace(Ct,"$1-$2").toLowerCase()}function Bt(t2,e2){return o(t2[e2])?t2[e2]:t2.dataset?t2.dataset[e2]:t2.getAttribute("data-".concat(Dt(e2)))}function w(t2,e2,i2){o(i2)?t2[e2]=i2:t2.dataset?t2.dataset[e2]=i2:t2.setAttribute("data-".concat(Dt(e2)),i2)}var kt,Ot,Tt=/\s\s*/,Et=(Ot=!1,t&&(kt=!1,i=function(){},e=Object.defineProperty({},"once",{get:function(){return Ot=!0,kt},set:function(t2){kt=t2}}),h.addEventListener("test",i,e),h.removeEventListener("test",i,e)),Ot);function s(i2,t2,a2,e2){var n2=3<arguments.length&&void 0!==e2?e2:{},o2=a2;t2.trim().split(Tt).forEach(function(t3){var e3;Et||(e3=i2.listeners)&&e3[t3]&&e3[t3][a2]&&(o2=e3[t3][a2],delete e3[t3][a2],0===Object.keys(e3[t3]).length&&delete e3[t3],0===Object.keys(e3).length)&&delete i2.listeners,i2.removeEventListener(t3,o2,n2)})}function b(o2,t2,h2,e2){var r2=3<arguments.length&&void 0!==e2?e2:{},s2=h2;t2.trim().split(Tt).forEach(function(a2){var t3,n2;r2.once&&!Et&&(t3=o2.listeners,s2=function(){delete n2[a2][h2],o2.removeEventListener(a2,s2,r2);for(var t4=arguments.length,e3=new Array(t4),i2=0;i2<t4;i2++)e3[i2]=arguments[i2];h2.apply(o2,e3)},(n2=void 0===t3?{}:t3)[a2]||(n2[a2]={}),n2[a2][h2]&&o2.removeEventListener(a2,n2[a2][h2],r2),n2[a2][h2]=s2,o2.listeners=n2),o2.addEventListener(a2,s2,r2)})}function y(t2,e2,i2){var a2;return l(Event)&&l(CustomEvent)?a2=new CustomEvent(e2,{detail:i2,bubbles:!0,cancelable:!0}):(a2=document.createEvent("CustomEvent")).initCustomEvent(e2,!0,!0,i2),t2.dispatchEvent(a2)}function Wt(t2){return{left:(t2=t2.getBoundingClientRect()).left+(window.pageXOffset-document.documentElement.clientLeft),top:t2.top+(window.pageYOffset-document.documentElement.clientTop)}}var Ht=h.location,Nt=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Lt(t2){return null!==(t2=t2.match(Nt))&&(t2[1]!==Ht.protocol||t2[2]!==Ht.hostname||t2[3]!==Ht.port)}function zt(t2){var e2="timestamp=".concat((new Date).getTime());return t2+(-1===t2.indexOf("?")?"?":"&")+e2}function x(t2){var e2=t2.rotate,i2=t2.scaleX,a2=t2.scaleY,n2=t2.translateX,o2=(t2=t2.translateY,[]);return{WebkitTransform:(p(n2)&&0!==n2&&o2.push("translateX(".concat(n2,"px)")),p(t2)&&0!==t2&&o2.push("translateY(".concat(t2,"px)")),p(e2)&&0!==e2&&o2.push("rotate(".concat(e2,"deg)")),p(i2)&&1!==i2&&o2.push("scaleX(".concat(i2,")")),p(a2)&&1!==a2&&o2.push("scaleY(".concat(a2,")")),n2=o2.length?o2.join(" "):"none"),msTransform:n2,transform:n2}}function M(t2,e2){var i2=t2.pageX,a2={endX:i2,endY:t2=t2.pageY};return e2?a2:S({startX:i2,startY:t2},a2)}function R(t2,e2){var i2,a2=t2.aspectRatio,n2=t2.height,o2=(t2=t2.width,e2=1<arguments.length&&void 0!==e2?e2:"contain",ft(t2)),h2=ft(n2);return o2&&h2?(i2=n2*a2,"contain"===e2&&t2<i2||"cover"===e2&&i2<t2?n2=t2/a2:t2=n2*a2):o2?n2=t2/a2:h2&&(t2=n2*a2),{width:t2,height:n2}}var Yt=String.fromCharCode,Xt=/^data:.*,/,t={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t2=this.element,e2=this.options,i2=this.container,a2=this.cropper,n2=Number(e2.minContainerWidth);e2=Number(e2.minContainerHeight),v(a2,L),X(t2,L),n2={width:Math.max(i2.offsetWidth,0<=n2?n2:200),height:Math.max(i2.offsetHeight,0<=e2?e2:100)},f(a2,{width:(this.containerData=n2).width,height:n2.height}),v(t2,L),X(a2,L)},initCanvas:function(){var a2,t2=this.containerData,e2=this.imageData,i2=this.options.viewMode,n2=(a2=Math.abs(e2.rotate)%180==90)?e2.naturalHeight:e2.naturalWidth,o2=(e2=n2/(a2=a2?e2.naturalWidth:e2.naturalHeight),t2.width),h2=t2.height;t2.height*e2>t2.width?3===i2?o2=t2.height*e2:h2=t2.width/e2:3===i2?h2=t2.width/e2:o2=t2.height*e2,e2={aspectRatio:e2,naturalWidth:n2,naturalHeight:a2,width:o2,height:h2},this.canvasData=e2,this.limited=1===i2||2===i2,this.limitCanvas(!0,!0),e2.width=Math.min(Math.max(e2.width,e2.minWidth),e2.maxWidth),e2.height=Math.min(Math.max(e2.height,e2.minHeight),e2.maxHeight),e2.left=(t2.width-e2.width)/2,e2.top=(t2.height-e2.height)/2,e2.oldLeft=e2.left,e2.oldTop=e2.top,this.initialCanvasData=g({},e2)},limitCanvas:function(t2,e2){var i2=this.options,a2=this.containerData,n2=this.canvasData,o2=this.cropBoxData,h2=i2.viewMode,r2=n2.aspectRatio,s2=this.cropped&&o2;t2&&(t2=Number(i2.minCanvasWidth)||0,i2=Number(i2.minCanvasHeight)||0,1<h2?(t2=Math.max(t2,a2.width),i2=Math.max(i2,a2.height),3===h2&&(t2<i2*r2?t2=i2*r2:i2=t2/r2)):0<h2&&(t2?t2=Math.max(t2,s2?o2.width:0):i2?i2=Math.max(i2,s2?o2.height:0):s2&&((t2=o2.width)<(i2=o2.height)*r2?t2=i2*r2:i2=t2/r2)),t2=(r2=R({aspectRatio:r2,width:t2,height:i2})).width,i2=r2.height,n2.minWidth=t2,n2.minHeight=i2,n2.maxWidth=1/0,n2.maxHeight=1/0),e2&&((s2?0:1)<h2?(r2=a2.width-n2.width,t2=a2.height-n2.height,n2.minLeft=Math.min(0,r2),n2.minTop=Math.min(0,t2),n2.maxLeft=Math.max(0,r2),n2.maxTop=Math.max(0,t2),s2&&this.limited&&(n2.minLeft=Math.min(o2.left,o2.left+(o2.width-n2.width)),n2.minTop=Math.min(o2.top,o2.top+(o2.height-n2.height)),n2.maxLeft=o2.left,n2.maxTop=o2.top,2===h2)&&(n2.width>=a2.width&&(n2.minLeft=Math.min(0,r2),n2.maxLeft=Math.max(0,r2)),n2.height>=a2.height)&&(n2.minTop=Math.min(0,t2),n2.maxTop=Math.max(0,t2))):(n2.minLeft=-n2.width,n2.minTop=-n2.height,n2.maxLeft=a2.width,n2.maxTop=a2.height))},renderCanvas:function(t2,e2){var i2,a2,n2,o2,h2=this.canvasData,r2=this.imageData;e2&&(r2=(e2={width:r2.naturalWidth*Math.abs(r2.scaleX||1),height:r2.naturalHeight*Math.abs(r2.scaleY||1),degree:r2.rotate||0}).width,o2=e2.height,e2=e2.degree,i2=90==(e2=Math.abs(e2)%180)?{width:o2,height:r2}:(a2=e2%90*Math.PI/180,i2=Math.sin(a2),n2=r2*(a2=Math.cos(a2))+o2*i2,r2=r2*i2+o2*a2,90<e2?{width:r2,height:n2}:{width:n2,height:r2}),a2=h2.width*((o2=i2.width)/h2.naturalWidth),n2=h2.height*((e2=i2.height)/h2.naturalHeight),h2.left-=(a2-h2.width)/2,h2.top-=(n2-h2.height)/2,h2.width=a2,h2.height=n2,h2.aspectRatio=o2/e2,h2.naturalWidth=o2,h2.naturalHeight=e2,this.limitCanvas(!0,!1)),(h2.width>h2.maxWidth||h2.width<h2.minWidth)&&(h2.left=h2.oldLeft),(h2.height>h2.maxHeight||h2.height<h2.minHeight)&&(h2.top=h2.oldTop),h2.width=Math.min(Math.max(h2.width,h2.minWidth),h2.maxWidth),h2.height=Math.min(Math.max(h2.height,h2.minHeight),h2.maxHeight),this.limitCanvas(!1,!0),h2.left=Math.min(Math.max(h2.left,h2.minLeft),h2.maxLeft),h2.top=Math.min(Math.max(h2.top,h2.minTop),h2.maxTop),h2.oldLeft=h2.left,h2.oldTop=h2.top,f(this.canvas,g({width:h2.width,height:h2.height},x({translateX:h2.left,translateY:h2.top}))),this.renderImage(t2),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t2){var e2=this.canvasData,i2=this.imageData,a2=i2.naturalWidth*(e2.width/e2.naturalWidth),n2=i2.naturalHeight*(e2.height/e2.naturalHeight);g(i2,{width:a2,height:n2,left:(e2.width-a2)/2,top:(e2.height-n2)/2}),f(this.image,g({width:i2.width,height:i2.height},x(g({translateX:i2.left,translateY:i2.top},i2)))),t2&&this.output()},initCropBox:function(){var t2=this.options,e2=this.canvasData,i2=t2.aspectRatio||t2.initialAspectRatio,a2=(t2=Number(t2.autoCropArea)||.8,{width:e2.width,height:e2.height});i2&&(e2.height*i2>e2.width?a2.height=a2.width/i2:a2.width=a2.height*i2),this.cropBoxData=a2,this.limitCropBox(!0,!0),a2.width=Math.min(Math.max(a2.width,a2.minWidth),a2.maxWidth),a2.height=Math.min(Math.max(a2.height,a2.minHeight),a2.maxHeight),a2.width=Math.max(a2.minWidth,a2.width*t2),a2.height=Math.max(a2.minHeight,a2.height*t2),a2.left=e2.left+(e2.width-a2.width)/2,a2.top=e2.top+(e2.height-a2.height)/2,a2.oldLeft=a2.left,a2.oldTop=a2.top,this.initialCropBoxData=g({},a2)},limitCropBox:function(t2,e2){var i2,a2,n2=this.options,o2=this.containerData,h2=this.canvasData,r2=this.cropBoxData,s2=this.limited,c2=n2.aspectRatio;t2&&(t2=Number(n2.minCropBoxWidth)||0,n2=Number(n2.minCropBoxHeight)||0,i2=s2?Math.min(o2.width,h2.width,h2.width+h2.left,o2.width-h2.left):o2.width,a2=s2?Math.min(o2.height,h2.height,h2.height+h2.top,o2.height-h2.top):o2.height,t2=Math.min(t2,o2.width),n2=Math.min(n2,o2.height),c2&&(t2&&n2?t2<n2*c2?n2=t2/c2:t2=n2*c2:t2?n2=t2/c2:n2&&(t2=n2*c2),i2<a2*c2?a2=i2/c2:i2=a2*c2),r2.minWidth=Math.min(t2,i2),r2.minHeight=Math.min(n2,a2),r2.maxWidth=i2,r2.maxHeight=a2),e2&&(s2?(r2.minLeft=Math.max(0,h2.left),r2.minTop=Math.max(0,h2.top),r2.maxLeft=Math.min(o2.width,h2.left+h2.width)-r2.width,r2.maxTop=Math.min(o2.height,h2.top+h2.height)-r2.height):(r2.minLeft=0,r2.minTop=0,r2.maxLeft=o2.width-r2.width,r2.maxTop=o2.height-r2.height))},renderCropBox:function(){var t2=this.options,e2=this.containerData,i2=this.cropBoxData;(i2.width>i2.maxWidth||i2.width<i2.minWidth)&&(i2.left=i2.oldLeft),(i2.height>i2.maxHeight||i2.height<i2.minHeight)&&(i2.top=i2.oldTop),i2.width=Math.min(Math.max(i2.width,i2.minWidth),i2.maxWidth),i2.height=Math.min(Math.max(i2.height,i2.minHeight),i2.maxHeight),this.limitCropBox(!1,!0),i2.left=Math.min(Math.max(i2.left,i2.minLeft),i2.maxLeft),i2.top=Math.min(Math.max(i2.top,i2.minTop),i2.maxTop),i2.oldLeft=i2.left,i2.oldTop=i2.top,t2.movable&&t2.cropBoxMovable&&w(this.face,d,i2.width>=e2.width&&i2.height>=e2.height?q:I),f(this.cropBox,g({width:i2.width,height:i2.height},x({translateX:i2.left,translateY:i2.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),y(this.element,tt,this.getData())}},St=(i={initPreview:function(){var t2=this.element,i2=this.crossOrigin,e2=this.options.preview,a2=i2?this.crossOriginUrl:this.url,n2=t2.alt||"The image to preview",o2=document.createElement("img");i2&&(o2.crossOrigin=i2),o2.src=a2,o2.alt=n2,this.viewBox.appendChild(o2),this.viewBoxImage=o2,e2&&("string"==typeof(o2=e2)?o2=t2.ownerDocument.querySelectorAll(e2):e2.querySelector&&(o2=[e2]),z(this.previews=o2,function(t3){var e3=document.createElement("img");w(t3,m,{width:t3.offsetWidth,height:t3.offsetHeight,html:t3.innerHTML}),i2&&(e3.crossOrigin=i2),e3.src=a2,e3.alt=n2,e3.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',t3.innerHTML="",t3.appendChild(e3)}))},resetPreview:function(){z(this.previews,function(e2){var i2;if(o((f(e2,{width:(i2=Bt(e2,m)).width,height:i2.height}),e2.innerHTML=i2.html,i2=e2)[e2=m]))try{delete i2[e2]}catch(t2){i2[e2]=void 0}else if(i2.dataset)try{delete i2.dataset[e2]}catch(t2){i2.dataset[e2]=void 0}else i2.removeAttribute("data-".concat(Dt(e2)))})},preview:function(){var h2=this.imageData,t2=this.canvasData,e2=this.cropBoxData,r2=e2.width,s2=e2.height,c2=h2.width,d2=h2.height,l2=e2.left-t2.left-h2.left,p2=e2.top-t2.top-h2.top;this.cropped&&!this.disabled&&(f(this.viewBoxImage,g({width:c2,height:d2},x(g({translateX:-l2,translateY:-p2},h2)))),z(this.previews,function(t3){var e3,i2=(e3=Bt(t3,m)).width,a2=i2,n2=e3=e3.height,o2=1;r2&&(n2=s2*(o2=i2/r2)),s2&&e3<n2&&(a2=r2*(o2=e3/s2),n2=e3),f(t3,{width:a2,height:n2}),f(t3.getElementsByTagName("img")[0],g({width:c2*o2,height:d2*o2},x(g({translateX:-l2*o2,translateY:-p2*o2},h2))))}))}},e={bind:function(){var t2=this.element,e2=this.options,i2=this.cropper;l(e2.cropstart)&&b(t2,at,e2.cropstart),l(e2.cropmove)&&b(t2,it,e2.cropmove),l(e2.cropend)&&b(t2,et,e2.cropend),l(e2.crop)&&b(t2,tt,e2.crop),l(e2.zoom)&&b(t2,st,e2.zoom),b(i2,ot,this.onCropStart=this.cropStart.bind(this)),e2.zoomable&&e2.zoomOnWheel&&b(i2,"wheel",this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e2.toggleDragModeOnDblclick&&b(i2,nt,this.onDblclick=this.dblclick.bind(this)),b(t2.ownerDocument,ht,this.onCropMove=this.cropMove.bind(this)),b(t2.ownerDocument,rt,this.onCropEnd=this.cropEnd.bind(this)),e2.responsive&&b(window,"resize",this.onResize=this.resize.bind(this))},unbind:function(){var t2=this.element,e2=this.options,i2=this.cropper;l(e2.cropstart)&&s(t2,at,e2.cropstart),l(e2.cropmove)&&s(t2,it,e2.cropmove),l(e2.cropend)&&s(t2,et,e2.cropend),l(e2.crop)&&s(t2,tt,e2.crop),l(e2.zoom)&&s(t2,st,e2.zoom),s(i2,ot,this.onCropStart),e2.zoomable&&e2.zoomOnWheel&&s(i2,"wheel",this.onWheel,{passive:!1,capture:!0}),e2.toggleDragModeOnDblclick&&s(i2,nt,this.onDblclick),s(t2.ownerDocument,ht,this.onCropMove),s(t2.ownerDocument,rt,this.onCropEnd),e2.responsive&&s(window,"resize",this.onResize)}},{resize:function(){var t2,e2,i2,a2,n2,o2,h2;this.disabled||(t2=this.options,a2=this.container,e2=this.containerData,i2=a2.offsetWidth/e2.width,a2=a2.offsetHeight/e2.height,1!=(n2=Math.abs(i2-1)>Math.abs(a2-1)?i2:a2)&&(t2.restore&&(o2=this.getCanvasData(),h2=this.getCropBoxData()),this.render(),t2.restore)&&(this.setCanvasData(z(o2,function(t3,e3){o2[e3]=t3*n2})),this.setCropBoxData(z(h2,function(t3,e3){h2[e3]=t3*n2}))))},dblclick:function(){var t2,e2;this.disabled||this.options.dragMode===_||this.setDragMode((t2=this.dragBox,e2=Q,(t2.classList?t2.classList.contains(e2):-1<t2.className.indexOf(e2))?J:F))},wheel:function(t2){var e2=this,i2=Number(this.options.wheelZoomRatio)||.1,a2=1;this.disabled||(t2.preventDefault(),this.wheeling)||(this.wheeling=!0,setTimeout(function(){e2.wheeling=!1},50),t2.deltaY?a2=0<t2.deltaY?1:-1:t2.wheelDelta?a2=-t2.wheelDelta/120:t2.detail&&(a2=0<t2.detail?1:-1),this.zoom(-a2*i2,t2))},cropStart:function(t2){var e2,i2=t2.buttons,a2=t2.button;this.disabled||("mousedown"===t2.type||"pointerdown"===t2.type&&"mouse"===t2.pointerType)&&(p(i2)&&1!==i2||p(a2)&&0!==a2||t2.ctrlKey)||(i2=this.options,e2=this.pointers,t2.changedTouches?z(t2.changedTouches,function(t3){e2[t3.identifier]=M(t3)}):e2[t2.pointerId||0]=M(t2),a2=1<Object.keys(e2).length&&i2.zoomable&&i2.zoomOnTouch?"zoom":Bt(t2.target,d),dt.test(a2)&&!1!==y(this.element,at,{originalEvent:t2,action:a2})&&(t2.preventDefault(),this.action=a2,this.cropping=!1,a2===U)&&(this.cropping=!0,v(this.dragBox,n)))},cropMove:function(t2){var e2,i2=this.action;!this.disabled&&i2&&(e2=this.pointers,t2.preventDefault(),!1!==y(this.element,it,{originalEvent:t2,action:i2}))&&(t2.changedTouches?z(t2.changedTouches,function(t3){g(e2[t3.identifier]||{},M(t3,!0))}):g(e2[t2.pointerId||0]||{},M(t2,!0)),this.change(t2))},cropEnd:function(t2){var e2,i2;this.disabled||(e2=this.action,i2=this.pointers,t2.changedTouches?z(t2.changedTouches,function(t3){delete i2[t3.identifier]}):delete i2[t2.pointerId||0],e2&&(t2.preventDefault(),Object.keys(i2).length||(this.action=""),this.cropping&&(this.cropping=!1,r(this.dragBox,n,this.cropped&&this.options.modal)),y(this.element,et,{originalEvent:t2,action:e2})))}}),jt={change:function(t2){function e2(t3){switch(t3){case B:f2+D2.x>y2&&(D2.x=y2-f2);break;case k:p2+D2.x<w2&&(D2.x=w2-p2);break;case T:m2+D2.y<b2&&(D2.y=b2-m2);break;case O:v2+D2.y>x2&&(D2.y=x2-v2)}}var i2,a2,o2,n2=this.options,h2=this.canvasData,r2=this.containerData,s2=this.cropBoxData,c2=this.pointers,d2=this.action,l2=n2.aspectRatio,p2=s2.left,m2=s2.top,u2=s2.width,g2=s2.height,f2=p2+u2,v2=m2+g2,w2=0,b2=0,y2=r2.width,x2=r2.height,M2=!0,C2=(!l2&&t2.shiftKey&&(l2=u2&&g2?u2/g2:1),this.limited&&(w2=s2.minLeft,b2=s2.minTop,y2=w2+Math.min(r2.width,h2.width,h2.left+h2.width),x2=b2+Math.min(r2.height,h2.height,h2.top+h2.height)),c2[Object.keys(c2)[0]]),D2={x:C2.endX-C2.startX,y:C2.endY-C2.startY};switch(d2){case I:p2+=D2.x,m2+=D2.y;break;case B:0<=D2.x&&(y2<=f2||l2&&(m2<=b2||x2<=v2))?M2=!1:(e2(B),(u2+=D2.x)<0&&(d2=k,p2-=u2=-u2),l2&&(m2+=(s2.height-(g2=u2/l2))/2));break;case T:D2.y<=0&&(m2<=b2||l2&&(p2<=w2||y2<=f2))?M2=!1:(e2(T),g2-=D2.y,m2+=D2.y,g2<0&&(d2=O,m2-=g2=-g2),l2&&(p2+=(s2.width-(u2=g2*l2))/2));break;case k:D2.x<=0&&(p2<=w2||l2&&(m2<=b2||x2<=v2))?M2=!1:(e2(k),u2-=D2.x,p2+=D2.x,u2<0&&(d2=B,p2-=u2=-u2),l2&&(m2+=(s2.height-(g2=u2/l2))/2));break;case O:0<=D2.y&&(x2<=v2||l2&&(p2<=w2||y2<=f2))?M2=!1:(e2(O),(g2+=D2.y)<0&&(d2=T,m2-=g2=-g2),l2&&(p2+=(s2.width-(u2=g2*l2))/2));break;case E:if(l2){if(D2.y<=0&&(m2<=b2||y2<=f2)){M2=!1;break}e2(T),g2-=D2.y,m2+=D2.y,u2=g2*l2}else e2(T),e2(B),!(0<=D2.x)||f2<y2?u2+=D2.x:D2.y<=0&&m2<=b2&&(M2=!1),(!(D2.y<=0)||b2<m2)&&(g2-=D2.y,m2+=D2.y);u2<0&&g2<0?(d2=N,m2-=g2=-g2,p2-=u2=-u2):u2<0?(d2=W,p2-=u2=-u2):g2<0&&(d2=H,m2-=g2=-g2);break;case W:if(l2){if(D2.y<=0&&(m2<=b2||p2<=w2)){M2=!1;break}e2(T),g2-=D2.y,m2+=D2.y,p2+=s2.width-(u2=g2*l2)}else e2(T),e2(k),!(D2.x<=0)||w2<p2?(u2-=D2.x,p2+=D2.x):D2.y<=0&&m2<=b2&&(M2=!1),(!(D2.y<=0)||b2<m2)&&(g2-=D2.y,m2+=D2.y);u2<0&&g2<0?(d2=H,m2-=g2=-g2,p2-=u2=-u2):u2<0?(d2=E,p2-=u2=-u2):g2<0&&(d2=N,m2-=g2=-g2);break;case N:if(l2){if(D2.x<=0&&(p2<=w2||x2<=v2)){M2=!1;break}e2(k),u2-=D2.x,p2+=D2.x,g2=u2/l2}else e2(O),e2(k),!(D2.x<=0)||w2<p2?(u2-=D2.x,p2+=D2.x):0<=D2.y&&x2<=v2&&(M2=!1),(!(0<=D2.y)||v2<x2)&&(g2+=D2.y);u2<0&&g2<0?(d2=E,m2-=g2=-g2,p2-=u2=-u2):u2<0?(d2=H,p2-=u2=-u2):g2<0&&(d2=W,m2-=g2=-g2);break;case H:if(l2){if(0<=D2.x&&(y2<=f2||x2<=v2)){M2=!1;break}e2(B),g2=(u2+=D2.x)/l2}else e2(O),e2(B),!(0<=D2.x)||f2<y2?u2+=D2.x:0<=D2.y&&x2<=v2&&(M2=!1),(!(0<=D2.y)||v2<x2)&&(g2+=D2.y);u2<0&&g2<0?(d2=W,m2-=g2=-g2,p2-=u2=-u2):u2<0?(d2=N,p2-=u2=-u2):g2<0&&(d2=E,m2-=g2=-g2);break;case q:this.move(D2.x,D2.y),M2=!1;break;case"zoom":this.zoom((a2=S({},i2=c2),o2=0,z(i2,function(n3,t3){delete a2[t3],z(a2,function(t4){var e3=Math.abs(n3.startX-t4.startX),i3=Math.abs(n3.startY-t4.startY),a3=Math.abs(n3.endX-t4.endX);t4=Math.abs(n3.endY-t4.endY),e3=Math.sqrt(e3*e3+i3*i3),i3=(Math.sqrt(a3*a3+t4*t4)-e3)/e3,Math.abs(i3)>Math.abs(o2)&&(o2=i3)})}),o2),t2),M2=!1;break;case U:D2.x&&D2.y?(i2=Wt(this.cropper),p2=C2.startX-i2.left,m2=C2.startY-i2.top,u2=s2.minWidth,g2=s2.minHeight,0<D2.x?d2=0<D2.y?H:E:D2.x<0&&(p2-=u2,d2=0<D2.y?N:W),D2.y<0&&(m2-=g2),this.cropped||(X(this.cropBox,L),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))):M2=!1}M2&&(s2.width=u2,s2.height=g2,s2.left=p2,s2.top=m2,this.action=d2,this.renderCropBox()),z(c2,function(t3){t3.startX=t3.endX,t3.startY=t3.endY})}},At={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&v(this.dragBox,n),X(this.cropBox,L),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=g({},this.initialImageData),this.canvasData=g({},this.initialCanvasData),this.cropBoxData=g({},this.initialCropBoxData),this.renderCanvas(),this.cropped)&&this.renderCropBox(),this},clear:function(){return this.cropped&&!this.disabled&&(g(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),X(this.dragBox,n),v(this.cropBox,L)),this},replace:function(e2){var t2=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&e2&&(this.isImg&&(this.element.src=e2),t2?(this.url=e2,this.image.src=e2,this.ready&&(this.viewBoxImage.src=e2,z(this.previews,function(t3){t3.getElementsByTagName("img")[0].src=e2}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(e2))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,X(this.cropper,K)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,v(this.cropper,K)),this},destroy:function(){var t2=this.element;return t2[c]&&(t2[c]=void 0,this.isImg&&this.replaced&&(t2.src=this.originalUrl),this.uncreate()),this},move:function(t2){var e2=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t2,a2=(i2=this.canvasData).left,i2=i2.top;return this.moveTo(vt(t2)?t2:a2+Number(t2),vt(e2)?e2:i2+Number(e2))},moveTo:function(t2){var e2=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t2,i2=this.canvasData,a2=!1;return t2=Number(t2),e2=Number(e2),this.ready&&!this.disabled&&this.options.movable&&(p(t2)&&(i2.left=t2,a2=!0),p(e2)&&(i2.top=e2,a2=!0),a2)&&this.renderCanvas(!0),this},zoom:function(t2,e2){var i2=this.canvasData;return t2=Number(t2),this.zoomTo(i2.width*(t2=t2<0?1/(1-t2):1+t2)/i2.naturalWidth,null,e2)},zoomTo:function(t2,e2,i2){var a2,n2,o2,h2=this.options,r2=this.canvasData,s2=r2.width,c2=r2.height,d2=r2.naturalWidth,l2=r2.naturalHeight;if(0<=(t2=Number(t2))&&this.ready&&!this.disabled&&h2.zoomable){if(h2=d2*t2,l2*=t2,!1===y(this.element,st,{ratio:t2,oldRatio:s2/d2,originalEvent:i2}))return this;i2?(t2=this.pointers,d2=Wt(this.cropper),t2=t2&&Object.keys(t2).length?(o2=n2=a2=0,z(t2,function(t3){var e3=t3.startX;t3=t3.startY,a2+=e3,n2+=t3,o2+=1}),{pageX:a2/=o2,pageY:n2/=o2}):{pageX:i2.pageX,pageY:i2.pageY},r2.left-=(h2-s2)*((t2.pageX-d2.left-r2.left)/s2),r2.top-=(l2-c2)*((t2.pageY-d2.top-r2.top)/c2)):u(e2)&&p(e2.x)&&p(e2.y)?(r2.left-=(h2-s2)*((e2.x-r2.left)/s2),r2.top-=(l2-c2)*((e2.y-r2.top)/c2)):(r2.left-=(h2-s2)/2,r2.top-=(l2-c2)/2),r2.width=h2,r2.height=l2,this.renderCanvas(!0)}return this},rotate:function(t2){return this.rotateTo((this.imageData.rotate||0)+Number(t2))},rotateTo:function(t2){return p(t2=Number(t2))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t2%360,this.renderCanvas(!0,!0)),this},scaleX:function(t2){var e2=this.imageData.scaleY;return this.scale(t2,p(e2)?e2:1)},scaleY:function(t2){var e2=this.imageData.scaleX;return this.scale(p(e2)?e2:1,t2)},scale:function(t2){var e2=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t2,i2=this.imageData,a2=!1;return t2=Number(t2),e2=Number(e2),this.ready&&!this.disabled&&this.options.scalable&&(p(t2)&&(i2.scaleX=t2,a2=!0),p(e2)&&(i2.scaleY=e2,a2=!0),a2)&&this.renderCanvas(!0,!0),this},getData:function(){var i2,a2,t2=0<arguments.length&&void 0!==arguments[0]&&arguments[0],e2=this.options,n2=this.imageData,o2=this.canvasData,h2=this.cropBoxData;return this.ready&&this.cropped?(i2={x:h2.left-o2.left,y:h2.top-o2.top,width:h2.width,height:h2.height},a2=n2.width/n2.naturalWidth,z(i2,function(t3,e3){i2[e3]=t3/a2}),t2&&(o2=Math.round(i2.y+i2.height),h2=Math.round(i2.x+i2.width),i2.x=Math.round(i2.x),i2.y=Math.round(i2.y),i2.width=h2-i2.x,i2.height=o2-i2.y)):i2={x:0,y:0,width:0,height:0},e2.rotatable&&(i2.rotate=n2.rotate||0),e2.scalable&&(i2.scaleX=n2.scaleX||1,i2.scaleY=n2.scaleY||1),i2},setData:function(t2){var e2,i2=this.options,a2=this.imageData,n2=this.canvasData,o2={};return this.ready&&!this.disabled&&u(t2)&&(e2=!1,i2.rotatable&&p(t2.rotate)&&t2.rotate!==a2.rotate&&(a2.rotate=t2.rotate,e2=!0),i2.scalable&&(p(t2.scaleX)&&t2.scaleX!==a2.scaleX&&(a2.scaleX=t2.scaleX,e2=!0),p(t2.scaleY))&&t2.scaleY!==a2.scaleY&&(a2.scaleY=t2.scaleY,e2=!0),e2&&this.renderCanvas(!0,!0),i2=a2.width/a2.naturalWidth,p(t2.x)&&(o2.left=t2.x*i2+n2.left),p(t2.y)&&(o2.top=t2.y*i2+n2.top),p(t2.width)&&(o2.width=t2.width*i2),p(t2.height)&&(o2.height=t2.height*i2),this.setCropBoxData(o2)),this},getContainerData:function(){return this.ready?g({},this.containerData):{}},getImageData:function(){return this.sized?g({},this.imageData):{}},getCanvasData:function(){var e2=this.canvasData,i2={};return this.ready&&z(["left","top","width","height","naturalWidth","naturalHeight"],function(t2){i2[t2]=e2[t2]}),i2},setCanvasData:function(t2){var e2=this.canvasData,i2=e2.aspectRatio;return this.ready&&!this.disabled&&u(t2)&&(p(t2.left)&&(e2.left=t2.left),p(t2.top)&&(e2.top=t2.top),p(t2.width)?(e2.width=t2.width,e2.height=t2.width/i2):p(t2.height)&&(e2.height=t2.height,e2.width=t2.height*i2),this.renderCanvas(!0)),this},getCropBoxData:function(){var t2,e2=this.cropBoxData;return(t2=this.ready&&this.cropped?{left:e2.left,top:e2.top,width:e2.width,height:e2.height}:t2)||{}},setCropBoxData:function(t2){var e2,i2,a2=this.cropBoxData,n2=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&u(t2)&&(p(t2.left)&&(a2.left=t2.left),p(t2.top)&&(a2.top=t2.top),p(t2.width)&&t2.width!==a2.width&&(e2=!0,a2.width=t2.width),p(t2.height)&&t2.height!==a2.height&&(i2=!0,a2.height=t2.height),n2&&(e2?a2.height=a2.width/n2:i2&&(a2.width=a2.height*n2)),this.renderCropBox()),this},getCroppedCanvas:function(){var t2,e2,i2,a2,n2,o2,h2,r2,s2,c2,d2,l2,p2,m2,u2,g2,f2,v2,w2,b2,y2,x2,M2,C2,D2,B2,k2,O2=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.ready&&window.HTMLCanvasElement?(B2=this.canvasData,u2=this.image,a2=B2,v2=O2,g2=(l2=this.imageData).aspectRatio,e2=l2.naturalWidth,n2=l2.naturalHeight,c2=void 0===(c2=l2.rotate)?0:c2,d2=void 0===(d2=l2.scaleX)?1:d2,l2=void 0===(l2=l2.scaleY)?1:l2,i2=a2.aspectRatio,r2=a2.naturalWidth,a2=a2.naturalHeight,h2=void 0===(h2=v2.fillColor)?"transparent":h2,p2=void 0===(p2=v2.imageSmoothingEnabled)||p2,m2=void 0===(m2=v2.imageSmoothingQuality)?"low":m2,o2=void 0===(o2=v2.maxWidth)?1/0:o2,k2=void 0===(k2=v2.maxHeight)?1/0:k2,t2=void 0===(t2=v2.minWidth)?0:t2,v2=void 0===(v2=v2.minHeight)?0:v2,f2=(w2=document.createElement("canvas")).getContext("2d"),s2=R({aspectRatio:i2,width:o2,height:k2}),i2=R({aspectRatio:i2,width:t2,height:v2},"cover"),r2=Math.min(s2.width,Math.max(i2.width,r2)),s2=Math.min(s2.height,Math.max(i2.height,a2)),i2=R({aspectRatio:g2,width:o2,height:k2}),a2=R({aspectRatio:g2,width:t2,height:v2},"cover"),g2=[-(o2=Math.min(i2.width,Math.max(a2.width,e2)))/2,-(k2=Math.min(i2.height,Math.max(a2.height,n2)))/2,o2,k2],w2.width=Y(r2),w2.height=Y(s2),f2.fillStyle=h2,f2.fillRect(0,0,r2,s2),f2.save(),f2.translate(r2/2,s2/2),f2.rotate(c2*Math.PI/180),f2.scale(d2,l2),f2.imageSmoothingEnabled=p2,f2.imageSmoothingQuality=m2,f2.drawImage.apply(f2,[u2].concat(P(g2.map(function(t3){return Math.floor(Y(t3))})))),f2.restore(),t2=w2,this.cropped?(e2=(v2=this.getData(O2.rounded)).x,i2=v2.y,a2=v2.width,n2=v2.height,1!=(o2=t2.width/Math.floor(B2.naturalWidth))&&(e2*=o2,i2*=o2,a2*=o2,n2*=o2),h2=R({aspectRatio:k2=a2/n2,width:O2.maxWidth||1/0,height:O2.maxHeight||1/0}),r2=R({aspectRatio:k2,width:O2.minWidth||0,height:O2.minHeight||0},"cover"),c2=(s2=R({aspectRatio:k2,width:O2.width||(1!=o2?t2.width:a2),height:O2.height||(1!=o2?t2.height:n2)})).width,d2=s2.height,c2=Math.min(h2.width,Math.max(r2.width,c2)),d2=Math.min(h2.height,Math.max(r2.height,d2)),p2=(l2=document.createElement("canvas")).getContext("2d"),l2.width=Y(c2),l2.height=Y(d2),p2.fillStyle=O2.fillColor||"transparent",p2.fillRect(0,0,c2,d2),m2=O2.imageSmoothingEnabled,u2=O2.imageSmoothingQuality,p2.imageSmoothingEnabled=void 0===m2||m2,u2&&(p2.imageSmoothingQuality=u2),g2=t2.width,f2=t2.height,w2=i2,(v2=e2)<=-a2||g2<v2?C2=x2=b2=v2=0:v2<=0?(x2=-v2,v2=0,C2=b2=Math.min(g2,a2+v2)):v2<=g2&&(x2=0,C2=b2=Math.min(a2,g2-v2)),b2<=0||w2<=-n2||f2<w2?D2=M2=y2=w2=0:w2<=0?(M2=-w2,w2=0,D2=y2=Math.min(f2,n2+w2)):w2<=f2&&(M2=0,D2=y2=Math.min(n2,f2-w2)),B2=[v2,w2,b2,y2],0<C2&&0<D2&&B2.push(x2*(k2=c2/a2),M2*k2,C2*k2,D2*k2),p2.drawImage.apply(p2,[t2].concat(P(B2.map(function(t3){return Math.floor(Y(t3))})))),l2):t2):null},setAspectRatio:function(t2){var e2=this.options;return this.disabled||vt(t2)||(e2.aspectRatio=Math.max(0,t2)||NaN,this.ready&&(this.initCropBox(),this.cropped)&&this.renderCropBox()),this},setDragMode:function(t2){var e2,i2,a2=this.options,n2=this.dragBox,o2=this.face;return this.ready&&!this.disabled&&(i2=a2.movable&&t2===J,a2.dragMode=t2=(e2=t2===F)||i2?t2:_,w(n2,d,t2),r(n2,Q,e2),r(n2,V,i2),a2.cropBoxMovable||(w(o2,d,t2),r(o2,Q,e2),r(o2,V,i2))),this}},Pt=h.Cropper,It=function(){function n2(t3){var e3=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!(this instanceof n2))throw new TypeError("Cannot call a class as a function");if(!t3||!mt.test(t3.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=t3,this.options=g({},ut,u(e3)&&e3),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return t2=n2,i2=[{key:"noConflict",value:function(){return window.Cropper=Pt,n2}},{key:"setDefaults",value:function(t3){g(ut,u(t3)&&t3)}}],(e2=[{key:"init",value:function(){var t3,e3=this.element,i3=e3.tagName.toLowerCase();if(!e3[c]){if(e3[c]=this,"img"===i3){if(this.isImg=!0,t3=e3.getAttribute("src")||"",!(this.originalUrl=t3))return;t3=e3.src}else"canvas"===i3&&window.HTMLCanvasElement&&(t3=e3.toDataURL());this.load(t3)}}},{key:"load",value:function(t3){var e3,i3,a2,n3,o2,h2,r2=this;t3&&(this.url=t3,this.imageData={},e3=this.element,(i3=this.options).rotatable||i3.scalable||(i3.checkOrientation=!1),i3.checkOrientation&&window.ArrayBuffer?lt.test(t3)?pt.test(t3)?this.read((h2=(h2=t3).replace(Xt,""),a2=atob(h2),h2=new ArrayBuffer(a2.length),z(n3=new Uint8Array(h2),function(t4,e4){n3[e4]=a2.charCodeAt(e4)}),h2)):this.clone():(o2=new XMLHttpRequest,h2=this.clone.bind(this),this.reloading=!0,(this.xhr=o2).onabort=h2,o2.onerror=h2,o2.ontimeout=h2,o2.onprogress=function(){o2.getResponseHeader("content-type")!==ct&&o2.abort()},o2.onload=function(){r2.read(o2.response)},o2.onloadend=function(){r2.reloading=!1,r2.xhr=null},i3.checkCrossOrigin&&Lt(t3)&&e3.crossOrigin&&(t3=zt(t3)),o2.open("GET",t3,!0),o2.responseType="arraybuffer",o2.withCredentials="use-credentials"===e3.crossOrigin,o2.send()):this.clone())}},{key:"read",value:function(t3){var e3=this.options,i3=this.imageData,a2=function Rt(t2){var e2,i2,a2,n2,o2,h2,r2,s2=new DataView(t2);try{if(255===s2.getUint8(0)&&216===s2.getUint8(1))for(var c2=s2.byteLength,d2=2;d2+1<c2;){if(255===s2.getUint8(d2)&&225===s2.getUint8(d2+1)){i2=d2;break}d2+=1}if(a2=i2&&(n2=i2+10,"Exif"===function(t3,e3,i3){var a3="";i3+=e3;for(var n3=e3;n3<i3;n3+=1)a3+=Yt(t3.getUint8(n3));return a3}(s2,i2+4,4))&&((r2=18761===(o2=s2.getUint16(n2)))||19789===o2)&&42===s2.getUint16(n2+2,r2)&&8<=(h2=s2.getUint32(n2+4,r2))?n2+h2:a2)for(var l2,p2=s2.getUint16(a2,r2),m2=0;m2<p2;m2+=1)if(l2=a2+12*m2+2,274===s2.getUint16(l2,r2)){l2+=8,e2=s2.getUint16(l2,r2),s2.setUint16(l2,1,r2);break}}catch(t3){e2=1}return e2}(t3),n3=0,o2=1,h2=1;1<a2&&(this.url=function(t4,e4){for(var i4=[],a3=new Uint8Array(t4);0<a3.length;)i4.push(Yt.apply(null,yt(a3.subarray(0,8192)))),a3=a3.subarray(8192);return"data:".concat(e4,";base64,").concat(btoa(i4.join("")))}(t3,ct),n3=(t3=function(t4){var e4=0,i4=1,a3=1;switch(t4){case 2:i4=-1;break;case 3:e4=-180;break;case 4:a3=-1;break;case 5:e4=90,a3=-1;break;case 6:e4=90;break;case 7:e4=90,i4=-1;break;case 8:e4=-90}return{rotate:e4,scaleX:i4,scaleY:a3}}(a2)).rotate,o2=t3.scaleX,h2=t3.scaleY),e3.rotatable&&(i3.rotate=n3),e3.scalable&&(i3.scaleX=o2,i3.scaleY=h2),this.clone()}},{key:"clone",value:function(){var t3=this.element,e3=this.url,i3=t3.crossOrigin,a2=e3,n3=(this.options.checkCrossOrigin&&Lt(e3)&&(i3=i3||"anonymous",a2=zt(e3)),this.crossOrigin=i3,this.crossOriginUrl=a2,document.createElement("img"));i3&&(n3.crossOrigin=i3),n3.src=a2||e3,n3.alt=t3.alt||"The image to crop",(this.image=n3).onload=this.start.bind(this),n3.onerror=this.stop.bind(this),v(n3,Z),t3.parentNode.insertBefore(n3,t3.nextSibling)}},{key:"start",value:function(){function t3(t4,e4){g(a2.imageData,{naturalWidth:t4,naturalHeight:e4,aspectRatio:t4/e4}),a2.initialImageData=g({},a2.imageData),a2.sizing=!1,a2.sized=!0,a2.build()}var e3,i3,a2=this,n3=this.image,o2=(n3.onload=null,n3.onerror=null,this.sizing=!0,h.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(h.navigator.userAgent));n3.naturalWidth&&!o2?t3(n3.naturalWidth,n3.naturalHeight):(e3=document.createElement("img"),i3=document.body||document.documentElement,(this.sizingImage=e3).onload=function(){t3(e3.width,e3.height),o2||i3.removeChild(e3)},e3.src=n3.src,o2||(e3.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",i3.appendChild(e3)))}},{key:"stop",value:function(){var t3=this.image;t3.onload=null,t3.onerror=null,t3.parentNode.removeChild(t3),this.image=null}},{key:"build",value:function(){var t3,e3,i3,a2,n3,o2,h2,r2,s2;this.sized&&!this.ready&&(t3=this.element,e3=this.options,i3=this.image,a2=t3.parentNode,(n3=document.createElement("div")).innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',o2=(n3=n3.querySelector(".".concat(c,"-container"))).querySelector(".".concat(c,"-canvas")),h2=n3.querySelector(".".concat(c,"-drag-box")),s2=(r2=n3.querySelector(".".concat(c,"-crop-box"))).querySelector(".".concat(c,"-face")),this.container=a2,this.cropper=n3,this.canvas=o2,this.dragBox=h2,this.cropBox=r2,this.viewBox=n3.querySelector(".".concat(c,"-view-box")),this.face=s2,o2.appendChild(i3),v(t3,L),a2.insertBefore(n3,t3.nextSibling),X(i3,Z),this.initPreview(),this.bind(),e3.initialAspectRatio=Math.max(0,e3.initialAspectRatio)||NaN,e3.aspectRatio=Math.max(0,e3.aspectRatio)||NaN,e3.viewMode=Math.max(0,Math.min(3,Math.round(e3.viewMode)))||0,v(r2,L),e3.guides||v(r2.getElementsByClassName("".concat(c,"-dashed")),L),e3.center||v(r2.getElementsByClassName("".concat(c,"-center")),L),e3.background&&v(n3,"".concat(c,"-bg")),e3.highlight||v(s2,G),e3.cropBoxMovable&&(v(s2,V),w(s2,d,I)),e3.cropBoxResizable||(v(r2.getElementsByClassName("".concat(c,"-line")),L),v(r2.getElementsByClassName("".concat(c,"-point")),L)),this.render(),this.ready=!0,this.setDragMode(e3.dragMode),e3.autoCrop&&this.crop(),this.setData(e3.data),l(e3.ready)&&b(t3,"ready",e3.ready,{once:!0}),y(t3,"ready"))}},{key:"unbuild",value:function(){var t3;this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),(t3=this.cropper.parentNode)&&t3.removeChild(this.cropper),X(this.element,L))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}])&&A(t2.prototype,e2),i2&&A(t2,i2),Object.defineProperty(t2,"prototype",{writable:!1}),t2;var t2,e2,i2}();return g(It.prototype,t,i,e,St,jt,At),It},"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Cropper=e(),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).window=e.window||{})}(void 0,function(e){"use strict";let t,n,o,i,a=e10=>"object"==typeof e10&&null!==e10&&e10.constructor===Object&&"[object Object]"===Object.prototype.toString.call(e10),l=e10=>"string"==typeof e10,r=e10=>e10&&null!==e10&&e10 instanceof Element&&"nodeType"in e10,s=function(e10){var t2=(new DOMParser).parseFromString(e10,"text/html").body;if(t2.childElementCount>1){for(var n2=document.createElement("div");t2.firstChild;)n2.appendChild(t2.firstChild);return n2}let o2=t2.firstChild;return!o2||o2 instanceof HTMLElement?o2:((n2=document.createElement("div")).appendChild(o2),n2)},u=function(e10,t2){return!e10||e10===document.body||t2&&e10===t2?null:function(e10){if(!(e10&&e10 instanceof Element&&e10.offsetParent))return!1;let t2=e10.scrollHeight>e10.clientHeight,n2=window.getComputedStyle(e10).overflowY,o2=-1!==n2.indexOf("hidden"),i2=-1!==n2.indexOf("visible");return t2&&!o2&&!i2}(e10)?e10:u(e10.parentElement,t2)},d=(e10=!0,t2="--f-scrollbar-compensate",n2="--f-body-margin",o2="hide-scrollbar")=>{let i2=document,a2=i2.body,l2=i2.documentElement;if(e10){if(a2.classList.contains(o2))return;let e11=window.innerWidth-l2.getBoundingClientRect().width;e11<0&&(e11=0),l2.style.setProperty(t2,`${e11}px`);let i3=parseFloat(window.getComputedStyle(a2).marginRight);i3&&a2.style.setProperty(n2,`${i3}px`),a2.classList.add(o2)}else a2.classList.remove(o2),a2.style.setProperty(n2,""),i2.documentElement.style.setProperty(t2,"")},f=(e10,...t2)=>{let n2=t2.length;for(let o2=0;o2<n2;o2++)Object.entries(t2[o2]||{}).forEach(([t3,n3])=>{let o3=Array.isArray(n3)?[]:{};e10[t3]||Object.assign(e10,{[t3]:o3}),a(n3)?Object.assign(e10[t3],f(o3,n3)):Array.isArray(n3)?Object.assign(e10,{[t3]:[...n3]}):Object.assign(e10,{[t3]:n3})});return e10};function g(){return!("undefined"==typeof window||!window.document||!window.document.createElement)}let m=function(e10=0,t2=0,n2=0){return Math.max(Math.min(t2,n2),e10)},p=function(e10=0,t2=0,n2=0,o2=0,i2=0,a2=!1){let l2=(e10-t2)/(n2-t2)*(i2-o2)+o2;return a2?o2<i2?m(o2,l2,i2):m(i2,l2,o2):l2},h=(e10,t2="")=>{e10&&e10.classList&&t2.split(" ").forEach(t3=>{t3&&e10.classList.add(t3)})};function v(e10){return a(e10)||Array.isArray(e10)}function y(e10,t2){let n2=Object.keys(e10),o2=Object.keys(t2);return n2.length===o2.length&&n2.every(n3=>{let o3=e10[n3],i2=t2[n3];return"function"==typeof o3?`${o3}`==`${i2}`:v(o3)&&v(i2)?y(o3,i2):o3===i2})}let E=function(e10){for(let t2 of I)t2.getState()===w.Running&&t2.tick(F?e10-F:0);F=e10,$2=window.requestAnimationFrame(E)},w=((x={})[x.Initializing=0]="Initializing",x[x.Running=1]="Running",x[x.Paused=2]="Paused",x[x.Completed=3]="Completed",x[x.Destroyed=4]="Destroyed",x);var x,M,L,S,T,R,P,C,A,O,z=((M=z||{})[M.Spring=0]="Spring",M[M.Ease=1]="Ease",M);let k=((L={})[L.Loop=0]="Loop",L[L.Reverse=1]="Reverse",L),I=new Set,$2=null,F=0;function _(){let e10=w.Initializing,t2=z.Ease,n2=0,o2=0,i2=_.Easings.Linear,a2=500,l2=0,r2=0,s2=0,c2=0,u2=1/0,d2=.01,f2=.01,g2=!1,p2={},h2=null,v2={},x2={},M2={},L2=0,S2=0,T2=k.Loop,R2=_.Easings.Linear,P2=new Map;function C2(e11,...t3){for(let n3 of P2.get(e11)||[])n3(...t3)}function A2(e11){return o2=0,e11?h2=setTimeout(()=>{O2()},e11):O2(),D2}function O2(){e10=w.Running,C2("start",v2,x2)}function F2(){if(e10=w.Completed,M2={},C2("end",v2),e10===w.Completed)if(n2<L2){if(n2++,T2===k.Reverse){let e11={...p2};p2={...x2},x2=e11}A2(S2)}else n2=0;return D2}let D2={getState:function(){return e10},easing:function(e11){return i2=e11,t2=z.Ease,M2={},D2},duration:function(e11){return a2=e11,D2},spring:function(e11={}){t2=z.Spring;let{velocity:n3,mass:o3,tension:i3,friction:a3,restDelta:m2,restSpeed:p3,maxSpeed:h3,clamp:v3}={velocity:0,mass:1,tension:170,friction:26,restDelta:.1,restSpeed:.1,maxSpeed:1/0,clamp:!0,...e11};return l2=n3,r2=o3,s2=i3,c2=a3,f2=m2,d2=p3,u2=h3,g2=v3,M2={},D2},isRunning:function(){return e10===w.Running},isSpring:function(){return t2===z.Spring},from:function(e11){return v2={...e11},D2},to:function(e11){return x2=e11,D2},repeat:function(e11,t3=0,n3=k.Loop,o3){return L2=e11,S2=t3,T2=n3,R2=o3||i2,D2},on:function(e11,t3){return P2.set(e11,[...P2.get(e11)||[],t3]),D2},off:function(e11,t3){return P2.has(e11)&&P2.set(e11,P2.get(e11).filter(e12=>e12!==t3)),D2},start:function(t3){return e10=w.Initializing,y(p2={...v2},x2)||(I.add(this),$2||($2=window.requestAnimationFrame(E)),A2(t3)),D2},pause:function(){return h2&&(clearTimeout(h2),h2=null),e10===w.Running&&(e10=w.Paused,C2("pause",v2)),D2},end:F2,tick:function(n3){n3>50&&(n3=50),o2+=n3;let h3=0,E2=!1;if(e10!==w.Running)return D2;if(t2===z.Ease){E2=1===(h3=m(0,o2/a2,1));let e11=T2===k.Reverse?R2:i2;for(let t3 in v2)v2[t3]=p2[t3]+(x2[t3]-p2[t3])*e11(h3)}if(t2===z.Spring){let e11=.001*n3,t3=0;for(let n4 in v2){let o3=x2[n4],i3=v2[n4];if("number"!=typeof o3||isNaN(o3)||"number"!=typeof i3||isNaN(i3))continue;if(Math.abs(o3-i3)<=f2){v2[n4]=o3,M2[n4]=0;continue}M2[n4]||("object"==typeof l2&&"number"==typeof l2[n4]?M2[n4]=l2[n4]:M2[n4]="number"==typeof l2?l2:0);let a3=M2[n4],p3=(a3=m(-1*Math.abs(u2),a3,Math.abs(u2)))*r2*c2;a3+=((i3>o3?-1:1)*(Math.abs(o3-i3)*s2)-p3)/r2*e11,i3+=a3*e11;let y2=v2[n4]>o3?i3<o3:i3>o3,b2=Math.abs(a3)<d2&&Math.abs(o3-i3)<=f2;g2&&y2&&(b2=!0),b2?(i3=o3,a3=0):t3++,v2[n4]=i3,M2[n4]=a3}E2=!t3}let L3={...x2};return C2("step",v2,p2,x2,h3),E2&&e10===w.Running&&y(x2,L3)&&(e10=w.Completed,F2()),D2},getStartValues:function(){return p2},getCurrentValues:function(){return v2},getCurrentVelocities:function(){return M2},getEndValues:function(){return x2},destroy:function(){e10=w.Destroyed,h2&&(clearTimeout(h2),h2=null),p2=v2=x2={},I.delete(this)}};return D2}function D(e10){let t2=[];for(let n2 of"undefined"!=typeof TouchEvent&&e10 instanceof TouchEvent?e10.touches:e10 instanceof MouseEvent&&"mouseup"!==e10.type?[e10]:[])t2.push({x:n2.clientX,y:n2.clientY,ts:Date.now()});return t2}function H(e10){let t2=[];for(let n2 of"undefined"!=typeof TouchEvent&&e10 instanceof TouchEvent?e10.changedTouches:e10 instanceof MouseEvent?[e10]:[])t2.push({x:n2.clientX,y:n2.clientY,ts:Date.now()});return t2}function j(e10){let t2=e10[0],n2=e10[1]||t2;return{x:(t2.x+n2.x)/2,y:(t2.y+n2.y)/2,ts:n2.ts}}function N(e10){let t2=e10[0],n2=e10[1]||e10[0];return t2&&n2?-1*Math.sqrt((n2.x-t2.x)*(n2.x-t2.x)+(n2.y-t2.y)*(n2.y-t2.y)):0}_.destroy=()=>{for(let e10 of I)e10.destroy();$2&&(cancelAnimationFrame($2),$2=null)},_.Easings={Linear:function(e10){return e10},EaseIn:function(e10){return 0===e10?0:Math.pow(2,10*e10-10)},EaseOut:function(e10){return 1===e10?1:1-Math.pow(2,-10*e10)},EaseInOut:function(e10){return 0===e10?0:1===e10?1:e10<.5?Math.pow(2,20*e10-10)/2:(2-Math.pow(2,-20*e10+10))/2}};let V=e10=>{e10.cancelable&&e10.preventDefault()},q={passive:!1},B={panThreshold:5,swipeThreshold:3,ignore:["textarea","input","select","[contenteditable]","[data-selectable]","[data-draggable]"]},W=!1,Z=!0,G=(e10,t2)=>{let n2,o2,i2,a2={...B,...t2},l2=[],r2=[],s2=[],c2=!1,u2=!1,d2=!1,f2=0,g2=0,m2=0,p2=0,h2=0,v2=0,y2=0,b2=0,E2=0,w2=[],x2=0,M2=0,L2=new Map;function S2(e11){let t3=N(r2),a3=N(s2),d3=Math.abs(y2)>Math.abs(b2)?y2:b2,f3={srcEvent:i2,isPanRecognized:c2,isSwipeRecognized:u2,firstTouch:l2,previousTouch:s2,currentTouch:r2,deltaX:m2,deltaY:p2,offsetX:h2,offsetY:v2,velocityX:y2,velocityY:b2,velocity:d3,angle:E2,axis:o2,scale:t3&&a3?t3/a3:0,center:n2};for(let t4 of L2.get(e11)||[])t4(f3)}function T2(e11){let t3=Date.now();w2=w2.filter(e12=>!e12.ts||e12.ts>t3-100),e11&&w2.push(e11)}function R2(){if(y2=0,b2=0,w2.length>3){let e11=w2[0],t3=w2[w2.length-1];if(e11&&t3){let n3=t3.x-e11.x,o3=t3.y-e11.y,i3=e11.ts&&t3.ts?t3.ts-e11.ts:0;i3>0&&(y2=Math.abs(n3)>3?n3/(i3/30):0,b2=Math.abs(o3)>3?o3/(i3/30):0)}}}function P2(e11){if(e11 instanceof MouseEvent){if(W)return}else W=!0;let t3=e11.composedPath()[0],o3=a2.ignore.join(",");if(t3.matches(o3)||t3.closest(o3)||"undefined"!=typeof MouseEvent&&e11 instanceof MouseEvent&&(!e11.buttons||0!==e11.button))return;e11 instanceof MouseEvent&&V(e11);let m3=Date.now(),p3=m3-(f2||m3);d2=p3>0&&p3<=250,f2=m3,clearTimeout(x2),i2=e11,e11 instanceof MouseEvent&&(window.addEventListener("mousemove",C2),window.addEventListener("mouseup",A2)),window.addEventListener("blur",O2),l2=[...r2=D(e11)],s2=[],g2=r2.length,n2=j(r2),1===g2&&(c2=!1,u2=!1),g2&&T2(j(r2)),S2("start")}function C2(e11){if(!l2.length||e11.defaultPrevented)return;i2=e11,s2=[...r2],g2=(r2=D(e11)).length;let t3=n2=j(r2),u3=j(s2);if(m2=t3.x-u3.x,p2=t3.y-u3.y,T2(t3),R2(),S2("move"),r2.length>1&&Math.abs(N(r2)-N(s2))>=.1&&S2("pinch"),!c2&&l2.length){let e12=j(l2);h2=t3.x-e12.x,v2=t3.y-e12.y,(c2=Math.abs(h2)>a2.panThreshold||Math.abs(v2)>a2.panThreshold)&&(Z=!1,clearTimeout(M2),M2=0,o2=(E2=Math.abs(180*Math.atan2(v2,h2)/Math.PI))>45&&E2<135?"y":"x",l2=[...r2],s2=[...r2],window.getSelection()?.removeAllRanges(),S2("panstart"))}c2&&(m2||p2)&&S2("pan")}function A2(e11){if(i2=e11,!l2.length)return;let t3=D(e11),o3=H(e11);if(g2=t3.length,n2=j(o3),o3.length&&T2(j(o3)),R2(),s2=[...r2],r2=[...t3],l2=[...t3],t3.length>0)S2("end"),c2=!1,u2=!1,w2=[];else{let e12=a2.swipeThreshold;(Math.abs(y2)>e12||Math.abs(b2)>e12)&&(u2=!0),c2&&S2("panend"),u2&&S2("swipe"),c2||u2||(S2("tap"),d2?S2("doubleTap"):x2=setTimeout(function(){S2("singleTap")},250)),S2("end"),z2()}}function O2(){clearTimeout(x2),z2(),c2&&S2("panend"),S2("end")}function z2(){c2=!1,u2=!1,d2=!1,g2=0,w2=[],r2=[],s2=[],l2=[],m2=0,p2=0,h2=0,v2=0,y2=0,b2=0,E2=0,o2=void 0,window.removeEventListener("mousemove",C2),window.removeEventListener("mouseup",A2),window.removeEventListener("blur",O2),Z||M2||(M2=setTimeout(()=>{Z=!0,M2=0},100))}function k2(e11){let t3=e11.target;W=!1,t3&&!e11.defaultPrevented&&(Z||(V(e11),e11.stopPropagation()))}let I2={init:function(){if(e10)return e10.addEventListener("click",k2,q),e10.addEventListener("mousedown",P2,q),e10.addEventListener("touchstart",P2,q),e10.addEventListener("touchmove",C2,q),e10.addEventListener("touchend",A2),e10.addEventListener("touchcancel",A2),I2},on:function(e11,t3){return L2.set(e11,[...L2.get(e11)||[],t3]),I2},off:function(e11,t3){return L2.has(e11)&&L2.set(e11,L2.get(e11).filter(e12=>e12!==t3)),I2},isPointerDown:()=>g2>0,destroy:function(){clearTimeout(x2),clearTimeout(M2),M2=0,e10&&(e10.removeEventListener("click",k2,q),e10.removeEventListener("mousedown",P2,q),e10.removeEventListener("touchstart",P2,q),e10.removeEventListener("touchmove",C2,q),e10.removeEventListener("touchend",A2),e10.removeEventListener("touchcancel",A2)),e10=null,z2()}};return I2};G.isClickAllowed=()=>Z;let Y={IMAGE_ERROR:"This image couldn't be loaded. <br /> Please try again later.",MOVE_UP:"Move up",MOVE_DOWN:"Move down",MOVE_LEFT:"Move left",MOVE_RIGHT:"Move right",ZOOM_IN:"Zoom in",ZOOM_OUT:"Zoom out",TOGGLE_FULL:"Toggle zoom level",TOGGLE_1TO1:"Toggle zoom level",ITERATE_ZOOM:"Toggle zoom level",ROTATE_CCW:"Rotate counterclockwise",ROTATE_CW:"Rotate clockwise",FLIP_X:"Flip horizontally",FLIP_Y:"Flip vertically",RESET:"Reset"},X=1e4,U=e10=>{e10.cancelable&&e10.preventDefault()},K=(e10,t2=X)=>Math.round(((e10=parseFloat(e10+"")||0)+Number.EPSILON)*t2)/t2,J=((S={}).Reset="reset",S.Zoom="zoom",S.ZoomIn="zoomIn",S.ZoomOut="zoomOut",S.ZoomTo="zoomTo",S.ToggleCover="toggleCover",S.ToggleFull="toggleFull",S.ToggleMax="toggleMax",S.IterateZoom="iterateZoom",S.Pan="pan",S.Swipe="swipe",S.Move="move",S.MoveLeft="moveLeft",S.MoveRight="moveRight",S.MoveUp="moveUp",S.MoveDown="moveDown",S.RotateCCW="rotateCCW",S.RotateCW="rotateCW",S.FlipX="flipX",S.FlipY="flipY",S),Q=((T={}).Cover="cover",T.Full="full",T.Max="max",T),ee={x:0,y:0,scale:1,angle:0,flipX:1,flipY:1},et=((R={})[R.Init=0]="Init",R[R.Loading=1]="Loading",R[R.Error=2]="Error",R[R.Ready=3]="Ready",R[R.Destroyed=4]="Destroyed",R),en={bounds:!0,classes:{container:"f-panzoom",wrapper:"f-panzoom__wrapper",content:"f-panzoom__content",viewport:"f-panzoom__viewport"},clickAction:J.ToggleFull,dblClickAction:!1,gestures:{},height:"auto",l10n:Y,maxScale:4,minScale:1,mouseMoveFactor:1,panMode:"drag",protected:!1,singleClickAction:!1,spinnerTpl:'<div class="f-spinner"></div>',wheelAction:J.Zoom,width:"auto"},eo=0,ei=0,ea=0,el=(e10,n2={},o2={})=>{let i2,a2,c2,d2,f2,g2,p2,v2=et.Init,y2={...en,...n2},b2={},E2={...ee},w2={...ee},x2=[];function M2(e11){let t2=y2[e11];return t2&&"function"==typeof t2?t2(em2):t2}let L2=new Map;function S2(e11,...t2){let n3=L2.get(e11)||[];for(let o3 of(y2.on&&n3.push(y2.on[e11]),n3))o3&&o3 instanceof Function&&o3(em2,...t2);"*"!==e11&&S2("*",e11,...t2)}function T2(e11){if(v2!==et.Ready||u(e11.target))return;let t2=Date.now(),n3=m(-1,[-e11.deltaX||0,-e11.deltaY||0,-e11.detail||0].reduce(function(e12,t3){return Math.abs(t3)>Math.abs(e12)?t3:e12}),1);S2("wheel",e11,n3);let o3=M2("wheelAction");if(!o3||e11.defaultPrevented)return;let i3=w2.scale,a3=i3*(n3>0?1.5:.5);if(o3===J.Zoom){let o4=100>Math.abs(e11.deltaY)&&100>Math.abs(e11.deltaX);if(t2-ei<(o4?200:45))return void U(e11);ei=t2;let l2=$3(),r2=V2();if(K(a3)<K(l2)&&K(i3)<=K(l2)?(ea+=Math.abs(n3),a3=l2):K(a3)>K(r2)&&K(i3)>=K(r2)?(ea+=Math.abs(n3),a3=r2):(ea=0,a3=m(l2,a3,r2)),ea>7)return}switch(U(e11),o3){case J.Pan:Z2(o3,{srcEvent:e11,deltaX:-2*e11.deltaX,deltaY:-2*e11.deltaY});break;case J.Zoom:Z2(J.ZoomTo,{srcEvent:e11,scale:a3,center:{x:e11.clientX,y:e11.clientY}});break;default:Z2(o3,{srcEvent:e11})}}function R2(n3){let o3=n3.composedPath()[0];if(!G.isClickAllowed()||!r(o3)||n3.defaultPrevented||!e10?.contains(o3)||o3.hasAttribute("disabled")||o3.hasAttribute("aria-disabled"))return;let a3=o3.closest("[data-panzoom-action]"),l2=a3?.dataset?.panzoomAction,s2=a3?.dataset?.panzoomValue||"";if(l2){switch(l2){case J.ZoomTo:case J.ZoomIn:case J.ZoomOut:Z2(l2,{scale:parseFloat(s2||"")||void 0});break;case J.MoveLeft:case J.MoveRight:Z2(l2,{deltaX:parseFloat(s2||"")||void 0});break;case J.MoveUp:case J.MoveDown:Z2(l2,{deltaY:parseFloat(s2||"")||void 0});break;default:Z2(l2)}return}if(!i2?.contains(o3))return;let c3={srcEvent:n3};if(Z2(M2("clickAction"),c3),M2("dblClickAction")){let e11=Date.now(),n4=e11-(eo||e11);eo=e11,n4>0&&n4<=250?(t&&(clearTimeout(t),t=void 0),Z2(M2("dblClickAction"),c3)):t=setTimeout(()=>{Z2(M2("singleClickAction"),c3)},250)}}function P2(e11){if(p2=e11,!z2()||v2!==et.Ready||E2.scale<=1||w2.scale<=1||(i2?.dataset.animationName||"").indexOf("zoom")>-1)return;let t2=k2(w2.scale);if(!t2)return;let{x:n3,y:o3}=t2;Z2(J.Pan,{deltaX:n3-w2.x,deltaY:o3-w2.y})}function C2(){if(e10&&(e10.querySelector(".f-spinner")?.remove(),e10.classList.remove("is-loading")),!e10||!i2)return;if(a2 instanceof HTMLImageElement&&(!a2.complete||!a2.naturalWidth))return v2=et.Error,i2?.classList.add("has-error"),void S2("error");S2("loaded");let{width:t2,height:n3}=O2();a2&&(a2.setAttribute("width",t2+""),a2.setAttribute("height",n3+"")),i2&&(i2.classList.remove("has-error"),i2.setAttribute("width",t2+""),i2.setAttribute("height",n3+""),i2.style.aspectRatio=`${t2/n3||""}`),f2=_().on("start",(e11,t3)=>{w2={...ee,...t3},void 0!==t3.angle&&(t3.angle=90*Math.round(t3.angle/90)),void 0!==t3.flipX&&(t3.flipX=t3.flipX>0?1:-1),void 0!==t3.flipY&&(t3.flipY=t3.flipY>0?1:-1),W2(),S2("animationStart")}).on("pause",e11=>{w2={...ee,...e11}}).on("step",t3=>{if(v2!==et.Ready||!f2)return;if(!e10||!e10.parentElement)return void f2.end();if(E2={...ee,...t3},z2()||!M2("bounds")||d2?.isPointerDown()||w2.scale>E2.scale||w2.scale<F2())return void Y2();let n4=q2(w2.scale),o4=!1,i3=!1,a3=!1,l2=!1;E2.x<n4.x[0]&&(o4=!0),E2.x>n4.x[1]&&(i3=!0),E2.y<n4.y[0]&&(l2=!0),E2.y>n4.y[1]&&(a3=!0);let r2=!1,s2=!1,c3=!1,u2=!1;w2.x<n4.x[0]&&(r2=!0),w2.x>n4.x[1]&&(s2=!0),w2.y<n4.y[0]&&(u2=!0),w2.y>n4.y[1]&&(c3=!0);let g3=!1;(i3&&s2||o4&&r2)&&(w2.x=m(n4.x[0],w2.x,n4.x[1]),g3=!0),(a3&&c3||l2&&u2)&&(w2.y=m(n4.y[0],w2.y,n4.y[1]),g3=!0),g3&&f2.spring({tension:94,friction:17,maxSpeed:555*w2.scale,restDelta:.1,restSpeed:.1,velocity:f2.getCurrentVelocities()}).from(E2).to(w2).start(),Y2()}).on("end",()=>{B2(),f2?.isRunning()||(W2(),S2("animationEnd"))}),function(){let e11=M2("gestures");e11&&c2&&a2&&(d2=G(c2,e11).on("start",e12=>{if(!f2)return;let t3=e12.srcEvent;z2()||((E2.scale>1||e12.currentTouch.length>1)&&(t3?.stopPropagation(),f2.pause()),1===e12.currentTouch.length&&S2("touchStart"))}).on("move",e12=>{!z2()&&(1!==w2.scale||e12.currentTouch.length>1)&&(e12.srcEvent.preventDefault(),e12.srcEvent.stopPropagation())}).on("pan",e12=>{if(z2())return;let t3=e12.srcEvent;(1!==w2.scale||e12.currentTouch.length>1)&&(U(t3),Z2(J.Pan,e12))}).on("swipe",e12=>{!z2()&&w2.scale>1&&Z2(J.Swipe,e12)}).on("tap",e12=>{S2("click",e12)}).on("singleTap",e12=>{S2("singleClick",e12)}).on("doubleTap",e12=>{S2("dblClick",e12)}).on("pinch",e12=>{z2()||(e12.scale>F2()?Z2(J.ZoomIn,e12):e12.scale<F2()?Z2(J.ZoomOut,e12):Z2(J.Pan,e12))}).on("end",e12=>{z2()||(e12.currentTouch.length?(e12.srcEvent.stopPropagation(),U(e12.srcEvent),f2?.end()):(W2(),B2(),S2("touchEnd")))}).init())}(),c2&&(c2.addEventListener("wheel",T2,{passive:!1}),x2.push(()=>{c2?.removeEventListener("wheel",T2,{passive:!1})})),e10?.addEventListener("click",R2),document?.addEventListener("mousemove",P2),x2.push(()=>{e10?.removeEventListener("click",R2),document?.removeEventListener("mousemove",P2)});let o3={...M2("startPos")||{},scale:F2()};if(E2={...ee,...o3},w2={...ee,...o3},z2()){let e11=k2(w2.scale);if(e11){let{x:t3,y:n4}=e11;E2.x=t3,E2.y=n4,w2.x=t3,w2.y=n4}}v2=et.Ready,Y2(),W2(),S2("ready"),requestAnimationFrame(()=>{c2&&(c2.style.visibility="")})}function A2(){let e11={top:0,left:0,width:0,height:0};if(i2){let t2=i2.getBoundingClientRect();w2.angle%180==90?(e11.top=t2.top+.5*t2.height-.5*t2.width,e11.left=t2.left+.5*t2.width-.5*t2.height,e11.width=t2.height,e11.height=t2.width):(e11.top=t2.top,e11.left=t2.left,e11.width=t2.width,e11.height=t2.height)}return e11}function O2(){let e11=M2("width"),t2=M2("height");if(a2&&"auto"===e11){let t3=a2.getAttribute("width");e11=t3?parseFloat(t3+""):void 0!==a2.dataset.width?parseFloat(a2.dataset.width+""):c2 instanceof HTMLImageElement?c2.naturalWidth:a2 instanceof HTMLImageElement?a2.naturalWidth:a2.getBoundingClientRect().width}else e11=l(e11)?parseFloat(e11):e11;if(a2&&"auto"===t2){let e12=a2.getAttribute("height");t2=e12?parseFloat(e12+""):void 0!==a2.dataset.height?parseFloat(a2.dataset.height+""):c2 instanceof HTMLImageElement?c2.naturalHeight:a2 instanceof HTMLImageElement?a2.naturalHeight:a2.getBoundingClientRect().height}else t2=l(t2)?parseFloat(t2):t2;return{width:e11,height:t2}}function z2(){return"mousemove"===M2("panMode")&&matchMedia("(hover: hover)").matches}function k2(e11){let t2=p2||M2("event"),n3=i2?.getBoundingClientRect();if(!t2||!n3||e11<=1)return{x:0,y:0};let o3=(t2.clientX||0)-n3.left,a3=(t2.clientY||0)-n3.top,l2=n3.width,r2=n3.height,s2=q2(e11);if(e11>1){let t3=M2("mouseMoveFactor");t3>1&&(e11*=t3)}let c3=l2*e11,u2=r2*e11,d3=.5*(c3-l2)-o3/l2*100/100*(c3-l2),f3=.5*(u2-r2)-a3/r2*100/100*(u2-r2);return{x:d3=m(s2.x[0],d3,s2.x[1]),y:f3=m(s2.y[0],f3,s2.y[1])}}function I2(t2="base"){if(!e10)return 1;let n3=e10.getBoundingClientRect(),o3=A2(),{width:i3,height:a3}=O2(),l2=e11=>{if("number"==typeof e11)return e11;switch(e11){case"min":case"base":return 1;case"cover":return Math.max(n3.height/o3.height,n3.width/o3.width)||1;case"full":case"max":{let e12=w2.angle%180==90?a3:i3;return e12&&o3.width?e12/o3.width:1}}},r2=M2("minScale"),s2=M2("maxScale"),c3=Math.min(l2("full"),l2(r2)),u2="number"==typeof s2?l2("full")*s2:Math.min(l2("full"),l2(s2));switch(t2){case"min":return c3;case"base":return m(c3,1,u2);case"cover":return l2("cover");case"full":return Math.min(u2,l2("full"));case"max":return u2}}function $3(){return I2("min")}function F2(){return I2("base")}function D2(){return I2("cover")}function N2(){return I2("full")}function V2(){return I2("max")}function q2(t2){let n3={x:[0,0],y:[0,0]},o3=e10?.getBoundingClientRect();if(!o3)return n3;let i3=A2(),a3=o3.width,l2=o3.height,r2=i3.width,s2=i3.height,c3=t2=void 0===t2?w2.scale:t2,u2=t2;if(z2()&&t2>1){let e11=M2("mouseMoveFactor");e11>1&&(r2*t2>a3+.01&&(c3*=e11),s2*t2>l2+.01&&(u2*=e11))}return r2*=c3,s2*=u2,t2>1&&(r2>a3&&(n3.x[0]=.5*(a3-r2),n3.x[1]=.5*(r2-a3)),n3.x[0]-=.5*(i3.left-o3.left),n3.x[1]-=.5*(i3.left-o3.left),n3.x[0]-=.5*(i3.left+i3.width-o3.right),n3.x[1]-=.5*(i3.left+i3.width-o3.right),s2>l2&&(n3.y[0]=.5*(l2-s2),n3.y[1]=.5*(s2-l2)),n3.y[0]-=.5*(i3.top-o3.top),n3.y[1]-=.5*(i3.top-o3.top),n3.y[0]-=.5*(i3.top+i3.height-o3.bottom),n3.y[1]-=.5*(i3.top+i3.height-o3.bottom)),n3}function B2(){if(!(M2("bounds")&&v2===et.Ready&&e10?.parentElement&&f2&&d2))return;let t2=$3(),n3=V2(),o3=m(t2,w2.scale,n3);if(w2.scale<t2-.01||w2.scale>n3+.01)return void Z2(J.ZoomTo,{scale:o3});if(f2.isRunning()||d2.isPointerDown())return;let i3=q2(o3);w2.x<i3.x[0]||w2.x>i3.x[1]||w2.y<i3.y[0]||w2.y>i3.y[1]?(w2.x=m(i3.x[0],w2.x,i3.x[1]),w2.y=m(i3.y[0],w2.y,i3.y[1]),f2.spring({tension:170,friction:17,restDelta:.001,restSpeed:.001,maxSpeed:1/0,velocity:f2.getCurrentVelocities()}),f2.from(E2).to(w2).start()):Y2()}function W2(){if(!e10||!e10.parentElement||!i2)return;let t2=eu2(),n3=ed2(),o3=ef2(),a3=eg2(),l2=el2(),r2=er2();i2.classList.toggle("is-fullsize",a3),i2.classList.toggle("is-expanded",o3),i2.classList.toggle("is-dragging",n3),i2.classList.toggle("can-drag",t2),i2.classList.toggle("will-zoom-in",l2),i2.classList.toggle("will-zoom-out",r2);let s2=es2(),c3=ec2(),u2=v2!==et.Ready;for(let t3 of e10?.querySelectorAll("[data-panzoom-action]")||[]){let e11=t3.dataset.panzoomAction,n4=!1;if(u2)n4=!0;else switch(e11){case J.ZoomIn:s2||(n4=!0);break;case J.ZoomOut:c3||(n4=!0);break;case J.ToggleFull:s2||c3||(n4=!0);let o4=t3.querySelector("g");o4&&(o4.style.display=a3?"none":"");break;case J.ToggleCover:case J.ToggleMax:s2||c3||(n4=!0)}n4?(t3.setAttribute("aria-disabled",""),t3.setAttribute("tabindex","-1")):(t3.removeAttribute("aria-disabled"),t3.removeAttribute("tabindex"))}}function Z2(t2,n3){if(!e10||!a2||!f2||t2===J.Swipe&&Math.abs(f2.getCurrentVelocities().scale)>.01)return;let o3={...w2},i3=q2(z2()?w2.scale:E2.scale),l2=f2.getCurrentVelocities(),r2=A2();n3=n3||{};let s2=(n3.currentTouch?.length||0)>1,c3=n3.velocityX||0,u2=n3.velocityY||0,g3=n3.center;!g3&&n3.srcEvent&&(g3=j(H(n3.srcEvent)));let p3=n3.deltaX||0,h2=n3.deltaY||0;switch(t2){case J.MoveRight:p3=n3.deltaX||100;break;case J.MoveLeft:p3=n3.deltaX||-100;break;case J.MoveUp:h2=n3.deltaY||-100;break;case J.MoveDown:h2=n3.deltaY||100}let v3=[];switch(t2){case J.Reset:(w2={...ee}).scale=F2();break;case J.Pan:case J.Move:case J.MoveLeft:case J.MoveRight:case J.MoveUp:case J.MoveDown:if(d2?.isPointerDown()){let e11=1,t3=1;w2.x<=i3.x[0]&&c3<=0&&(e11=.2*Math.max(.01,1-Math.abs(1/r2.width*Math.abs(w2.x-i3.x[0])))),w2.x>=i3.x[1]&&c3>=0&&(e11=.2*Math.max(.01,1-Math.abs(1/r2.width*Math.abs(w2.x-i3.x[1])))),w2.y<=i3.y[0]&&u2<=0&&(t3=.2*Math.max(.01,1-Math.abs(1/r2.height*Math.abs(w2.y-i3.y[0])))),w2.y>=i3.y[1]&&u2>=0&&(t3=.2*Math.max(.01,1-Math.abs(1/r2.height*Math.abs(w2.y-i3.y[1])))),w2.x+=p3*e11,w2.y+=h2*t3}else w2.x=m(i3.x[0],w2.x+p3,i3.x[1]),w2.y=m(i3.y[0],w2.y+h2,i3.y[1]);break;case J.Swipe:let y3=(e11=0)=>Math.sign(e11)*Math.pow(Math.abs(e11),1.5);w2.x+=m(-1e3,y3(c3),1e3),w2.y+=m(-1e3,y3(u2),1e3),u2&&!c3&&(w2.x=m(i3.x[0],w2.x,i3.x[1])),!u2&&c3&&(w2.y=m(i3.y[0],w2.y,i3.y[1])),l2.x=c3,l2.y=u2;break;case J.ZoomTo:w2.scale=n3.scale||1;break;case J.ZoomIn:w2.scale=w2.scale*(n3.scale||2),s2||(w2.scale=Math.min(w2.scale,V2()));break;case J.ZoomOut:w2.scale=w2.scale*(n3.scale||.5),s2||(w2.scale=Math.max(w2.scale,$3()));break;case J.ToggleCover:v3=[F2(),D2()];break;case J.ToggleFull:v3=[F2(),N2()];break;case J.ToggleMax:v3=[F2(),V2()];break;case J.IterateZoom:v3=[F2(),N2(),V2()];break;case J.Zoom:let b3=N2();w2.scale>=b3-.05?w2.scale=F2():w2.scale=Math.min(b3,w2.scale*(n3.scale||2));break;case J.RotateCW:w2.angle+=90;break;case J.RotateCCW:w2.angle-=90;break;case J.FlipX:w2.flipX*=-1;break;case J.FlipY:w2.flipY*=-1}if(void 0!==E2.angle&&Math.abs(E2.angle)>=360&&(w2.angle-=360*Math.floor(E2.angle/360),E2.angle-=360*Math.floor(E2.angle/360)),v3.length){let e11=v3.findIndex(e12=>e12>w2.scale+1/X);w2.scale=v3[e11]||v3[0]}if(s2&&(w2.scale=m($3()*(s2?.8:1),w2.scale,V2()*(s2?1.6:1))),z2()){let e11=k2(w2.scale);if(e11){let{x:t3,y:n4}=e11;w2.x=t3,w2.y=n4}}else if(w2.scale!==o3.scale){let t3=0,n4=0;if(g3)t3=g3.x,n4=g3.y;else{let o4=e10.getBoundingClientRect();t3=o4.x+.5*o4.width,n4=o4.y+.5*o4.height}let a3=t3-r2.left,l3=n4-r2.top;a3-=.5*r2.width,l3-=.5*r2.height;let c4=(a3-o3.x)/o3.scale,u3=(l3-o3.y)/o3.scale;w2.x=a3-c4*w2.scale,w2.y=l3-u3*w2.scale,!s2&&M2("bounds")&&(i3=q2(w2.scale),w2.x=m(i3.x[0],w2.x,i3.x[1]),w2.y=m(i3.y[0],w2.y,i3.y[1]))}if(t2===J.Swipe){let e11=500*w2.scale;f2.spring({tension:94,friction:17,maxSpeed:e11,restDelta:.1,restSpeed:.1,velocity:l2})}else t2===J.Pan||s2?f2.spring({tension:750,friction:17,restDelta:.01,restSpeed:.01,maxSpeed:1}):f2.spring({tension:170,friction:17,restDelta:.001,restSpeed:.001,maxSpeed:1/0,velocity:l2});t2===J.Reset&&0===n3.velocity?E2={...w2}:f2.from(E2).to(w2).start(),S2("action",t2)}function Y2(){if(!i2||!a2)return;if(a2 instanceof HTMLImageElement){let{width:e11,height:t3}=O2();i2.style.maxWidth=`min(${e11}px, 100%)`,i2.style.maxHeight=`min(${t3}px, 100%)`}let{x:t2,y:n3,scale:o3,angle:l2,flipX:r2,flipY:s2}=E2,u2=`translate3d(${t2}px, ${n3}px, 0)`;1!==r2||1!==s2?u2+=` scaleX(${o3*r2}) scaleY(${o3*s2})`:1!==o3&&(u2+=` scale(${o3})`),l2%360!=0&&(u2+=` rotate(${l2}deg)`);let d3=function(){let t3=A2(),n4=t3.width,o4=t3.height,{width:i3,height:a3}=O2();if(!e10)return{x:0,y:0,width:0,height:0,scale:0,flipX:0,flipY:0,angle:0,fitWidth:n4,fitHeight:o4,fullWidth:i3,fullHeight:a3};let{x:l3,y:r3,scale:s3,angle:c3,flipX:u3,flipY:d4}=E2,f3=1/N2(),g3=i3,m2=a3,p3=E2.scale*f3,h2=w2.scale*f3,v3=Math.max(n4,o4),y3=Math.min(n4,o4);i3>a3?(g3=v3,m2=y3):(g3=y3,m2=v3),p3=i3>a3?v3*s3/i3||1:v3*s3/a3||1;let b3=g3?i3*h2:0,x3=m2?a3*h2:0;return{x:l3=l3+.5*g3-.5*b3,y:r3=r3+.5*m2-.5*x3,width:b3,height:x3,scale:g3&&m2?i3*p3/b3:0,flipX:u3,flipY:d4,angle:c3,fitWidth:n4,fitHeight:o4,fullWidth:i3,fullHeight:a3}}();if(i2&&d3){let{x:e11,y:t3,width:n4,height:o4,scale:i3,flipX:a3,flipY:r3}=d3,s3=`translate(${K(e11)}px, ${K(t3)}px)`;s3+=1!==a3||1!==r3?` scaleX(${K(i3*a3)}) scaleY(${K(i3*r3)})`:` scale(${K(i3)})`,0!==l2&&(s3+=` rotate(${l2}deg)`),c2&&(c2.style.width=`${K(n4)}px`,c2.style.height=`${K(o4)}px`,c2.style.transform=`${s3}`)}S2("render")}function Q2(){let t2,e11=w2.scale,n3=M2("clickAction"),o3=F2();if(n3){let i3=[];switch(n3){case J.ZoomIn:o3=e11*(t2||2);break;case J.ZoomOut:o3=e11*(t2||.5);break;case J.ToggleCover:i3=[F2(),D2()];break;case J.ToggleFull:i3=[F2(),N2()];break;case J.ToggleMax:i3=[F2(),V2()];break;case J.IterateZoom:i3=[F2(),N2(),V2()];break;case J.Zoom:let a3=N2();o3=e11>=a3-.05?F2():Math.min(a3,e11*(t2||2))}if(i3.length){let t3=i3.findIndex(t4=>t4>e11+1/X);o3=i3[t3]||F2()}}return m($3(),o3,V2())}function el2(){return v2===et.Ready&&Q2()>w2.scale}function er2(){return v2===et.Ready&&Q2()<w2.scale}function es2(){return v2===et.Ready&&w2.scale<V2()}function ec2(){return v2===et.Ready&&w2.scale>$3()}function eu2(){return v2===et.Ready&&ef2()&&!!d2&&!z2()}function ed2(){return v2===et.Ready&&d2?.isPointerDown()&&!z2()}function ef2(){return v2===et.Ready&&w2.scale>F2()}function eg2(){return v2===et.Ready&&w2.scale>=N2()}let em2={canDrag:eu2,canZoomIn:es2,canZoomOut:ec2,destroy:function(){for(let e11 of(S2("destroy"),Object.values(b2)))e11?.destroy(em2);for(let e11 of x2)e11();return i2&&(i2.style.aspectRatio="",i2.style.maxWidth="",i2.style.maxHeight=""),c2&&(c2.style.width="",c2.style.height="",c2.style.transform=""),i2=void 0,a2=void 0,c2=void 0,E2={...ee},w2={...ee},f2?.destroy(),f2=void 0,d2?.destroy(),d2=void 0,v2=et.Destroyed,em2},emit:S2,execute:Z2,getBoundaries:q2,getContainer:function(){return e10},getFullDim:O2,getGestures:function(){return d2},getMousemovePos:k2,getOptions:function(){return y2},getScale:I2,getState:function(){return v2},getTransform:function(e11){return!0===e11?w2:E2},getTween:function(){return f2},getViewport:function(){return c2},getWrapper:function(){return i2},init:function(){return v2=et.Init,S2("init"),function(){for(let[e11,t2]of Object.entries({...o2,...y2.plugins||{}}))if(e11&&!b2[e11]&&t2 instanceof Function){let n3=t2();n3.init(em2),b2[e11]=n3}S2("initPlugins")}(),function(){if(!e10)return;let t2={...en.classes,...M2("classes")};if(h(e10,t2.container),(a2=e10.querySelector("."+t2.content))&&(a2.setAttribute("draggable","false"),(i2=e10.querySelector("."+t2.wrapper))||(h(i2=document.createElement("div"),t2.wrapper),a2.insertAdjacentElement("beforebegin",i2),i2.insertAdjacentElement("afterbegin",a2)),a2 instanceof HTMLImageElement||a2 instanceof HTMLPictureElement)){if(!(c2=e10.querySelector("."+t2.viewport))){h(c2=document.createElement("div"),t2.viewport);let e11=a2.cloneNode(!0);e11.classList.remove("is-lazyloading"),e11.classList.remove("is-lazyloaded"),c2.insertAdjacentElement("afterbegin",e11),i2.insertAdjacentElement("beforeend",c2)}if(a2 instanceof HTMLPictureElement&&(a2=a2.querySelector("img")),c2 instanceof HTMLPictureElement&&(c2=c2.querySelector("img")),c2.style.visibility="hidden",M2("protected")){c2.addEventListener("contextmenu",e12=>{e12.preventDefault()});let e11=document.createElement("div");h(e11,"f-panzoom__protected"),c2.appendChild(e11)}S2("initLayout")}}(),function(){if(!(a2&&a2 instanceof HTMLImageElement))return;let t2=()=>{a2&&a2 instanceof HTMLImageElement&&a2.decode().then(()=>{requestAnimationFrame(()=>{C2()})}).catch(()=>{C2()})};if(a2.src&&a2.complete)return t2();v2=et.Loading,function(){let t3=e10?.querySelector(".f-spinner");if(!e10||t3)return;let n3=s(M2("spinnerTpl"));n3&&(n3.classList.add("f-spinner"),e10.classList.add("is-loading"),i2?.insertAdjacentElement("afterbegin",n3))}(),S2("loading"),a2.addEventListener("load",t2,!1),a2.addEventListener("error",t2,!1),x2.push(()=>{a2?.removeEventListener("load",t2,!1),a2?.removeEventListener("error",t2,!1)})}(),function(){if(e10&&!g2){let t2=null;(g2=new ResizeObserver(()=>{t2||(t2=requestAnimationFrame(()=>{e10&&e10.parentElement&&v2===et.Ready&&(W2(),B2(),S2("refresh")),t2=null}))})).observe(e10),x2.push(()=>{g2?.disconnect(),g2=void 0,t2&&(cancelAnimationFrame(t2),t2=null)})}}(),em2},isDragging:ed2,isExpanded:ef2,isFullsize:eg2,localize:function(e11,t2=[]){let n3=M2("l10n")||{};e11=String(e11).replace(/\{\{(\w+)\}\}/g,(e12,t3)=>n3[t3]||e12);for(let n4=0;n4<t2.length;n4++)e11=e11.split(t2[n4][0]).join(t2[n4][1]);return e11.replace(/\{\{(.*?)\}\}/g,(e12,t3)=>t3)},off:function(e11,t2){for(let n3 of e11 instanceof Array?e11:[e11])L2.has(n3)&&L2.set(n3,L2.get(n3).filter(e12=>e12!==t2));return em2},on:function(e11,t2){for(let n3 of e11 instanceof Array?e11:[e11])L2.set(n3,[...L2.get(n3)||[],t2]);return em2},version:"6.0.12",willZoomIn:el2,willZoomOut:er2};return em2};el.l10n={en_EN:Y},el.getDefaults=()=>en;let er=(e10,t2)=>{let n2=[];return e10.childNodes.forEach(e11=>{e11.nodeType===Node.ELEMENT_NODE&&(!t2||e11.matches(t2))&&n2.push(e11)}),n2},es=(e10,t2="")=>{e10&&e10.classList&&t2.split(" ").forEach(t3=>{t3&&e10.classList.remove(t3)})},ec=(e10,t2="",n2)=>{e10&&e10.classList&&t2.split(" ").forEach(t3=>{t3&&e10.classList.toggle(t3,n2||!1)})},eu={...Y,ERROR:"Something went wrong. <br /> Please try again later.",NEXT:"Next page",PREV:"Previous page",GOTO:"Go to page #%d",DOWNLOAD:"Download",TOGGLE_FULLSCREEN:"Toggle full-screen mode",TOGGLE_EXPAND:"Toggle full-size mode",TOGGLE_THUMBS:"Toggle thumbnails",TOGGLE_AUTOPLAY:"Toggle slideshow"},ed=e10=>{e10.cancelable&&e10.preventDefault()},ef=((P={})[P.Init=0]="Init",P[P.Ready=1]="Ready",P[P.Destroyed=2]="Destroyed",P),eg=((C={})[C.Loading=0]="Loading",C[C.Loaded=1]="Loaded",C[C.Error=2]="Error",C),em={adaptiveHeight:!1,center:!0,classes:{container:"f-carousel",isEnabled:"is-enabled",isLTR:"is-ltr",isRTL:"is-rtl",isHorizontal:"is-horizontal",isVertical:"is-vertical",hasAdaptiveHeight:"has-adaptive-height",viewport:"f-carousel__viewport",slide:"f-carousel__slide",isSelected:"is-selected"},dragFree:!1,enabled:!0,errorTpl:'<div class="f-html">{{ERROR}}</div>',fill:!1,infinite:!0,initialPage:0,l10n:eu,rtl:!1,slides:[],slidesPerPage:"auto",spinnerTpl:'<div class="f-spinner"></div>',transition:"fade",tween:{clamp:!0,mass:1,tension:200,friction:25,restDelta:1,restSpeed:1,velocity:0},vertical:!1},ep=0,eh=(e10,t2={},o2={})=>{let i2,c2,d2,g2,v2;ep++;let y2=ef.Init,b2={...em},E2={...em},w2={},x2=null,M2=null,L2=!1,S2=!1,T2=!1,R2=!1,P2="height",C2=0,A2=!0,O2=0,z2=0,k2=0,I2=0,$3="*",F2=[],D2=[],H2=new Set,j2=[],N2=[],V2=0,q2=0;function B2(e11,...t3){let n2=E2[e11];return n2&&n2 instanceof Function?n2(eC2,...t3):n2}function W2(e11,t3=[]){let n2=B2("l10n")||{};e11=String(e11).replace(/\{\{(\w+)\}\}/g,(e12,t4)=>n2[t4]||e12);for(let n3=0;n3<t3.length;n3++)e11=e11.split(t3[n3][0]).join(t3[n3][1]);return e11.replace(/\{\{(.*?)\}\}/g,(e12,t4)=>t4)}let Z2=new Map;function Y2(e11,...t3){let n2=Z2.get(e11)||[];for(let o3 of(E2.on&&n2.push(E2.on[e11]),n2))o3&&o3 instanceof Function&&o3(eC2,...t3);"*"!==e11&&Y2("*",e11,...t3)}function X2(){let e11=f({},em,b2);f(e11,em,b2);let t3="",n2=b2.breakpoints||{};if(n2)for(let[o3,i3]of Object.entries(n2))window.matchMedia(o3).matches&&(t3+=o3,f(e11,i3));if(void 0===v2||t3!==v2){if(v2=t3,y2!==ef.Init){let t4=N2[O2]?.slides[0]?.index;for(let n3 of(void 0===t4&&(t4=E2.initialSlide),e11.initialSlide=t4,e11.slides=[],F2))n3.isVirtual&&e11.slides.push(n3)}eP2(),!1!==(E2=e11).enabled&&(y2=ef.Init,Y2("init"),function(){for(let[e12,t4]of Object.entries({...o2,...E2.plugins||{}}))if(e12&&!w2[e12]&&t4 instanceof Function){let n3=t4();n3.init(eC2,eh),w2[e12]=n3}Y2("initPlugins")}(),function(){if(!x2)return;let e12=B2("classes")||{};h(x2,e12.container),h(x2,e12.isEnabled);let t4=B2("style");if(t4&&a(t4))for(let[e13,n3]of Object.entries(t4))x2.style.setProperty(e13,n3);(M2=x2.querySelector(`.${e12.viewport}`))||(h(M2=document.createElement("div"),e12.viewport),M2.append(...er(x2,`.${e12.slide}`)),x2.insertAdjacentElement("afterbegin",M2)),L2="visible"===window.getComputedStyle(M2).getPropertyValue("overflow"),x2.carousel=eC2,Y2("initLayout")}(),function(){if(!M2)return;let e12=B2("classes")||{};for(let t4 of(F2=[],[...er(M2,`.${e12.slide}`)].forEach(e13=>{e13.parentElement&&(F2.push(el2({el:e13,isVirtual:!1,...e13.dataset||{}})),e13.parentElement.removeChild(e13))}),ea2(B2("slides")),F2))Y2("addSlide",t4);Y2("initSlides")}(),c2=_().on("start",()=>{A2=!1,i2&&i2.isPointerDown()||(J2(),eR2())}).on("step",e12=>{C2=e12.pos,eR2()}).on("end",e12=>{!i2?.isPointerDown()&&(C2=e12.pos,c2&&!S2&&(C2<k2||C2>I2)?c2.spring({clamp:!0,mass:1,tension:200,friction:25,velocity:0,restDelta:1,restSpeed:1}).from({pos:C2}).to({pos:m(k2,C2,I2)}).start():A2||(A2=!0,Y2("settle")))}),function(){let e12=B2("gestures");M2&&!1!==e12&&(i2=G(M2,e12).on("start",e13=>{if(!c2)return;let{srcEvent:t4}=e13;R2&&ed(t4),c2.pause(),c2.getCurrentVelocities().pos=0;let n3=N2[O2]?.slides[0];n3&&H2.has(n3.index)&&n3.el&&(C2=(n3.offset||0)+(function(e14){let t5=new DOMMatrixReadOnly(window.getComputedStyle(e14).transform);return{width:t5.m41||0,height:t5.m42||0}}(n3.el)[P2]||0)*(T2&&!R2?1:-1)),eE2(),!S2&&(C2<k2||C2>I2)&&c2.spring({clamp:!0,mass:1,tension:500,friction:25,velocity:c2.getCurrentVelocities()?.pos||0,restDelta:1,restSpeed:1}).from({pos:C2}).to({pos:m(k2,C2,I2)}).start()}).on("move",e13=>{let{srcEvent:t4,axis:n3}=e13,o3=e13.srcEvent.target;o3&&u(o3)||(n3||(t4.stopPropagation(),t4.stopImmediatePropagation()),("y"===n3&&R2||"x"===n3&&!R2)&&(ed(t4),t4.stopPropagation()))}).on("panstart",e13=>{e13?.axis===(R2?"y":"x")&&h(M2,"is-dragging")}).on("panend",()=>{es(M2,"is-dragging")}).on("pan",e13=>{let{deltaX:t4,deltaY:n3,currentTouch:o3,axis:i3}=e13;if(!c2||o3.length>1||"y"===i3&&!R2||"x"===i3&&R2)return;let a2=T2&&!R2?1:-1,l2=R2?n3:t4,r2=c2?.isRunning()?c2.getEndValues().pos:C2,s2=1;!S2&&(r2<=k2&&l2*a2<0?s2=.2*Math.max(.01,1-Math.abs(1/eo2()*Math.abs(r2-k2))):r2>=I2&&l2*a2>0&&(s2=.2*Math.max(.01,1-Math.abs(1/eo2()*Math.abs(r2-I2))))),r2+=l2*s2*a2,c2.spring({clamp:!0,mass:1,tension:700,friction:25,velocity:c2.getCurrentVelocities()?.pos||0,restDelta:1,restSpeed:1}).from({pos:C2}).to({pos:r2}).start()}).on("end",e13=>{let{axis:t4,velocityX:n3,velocityY:o3,currentTouch:i3}=e13,a2=N2.length,l2=B2("dragFree");if(i3.length>0||!c2||!a2)return;let r2=B2("vertical")?o3:n3,s2=c2?.isRunning()?c2.getEndValues().pos:C2,u2=T2&&!R2?1:-1;if(s2+=r2*(l2?5:1)*u2,!S2&&(r2*u2<=0&&s2<k2||r2*u2>=0&&s2>I2)){let e14=0;return Math.abs(r2)>0&&(e14=2*Math.abs(r2),e14=Math.min(.3*eo2(),e14)),s2=m(k2+-1*e14,s2,I2+e14),void c2.spring({clamp:!0,mass:1,tension:380,friction:25,velocity:-1*r2,restDelta:1,restSpeed:1}).from({pos:C2}).to({pos:s2}).start()}if(l2||w2.Autoscroll?.isEnabled())return void(Math.abs(r2)>10?c2.spring({clamp:!0,mass:1,tension:150,friction:25,velocity:-1*r2,restDelta:1,restSpeed:1}).from({pos:C2}).to({pos:s2}).start():c2.isRunning()||A2||(A2=!0,Y2("settle")));if(!l2&&!w2.Autoscroll?.isEnabled()&&(!e13.offsetX&&!e13.offsetY||"y"===t4&&!R2||"x"===t4&&R2))return void eT2(O2,{transition:"tween"});let d3=et2(s2);Math.abs(r2)>10&&d3===O2&&(d3+=r2>0?T2&&!R2?1:-1:T2&&!R2?-1:1),eT2(d3,{transition:"tween",tween:{tension:160,friction:25,velocity:-1*r2}})}).init())}(),ey2(),function(){if(x2&&(x2.addEventListener("click",ex2,{passive:!1}),document.addEventListener("mousemove",U2),!d2)){let e12=null;(d2=new ResizeObserver(t4=>{e12||(e12=requestAnimationFrame(()=>{(function(e13){if(!x2)return;let t5=e13[0].contentBoxSize[0].blockSize,n3=e13[0].contentBoxSize[0].inlineSize;if(y2===ef.Init)return V2=t5,q2=n3,y2=ef.Ready,eR2(),Q2(),void Y2("ready");if(y2!==ef.Ready)return;let o3=N2.length;ey2();let a2=x2.getBoundingClientRect();t5=a2.height,n3=a2.width,o3>1&&(R2&&.5>Math.abs(t5-V2)||!R2&&.5>Math.abs(n3-q2))||(V2=t5,q2=n3,(!R2||t5)&&(R2||n3)&&x2&&M2&&(o3===N2.length&&i2?.isPointerDown()||(B2("dragFree")&&(S2||C2>k2&&C2<I2)?(J2(),eR2()):eT2(O2,{transition:!1}))))})(t4),e12=null}))})).observe(x2)}}())}}function U2(e11){n=e11}function K2(e11="*"){let t3=[];for(let n2 of F2)("*"===e11||n2.class&&n2.class.includes(e11)||n2.el&&n2.el?.classList.contains(e11))&&t3.push(n2);g2=void 0,$3=e11,D2=[...t3]}function J2(){if(!c2)return;let e11=et2(c2?.isRunning()?c2.getEndValues().pos:C2);e11!==O2&&(g2=O2,O2=e11,eS2(),Q2(),ee2(),Y2("change",O2,g2))}function Q2(){if(!x2)return;for(let e12 of(ec(M2,"is-draggable",!!i2&&N2.length>0),x2.querySelectorAll("[data-carousel-index]")))e12.innerHTML=O2+"";for(let e12 of x2.querySelectorAll("[data-carousel-page]"))e12.innerHTML=O2+1+"";for(let e12 of x2.querySelectorAll("[data-carousel-pages]"))e12.innerHTML=N2.length+"";let e11=!1,t3=N2[O2]?.slides[0];for(let n2 of(t3&&(t3.downloadSrc||"image"===t3.type&&t3.src)&&(e11=!0),x2.querySelectorAll("[data-carousel-download]")))n2.toggleAttribute("aria-disabled",!e11)}function ee2(e11){if(!x2)return;e11||(e11=N2[O2]?.slides[0]);let t3=e11.el;if(t3)for(let n2 of t3.querySelectorAll("[data-slide-index]"))n2.innerHTML=e11.index+1+""}function et2(e11){if(!N2.length||!c2)return 0;let t3=ei2(),n2=e11;S2?n2-=Math.floor((e11-N2[0].pos)/t3)*t3:n2=m(N2[0].pos,e11,N2[N2.length-1].pos);let o3=new Map,i3=0;for(let e12 of N2){let a2=Math.abs(e12.pos-n2),l2=Math.min(a2,Math.abs(e12.pos-n2-t3),Math.abs(e12.pos-n2+t3));o3.set(i3,l2),i3++}return parseInt((o3.size>0?[...o3.entries()].reduce((e12,t4)=>t4[1]<e12[1]?t4:e12):[O2,0])[0])}function en2(){return M2&&parseFloat(getComputedStyle(M2).getPropertyValue("--f-carousel-gap"))||0}function eo2(){return M2&&M2.getBoundingClientRect()[P2]||0}function ei2(e11=!0){let t3=en2();return D2.reduce((e12,t4)=>e12+t4.dim,0)+(D2.length-(S2&&e11?0:1))*t3}function ea2(e11,t3){let n2=[];for(let t4 of Array.isArray(e11)?e11:[e11]){let e12=el2({...t4,isVirtual:!0});n2.push(e12)}for(let e12 of(F2.splice(void 0===t3?F2.length:t3,0,...n2),ev2(),n2))!function(e13){if(!e13)return;let t4=e13.el;t4||(e13.el=t4=document.createElement("div"));let n3=e13.html?e13.html instanceof HTMLElement?e13.html:s(e13.html):void 0;n3&&(h(n3,"f-html"),e13.htmlEl=n3,h(t4,"has-html"),t4.append(n3),Y2("contentReady",e13))}(e12);return K2($3),n2}function el2(e11){return(l(e11)||e11 instanceof HTMLElement)&&(e11={html:e11}),{index:-1,el:void 0,class:"",isVirtual:!0,dim:0,pos:0,offset:0,html:"",src:"",...e11}}function eu2(e11){if(!M2||!e11)return;let t3=e11.el;if(t3){if(t3.setAttribute("index",e11.index+""),t3.parentElement!==M2){let n2;for(let o3 of(h(t3,E2.classes.slide),h(t3,e11.class),eS2(e11),F2))if(o3.index>e11.index){n2=o3.el;break}M2.insertBefore(t3,n2&&M2.contains(n2)?n2:null),Q2(),ee2(e11),Y2("attachSlideEl",e11)}return t3}}function eg2(e11){let t3=e11?.el;t3&&(t3.remove(),eb2(t3),Y2("detachSlideEl",e11))}function ev2(){for(let e11=0;e11<F2.length;e11++){let t3=F2[e11],n2=t3.el;n2&&(t3.index!==e11&&eb2(n2),n2.setAttribute("index",`${e11}`)),t3.index=e11}}function ey2(){if(!x2||!M2)return;T2=B2("rtl"),P2=(R2=B2("vertical"))?"height":"width";let e11=B2("classes");ec(x2,e11.isLTR,!T2),ec(x2,e11.isRTL,T2),ec(x2,e11.isHorizontal,!R2),ec(x2,e11.isVertical,R2),ec(x2,e11.hasAdaptiveHeight,B2("adaptiveHeight"));let t3=M2.getBoundingClientRect();if(!t3.width&&!t3.height)return;let n2=function(){let e12=0;if(M2){let t4=document.createElement("div");h(t4,E2.classes.slide),M2.appendChild(t4),e12=t4.getBoundingClientRect()[P2],t4.remove(),t4=void 0}return e12}();for(let e12 of D2){let t4=e12.el,o3=0;if(!e12.isVirtual&&t4&&r(t4)){let e13=!1;t4.parentElement&&t4.parentElement===M2||(M2.appendChild(t4),e13=!0),o3=t4.getBoundingClientRect()[P2],e13&&t4.parentElement?.removeChild(t4)}else o3=n2;e12.dim=o3}if(function(){let e12;if(!x2)return;ev2();let t4=eo2(),n3=en2(),o3=ei2(!1),i3=B2("slidesPerPage");i3="auto"===i3?1/0:parseFloat(i3+""),N2=[];let a2=0,l2=0;for(let e13 of D2)(!N2.length||a2+e13.dim-t4>.05||l2>=i3)&&(N2.push({index:N2.length,slides:[],dim:0,offset:0,pos:0}),a2=0,l2=0),N2[N2.length-1].slides.push(e13),a2+=e13.dim+n3,l2++;let r2=B2("center"),s2=B2("fill"),c3=B2("infinite"),u2=0;for(let e13 of N2){for(let t5 of(e13.dim=(e13.slides.length-1)*n3,e13.slides))e13.dim+=t5.dim;e13.offset=u2,e13.pos=u2,!1!==r2&&(e13.pos-=.5*(t4-e13.dim)),s2&&!c3&&o3>t4&&(e13.pos=m(0,e13.pos,o3-t4)),u2+=e13.dim+n3}let d3=[];for(let t5 of N2){let n4={...t5};e12&&n4.pos===e12.pos?(e12.dim+=n4.dim,e12.slides=[...e12.slides,...n4.slides]):(e12=n4,n4.index=d3.length,d3.push(n4))}N2=d3}(),S2=B2("infinite")&&N2.length>1&&ei2()-(eo2()+(D2[0]?.dim||0))>-.5,k2=N2[0]?.pos||0,I2=N2[N2.length-1]?.pos||0,y2===ef.Init){g2=void 0,O2=B2("initialPage");let e12=B2("initialSlide")||void 0;void 0!==e12&&(O2=eC2.getPageIndex(e12)||0),O2=m(0,O2,N2.length-1),z2=C2=N2[O2]?.pos||0}else{let e12=c2?.isRunning()?c2.getEndValues().pos:C2;(e12<k2||e12>I2)&&(O2=m(0,O2,N2.length-1))}Y2("refresh")}function eb2(e11){if(!e11||!r(e11))return;let t3=parseInt(e11.getAttribute("index")||"-1"),n2="";for(let t4 of Array.from(e11.classList)){let e12=t4.match(/^f-(\w+)(Out|In)$/);e12&&e12[1]&&(n2=e12[1]+"")}if(!e11||!n2)return;let o3=[`f-${n2}Out`,`f-${n2}In`,"to-prev","to-next","from-prev","from-next"];e11.removeEventListener("animationend",ew2),es(e11,o3.join(" ")),H2.delete(t3)}function eE2(){if(!M2)return;let e11=H2.size;for(let e12 of D2)eb2(e12.el);H2.clear(),e11&&eR2()}function ew2(e11){"f-"===e11.animationName.substring(0,2)&&(eb2(e11.target),!H2.size&&(es(x2,"in-transition"),!A2&&.5>Math.abs(eC2.getPosition(!0)-z2)&&(A2=!0,Y2("settle"))),eR2())}function ex2(e11){if(e11.defaultPrevented)return;let t3=e11.composedPath()[0];if(t3.closest("[data-carousel-go-prev]"))return ed(e11),void eC2.prev();if(t3.closest("[data-carousel-go-next]"))return ed(e11),void eC2.next();let n2=t3.closest("[data-carousel-go-to]");if(n2)return ed(e11),void eC2.goTo(parseFloat(n2.dataset.carouselGoTo||"")||0);if(t3.closest("[data-carousel-download]")){ed(e11);let t4=N2[O2].slides[0];if(t4.downloadSrc||"image"===t4.type&&t4.src){let e12=t4.downloadFilename,n3=document.createElement("a"),o3=t4.downloadSrc||t4.src||"";n3.href=o3,n3.target="_blank",n3.download=e12||o3,n3.click()}return}Y2("click",e11)}function eM2(e11){let t3=e11.el;t3&&(t3.querySelector(".f-spinner")?.remove(),es(t3,"is-loading"))}function eL2(e11){let t3=e11.el;t3&&(t3.querySelector(".f-html.is-error")?.remove(),es(t3,"has-error"))}function eS2(e11){e11||(e11=N2[O2]?.slides[0]);let t3=e11?.el;if(!t3)return;let n2=B2("formatCaption",e11);void 0===n2&&(n2=e11.caption),n2=n2||"";let o3=B2("captionEl");if(o3&&o3 instanceof HTMLElement){if(e11.index!==O2)return;if(l(n2)&&(o3.innerHTML=W2(n2+"")),n2 instanceof HTMLElement){if(n2.parentElement===o3)return;o3.innerHTML="",n2.parentElement&&(n2=n2.cloneNode(!0)),o3.append(n2)}return}if(!n2)return;let i3=e11.captionEl||t3.querySelector(".f-caption");!i3&&n2 instanceof HTMLElement&&n2.classList.contains("f-caption")&&(i3=n2),!i3&&(h(i3=document.createElement("div"),"f-caption"),l(n2)?i3.innerHTML=W2(n2+""):n2 instanceof HTMLElement&&(n2.parentElement&&(n2=n2.cloneNode(!0)),i3.append(n2)));let a2=`f-caption-${ep}_${e11.index}`;i3.setAttribute("id",a2),i3.dataset.selectable="true",h(t3,"has-caption"),t3.setAttribute("aria-labelledby",a2),e11.captionEl=i3,t3.insertAdjacentElement("beforeend",i3)}function eT2(e11,t3){let{transition:n2,tween:o3}={transition:E2.transition,tween:E2.tween,...t3||{}};if(!x2||!c2)return;let i3=N2.length;if(!i3||function(e12,t4){if(!x2||!c2||!t4||!l(t4)||"tween"===t4||j2.length>1)return!1;let n3=N2.length,o4=e12>O2?1:-1;e12=S2?(e12%n3+n3)%n3:m(0,e12,n3-1),T2&&(o4*=-1);let i4=N2[O2]?.slides[0],a2=i4?.index,r3=N2[e12]?.slides[0],s2=r3?.index,u2=N2[e12]?.pos;if(void 0===s2||void 0===a2||a2===s2||C2===u2||Math.abs(eo2()-(r3?.dim||0))>1)return!1;A2=!1,c2.pause(),eE2(),h(x2,"in-transition"),C2=z2=u2,J2();let d3=eu2(i4),f2=eu2(r3);return d3&&(H2.add(a2),d3.style.transform="",d3.addEventListener("animationend",ew2),es(d3,E2.classes.isSelected),h(d3,`f-${t4}Out to-${o4>0?"next":"prev"}`)),f2&&(H2.add(s2),f2.style.transform="",f2.addEventListener("animationend",ew2),h(f2,E2.classes.isSelected),h(f2,`f-${t4}In from-${o4>0?"prev":"next"}`)),eR2(),!0}(e11,n2))return;z2=N2[(e11=S2?(e11%i3+i3)%i3:m(0,e11,i3-1))||0].pos||0;let r2=c2.isRunning()?c2.getEndValues().pos:C2;if(1>Math.abs(z2-r2))return C2=z2,O2!==e11&&(eS2(),Q2(),ee2(),g2=O2,Y2("change",O2=e11,g2)),eR2(),void(A2||(A2=!0,Y2("settle")));if(c2.pause(),eE2(),S2){let e12=ei2(),t4=Math.floor((r2-N2[0].pos)/e12),n3=z2+t4*e12;z2=[n3+e12,n3,n3-e12].reduce(function(e13,t5){return Math.abs(t5-r2)<Math.abs(e13-r2)?t5:e13})}!1!==n2&&a(o3)?c2.spring(o3).from({pos:C2}).to({pos:z2}).start():(C2=z2,J2(),eR2(),A2||(A2=!0,Y2("settle")))}function eR2(){let e11;if(!x2||!M2)return;let t3=N2[O2],n2=function(e12){let t4=en2(),n3=ei2(),o4=eo2();if(!M2)return[];let i4=[];if(!n3||!o4)return[];e12=void 0===e12?C2:e12,S2&&(e12-=Math.floor(e12/n3)*n3);let a2=0,l2=0;if(L2){let e13=M2.getBoundingClientRect();a2=e13.left,l2=e13.right-e13.width}let r2=0;for(let s2 of D2){let c3=(t5=0)=>{!(i4.indexOf(s2)>-1)&&(s2.pos=r2-e12+t5||0,s2.offset+t5>e12-s2.dim-a2+.51&&s2.offset+t5<e12+o4+l2-.51&&i4.push(s2))};if(s2.offset=r2,S2)for(let e13=-1;e13<=1;e13++)c3(n3*e13);else c3();r2+=s2.dim+t4}return i4}(),o3=new Set,i3=new Set;for(let a2 of n2){let n3=eu2(a2);if(!n3)continue;o3.add(n3);let l2=t3?.slides?.indexOf(a2)>-1;l2&&i3.add(n3);let r2=a2.pos?Math.round(1e4*a2.pos)/1e4:0,s2=R2?0:T2?-1*r2:r2,c3=R2?r2:0,u2=p(s2,0,a2.dim,0,100),d3=p(c3,0,a2.dim,0,100),f2=E2.setTransform||void 0;if(f2 instanceof Function?f2(eC2,a2,{x:s2,y:c3,xPercent:u2,yPercent:d3}):n3.style.transform=s2||c3?`translate3d(${u2}%, ${d3}%,0)`:"",B2("adaptiveHeight")&&l2){let t4=(n3.firstElementChild||n3).getBoundingClientRect().height;e11=null==e11?t4:Math.max(e11,t4)}}[...er(M2,`.${E2.classes.slide}`)].forEach(e12=>{let t4=parseInt(e12.getAttribute("index")||"-1"),n3=F2[t4];n3||e12.remove(),ec(e12,E2.classes.isSelected,i3.has(e12)),H2.has(t4)||o3.has(e12)||eg2(n3)}),M2&&e11&&(M2.style.height=`${e11}px`),j2=[...n2],Y2("render",n2)}function eP2(){for(let e11 of(x2?.removeEventListener("click",ex2),eE2(),document.removeEventListener("mousemove",U2),d2?.disconnect(),d2=void 0,F2))e11.el&&r(e11.el)&&(e11.state=void 0,eM2(e11),eL2(e11),eg2(e11),e11.isVirtual?(e11.el?.remove(),e11.el=void 0):(e11.el.style.transform="",M2?.appendChild(e11.el)));for(let e11 of Object.values(w2))e11?.destroy();for(let e11 of(w2={},i2?.destroy(),i2=void 0,c2?.destroy(),c2=void 0,Object.values(E2.classes||{})))es(x2,e11);es(M2,"is-draggable")}let eC2={add:function(e11,t3){for(let n2 of ea2(e11,t3))Y2("addSlide",n2);return K2($3),ey2(),eR2(),eC2},canGoPrev:function(){return S2||O2>0},canGoNext:function(){return S2||O2<N2.length-1},destroy:function(){return Y2("destroy"),window.removeEventListener("resize",X2),eP2(),Z2.clear(),x2=null,N2=[],F2=[],E2={...em},w2={},D2=[],v2="",$3="*",y2=ef.Destroyed,eC2},emit:Y2,filter:function(e11="*"){return K2(e11),ey2(),eR2(),Y2("filter",e11),eC2},getContainer:function(){return x2},getGapDim:en2,getGestures:function(){return i2},getLastMouseMove:function(){return n},getOptions:function(){return E2},getPage:function(){return N2[O2]},getPageIndex:function(e11){if(void 0!==e11){for(let t3 of N2||[])for(let n2 of t3.slides)if(n2.index===e11)return t3.index;return-1}return O2},getPageProgress:function(e11,t3){void 0===e11&&(e11=O2);let n2=N2[e11];if(!n2)return e11>O2?-1:1;let o3=n2.pos,i3=en2(),a2=eC2.getPosition(),l2=ei2();if(S2&&!0!==t3){let t4=o3+l2*Math.floor((a2-N2[0].pos)/l2);o3=[t4+l2,t4,t4-l2].reduce(function(e13,t5){return Math.abs(t5-a2)<Math.abs(e13-a2)?t5:e13})}return(a2-o3)/(n2.dim+i3)},getPageVisibility:function(e11){void 0===e11&&(e11=O2);let t3=N2[e11];if(!t3)return e11>O2?-1:1;let n2=eC2.getPosition(),o3=eo2(),i3=t3.pos;if(S2){let e12=eC2.getPosition(),t4=ei2(),n3=i3+Math.floor((e12-N2[0].pos)/t4)*t4;i3=[n3+t4,n3,n3-t4].reduce(function(t5,n4){return Math.abs(n4-e12)<Math.abs(t5-e12)?n4:t5})}return i3>n2&&i3+t3.dim<n2+o3?1:i3<n2?(i3+t3.dim-n2)/t3.dim:i3+t3.dim>n2+o3?(n2+o3-i3)/t3.dim:0},getPages:function(){return N2},getPlugins:function(){return w2},getPosition:function(e11){let t3=C2;if(S2&&!0!==e11){let e12=ei2();t3-=Math.floor((C2-N2[0]?.pos||0)/e12)*e12}return t3},getSlides:function(){return F2},getState:function(){return y2},getTotalSlideDim:ei2,getTween:function(){return c2},getViewport:function(){return M2},getViewportDim:eo2,goTo:eT2,hasNavigated:function(){return void 0!==g2},hideError:eL2,hideLoading:eM2,init:function(){if(!e10||!r(e10))throw Error("No Element found");return y2!==ef.Init&&(eP2(),y2=ef.Init),x2=e10,b2=t2,window.removeEventListener("resize",X2),b2.breakpoints&&window.addEventListener("resize",X2),X2(),eC2},isInfinite:function(){return S2},isInTransition:function(){return H2.size>0},isRTL:function(){return T2},isSettled:function(){return A2},localize:function(e11,t3=[]){return W2(e11,t3)},next:function(e11={}){return eT2(O2+1,e11),eC2},off:function(e11,t3){for(let n2 of e11 instanceof Array?e11:[e11])Z2.has(n2)&&Z2.set(n2,Z2.get(n2).filter(e12=>e12!==t3));return eC2},on:function(e11,t3){for(let n2 of e11 instanceof Array?e11:[e11])Z2.set(n2,[...Z2.get(n2)||[],t3]);return eC2},prev:function(e11={}){return eT2(O2-1,e11),eC2},remove:function(e11){void 0===e11&&(e11=F2.length-1);let t3=F2[e11];return t3&&(Y2("removeSlide",t3),t3.el&&(eb2(t3.el),t3.el.remove(),t3.el=void 0),F2.splice(e11,1),K2($3),ey2(),eR2()),eC2},setPosition:function(e11){C2=e11,J2(),eR2()},showError:function(e11,t3){eM2(e11),eL2(e11);let n2=e11.el;if(n2){let o3=document.createElement("div");h(o3,"f-html"),h(o3,"is-error"),o3.innerHTML=W2(t3||"<p>{{ERROR}}</p>"),e11.htmlEl=o3,h(n2,"has-html"),h(n2,"has-error"),n2.insertAdjacentElement("afterbegin",o3),Y2("contentReady",e11)}return eC2},showLoading:function(e11){let t3=e11.el,n2=t3?.querySelector(".f-spinner");if(!t3||n2)return eC2;let o3=s(B2("spinnerTpl"));return o3&&(h(o3,"f-spinner"),h(t3,"is-loading"),t3.insertAdjacentElement("beforeend",o3)),eC2},version:"6.0.12"};return eC2};eh.l10n={en_EN:eu},eh.getDefaults=()=>em;let ev=function(e10="",t2="",n2=""){return e10.split(t2).join(n2)},ey={tpl:e10=>`<img class="f-panzoom__content" \n    ${e10.srcset?'data-lazy-srcset="{{srcset}}"':""} \n    ${e10.sizes?'data-lazy-sizes="{{sizes}}"':""} \n    data-lazy-src="{{src}}" alt="{{alt}}" />`},eb=()=>{let e10;function t2(t3,n3){let o3=e10?.getOptions().Zoomable,i3=(a(o3)?{...ey,...o3}:ey)[t3];return i3&&"function"==typeof i3&&n3?i3(n3):i3}function n2(){e10&&(e10.on("addSlide",r2),e10.on("removeSlide",s2),e10.on("attachSlideEl",c2),e10.on("click",i2),e10.on("change",o2))}function o2(){u2()}function i2(e11,t3){let n3=t3.target;n3&&!t3.defaultPrevented&&n3.dataset.panzoomAction&&d2(n3.dataset.panzoomAction)}function r2(n3,o3){if(!e10)return;let i3=o3.el;if(!i3)return;let a2=o3.src||o3.lazySrc||"",r3=o3.srcset||o3.lazySrcset||"",s3=o3.sizes||o3.lazySizes||"";if(a2&&l(a2)&&!o3.html&&(!o3.type||"image"===o3.type)){o3.type="image";let e11=t2("tpl",o3);e11=ev(e11,"{{src}}",a2+""),e11=ev(e11,"{{srcset}}",r3+""),e11=ev(e11,"{{sizes}}",s3+""),e11=ev(e11,"{{alt}}",`${o3.alt||o3.caption||`Image #${o3.index}`}`),i3.insertAdjacentHTML("afterbegin",e11)}if(!i3.querySelector(".f-panzoom__content"))return;let c3=el(i3,{width:o3.width&&"auto"!==o3.width?parseFloat(o3.width+""):"auto",height:o3.height&&"auto"!==o3.height?parseFloat(o3.height+""):"auto",event:()=>e10?.getLastMouseMove(),classes:{container:"f-zoomable"},...t2("Panzoom")});c3.on("*",(t3,n4,...i4)=>{e10&&("loading"===n4&&(o3.state=0),"loaded"===n4&&(o3.state=1),"error"===n4&&(o3.state=2,e10?.showError(o3,"{{IMAGE_ERROR}}")),e10.emit(`panzoom:${n4}`,o3,...i4),"ready"===n4&&e10.emit("contentReady",o3),o3.index===e10.getPageIndex()&&u2())}),o3.panzoomRef=c3}function s2(e11,t3){t3.panzoomRef&&(t3.panzoomRef.destroy(),t3.panzoomRef=void 0)}function c2(e11,t3){let n3=t3.panzoomRef;if(n3)switch(n3.getState()){case et.Init:n3.init();break;case et.Ready:n3.execute(J.Reset,{velocity:0})}}function u2(){let t3=e10?.getContainer();if(!t3)return;let n3=e10?.getPage()?.slides[0].panzoomRef,o3=n3?.canZoomIn()||!1,i3=n3?.canZoomOut()||!1,a2=n3?.isFullsize()||!1,l2=!n3||n3?.getState()!==et.Ready;for(let e11 of t3?.querySelectorAll("[data-panzoom-action]")||[]){let t4=e11.dataset.panzoomAction,n4=!1;if(l2)n4=!0;else switch(t4){case J.ZoomIn:o3||(n4=!0);break;case J.ZoomOut:i3||(n4=!0);break;case J.ToggleFull:o3||i3||(n4=!0);let r3=e11.querySelector("g");r3&&(r3.style.display=a2?"none":"");break;case J.ToggleCover:case J.ToggleMax:o3||i3||(n4=!0)}n4?(e11.setAttribute("aria-disabled",""),e11.setAttribute("tabindex","-1")):(e11.removeAttribute("aria-disabled"),e11.removeAttribute("tabindex"))}}function d2(t3,...n3){e10?.getPage().slides[0].panzoomRef?.execute(t3,...n3)}return{init:function(t3){!1!==(e10=t3).getOptions().Zoomable&&e10.on("initPlugins",n2)},destroy:function(){if(e10)for(let t3 of(e10.off("addSlide",r2),e10.off("removeSlide",s2),e10.off("attachSlideEl",c2),e10.off("change",o2),e10.getSlides()))s2(0,t3);e10=void 0},execute:d2}},eE={syncOnChange:!1,syncOnClick:!0,syncOnHover:!1},ew=()=>{let e10,t2;function n2(){let t3=e10?.getOptions().Sync;return a(t3)?{...eE,...t3}:eE}function o2(){let o3=n2().target;e10&&o3&&e10&&o3&&(t2=o3,e10.getOptions().classes={...e10.getOptions().classes,isSelected:""},e10.getOptions().initialSlide=t2.getPage()?.slides[0]?.index||0,n2().syncOnChange&&e10.on("change",l2),n2().syncOnClick&&e10.on("click",s2),n2().syncOnHover&&e10.getViewport()?.addEventListener("mouseover",c2),e10&&t2&&(e10.on("ready",i2),e10.on("refresh",u2),t2.on("change",r2),t2.on("filter",d2)))}function i2(){f2()}function l2(){if(e10&&t2){let n3=e10.getPage()?.slides||[],o3=t2.getPageIndex(n3[0].index||0);o3>-1&&t2.goTo(o3,e10.hasNavigated()?void 0:{tween:!1,transition:!1}),f2()}}function r2(){if(e10&&t2){let n3=e10.getPageIndex(t2.getPage()?.slides[0].index||0);n3>-1&&e10.goTo(n3,t2.hasNavigated()?void 0:{tween:!1,transition:!1}),f2()}}function s2(n3,o3){if(!e10||!t2||e10.getTween()?.isRunning())return;let i3=e10?.getOptions().classes.slide;if(!i3)return;let a2=i3?o3.target.closest(`.${i3}`):null;if(a2){let e11=parseInt(a2.getAttribute("index")||"")||0,n4=t2.getPageIndex(e11);t2.goTo(n4)}}function c2(t3){e10&&s2(0,t3)}function u2(){if(e10&&t2){let n3=e10.getPageIndex(t2.getPage()?.slides[0].index||0);n3>-1&&e10.goTo(n3,{tween:!1,transition:!1}),f2()}}function d2(n3,o3){e10&&t2&&(e10.filter(o3),r2())}function f2(){if(!t2)return;let n3=t2.getPage()?.slides[0]?.index||0;for(let t3 of e10?.getSlides()||[])t3.el?.classList.toggle("is-selected",t3.index===n3)}return{init:function(t3){(e10=t3).on("initSlides",o2)},destroy:function(){e10?.off("ready",i2),e10?.off("refresh",u2),e10?.off("change",l2),e10?.off("click",s2),e10?.getViewport()?.removeEventListener("mouseover",c2),t2?.off("change",r2),t2?.off("filter",d2),t2=void 0,e10?.off("initSlides",o2),e10=void 0},getTarget:function(){return t2}}},ex={showLoading:!0,preload:1},eM="is-lazyloading",eL="is-lazyloaded",eS=()=>{let e10;function t2(){let t3=e10?.getOptions().Lazyload;return a(t3)?{...ex,...t3}:ex}function n2(n3){let o3=n3.el;if(!o3)return;let i3="[data-lazy-src],[data-lazy-srcset],[data-lazy-bg]",a2=Array.from(o3.querySelectorAll(i3));for(let l2 of(o3.matches(i3)&&a2.push(o3),a2)){let o4=l2.dataset.lazySrc,i4=l2.dataset.lazySrcset,a3=l2.dataset.lazySizes,r2=l2.dataset.lazyBg,s2=(l2 instanceof HTMLImageElement||l2 instanceof HTMLSourceElement)&&(o4||i4),c2=l2 instanceof HTMLElement&&r2;if(!s2&&!c2)continue;let u2=o4||i4||r2;u2&&(s2&&u2?(t2().showLoading&&e10?.showLoading(n3),l2.addEventListener("load",()=>{e10?.hideLoading(n3),l2 instanceof HTMLImageElement?l2.decode().then(()=>{l2.classList.remove(eM),l2.classList.add(eL)}):(l2.classList.remove(eM),l2.classList.add(eL)),e10?.emit("lazyLoad:loaded",n3,l2,u2)}),l2.addEventListener("error",()=>{e10?.hideLoading(n3),l2.classList.remove(eM),l2.classList.add("has-lazyerror"),e10?.emit("lazyLoad:error",n3,l2,u2)}),l2.classList.add("f-lazyload"),l2.classList.add(eM),e10?.emit("lazyLoad:load",n3,l2,u2),o4&&(l2.src=o4),i4&&(l2.srcset=i4),a3&&(l2.sizes=a3)):c2&&(document.body.contains(l2)||(document.createElement("img").src=r2),l2.style.backgroundImage=`url('${r2}')`),delete l2.dataset.lazySrc,delete l2.dataset.lazySrcset,delete l2.dataset.lazySizes)}}function o2(){if(!e10)return;let o3=t2().preload,i3=e10.getPages(),a2=i3.length,l2=e10.getPageIndex();for(let e11=l2-o3;e11<=l2+o3;e11++){let t3=(e11%a2+a2)%a2;for(let e12 of i3[t3]?.slides||[])n2(e12)}}function i2(e11,t3){n2(t3)}return{init:function(t3){(e10=t3).on(["ready","change"],o2),e10.on("attachSlideEl",i2)},destroy:function(){e10?.off(["ready","change"],o2),e10?.off("attachSlideEl",i2),e10=void 0}}},eT={prevTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M15 3l-9 9 9 9"></path></svg>',nextTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M9 3l9 9-9 9"></path></svg>'},eR=()=>{let e10,t2,n2;function o2(t3){if(!e10)return;let n3=`<button data-carousel-go-${t3} tabindex="0" class="f-button is-arrow is-${t3}" title="{{${t3.toUpperCase()}}}">`+function(){let t4=e10?.getOptions().Arrows;return a(t4)?{...eT,...t4}:eT}()[`${t3}Tpl`]+"</button";return s(e10.localize(n3))||void 0}function i2(){t2?.remove(),t2=void 0,n2?.remove(),n2=void 0,e10?.getContainer()?.classList.remove("has-arrows")}function l2(){e10&&!1!==e10.getOptions().Arrows&&e10.getPages().length>1?(function(){if(!e10)return;let i3=e10.getViewport();i3&&(!t2&&(t2=o2("prev"))&&i3.insertAdjacentElement("beforebegin",t2),!n2&&(n2=o2("next"))&&i3.insertAdjacentElement("afterend",n2),ec(e10.getContainer(),"has-arrows",!(!t2&&!n2)))}(),e10&&(t2?.toggleAttribute("aria-disabled",!e10.canGoPrev()),n2?.toggleAttribute("aria-disabled",!e10.canGoNext()))):i2()}return{init:function(t3){e10=t3.on(["change","refresh"],l2)},destroy:function(){i2(),e10?.off(["change","refresh"],l2),e10=void 0}}},eP={moveLeft:{tpl:'<button data-panzoom-action="moveLeft" class="f-button" title="{{MOVE_LEFT}}"><svg><path d="M5 12h14M5 12l6 6M5 12l6-6"/></svg></button>'},moveRight:{tpl:'<button data-panzoom-action="moveRight" class="f-button" title="{{MOVE_RIGHT}}"><svg><path d="M5 12h14M13 18l6-6M13 6l6 6"/></svg></button>'},moveUp:{tpl:'<button data-panzoom-action="moveUp" class="f-button" title="{{MOVE_UP}}"><svg><path d="M12 5v14M18 11l-6-6M6 11l6-6"/></svg></button>'},moveDown:{tpl:'<button data-panzoom-action="moveDown" class="f-button" title="{{MOVE_DOWN}}"><svg><path d="M12 5v14M18 13l-6 6M6 13l6 6"/></svg></button>'},zoomIn:{tpl:'<button data-panzoom-action="zoomIn" class="f-button" title="{{ZOOM_IN}}"><svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M11 8v6M8 11h6"/></svg></button>'},zoomOut:{tpl:'<button data-panzoom-action="zoomOut" class="f-button" title="{{ZOOM_OUT}}"><svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg></button>'},toggle1to1:{tpl:'<button data-panzoom-action="toggleFull" class="f-button" title="{{TOGGLE_FULL}}"><svg><path d="M3.51 3.07c5.74.02 11.48-.02 17.22.02 1.37.1 2.34 1.64 2.18 3.13 0 4.08.02 8.16 0 12.23-.1 1.54-1.47 2.64-2.79 2.46-5.61-.01-11.24.02-16.86-.01-1.36-.12-2.33-1.65-2.17-3.14 0-4.07-.02-8.16 0-12.23.1-1.36 1.22-2.48 2.42-2.46Z"/><path d="M5.65 8.54h1.49v6.92m8.94-6.92h1.49v6.92M11.5 9.4v.02m0 5.18v0"/></svg></button>'},toggleFull:{tpl:'<button data-panzoom-action="toggleFull" class="f-button" title="{{TOGGLE_FULL}}"><svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg></button>'},rotateCCW:{tpl:'<button data-panzoom-action="rotateCCW" class="f-button" title="{{ROTATE_CCW}}"><svg><path d="M15 4.55a8 8 0 0 0-6 14.9M9 15v5H4M18.37 7.16v.01M13 19.94v.01M16.84 18.37v.01M19.37 15.1v.01M19.94 11v.01"/></svg></button>'},rotateCW:{tpl:'<button data-panzoom-action="rotateCW" class="f-button" title="{{ROTATE_CW}}"><svg><path d="M9 4.55a8 8 0 0 1 6 14.9M15 15v5h5M5.63 7.16v.01M4.06 11v.01M4.63 15.1v.01M7.16 18.37v.01M11 19.94v.01"/></svg></button>'},flipX:{tpl:'<button data-panzoom-action="flipX" class="f-button" title="{{FLIP_X}}"><svg><path d="M12 3v18M16 7v10h5L16 7M8 7v10H3L8 7"/></svg></button>'},flipY:{tpl:'<button data-panzoom-action="flipY" class="f-button" title="{{FLIP_Y}}"><svg><path d="M3 12h18M7 16h10L7 21v-5M7 8h10L7 3v5"/></svg></button>'},reset:{tpl:'<button data-panzoom-action="reset" class="f-button" title="{{RESET}}"><svg><path d="M20 11A8.1 8.1 0 0 0 4.5 9M4 5v4h4M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"/></svg></button>'}},eC=((A={}).Left="left",A.middle="middle",A.right="right",A),eA={counter:{tpl:'<div class="f-carousel__counter"><span data-carousel-page></span>/<span data-carousel-pages></span></div>'},download:{tpl:'<button data-carousel-download class="f-button" title="{{DOWNLOAD}}"><svg><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2M7 11l5 5 5-5M12 4v12"/></svg></button>'},autoplay:{tpl:'<button data-autoplay-action="toggle" class="f-button" title="{{TOGGLE_AUTOPLAY}}"><svg><g><path d="M5 3.5 19 12 5 20.5Z"/></g><g><path d="M8 4v15M17 4v15"/></g></svg></button>'},thumbs:{tpl:'<button data-thumbs-action="toggle" class="f-button" title="{{TOGGLE_THUMBS}}"><svg><rect width="18" height="14" x="3" y="3" rx="2"/><path d="M4 21h1M9 21h1M14 21h1M19 21h1"/></svg></button>'},...eP},eO={absolute:!1,display:{left:[],middle:["zoomIn","zoomOut","toggle1to1","rotateCCW","rotateCW","flipX","flipY","reset"],right:[]},enabled:"auto",items:{}},ez=()=>{let e10,t2;function n2(){let t3=e10?.getOptions().Toolbar;return a(t3)?{...eO,...t3}:eO}function o2(){if(!e10?.getOptions().Toolbar||!e10||t2)return;let o3=n2().enabled;if(!o3)return;let i2=n2().absolute,a2=e10.getSlides().length>1,r2=!1,c2=!1;for(let t3 of e10.getSlides())t3.panzoomRef&&(r2=!0),(t3.downloadSrc||"image"===t3.type&&t3.src)&&(c2=!0);let u2=e10.getPlugins().Thumbs?.isEnabled()||!1,d2=a2&&e10.getPlugins().Autoplay||!1,g2=e10.getPlugins().Fullscreen&&(document.fullscreenEnabled||document.webkitFullscreenEnabled);if("auto"===o3&&(o3=r2),!o3)return;(t2=document.createElement("div")).classList.add("f-carousel__toolbar");let m2=n2().display,p2=f({},eA,n2().items);for(let n3 of["left","middle","right"]){let o4=m2[n3]||[],i3=document.createElement("div");for(let t3 of(i3.classList.add("f-carousel__toolbar__column"),i3.classList.add(`is-${n3}`),o4)){let n4;if(l(t3)){if("counter"===t3&&!a2||"autoplay"===t3&&!d2||eP[t3]&&!r2||"fullscreen"===t3&&!g2||"thumbs"===t3&&!u2||"download"===t3&&!c2)continue;n4=p2[t3]}if("object"==typeof t3&&(n4=t3),n4&&n4.tpl){let t4=e10.localize(n4.tpl),o5=s(t4=t4.split("<svg>").join('<svg tabindex="-1" width="24" height="24" viewBox="0 0 24 24">'));o5&&("function"==typeof n4.click&&e10&&o5.addEventListener("click",t5=>{t5.preventDefault(),t5.stopPropagation(),"function"==typeof n4.click&&e10&&n4.click(e10,t5)}),i3.append(o5))}}t2.append(i3)}t2.childElementCount&&(!0===i2&&t2.classList.add("is-absolute"),e10.getContainer()?.classList.add("has-toolbar"),e10.getViewport()?.insertAdjacentElement("beforebegin",t2))}return{init:function(t3){(e10=t3).on("initSlides",o2)},destroy:function(){e10?.off("initSlides",o2),e10?.getContainer()?.classList.remove("has-toolbar"),t2?.remove(),t2=void 0},add:function(e11,t3){eA[e11]=t3},isEnabled:function(){return!!t2}}},ek={autoStart:!0,pauseOnHover:!0,showProgressbar:!0,timeout:2e3},eI=()=>{let e10,t2,n2=!1,o2=!1,i2=!1,l2=null;function r2(t3){let n3=e10?.getOptions().Autoplay,o3=(a(n3)?{...ek,...n3}:ek)[t3];return o3&&"function"==typeof o3&&e10?o3(e10):o3}function s2(){for(let t3 of e10?.getPage()?.slides||[])if(0===t3.state)return!0;return!1}function c2(){clearTimeout(t2),t2=void 0}function u2(){!(t2||i2||s2())&&e10?.isSettled()&&(function(){if(!e10||(g2(),!r2("showProgressbar")))return;let t3=r2("progressbarParentEl");if(!t3&&e10.getPlugins().Toolbar?.isEnabled()&&(t3=e10.getContainer()),!t3&&!0!==e10.getPlugins().Toolbar?.isEnabled()){let n4=e10.getPages()[0]?.slides||[],o3=e10.getPage()?.slides||[];1===n4.length&&1===o3.length&&(t3=o3[0].el)}if(t3||(t3=e10.getViewport()),!t3)return;(l2=document.createElement("div")).classList.add("f-progressbar"),t3.prepend(l2);let n3=r2("timeout")||1e3;l2.style.animationDuration=`${n3}ms`}(),t2=setTimeout(()=>{if(e10&&n2&&!o2){if(!e10.isInfinite()&&e10.getPageIndex()===e10.getPages().length-1)return void e10.goTo(0);e10.next()}},r2("timeout")))}function d2(){if(!e10||e10.getPages().length<2||!1===e10.getOptions().Autoplay||n2)return;n2=!0,e10.emit("autoplay:start",r2("timeout")),e10.getContainer()?.classList.add("has-autoplay"),e10.getTween()?.on("start",b2);let t3=e10?.getContainer();t3&&r2("pauseOnHover")&&matchMedia("(hover: hover)").matches&&(t3.addEventListener("mouseenter",E2,!1),t3.addEventListener("mouseleave",w2,!1)),e10.on("change",v2),e10.on("settle",y2),e10.on("contentReady",p2),e10.on("panzoom:animationStart",f2),e10.isSettled()&&u2()}function f2(){if(c2(),g2(),n2&&e10){e10.emit("autoplay:end"),e10.getContainer()?.classList.remove("has-autoplay"),e10.getTween()?.off("start",b2);let t3=e10?.getContainer();t3&&(t3.removeEventListener("mouseenter",E2,!1),t3.removeEventListener("mouseleave",w2,!1))}e10&&(e10.off("change",v2),e10.off("settle",y2),e10.off("contentReady",p2),e10.off("panzoom:animationStart",f2)),n2=!1,o2=!1}function g2(){l2&&(l2.remove(),l2=null)}function m2(){e10&&e10.getPages().length>1&&r2("autoStart")&&d2()}function p2(t3){e10&&e10.getPageIndex(t3.index)===e10.getPageIndex()&&(!n2||i2||s2()||u2())}function h2(e11,t3){let n3=t3.target;n3&&!t3.defaultPrevented&&"toggle"===n3.dataset.autoplayAction&&x2.toggle()}function v2(){e10&&(e10?.isInfinite()||e10.getPageIndex()!==e10.getPages().length-1)?(g2(),c2()):f2()}function y2(){!n2||i2||o2||u2()}function b2(){c2(),g2()}function E2(){i2=!0,n2&&(g2(),c2())}function w2(){i2=!1,n2&&!o2&&e10?.isSettled()&&u2()}let x2={init:function(t3){(e10=t3).on("ready",m2),e10.on("click",h2)},destroy:function(){f2(),e10?.off("ready",m2),e10?.off("click",h2),e10=void 0},isEnabled:()=>n2,pause:function(){o2=!0,c2()},resume:function(){o2=!1,n2&&!i2&&u2()},start(){d2()},stop(){f2()},toggle(){n2?f2():d2()}};return x2},e$={Carousel:{Lazyload:{showLoading:!1}},minCount:2,showOnStart:!0,thumbTpl:'<button aria-label="Slide to #{{page}}"><img draggable="false" alt="{{alt}}" data-lazy-src="{{src}}" /></button>',type:"modern"},eF=()=>{let e10,t2,n2,i2=0,l2=0,r2=!0;function s2(t3){let n3=e10?.getOptions().Thumbs,o2=(a(n3)?{...e$,...n3}:e$)[t3];return o2&&"function"==typeof o2?o2():o2}function c2(){if(!e10||!1===e10?.getOptions().Thumbs)return!1;let t3=0;for(let n3 of e10.getSlides())n3.thumbSrc&&t3++;return t3>=s2("minCount")}function u2(){return"modern"===s2("type")}function d2(t3=!1){let o2=e10?.getContainer();if(e10&&o2&&!n2&&c2()){if(!n2){let e11=o2.nextElementSibling;e11?.classList.contains("f-thumbs")&&(n2=e11)}if(!n2){(n2=document.createElement("div")).classList.add("f-thumbs");let e11=s2("parentEl");e11?e11.insertAdjacentElement("beforeend",n2):o2.insertAdjacentElement("afterend",n2)}n2.classList.add(`is-${s2("type")}`),n2.classList.add("is-syncing"),t3&&(n2.style.maxHeight="0px")}}function g2(){if(!o||!e10||!n2||t2)return;let a2=[];for(let t3 of e10.getSlides()){let e11=t3.thumb?t3.thumb instanceof HTMLImageElement?t3.thumb.src:t3.thumb:t3.thumbSrc||void 0,n3=s2("thumbTpl");n3=ev(n3,"{{alt}}",`Thumbnail #${t3.index}`),n3=ev(n3,"{{src}}",e11+""),n3=ev(n3,"{{index}}",`${t3.index}`),n3=ev(n3,"{{page}}",`${t3.index||1}`),a2.push({html:n3,class:t3.thumbClass})}a2.length&&(t2=o(n2,f({},{Sync:{target:e10},Lazyload:{preload:1},slides:a2,classes:{container:"f-thumbs",viewport:"f-thumbs__viewport",slide:"f-thumbs__slide"},initialSlide:e10.getOptions().initialPage,center:!0,fill:!u2(),infinite:!1,dragFree:!0,rtl:e10.getOptions().rtl||!1,slidesPerPage:e11=>{let t3=0;return u2()&&(function(){if(!u2()||!n2)return;let e12=e13=>n2&&parseFloat(getComputedStyle(n2).getPropertyValue("--f-thumb-"+e13))||0;i2=e12("width"),l2=e12("clip-width")}(),t3=4*(i2-l2)),e11&&e11.getTotalSlideDim()<=e11.getViewportDim()-t3?1/0:1}},e$.Carousel||{},s2("Carousel")||{}),{Sync:ew,Lazyload:eS}).init(),t2.getGestures()?.on("start",()=>{r2=!1}),t2.on("click",(e11,t3)=>{let n3=t3.target;if(n3){let e12=n3.matches("button")?n3:n3.firstElementChild;e12&&e12.matches("button")&&e12.focus({})}}),e10.getContainer()?.classList.add("has-thumbs"),E2())}function p2(){c2()&&(e10?.getGestures()?.on("start",h2),s2("showOnStart")&&(d2(),g2()))}function h2(){r2=!0,document.activeElement?.closest(".f-thumbs")&&document.activeElement?.blur()}function v2(){n2?.classList.toggle("is-syncing",!1===e10?.hasNavigated()||e10?.getTween()?.isRunning()),E2(),e10?.getGestures()?.isPointerDown()&&function(){if(!(u2()&&e10&&t2&&r2))return;let n3=t2.getTween(),o2=t2.getPages(),a2=e10.getPageIndex()||0,s3=e10.getPageProgress()||0;if(!(e10&&o2&&o2[a2]&&n3))return;let c3=n3.isRunning()?n3.getCurrentValues().pos:t2.getPosition();if(void 0===c3)return;let d3=o2[a2].pos+s3*(i2-l2);d3=m(o2[0].pos,d3,o2[o2.length-1].pos),n3.from({pos:c3}).to({pos:d3}).start()}()}function y2(){r2=!0}function b2(e11,t3){let o2=t3.target;o2&&!t3.defaultPrevented&&"toggle"===o2.dataset.thumbsAction&&(n2||(d2(!0),g2()),n2&&(n2.style.maxHeight?n2.style.maxHeight="":n2.style.maxHeight="0px"))}function E2(){if(!u2()||!e10||!t2)return;let n3=t2?.getSlides()||[],o2=-.5*i2;for(let t3 of n3){let n4=t3.el;if(!n4)continue;let a2=e10.getPageProgress(t3.index)||0;(a2=Math.max(-1,Math.min(1,a2)))>-1&&a2<1&&(o2+=.5*i2*(1-Math.abs(a2))),a2=Math.round(1e4*a2)/1e4,o2=Math.round(1e4*o2)/1e4,n4.style.setProperty("--progress",`${Math.abs(a2)}`),n4.style.setProperty("--shift",`${e10?.isRTL()?-1*o2:o2}px`),a2>-1&&a2<1&&(o2+=.5*i2*(1-Math.abs(a2)))}}return{init:function(t3,n3){o=n3,(e10=t3).on("ready",p2),e10.on("render",v2),e10.on("change",y2),e10.on("click",b2)},destroy:function(){e10?.off("ready",p2),e10?.off("render",v2),e10?.off("change",y2),e10?.off("click",b2),e10?.getGestures()?.off("start",h2),e10?.getContainer()?.classList.remove("has-thumbs"),e10=void 0,t2?.destroy(),t2=void 0,n2?.remove(),n2=void 0},getContainer:function(){return n2},isEnabled:function(){return c2()}}},e_={iframeAttr:{allow:"autoplay; fullscreen",scrolling:"auto"}},eD=()=>{let e10;function t2(e11,t3){let n3=t3.src;if(!l(n3))return;let o3=t3.type;if(!o3){if(!o3&&("#"===n3.charAt(0)?o3="inline":n3.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.((a)?png|avif|gif|jp(g|eg)|pjp(eg)?|jfif|svg|webp|bmp|ico|tif(f)?)((\?|#).*)?$)/i)?o3="image":n3.match(/\.(pdf)((\?|#).*)?$/i)?o3="pdf":n3.match(/\.(html|php)((\?|#).*)?$/i)&&(o3="iframe")),!o3){let e12=n3.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:(?:(?:maps\/(?:place\/(?:.*)\/)?\@(.*),(\d+.?\d+?)z))|(?:\?ll=))(.*)?/i);e12&&(n3=`https://maps.google.${e12[1]}/?ll=${(e12[2]?e12[2]+"&z="+Math.floor(parseFloat(e12[3]))+(e12[4]?e12[4].replace(/^\//,"&"):""):e12[4]+"").replace(/\?/,"&")}&output=${e12[4]&&e12[4].indexOf("layer=c")>0?"svembed":"embed"}`,o3="gmap")}if(!o3){let e12=n3.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:maps\/search\/)(.*)/i);e12&&(n3=`https://maps.google.${e12[1]}/maps?q=${e12[2].replace("query=","q=").replace("api=1","")}&output=embed`,o3="gmap")}t3.src=n3,t3.type=o3}}function n2(t3,n3){("iframe"===n3.type||"pdf"===n3.type||"gmap"===n3.type)&&function(t4){if(!e10||!t4.el||!t4.src)return;let n4=document.createElement("iframe");for(let[t5,o4]of(n4.classList.add("f-iframe"),Object.entries(function(){let t6=e10?.getOptions().Html;return a(t6)?{...e_,...t6}:e_}().iframeAttr||{})))n4.setAttribute(t5,o4);n4.onerror=()=>{e10&&1===e10.getState()&&e10.showError(t4,"{{IFRAME_ERROR}}")},n4.src=t4.src;let o3=document.createElement("div");if(o3.classList.add("f-html"),o3.append(n4),t4.width){let e11=`${t4.width}`;e11.match(/^\d+$/)&&(e11+="px"),o3.style.maxWidth=`${e11}`}if(t4.height){let e11=`${t4.height}`;e11.match(/^\d+$/)&&(e11+="px"),o3.style.maxHeight=`${e11}`}if(t4.aspectRatio){let e11=t4.el.getBoundingClientRect();o3.style.aspectRatio=`${t4.aspectRatio}`,o3.style[e11.width>e11.height?"width":"height"]="auto",o3.style[e11.width>e11.height?"maxWidth":"maxHeight"]="none"}t4.contentEl=n4,t4.htmlEl=o3,t4.el.classList.add("has-html"),t4.el.classList.add("has-iframe"),t4.el.classList.add(`has-${t4.type}`),t4.el.prepend(o3),e10.emit("contentReady",t4)}(n3)}function o2(t3,n3){("iframe"===n3.type||"pdf"===n3.type||"gmap"===n3.type)&&(e10?.hideError(n3),n3.contentEl?.remove(),n3.contentEl=void 0,n3.htmlEl?.remove(),n3.htmlEl=void 0)}return{init:function(i2){(e10=i2).on("addSlide",t2),e10.on("attachSlideEl",n2),e10.on("detachSlideEl",o2)},destroy:function(){e10?.off("addSlide",t2),e10?.off("attachSlideEl",n2),e10?.off("detachSlideEl",o2),e10=void 0}}},eH=(e10,t2={})=>{let n2=new URLSearchParams(new URL(e10).search),o2=new URLSearchParams;for(let[e11,i3]of[...n2,...Object.entries(t2)]){let t3=i3+"";if("t"===e11){let e12=t3.match(/((\d*)m)?(\d*)s?/);e12&&o2.set("start",60*parseInt(e12[2]||"0")+parseInt(e12[3]||"0")+"")}else o2.set(e11,t3)}let i2=o2+"",a2=e10.match(/#t=((.*)?\d+s)/);return a2&&(i2+=`#t=${a2[1]}`),i2},ej={autoplay:!1,html5videoTpl:'<video class="f-html5video" playsinline controls controlsList="nodownload" poster="{{poster}}">\n    <source src="{{src}}" type="{{format}}" />Sorry, your browser doesn\'t support embedded videos.</video>',iframeAttr:{allow:"autoplay; fullscreen",scrolling:"auto",credentialless:""},vimeo:{byline:1,color:"00adef",controls:1,dnt:1,muted:0},youtube:{controls:1,enablejsapi:1,nocookie:1,rel:0,fs:1}},eN=()=>{let e10,t2=!1;function n2(){let t3=e10?.getOptions().Video;return a(t3)?{...ej,...t3}:ej}function o2(){return e10?.getPage()?.slides[0]}let i2=t3=>{try{let n3=JSON.parse(t3.data);if("https://player.vimeo.com"===t3.origin){if("ready"===n3.event)for(let n4 of Array.from(e10?.getContainer()?.getElementsByClassName("f-iframe")||[]))n4 instanceof HTMLIFrameElement&&n4.contentWindow===t3.source&&(n4.dataset.ready="true")}else if(t3.origin.match(/^https:\/\/(www.)?youtube(-nocookie)?.com$/)&&"onReady"===n3.event){let e11=document.getElementById(n3.id);e11&&(e11.dataset.ready="true")}}catch(e11){}};function r2(e11,t3){let o3=t3.src;if(!l(o3))return;let i3=t3.type;if(!i3||"html5video"===i3){let e12=o3.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i);e12&&(i3="html5video",t3.html5videoFormat=t3.html5videoFormat||"video/"+("ogv"===e12[1]?"ogg":e12[1]))}if(!i3||"youtube"===i3){let e12=o3.match(/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(?:watch\?(?:.*&)?v=|v\/|u\/|shorts\/|embed\/?)?(videoseries\?list=(?:.*)|[\w-]{11}|\?listType=(?:.*)&list=(?:.*))(?:.*)/i);if(e12){let a2={...n2().youtube,...t3.youtube||{}},l2=`www.youtube${a2.nocookie?"-nocookie":""}.com`,r3=eH(o3,a2),s2=encodeURIComponent(e12[2]);t3.videoId=s2,t3.src=`https://${l2}/embed/${s2}?${r3}`,t3.thumb=t3.thumb||`https://i.ytimg.com/vi/${s2}/mqdefault.jpg`,i3="youtube"}}if(!i3||"vimeo"===i3){let e12=o3.match(/^.+vimeo.com\/(?:\/)?(video\/)?([\d]+)((\/|\?h=)([a-z0-9]+))?(.*)?/);if(e12){let a2=eH(o3,{...n2().vimeo,...t3.vimeo||{}}),l2=encodeURIComponent(e12[2]),r3=e12[5]||"";t3.videoId=l2,t3.src=`https://player.vimeo.com/video/${l2}?${r3?`h=${r3}${a2?"&":""}`:""}${a2}`,i3="vimeo"}}t3.type=i3}function c2(t3,o3){"html5video"===o3.type&&function(t4){if(!e10||!t4.el||!t4.src)return;let{el:o4,src:i3}=t4;if(!o4||!i3)return;let a2=t4.html5videoTpl||n2().html5videoTpl,r3=t4.html5videoFormat||n2().html5videoFormat;if(!a2)return;let c3=t4.poster||(t4.thumb&&l(t4.thumb)?t4.thumb:""),u3=s(a2.replace(/\{\{src\}\}/gi,i3+"").replace(/\{\{format\}\}/gi,r3||"").replace(/\{\{poster\}\}/gi,c3+""));if(!u3)return;let d3=document.createElement("div");d3.classList.add("f-html"),d3.append(u3),t4.contentEl=u3,t4.htmlEl=d3,o4.classList.add(`has-${t4.type}`),o4.prepend(d3),g2(t4),e10.emit("contentReady",t4)}(o3),("youtube"===o3.type||"vimeo"===o3.type)&&function(t4){if(!e10||!t4.el||!t4.src)return;let o4=document.createElement("iframe");for(let[e11,i4]of(o4.classList.add("f-iframe"),o4.setAttribute("id",`f-iframe_${t4.videoId}`),Object.entries(n2().iframeAttr||{})))o4.setAttribute(e11,i4);o4.onload=()=>{e10&&1===e10.getState()&&"youtube"===t4.type&&o4.contentWindow?.postMessage(JSON.stringify({event:"listening",id:o4.getAttribute("id")}),"*")},o4.onerror=()=>{e10&&1===e10.getState()&&e10?.showError(t4,"{{IFRAME_ERROR}}")},o4.src=t4.src;let i3=document.createElement("div");i3.classList.add("f-html"),i3.append(o4),t4.contentEl=o4,t4.htmlEl=i3,t4.el.classList.add("has-html"),t4.el.classList.add("has-iframe"),t4.el.classList.add(`has-${t4.type}`),t4.el.prepend(i3),g2(t4),e10.emit("contentReady",t4)}(o3)}function u2(e11,t3){("html5video"===t3.type||"youtube"===t3.type||"vimeo"===t3.type)&&(t3.contentEl?.remove(),t3.contentEl=void 0,t3.htmlEl?.remove(),t3.htmlEl=void 0),t3.poller&&clearTimeout(t3.poller)}function d2(){t2=!1}function f2(){if(t2)return;t2=!0;let e11=o2();(e11&&void 0!==e11.autoplay?e11.autoplay:n2().autoplay)&&(function(){let e12=o2(),t3=e12?.el;if(t3&&"html5video"===e12?.type)try{let e13=t3.querySelector("video");if(e13){let t4=e13.play();void 0!==t4&&t4.then(()=>{}).catch(t5=>{e13.muted=!0,e13.play()})}}catch(e13){}let n3=e12?.htmlEl;n3 instanceof HTMLIFrameElement&&n3.contentWindow?.postMessage('{"event":"command","func":"stopVideo","args":""}',"*")}(),function(){let e12=o2(),t3=e12?.type;if(!e12?.el||"youtube"!==t3&&"vimeo"!==t3)return;let n3=()=>{if(e12.contentEl&&e12.contentEl instanceof HTMLIFrameElement&&e12.contentEl.contentWindow){let t4;if("true"===e12.contentEl.dataset.ready)return(t4="youtube"===e12.type?{event:"command",func:"playVideo"}:{method:"play",value:"true"})&&e12.contentEl.contentWindow.postMessage(JSON.stringify(t4),"*"),void(e12.poller=void 0);"youtube"===e12.type&&(t4={event:"listening",id:e12.contentEl.getAttribute("id")},e12.contentEl.contentWindow.postMessage(JSON.stringify(t4),"*"))}e12.poller=setTimeout(n3,250)};n3()}())}function g2(e11){let t3=e11?.htmlEl;if(e11&&t3&&("html5video"===e11.type||"youtube"===e11.type||"vimeo"===e11.type)){if(t3.style.aspectRatio="",t3.style.width="",t3.style.height="",t3.style.maxWidth="",t3.style.maxHeight="",e11.width){let n3=`${e11.width}`;n3.match(/^\d+$/)&&(n3+="px"),t3.style.maxWidth=`${n3}`}if(e11.height){let n3=`${e11.height}`;n3.match(/^\d+$/)&&(n3+="px"),t3.style.maxHeight=`${n3}`}if(e11.aspectRatio){let n3=e11.aspectRatio.split("/"),o3=parseFloat(n3[0].trim()),i3=n3[1]?parseFloat(n3[1].trim()):0;t3.offsetHeight;let a2=t3.getBoundingClientRect(),l2=(o3&&i3?o3/i3:o3)<(a2.width||1)/(a2.height||1);t3.style.aspectRatio=`${e11.aspectRatio}`,t3.style.width=l2?"auto":"",t3.style.height=l2?"":"auto"}}}function m2(){g2(o2())}return{init:function(t3){(e10=t3).on("addSlide",r2),e10.on("attachSlideEl",c2),e10.on("detachSlideEl",u2),e10.on("ready",f2),e10.on("change",d2),e10.on("settle",f2),e10.on("refresh",m2),window.addEventListener("message",i2)},destroy:function(){e10?.off("addSlide",r2),e10?.off("attachSlideEl",c2),e10?.off("detachSlideEl",u2),e10?.off("ready",f2),e10?.off("change",d2),e10?.off("settle",f2),e10?.off("refresh",m2),window.removeEventListener("message",i2),e10=void 0}}},eV={autoStart:!1,btnTpl:'<button data-fullscreen-action="toggle" class="f-button" title="{{TOGGLE_FULLSCREEN}}"><svg><g><path d="M8 3H5a2 2 0 0 0-2 2v3M21 8V5a2 2 0 0 0-2-2h-3M3 16v3a2 2 0 0 0 2 2h3M16 21h3a2 2 0 0 0 2-2v-3"/></g><g><path d="M15 19v-2a2 2 0 0 1 2-2h2M15 5v2a2 2 0 0 0 2 2h2M5 15h2a2 2 0 0 1 2 2v2M5 9h2a2 2 0 0 0 2-2V5"/></g></svg></button>'},eq="in-fullscreen-mode",eB=()=>{let e10;function t2(t3){let n3=e10?.getOptions().Fullscreen,o3=(a(n3)?{...eV,...n3}:eV)[t3];return o3&&"function"==typeof o3&&e10?o3(e10):o3}function n2(){e10?.getPlugins().Toolbar?.add("fullscreen",{tpl:t2("btnTpl")})}function o2(){if(t2("autoStart")){let e11=r2();e11&&c2(e11)}}function i2(e11,t3){let n3=t3.target;n3&&!t3.defaultPrevented&&"toggle"===n3.dataset.fullscreenAction&&d2()}function l2(e11){r2()&&"Escape"===e11.key&&!e11.defaultPrevented&&d2()}function r2(){return t2("el")||e10?.getContainer()||void 0}function s2(){let e11=document;return e11.fullscreenEnabled?!!e11.fullscreenElement:!!e11.webkitFullscreenEnabled&&!!e11.webkitFullscreenElement}function c2(e11){let t3,n3=document;return e11||(e11=n3.documentElement),n3.fullscreenEnabled?t3=e11.requestFullscreen():n3.webkitFullscreenEnabled&&(t3=e11.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)),t3&&t3.then(()=>{e11.classList.add(eq)}),t3}function u2(){let e11,t3=document;return t3.fullscreenEnabled?e11=t3.fullscreenElement&&t3.exitFullscreen():t3.webkitFullscreenEnabled&&(e11=t3.webkitFullscreenElement&&t3.webkitExitFullscreen()),e11&&e11.then(()=>{r2()?.classList.remove(eq)}),e11}function d2(){let e11=r2();e11&&(s2()?u2():c2(e11))}return{init:function(t3){(e10=t3).on("initPlugins",n2),e10.on("ready",o2),e10.on("click",i2)},destroy:function(){e10?.off("initPlugins",n2),e10?.off("ready",o2),e10?.off("click",i2),document.removeEventListener("keydown",l2,!0)},exit:u2,inFullscreen:s2,request:c2,toggle:d2}},eW=!1,eZ=!1,eG=!1,eY=!1,eX=()=>{let e10=new URL(document.URL).hash,t2=e10.slice(1).split("-"),n2=t2[t2.length-1],o2=n2&&/^\+?\d+$/.test(n2)&&parseInt(t2.pop()||"1",10)||1;return{hash:e10,slug:t2.join("-"),index:o2}},eU=()=>{if(!i||i.getInstance())return;let{slug:e10,index:t2}=eX();if(!e10)return;let n2=document.querySelector(`[data-slug="${e10}"]`);if(n2&&n2.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})),!i||i.getInstance())return;let o2=document.querySelectorAll(`[data-fancybox="${e10}"]`);o2.length&&(n2=o2[t2-1])&&n2.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0}))},eK=()=>{if(!i||eG)return;let e10=i?.getInstance();if(!1===e10?.getOptions().Hash)return;let{slug:t2,index:n2}=eX(),o2=e10?.getSlide()?.fancybox||e10?.getSlide()?.slug||void 0;e10&&o2&&(t2===o2?e10.getCarousel()?.goTo(n2-1):(eY=!0,e10.close(),eY=!1)),eU()},eJ=()=>{i&&setTimeout(()=>{eW=!0,eU(),eW=!1,window.addEventListener("hashchange",eK,!1)},300)},eQ=()=>{let e10,t2="auto",n2="";function o2(){if(!e10||!e10.isTopMost()||!1===e10.getOptions().Hash)return;let o3=e10.getCarousel();if(!o3)return;let{hash:a3,slug:l2}=eX(),r2=e10.getSlide();if(!r2)return;let s2=r2.fancybox||"",c2=parseInt(r2.index+"",10)+1;if(!s2)return;let u2=`#${s2}-${c2}`;if(a3!==u2&&(n2=a3),history.scrollRestoration&&(t2=history.scrollRestoration,history.scrollRestoration="manual"),o3.on("change",i2),!eW)if(s2===l2)try{window.history.replaceState({},document.title,window.location.pathname+window.location.search+u2)}catch(e11){}else try{window.history.pushState({},document.title,window.location.pathname+window.location.search+u2),eZ=!0}catch(e11){}}function i2(){if(!e10||!e10.isTopMost()||!1===e10.getOptions().Hash)return;let{slug:t3}=eX(),n3=e10.getSlide();if(!n3)return;let o3=n3.fancybox||"",a3=`#${o3}-${n3.index+1}`;if(o3===t3){eG=!0;try{window.history.replaceState({},document.title,window.location.pathname+window.location.search+a3)}catch(e11){}eG=!1}}function a2(){if(eY||!e10||!e10.isTopMost()||!1===e10.getOptions().Hash)return;let t3=e10.getSlide();if(t3&&t3.fancybox){eG=!0;try{!eZ||eW||function(){if(window.parent===window)return!1;try{var e11=window.frameElement}catch(t4){e11=null}return null===e11?"data:"===location.protocol:e11.hasAttribute("sandbox")}()?window.history.replaceState({},document.title,window.location.pathname+window.location.search+n2):window.history.back()}catch(e11){}eG=!1}}return{init:function(t3){(e10=t3).on("ready",o2),e10.on("close",a2)},destroy:function(){e10?.off("ready",o2),e10?.off("close",a2);let n3=e10?.getCarousel();n3&&n3.off("change",i2),e10=void 0,history.scrollRestoration&&t2&&(history.scrollRestoration=t2)}}};eQ.startFromUrl=eU,eQ.setup=function(e10){!i&&(i=e10,g()&&(/complete|interactive|loaded/.test(document.readyState)?eJ():document.addEventListener("DOMContentLoaded",eJ)))};let e0={...eu,CLOSE:"Close",NEXT:"Next",PREV:"Previous",MODAL:"You can close this modal content with the ESC key",ELEMENT_NOT_FOUND:"HTML Element Not Found",IFRAME_ERROR:"Error Loading Page"},e1='<button class="f-button" title="{{CLOSE}}" data-fancybox-close><svg><path d="M19.286 4.714 4.714 19.286M4.714 4.714l14.572 14.572" /></svg></button>';ez().add("close",{tpl:e1});let e2=e10=>{e10&&e10.dispatchEvent(new CustomEvent("animationend",{bubbles:!1,cancelable:!0,currentTarget:e10}))},e5=(e10=null,t2="",n2)=>{if(!e10||!e10.parentElement||!t2)return void(n2&&n2());e2(e10);let o2=i2=>{i2.target===e10&&e10.dataset.animationName&&(e10.removeEventListener("animationend",o2),delete e10.dataset.animationName,n2&&n2(),e10.classList.remove(t2))};e10.dataset.animationName=t2,e10.addEventListener("animationend",o2),h(e10,t2)},e4=((O={})[O.Init=0]="Init",O[O.Ready=1]="Ready",O[O.Closing=2]="Closing",O[O.Destroyed=3]="Destroyed",O),e3={ajax:null,backdropClick:"close",Carousel:{},closeButton:"auto",closeExisting:!1,delegateEl:void 0,dragToClose:!0,fadeEffect:!0,groupAll:!1,groupAttr:"data-fancybox",hideClass:"f-fadeOut",hideScrollbar:!0,id:void 0,idle:!1,keyboard:{Escape:"close",Delete:"close",Backspace:"close",PageUp:"next",PageDown:"prev",ArrowUp:"prev",ArrowDown:"next",ArrowRight:"next",ArrowLeft:"prev"},l10n:e0,mainClass:"",mainStyle:{},mainTpl:'<dialog class="fancybox__dialog">\n    <div class="fancybox__container" tabindex="0" aria-label="{{MODAL}}">\n      <div class="fancybox__backdrop"></div>\n      <div class="fancybox__carousel"></div>\n    </div>\n  </dialog>',on:{},parentEl:void 0,placeFocusBack:!0,showClass:"f-zoomInUp",startIndex:0,sync:void 0,theme:"dark",triggerEl:void 0,triggerEvent:void 0,zoomEffect:!0},e6=new Map,e7=0,e8="with-fancybox",e9={Plugins:{Hash:eQ},version:"6.0.12",openers:new Map,bind:function(e10,t2,n2){if(!g())return;let o2=document.body,i2="[data-fancybox]",a2={};if(l(e10)?(o2=document.body,i2=e10,"object"==typeof t2&&(a2=t2||{})):e10 instanceof Element&&(o2=e10,l(t2)&&(i2=t2),"object"==typeof n2&&(a2=n2||{})),!(o2&&o2 instanceof Element&&i2))return!1;let r2=e9.openers.get(o2)||new Map;if(r2.set(i2,a2),e9.openers.set(o2,r2),1===r2.size)for(let e11 of(o2.addEventListener("click",e9.fromEvent),Object.values(e9.Plugins))){let t3=e11.setup;"function"==typeof t3&&t3(e9)}return!0},close:function(e10=!0,...t2){if(e10)for(let e11 of e6.values())e11.close(...t2);else{let e11=e9.getInstance();e11&&e11.close(...t2)}},destroy:function(){let e10;for(;e10=e9.getInstance();)e10.destroy();for(let e11 of e9.openers.keys())e11.removeEventListener("click",e9.fromEvent);e9.openers.clear()},fromEvent:function(e10){let t2,n2,o2;if(e10.defaultPrevented||e10.button&&0!==e10.button||e10.ctrlKey||e10.metaKey||e10.shiftKey)return;let i2=e10.composedPath()[0];if(i2.closest(".fancybox__container.is-hiding"))return e10.preventDefault(),void e10.stopPropagation();let a2=i2.closest("[data-fancybox-delegate]")||void 0;if(a2){let e11=a2.dataset.fancyboxDelegate||"",t3=document.querySelectorAll(`[data-fancybox="${e11}"]`);i2=t3[parseInt(a2.dataset.fancyboxIndex||"",10)||0]||t3[0]}if(!(i2&&i2 instanceof Element))return;for(let e11 of Array.from(e9.openers.keys()).reverse()){let a3=e9.openers.get(e11);if(a3&&e11.contains(i2))for(let l3 of Array.from(a3.keys()).reverse()){let r3=null;try{r3=i2.closest(l3)}catch(e12){}if(r3){i2=r3,t2=e11,n2=l3,o2=a3.get(l3);break}}}if(!(t2&&n2&&o2))return;e10.preventDefault();let l2=f({},e3,{triggerEvent:e10,triggerEl:i2,delegateEl:a2},o2),r2=l2.groupAll,s2=l2.groupAttr,c2=s2&&i2?i2.getAttribute(`${s2}`):"",u2=[],d2=i2.closest(".f-carousel")?.carousel;if(d2){let e11=[];for(let t3 of d2?.getSlides()){let o3=t3.el;o3&&(o3.matches(n2)?e11.push(o3):e11.push(...[].slice.call(o3.querySelectorAll(n2))))}e11.length&&(u2=[...e11],d2.getPlugins().Autoplay?.pause(),d2.getPlugins().Autoscroll?.pause(),l2.sync=d2)}else(!i2||c2||r2)&&(u2=[].slice.call(t2.querySelectorAll(n2)));if(i2&&!r2&&(u2=c2?u2.filter(e11=>e11.getAttribute(`${s2}`)===c2):[i2]),!u2.length)return;let g2=e9.getInstance();if(g2){let e11=g2.getOptions().triggerEl;if(e11&&u2.indexOf(e11)>-1)return}return{...l2.Carousel||{}}.rtl&&(u2=u2.reverse()),i2&&(l2.startIndex=u2.indexOf(i2)),e9.fromNodes(u2,l2)},fromNodes:function(e10,t2){t2=f({},e3,t2||{});let n2=[],o2=e11=>e11 instanceof HTMLImageElement?e11:e11 instanceof HTMLElement?e11.querySelector("img:not([aria-hidden])"):void 0;for(let i2 of e10){let a2=i2.dataset||{},l2=t2.delegateEl&&e10.indexOf(i2)===t2.startIndex?t2.delegateEl:void 0,r2=o2(l2)||o2(i2)||void 0,s2=a2.src||i2.getAttribute("href")||i2.getAttribute("currentSrc")||i2.getAttribute("src")||void 0,c2=a2.thumb||a2.thumbSrc||r2?.getAttribute("currentSrc")||r2?.getAttribute("src")||r2?.dataset.lazySrc||void 0,u2={src:s2,alt:a2.alt||r2?.getAttribute("alt")||void 0,thumbSrc:c2,thumbEl:r2,triggerEl:i2,delegateEl:l2};for(let e11 in a2){let t3=a2[e11]+"";t3="false"!==t3&&("true"===t3||t3),u2[e11]=t3}n2.push(u2)}return e9.show(n2,t2)},fromSelector:function(e10,t2,n2){let o2=document.body,i2="",a2={};if(l(e10)?i2=e10:e10 instanceof Element&&(o2=e10,l(t2)&&(i2=t2),"object"==typeof n2&&(a2=n2||{})),!(o2&&o2 instanceof Element&&i2))return;let r2=e9.openers.get(o2);return r2&&(a2=f({},r2.get(i2)||{},a2))?e9.fromNodes(Array.from(o2.querySelectorAll(i2)),a2):void 0},getCarousel:function(){return e9.getInstance()?.getCarousel()||void 0},getDefaults:function(){return e3},getInstance:function(e10){if(e10){let t2=e6.get(e10);return t2&&t2.getState()!==e4.Destroyed?t2:void 0}return Array.from(e6.values()).reverse().find(e11=>{if(e11.getState()!==e4.Destroyed)return e11})||void 0},getSlide:function(){return e9.getInstance()?.getSlide()||void 0},show:function(e10=[],t2={}){return(()=>{let e11,n2,o2,i2,c2,g2=e4.Init,m2={...e3},v2=-1,y2={},b2=[],E2=!1,w2=!0;function x2(e12,...t4){let n3=m2[e12];return n3&&"function"==typeof n3?n3(en2,...t4):n3}function M2(e12,t4=[]){let n3=x2("l10n")||{};e12=String(e12).replace(/\{\{(\w+)\}\}/g,(e13,t5)=>n3[t5]||e13);for(let n4=0;n4<t4.length;n4++)e12=e12.split(t4[n4][0]).join(t4[n4][1]);return e12.replace(/\{\{(.*?)\}\}/g,(e13,t5)=>t5)}let L2=new Map;function S2(e12,...t4){let n3=L2.get(e12)||[];for(let[t5,o3]of Object.entries(m2.on||{}))(t5===e12||t5.split(" ").indexOf(e12)>-1)&&n3.push(o3);for(let e13 of n3)e13&&"function"==typeof e13&&e13(en2,...t4);"*"!==e12&&S2("*",e12,...t4)}function T2(){es(i2,"is-revealing");try{document.activeElement===o2&&(i2?.querySelector("[autofocus]")||i2).focus()}catch(e12){}}function R2(e12){if(!V2())return;if(g2!==e4.Ready)return e12.preventDefault(),void e12.stopPropagation();if(e12.defaultPrevented||!G.isClickAllowed())return;let t4=e12.composedPath()[0];t4.closest(".fancybox__carousel")&&t4.classList.contains("fancybox__slide")&&P2(e12)}function P2(e12){e12.composedPath()[0].closest("[data-fancybox-close]")?J2(e12):(S2("backdropClick",e12),!e12.defaultPrevented&&x2("backdropClick")&&J2(e12))}function C2(e12){if(!V2()||g2!==e4.Ready||(U2(),e12.defaultPrevented))return;let t4=e12.composedPath()[0],n3=!!t4.closest("[data-fancybox-close]"),o3=t4.classList.contains("fancybox__backdrop");(n3||o3)&&P2(e12)}function A2(e12,t4){t4.el?.addEventListener("click",R2)}function O2(t4,n3){k2(n3),("inline"===n3.type||"clone"===n3.type)&&function(t5){if(!e11||!t5||!t5.el)return;let n4=null;if(l(t5.src)){let e12=t5.src.split("#",2).pop();n4=e12?document.getElementById(e12):null}if(n4){if(h(n4,"f-html"),"clone"===t5.type||n4.closest(".fancybox__carousel")){let e12=(n4=n4.cloneNode(!0)).dataset.animationName;e12&&(n4.classList.remove(e12),delete n4.dataset.animationName);let o3=n4.getAttribute("id");o3=o3?`${o3}--clone`:`clone-${v2}-${t5.index}`,n4.setAttribute("id",o3)}else if(n4.parentNode){let e12=document.createElement("div");e12.inert=!0,n4.parentNode.insertBefore(e12,n4),t5.placeholderEl=e12}t5.htmlEl=n4,h(t5.el,"has-html"),t5.el.prepend(n4),n4.classList.remove("hidden"),"none"===n4.style.display&&(n4.style.display=""),"none"===getComputedStyle(n4).getPropertyValue("display")&&(n4.style.display=n4.dataset.display||"flex"),e11?.emit("contentReady",t5)}else e11?.showError(t5,"{{ELEMENT_NOT_FOUND}}")}(n3),"ajax"===n3.type&&function(t5){let n4=t5.el;if(!n4||t5.htmlEl||t5.xhr)return;e11?.showLoading(t5),t5.state=eg.Loading;let o3=new XMLHttpRequest;o3.onreadystatechange=function(){if(o3.readyState===XMLHttpRequest.DONE&&g2===e4.Ready)if(e11?.hideLoading(t5),t5.state=eg.Loaded,200===o3.status){let i4=o3.responseText+"",a2=null,l2=null;if(t5.filter){let e12=document.createElement("div");e12.innerHTML=i4,l2=e12.querySelector(t5.filter+"")}l2&&l2 instanceof HTMLElement?a2=l2:(a2=document.createElement("div")).innerHTML=i4,a2.classList.add("f-html"),t5.htmlEl=a2,n4.classList.add("has-html"),n4.classList.add("has-ajax"),n4.prepend(a2),e11?.emit("contentReady",t5)}else e11?.showError(t5)};let i3=x2("ajax")||null;o3.open(i3?"POST":"GET",t5.src+""),o3.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o3.setRequestHeader("X-Requested-With","XMLHttpRequest"),o3.send(i3),t5.xhr=o3}(n3)}function z2(e12,t4){var n3;(n3=t4).closeButtonEl&&(n3.closeButtonEl.remove(),n3.closeButtonEl=void 0),("inline"===t4.type||"clone"===t4.type)&&function(e13){let t5=e13.htmlEl,n4=e13.placeholderEl;t5&&("none"!==getComputedStyle(t5).getPropertyValue("display")&&(t5.style.display="none"),t5.offsetHeight),n4&&(t5&&n4.parentNode&&n4.parentNode.insertBefore(t5,n4),n4.remove()),e13.htmlEl=void 0,e13.placeholderEl=void 0}(t4),t4.xhr&&(t4.xhr.abort(),t4.xhr=void 0)}function k2(t4){let{el:n3,htmlEl:o3,closeButtonEl:i3}=t4;if(!n3||!o3||i3)return;let a2=x2("closeButton");if("auto"===a2&&(a2=!0!==e11?.getPlugins().Toolbar?.isEnabled()),a2){let e12=s(M2(e1));e12&&(t4.closeButtonEl=o3.insertAdjacentElement("afterbegin",e12),n3.classList.add("has-close-btn"))}}function I2(){w2=!1,i2&&e11&&i2.classList.remove("is-revealing");let t4=x2("sync");if(e11&&t4){let n3=t4.getPageIndex(e11.getPageIndex())||0;t4.goTo(n3,{transition:!1})}}function $3(){if(g2!==e4.Ready)return;D2(q2()),function(){if(!x2("dragToClose")||!e11||!e11.getViewport())return;let t5=e11.getGestures();if(!t5)return;let n3=0,o3=0,a2=_().on("step",t6=>{n3=t6.y;let o4=e11?.getViewport();if(i2&&o4){let e12=p(Math.abs(n3),0,.5*o4.getBoundingClientRect().height,1,.5);i2.style.setProperty("--f-drag-opacity",e12+""),i2.style.setProperty("--f-drag-offset",n3+"px")}}).on("end",()=>{if(!n3){i2&&i2.style.removeProperty("--f-opacity");let t6=e11?.getViewport();t6&&(t6.style.transform="")}});t5.on("start",function(){a2.pause()}).on("panstart",t6=>{let n4=t6.srcEvent.target;n4&&!u(n4)&&e11?.getViewport()?.classList.add("is-dragging")}).on("pan",function(t6){let i3=t6.srcEvent.target;(!i3||!u(i3))&&e11?.getViewport()&&"y"===t6.axis&&(o3+=t6.deltaY,a2.spring({clamp:!0,mass:1,tension:860,friction:17,restDelta:.01,restSpeed:.01}).from({y:n3}).to({y:o3}).start())}).on("end",function(e12){a2.pause(),"y"===e12.axis&&Math.abs(e12.velocityY)>5&&Math.abs(o3)>0?J2(e12.srcEvent,"f-throwOut"+(e12.velocityY>0?"Down":"Up")):0!==o3&&(o3=0,a2.spring({clamp:!0,mass:1,tension:140,friction:25,restDelta:.1,restSpeed:.1,maxSpeed:1/0}).from({y:n3}).to({y:o3}).start())})}(),document.body.addEventListener("click",C2),document.body.addEventListener("keydown",N2,{passive:!1,capture:!0}),Y2();let t4=x2("sync");t4&&t4.getTween()?.start()}function F2(){e11?.canGoNext()?Y2():K2()}function D2(t4){if(!(w2&&e11&&e11.getState()===ef.Ready&&t4&&t4.index===e11.getOptions().initialPage&&t4.el&&t4.el.parentElement)||void 0!==t4.state&&t4.state!==eg.Loaded)return;w2=!1;let n3=x2("zoomEffect")?W2(t4):void 0,o3=t4.panzoomRef,i3=o3?.getTween();if(o3&&i3&&n3){let e12=o3.getScale("base")||1,{x:t5,y:a3}=o3.getMousemovePos(e12)||{x:0,y:0};return void i3.spring({tension:225,friction:25,restDelta:.001,restSpeed:.001,maxSpeed:1/0}).from(n3).to({x:t5,y:a3,scale:e12}).start()}let a2=o3?.getWrapper()||t4.htmlEl;a2&&e5(a2,x2("showClass",t4))}function H2(e12,t4){k2(t4),D2(t4)}function j2(){U2()}function N2(t4){if(!V2()||g2!==e4.Ready)return;let n3=t4.key,o3=x2("keyboard");if(!o3||t4.ctrlKey||t4.altKey||t4.shiftKey)return;let i3=t4.composedPath()[0];if(!r(i3)||"Escape"!==n3&&(e12=>{let t5="input,textarea,select,option,video,iframe,[contenteditable],[data-selectable],[data-draggable]";return e12.matches(t5)||e12.closest(t5)})(i3)||(S2("keydown",t4),t4.defaultPrevented))return;let a2=o3[n3];if(a2)switch(a2){case"close":J2(t4);break;case"next":t4.preventDefault(),e11?.next();break;case"prev":t4.preventDefault(),e11?.prev()}}function V2(){return e9.getInstance()?.getId()===v2}function q2(){return e11?.getPage()?.slides[0]}function B2(){let e12=q2();return e12?e12.triggerEl||x2("triggerEl"):void 0}function W2(e12){let t4=e12.panzoomRef?.getWrapper()?.getBoundingClientRect(),n3=t4?.width,o3=t4?.height;if(!n3||!o3)return;let i3=e12.thumbEl;if(!i3)return;let a2=i3.getBoundingClientRect(),l2=a2.width,r2=a2.height,s2=a2.left,c3=a2.top;if(a2&&l2&&r2&&(e13=>{let t5=e13.getBoundingClientRect(),n4=e13.closest("[style]"),o4=n4?.parentElement;if(n4&&n4.style.transform&&o4){let e14=o4.getBoundingClientRect();if(t5.left<e14.left||t5.left>e14.left+e14.width-t5.width||t5.top<e14.top||t5.top>e14.top+e14.height-t5.height)return!1}let i4=Math.max(document.documentElement.clientHeight,window.innerHeight),a3=Math.max(document.documentElement.clientWidth,window.innerWidth);return!(t5.bottom<0||t5.top-i4>=0||t5.right<0||t5.left-a3>=0)})(i3)){if(i3 instanceof HTMLImageElement){let e13=window.getComputedStyle(i3).getPropertyValue("object-fit");if("contain"===e13||"scale-down"===e13){let{width:t5,height:n4}=((e14,t6,n5,o4,i4="contain")=>{if("contain"===i4||e14>n5||t6>o4){let i5=Math.min(n5/e14,o4/t6);e14*=i5,t6*=i5}return{width:e14,height:t6}})(i3.naturalWidth,i3.naturalHeight,l2,r2,e13);s2+=.5*(l2-t5),c3+=.5*(r2-n4),l2=t5,r2=n4}}if(!(Math.abs(n3/o3-l2/r2)>.1))return{x:s2+.5*l2-(t4.left+.5*n3),y:c3+.5*r2-(t4.top+.5*o3),scale:l2/n3}}}function Z2(){n2&&clearTimeout(n2),n2=void 0,document.removeEventListener("mousemove",j2)}function Y2(){if(E2||n2)return;let e12=x2("idle");e12&&(n2=setTimeout(X2,e12))}function X2(){i2&&(Z2(),h(i2,"is-idle"),document.addEventListener("mousemove",j2),E2=!0)}function U2(){E2&&(K2(),Y2())}function K2(){Z2(),i2?.classList.remove("is-idle"),E2=!1}function J2(n3,o3){if(g2===e4.Closing||g2===e4.Destroyed)return;if(g2=e4.Closing,Z2(),n3){if(n3.defaultPrevented)return;n3.cancelable&&n3.preventDefault(),n3.stopPropagation(),n3.stopImmediatePropagation()}if(e11){e11.getGestures()?.destroy(),e11.getTween()?.pause();let t4=q2(),n4=t4?.panzoomRef;for(let o4 of(t4&&n4&&f(n4.getOptions(),{clickAction:!1,wheelAction:!1,bounds:!1,minScale:0,maxScale:1/0}),e11.getSlides()))o4.panzoomRef?.getGestures()?.destroy(),o4.panzoomRef?.getTween()?.pause()}let i3=e11?.getPlugins().fullscreen;i3&&i3.inFullscreen()?Promise.resolve(i3.exit()).then(()=>{setTimeout(()=>{Q2(n3,o3)},150)}):Q2(n3,o3)}function Q2(t4,n3){if(g2!==e4.Closing)return;if(S2("close",t4),x2("placeFocusBack")){var o3;let e12=B2();e12&&!((o3=e12.getBoundingClientRect()).bottom>0&&o3.right>0&&o3.left<(window.innerWidth||document.documentElement.clientWidth)&&o3.top<(window.innerHeight||document.documentElement.clientHeight))&&e12.scrollIntoView({behavior:"instant",block:"center",inline:"center"})}x2("fadeEffect")&&(i2?.classList.remove("is-ready"),i2?.classList.add("is-hiding")),i2?.classList.add("is-closing");let a2=q2(),l2=a2?.panzoomRef,r2=a2?.panzoomRef?.getTween(),s2=n3||x2("hideClass"),c3=!1,u2=!1;if(e11&&a2&&l2&&r2){let t5;x2("zoomEffect")&&700>(e11.getTween()?.getCurrentVelocities()?.pos||0)&&a2.state===eg.Loaded&&(t5=W2(a2)),t5&&(c3=!0,e11.on("refresh",()=>{let e12=W2(a2);e12&&r2.to({...ee,...e12})}),r2.easing(_.Easings.EaseOut).duration(350).from({...l2.getTransform()}).to({...ee,...t5}).start())}let d2=a2?.htmlEl||a2?.panzoomRef?.getWrapper();d2&&e2(d2),!c3&&s2&&d2&&(u2=!0,e5(d2,s2,()=>{et2()})),c3||u2?setTimeout(()=>{et2()},350):et2()}function et2(){if(g2===e4.Destroyed)return;g2=e4.Destroyed,document.body.removeEventListener("click",C2),document.body.removeEventListener("keydown",N2,{passive:!1,capture:!0});let t4=B2();for(let t5 of(S2("destroy"),x2("sync")?.getPlugins().Autoplay?.resume(),x2("sync")?.getPlugins().Autoscroll?.resume(),o2 instanceof HTMLDialogElement&&o2.close(),e11?.getContainer()?.classList.remove("is-idle"),e11?.destroy(),Object.values(y2)))t5?.destroy();if(y2={},o2?.remove(),o2=void 0,i2=void 0,e11=void 0,e6.delete(v2),!e6.size&&(d(!1),document.documentElement.classList.remove(e8),x2("placeFocusBack")))try{t4?.focus({preventScroll:!0})}catch(e12){}}let en2={close:J2,destroy:et2,getCarousel:function(){return e11},getContainer:function(){return i2},getId:function(){return v2},getOptions:function(){return m2},getPlugins:function(){return y2},getSlide:function(){return q2()},getState:function(){return g2},init:function(t4=[],n3={}){return function(t5=[],n4={}){g2!==e4.Init&&(en2.destroy(),g2=e4.Init),m2=f({},e3,n4),v2=x2("id")||"fancybox-"+ ++e7;let l2=e6.get(v2);if(l2&&l2.destroy(),e6.set(v2,en2),S2("init"),function(){for(let[e12,t6]of Object.entries({...e9.Plugins,...m2.plugins||{}}))if(e12&&!y2[e12]&&t6 instanceof Function){let n5=t6();n5.init(en2),y2[e12]=n5}S2("initPlugins")}(),function(e12=[]){S2("initSlides",e12),b2=[...e12]}(t5),function(){let e12=x2("parentEl")||document.body;if(!(e12&&e12 instanceof HTMLElement&&(o2=s(M2(x2("mainTpl")||""))||void 0)&&o2 instanceof HTMLDialogElement&&(i2=o2.querySelector(".fancybox__container"))&&i2 instanceof HTMLElement))return;let t6=x2("mainClass");t6&&h(i2,t6);let n5=x2("mainStyle");if(n5&&a(n5))for(let[e13,t7]of Object.entries(n5))i2.style.setProperty(e13,t7);let l3=x2("theme"),r2="auto"===l3?window.matchMedia("(prefers-color-scheme:light)").matches:"light"===l3;i2.setAttribute("theme",r2?"light":"dark"),o2.setAttribute("id",`${v2}`),o2.addEventListener("keydown",e13=>{"Escape"===e13.key&&e13.preventDefault()}),o2.addEventListener("cancel",e13=>{J2(e13)}),e12.append(o2),1===e6.size&&(x2("hideScrollbar")&&d(!0),document.documentElement.classList.add(e8)),o2.showModal(),S2("initLayout")}(),function(){if(!(c2=o2?.querySelector(".fancybox__carousel")||void 0))return;let t6=f({Autoplay:{autoStart:!1,pauseOnHover:!1,progressbarParentEl:e12=>{let t7=e12.getContainer();return t7?.querySelector(".f-carousel__toolbar [data-autoplay-action]")||t7}},Fullscreen:{el:i2},Toolbar:{absolute:!0,display:{left:["counter"],right:["toggleFull","autoplay","fullscreen","thumbs","close"]}},Video:{autoplay:!0},Zoomable:{Panzoom:{event:x2("triggerEvent")}},classes:{container:"fancybox__carousel",viewport:"fancybox__viewport",slide:"fancybox__slide"},spinnerTpl:'<div class="f-spinner" data-fancybox-close></div>',dragFree:!1,slidesPerPage:1,plugins:{Sync:ew,Arrows:eR,Lazyload:eS,Zoomable:eb,Html:eD,Video:eN,Autoplay:eI,Fullscreen:eB,Thumbs:eF,Toolbar:ez}},x2("Carousel")||{},{slides:b2,enabled:!0,initialPage:x2("startIndex")||0,l10n:x2("l10n")});S2("initCarousel",e11=eh(c2,t6)),e11.on("*",(e12,t7,...n5)=>{S2(`Carousel.${t7}`,e12,...n5)}),e11?.on("addSlide",A2),e11.on("attachSlideEl",O2),e11.on("detachSlideEl",z2),e11.on("contentReady",H2),e11.on("ready",$3),e11.on("change",I2),e11.on("settle",F2),e11.init()}(),o2&&i2){if(x2("closeExisting"))for(let[e12,t6]of e6.entries())e12!==v2&&t6.close();x2("fadeEffect")?(setTimeout(()=>{T2()},500),h(i2,"is-revealing")):T2(),i2.classList.add("is-ready"),g2=e4.Ready,S2("ready")}}(t4,n3),en2},isCurrentSlide:function(e12){let t4=q2();return!!e12&&!!t4&&t4.index===e12.index},isTopMost:function(){return V2()},off:function(e12,t4){return L2.has(e12)&&L2.set(e12,L2.get(e12).filter(e13=>e13!==t4)),en2},on:function(e12,t4){return L2.set(e12,[...L2.get(e12)||[],t4]),en2},toggleIdle(e12){(E2||!0===e12)&&X2(),E2&&!1!==e12||K2()}};return en2})().init(e10,t2)},unbind:function(e10,t2){let n2=document.body,o2="";if(l(e10)?o2=e10:e10 instanceof Element&&(n2=e10,l(t2)&&(o2=t2)),n2){let e11=e9.openers.get(n2);e11&&o2&&e11.delete(o2),e11?.size&&o2||e9.openers.delete(n2),n2.removeEventListener("click",e9.fromEvent)}}};e.Arrows=eR,e.Autoplay=eI,e.Carousel=eh,e.CarouselSlideContentState=eg,e.CarouselState=ef,e.Fancybox=e9,e.FancyboxState=e4,e.Fullscreen=eB,e.Html=eD,e.Lazyload=eS,e.PANZOOM_DEFAULT_POS=ee,e.Panzoom=el,e.PanzoomAction=J,e.PanzoomState=et,e.PanzoomZoomLevel=Q,e.Sync=ew,e.Thumbs=eF,e.Toolbar=ez,e.ToolbarColumn=eC,e.Video=eN,e.Zoomable=eb}),function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(((e="undefined"!=typeof globalThis?globalThis:e||self).Fancybox=e.Fancybox||{},e.Fancybox.l10n=e.Fancybox.l10n||{}))}(void 0,function(e){"use strict";e.fa={IMAGE_ERROR:"  ",MOVE_UP:"  ",MOVE_DOWN:"  ",MOVE_LEFT:"  ",MOVE_RIGHT:"  ",ZOOM_IN:"",ZOOM_OUT:"",TOGGLE_FULL:" ",TOGGLE_1TO1:" ",ITERATE_ZOOM:" ",ROTATE_CCW:" ",ROTATE_CW:" ",FLIP_X:" ",FLIP_Y:" ",RESET:"",ERROR:"       ",NEXT:"",PREV:"",GOTO:"   #%d",DOWNLOAD:"",TOGGLE_EXPAND:"  ",TOGGLE_FULLSCREEN:"  ",TOGGLE_THUMBS:"   ",TOGGLE_AUTOPLAY:"  ",CLOSE:"",MODAL:"      ESC ",ELEMENT_NOT_FOUND:" HTML  ",IFRAME_ERROR:"   "}}),factory=function(jQuery2){var S2=function(){if(jQuery2&&jQuery2.fn&&jQuery2.fn.select2&&jQuery2.fn.select2.amd)var S22=jQuery2.fn.select2.amd;var requirejs,require2,define2,factory;return S22&&S22.requirejs||(S22?require2=S22:S22={},function(){var main,req,makeMap,handlers,defined={},waiting={},config={},defining={},hasOwn=Object.prototype.hasOwnProperty,aps=[].slice,jsSuffixRegExp=/\.js$/;function hasProp(obj,prop){return hasOwn.call(obj,prop)}function normalize(name,baseName){var nameParts,nameSegment,mapValue,foundMap,lastIndex,foundI,foundStarMap,starI,i,j,part,baseParts=baseName&&baseName.split("/"),map=config.map,starMap=map&&map["*"]||{};if(name){for(lastIndex=(name=name.split("/")).length-1,config.nodeIdCompat&&jsSuffixRegExp.test(name[lastIndex])&&(name[lastIndex]=name[lastIndex].replace(jsSuffixRegExp,"")),"."===name[0].charAt(0)&&baseParts&&(name=baseParts.slice(0,baseParts.length-1).concat(name)),i=0;i<name.length;i++)if("."===(part=name[i]))name.splice(i,1),i-=1;else if(".."===part){if(0===i||1===i&&".."===name[2]||".."===name[i-1])continue;i>0&&(name.splice(i-1,2),i-=2)}name=name.join("/")}if((baseParts||starMap)&&map){for(i=(nameParts=name.split("/")).length;i>0;i-=1){if(nameSegment=nameParts.slice(0,i).join("/"),baseParts)for(j=baseParts.length;j>0;j-=1)if((mapValue=map[baseParts.slice(0,j).join("/")])&&(mapValue=mapValue[nameSegment])){foundMap=mapValue,foundI=i;break}if(foundMap)break;!foundStarMap&&starMap&&starMap[nameSegment]&&(foundStarMap=starMap[nameSegment],starI=i)}!foundMap&&foundStarMap&&(foundMap=foundStarMap,foundI=starI),foundMap&&(nameParts.splice(0,foundI,foundMap),name=nameParts.join("/"))}return name}function makeRequire(relName,forceSync){return function(){var args=aps.call(arguments,0);return"string"!=typeof args[0]&&1===args.length&&args.push(null),req.apply(void 0,args.concat([relName,forceSync]))}}function makeLoad(depName){return function(value){defined[depName]=value}}function callDep(name){if(hasProp(waiting,name)){var args=waiting[name];delete waiting[name],defining[name]=!0,main.apply(void 0,args)}if(!hasProp(defined,name)&&!hasProp(defining,name))throw new Error("No "+name);return defined[name]}function splitPrefix(name){var prefix,index=name?name.indexOf("!"):-1;return index>-1&&(prefix=name.substring(0,index),name=name.substring(index+1,name.length)),[prefix,name]}function makeRelParts(relName){return relName?splitPrefix(relName):[]}function makeConfig(name){return function(){return config&&config.config&&config.config[name]||{}}}makeMap=function(name,relParts){var plugin,parts=splitPrefix(name),prefix=parts[0],relResourceName=relParts[1];return name=parts[1],prefix&&(plugin=callDep(prefix=normalize(prefix,relResourceName))),prefix?name=plugin&&plugin.normalize?plugin.normalize(name,function makeNormalize(relName){return function(name){return normalize(name,relName)}}(relResourceName)):normalize(name,relResourceName):(prefix=(parts=splitPrefix(name=normalize(name,relResourceName)))[0],name=parts[1],prefix&&(plugin=callDep(prefix))),{f:prefix?prefix+"!"+name:name,n:name,pr:prefix,p:plugin}},handlers={require:function(name){return makeRequire(name)},exports:function(name){var e=defined[name];return void 0!==e?e:defined[name]={}},module:function(name){return{id:name,uri:"",exports:defined[name],config:makeConfig(name)}}},main=function(name,deps,callback,relName){var cjsModule,depName,ret,map,i,relParts,usingExports,args=[],callbackType=typeof callback;if(relParts=makeRelParts(relName=relName||name),"undefined"===callbackType||"function"===callbackType){for(deps=!deps.length&&callback.length?["require","exports","module"]:deps,i=0;i<deps.length;i+=1)if("require"===(depName=(map=makeMap(deps[i],relParts)).f))args[i]=handlers.require(name);else if("exports"===depName)args[i]=handlers.exports(name),usingExports=!0;else if("module"===depName)cjsModule=args[i]=handlers.module(name);else if(hasProp(defined,depName)||hasProp(waiting,depName)||hasProp(defining,depName))args[i]=callDep(depName);else{if(!map.p)throw new Error(name+" missing "+depName);map.p.load(map.n,makeRequire(relName,!0),makeLoad(depName),{}),args[i]=defined[depName]}ret=callback?callback.apply(defined[name],args):void 0,name&&(cjsModule&&void 0!==cjsModule.exports&&cjsModule.exports!==defined[name]?defined[name]=cjsModule.exports:void 0===ret&&usingExports||(defined[name]=ret))}else name&&(defined[name]=callback)},requirejs=require2=req=function(deps,callback,relName,forceSync,alt){if("string"==typeof deps)return handlers[deps]?handlers[deps](callback):callDep(makeMap(deps,makeRelParts(callback)).f);if(!deps.splice){if((config=deps).deps&&req(config.deps,config.callback),!callback)return;callback.splice?(deps=callback,callback=relName,relName=null):deps=void 0}return callback=callback||function(){},"function"==typeof relName&&(relName=forceSync,forceSync=alt),forceSync?main(void 0,deps,callback,relName):setTimeout(function(){main(void 0,deps,callback,relName)},4),req},req.config=function(cfg){return req(cfg)},requirejs._defined=defined,(define2=function(name,deps,callback){if("string"!=typeof name)throw new Error("See almond README: incorrect module build, no module name");deps.splice||(callback=deps,deps=[]),hasProp(defined,name)||hasProp(waiting,name)||(waiting[name]=[name,deps,callback])}).amd={jQuery:!0}}(),S22.requirejs=requirejs,S22.require=require2,S22.define=define2),S22.define("almond",function(){}),S22.define("jquery",[],function(){var _$=jQuery2||$;return null==_$&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),_$}),S22.define("select2/utils",["jquery"],function($2){var Utils={};function getMethods(theClass){var proto=theClass.prototype,methods=[];for(var methodName in proto)"function"==typeof proto[methodName]&&"constructor"!==methodName&&methods.push(methodName);return methods}Utils.Extend=function(ChildClass,SuperClass){var __hasProp={}.hasOwnProperty;function BaseConstructor(){this.constructor=ChildClass}for(var key in SuperClass)__hasProp.call(SuperClass,key)&&(ChildClass[key]=SuperClass[key]);return BaseConstructor.prototype=SuperClass.prototype,ChildClass.prototype=new BaseConstructor,ChildClass.__super__=SuperClass.prototype,ChildClass},Utils.Decorate=function(SuperClass,DecoratorClass){var decoratedMethods=getMethods(DecoratorClass),superMethods=getMethods(SuperClass);function DecoratedClass(){var unshift=Array.prototype.unshift,argCount=DecoratorClass.prototype.constructor.length,calledConstructor=SuperClass.prototype.constructor;argCount>0&&(unshift.call(arguments,SuperClass.prototype.constructor),calledConstructor=DecoratorClass.prototype.constructor),calledConstructor.apply(this,arguments)}DecoratorClass.displayName=SuperClass.displayName,DecoratedClass.prototype=new function ctr(){this.constructor=DecoratedClass};for(var m=0;m<superMethods.length;m++){var superMethod=superMethods[m];DecoratedClass.prototype[superMethod]=SuperClass.prototype[superMethod]}for(var calledMethod=function(methodName){var originalMethod=function(){};methodName in DecoratedClass.prototype&&(originalMethod=DecoratedClass.prototype[methodName]);var decoratedMethod2=DecoratorClass.prototype[methodName];return function(){return Array.prototype.unshift.call(arguments,originalMethod),decoratedMethod2.apply(this,arguments)}},d=0;d<decoratedMethods.length;d++){var decoratedMethod=decoratedMethods[d];DecoratedClass.prototype[decoratedMethod]=calledMethod(decoratedMethod)}return DecoratedClass};var Observable=function(){this.listeners={}};Observable.prototype.on=function(event,callback){this.listeners=this.listeners||{},event in this.listeners?this.listeners[event].push(callback):this.listeners[event]=[callback]},Observable.prototype.trigger=function(event){var slice=Array.prototype.slice,params=slice.call(arguments,1);this.listeners=this.listeners||{},null==params&&(params=[]),0===params.length&&params.push({}),params[0]._type=event,event in this.listeners&&this.invoke(this.listeners[event],slice.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},Observable.prototype.invoke=function(listeners,params){for(var i=0,len=listeners.length;i<len;i++)listeners[i].apply(this,params)},Utils.Observable=Observable,Utils.generateChars=function(length){for(var chars="",i=0;i<length;i++)chars+=Math.floor(36*Math.random()).toString(36);return chars},Utils.bind=function(func,context){return function(){func.apply(context,arguments)}},Utils._convertData=function(data){for(var originalKey in data){var keys=originalKey.split("-"),dataLevel=data;if(1!==keys.length){for(var k=0;k<keys.length;k++){var key=keys[k];(key=key.substring(0,1).toLowerCase()+key.substring(1))in dataLevel||(dataLevel[key]={}),k==keys.length-1&&(dataLevel[key]=data[originalKey]),dataLevel=dataLevel[key]}delete data[originalKey]}}return data},Utils.hasScroll=function(index,el){var $el=$2(el),overflowX=el.style.overflowX,overflowY=el.style.overflowY;return(overflowX!==overflowY||"hidden"!==overflowY&&"visible"!==overflowY)&&("scroll"===overflowX||"scroll"===overflowY||$el.innerHeight()<el.scrollHeight||$el.innerWidth()<el.scrollWidth)},Utils.escapeMarkup=function(markup){var replaceMap={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof markup?markup:String(markup).replace(/[&<>"'\/\\]/g,function(match){return replaceMap[match]})},Utils.__cache={};var id=0;return Utils.GetUniqueElementId=function(element){var select2Id=element.getAttribute("data-select2-id");return null!=select2Id||(select2Id=element.id?"select2-data-"+element.id:"select2-data-"+(++id).toString()+"-"+Utils.generateChars(4),element.setAttribute("data-select2-id",select2Id)),select2Id},Utils.StoreData=function(element,name,value){var id2=Utils.GetUniqueElementId(element);Utils.__cache[id2]||(Utils.__cache[id2]={}),Utils.__cache[id2][name]=value},Utils.GetData=function(element,name){var id2=Utils.GetUniqueElementId(element);return name?Utils.__cache[id2]&&null!=Utils.__cache[id2][name]?Utils.__cache[id2][name]:$2(element).data(name):Utils.__cache[id2]},Utils.RemoveData=function(element){var id2=Utils.GetUniqueElementId(element);null!=Utils.__cache[id2]&&delete Utils.__cache[id2],element.removeAttribute("data-select2-id")},Utils.copyNonInternalCssClasses=function(dest,src){var destinationClasses=dest.getAttribute("class").trim().split(/\s+/);destinationClasses=destinationClasses.filter(function(clazz){return 0===clazz.indexOf("select2-")});var sourceClasses=src.getAttribute("class").trim().split(/\s+/);sourceClasses=sourceClasses.filter(function(clazz){return 0!==clazz.indexOf("select2-")});var replacements=destinationClasses.concat(sourceClasses);dest.setAttribute("class",replacements.join(" "))},Utils}),S22.define("select2/results",["jquery","./utils"],function($2,Utils){function Results($element,options,dataAdapter){this.$element=$element,this.data=dataAdapter,this.options=options,Results.__super__.constructor.call(this)}return Utils.Extend(Results,Utils.Observable),Results.prototype.render=function(){var $results=$2('<ul class="select2-results__options" role="listbox"></ul>');return this.options.get("multiple")&&$results.attr("aria-multiselectable","true"),this.$results=$results,$results},Results.prototype.clear=function(){this.$results.empty()},Results.prototype.displayMessage=function(params){var escapeMarkup=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var $message=$2('<li role="alert" aria-live="assertive" class="select2-results__option"></li>'),message=this.options.get("translations").get(params.message);$message.append(escapeMarkup(message(params.args))),$message[0].className+=" select2-results__message",this.$results.append($message)},Results.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},Results.prototype.append=function(data){this.hideLoading();var $options=[];if(null!=data.results&&0!==data.results.length){data.results=this.sort(data.results);for(var d=0;d<data.results.length;d++){var item=data.results[d],$option=this.option(item);$options.push($option)}this.$results.append($options)}else 0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"})},Results.prototype.position=function($results,$dropdown){$dropdown.find(".select2-results").append($results)},Results.prototype.sort=function(data){return this.options.get("sorter")(data)},Results.prototype.highlightFirstItem=function(){var $options=this.$results.find(".select2-results__option--selectable"),$selected=$options.filter(".select2-results__option--selected");$selected.length>0?$selected.first().trigger("mouseenter"):$options.first().trigger("mouseenter"),this.ensureHighlightVisible()},Results.prototype.setClasses=function(){var self2=this;this.data.current(function(selected){var selectedIds=selected.map(function(s){return s.id.toString()});self2.$results.find(".select2-results__option--selectable").each(function(){var $option=$2(this),item=Utils.GetData(this,"data"),id=""+item.id;null!=item.element&&item.element.selected||null==item.element&&selectedIds.indexOf(id)>-1?(this.classList.add("select2-results__option--selected"),$option.attr("aria-selected","true")):(this.classList.remove("select2-results__option--selected"),$option.attr("aria-selected","false"))})})},Results.prototype.showLoading=function(params){this.hideLoading();var loading={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(params)},$loading=this.option(loading);$loading.className+=" loading-results",this.$results.prepend($loading)},Results.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},Results.prototype.option=function(data){var option=document.createElement("li");option.classList.add("select2-results__option"),option.classList.add("select2-results__option--selectable");var attrs={role:"option"},matches=window.Element.prototype.matches||window.Element.prototype.msMatchesSelector||window.Element.prototype.webkitMatchesSelector;for(var attr in(null!=data.element&&matches.call(data.element,":disabled")||null==data.element&&data.disabled)&&(attrs["aria-disabled"]="true",option.classList.remove("select2-results__option--selectable"),option.classList.add("select2-results__option--disabled")),null==data.id&&option.classList.remove("select2-results__option--selectable"),null!=data._resultId&&(option.id=data._resultId),data.title&&(option.title=data.title),data.children&&(attrs.role="group",attrs["aria-label"]=data.text,option.classList.remove("select2-results__option--selectable"),option.classList.add("select2-results__option--group")),attrs){var val=attrs[attr];option.setAttribute(attr,val)}if(data.children){var $option=$2(option),label=document.createElement("strong");label.className="select2-results__group",this.template(data,label);for(var $children=[],c=0;c<data.children.length;c++){var child=data.children[c],$child=this.option(child);$children.push($child)}var $childrenContainer=$2("<ul></ul>",{class:"select2-results__options select2-results__options--nested",role:"none"});$childrenContainer.append($children),$option.append(label),$option.append($childrenContainer)}else this.template(data,option);return Utils.StoreData(option,"data",data),option},Results.prototype.bind=function(container,$container){var self2=this,id=container.id+"-results";this.$results.attr("id",id),container.on("results:all",function(params){self2.clear(),self2.append(params.data),container.isOpen()&&(self2.setClasses(),self2.highlightFirstItem())}),container.on("results:append",function(params){self2.append(params.data),container.isOpen()&&self2.setClasses()}),container.on("query",function(params){self2.hideMessages(),self2.showLoading(params)}),container.on("select",function(){container.isOpen()&&(self2.setClasses(),self2.options.get("scrollAfterSelect")&&self2.highlightFirstItem())}),container.on("unselect",function(){container.isOpen()&&(self2.setClasses(),self2.options.get("scrollAfterSelect")&&self2.highlightFirstItem())}),container.on("open",function(){self2.$results.attr("aria-expanded","true"),self2.$results.attr("aria-hidden","false"),self2.setClasses(),self2.ensureHighlightVisible()}),container.on("close",function(){self2.$results.attr("aria-expanded","false"),self2.$results.attr("aria-hidden","true"),self2.$results.removeAttr("aria-activedescendant")}),container.on("results:toggle",function(){var $highlighted=self2.getHighlightedResults();0!==$highlighted.length&&$highlighted.trigger("mouseup")}),container.on("results:select",function(){var $highlighted=self2.getHighlightedResults();if(0!==$highlighted.length){var data=Utils.GetData($highlighted[0],"data");$highlighted.hasClass("select2-results__option--selected")?self2.trigger("close",{}):self2.trigger("select",{data:data})}}),container.on("results:previous",function(){var $highlighted=self2.getHighlightedResults(),$options=self2.$results.find(".select2-results__option--selectable"),currentIndex=$options.index($highlighted);if(!(currentIndex<=0)){var nextIndex=currentIndex-1;0===$highlighted.length&&(nextIndex=0);var $next=$options.eq(nextIndex);$next.trigger("mouseenter");var currentOffset=self2.$results.offset().top,nextTop=$next.offset().top,nextOffset=self2.$results.scrollTop()+(nextTop-currentOffset);0===nextIndex?self2.$results.scrollTop(0):nextTop-currentOffset<0&&self2.$results.scrollTop(nextOffset)}}),container.on("results:next",function(){var $highlighted=self2.getHighlightedResults(),$options=self2.$results.find(".select2-results__option--selectable"),nextIndex=$options.index($highlighted)+1;if(!(nextIndex>=$options.length)){var $next=$options.eq(nextIndex);$next.trigger("mouseenter");var currentOffset=self2.$results.offset().top+self2.$results.outerHeight(!1),nextBottom=$next.offset().top+$next.outerHeight(!1),nextOffset=self2.$results.scrollTop()+nextBottom-currentOffset;0===nextIndex?self2.$results.scrollTop(0):nextBottom>currentOffset&&self2.$results.scrollTop(nextOffset)}}),container.on("results:focus",function(params){params.element[0].classList.add("select2-results__option--highlighted"),params.element[0].setAttribute("aria-selected","true")}),container.on("results:message",function(params){self2.displayMessage(params)}),$2.fn.mousewheel&&this.$results.on("mousewheel",function(e){var top=self2.$results.scrollTop(),bottom=self2.$results.get(0).scrollHeight-top+e.deltaY,isAtTop=e.deltaY>0&&top-e.deltaY<=0,isAtBottom=e.deltaY<0&&bottom<=self2.$results.height();isAtTop?(self2.$results.scrollTop(0),e.preventDefault(),e.stopPropagation()):isAtBottom&&(self2.$results.scrollTop(self2.$results.get(0).scrollHeight-self2.$results.height()),e.preventDefault(),e.stopPropagation())}),this.$results.on("mouseup",".select2-results__option--selectable",function(evt){var $this=$2(this),data=Utils.GetData(this,"data");$this.hasClass("select2-results__option--selected")?self2.options.get("multiple")?self2.trigger("unselect",{originalEvent:evt,data:data}):self2.trigger("close",{}):self2.trigger("select",{originalEvent:evt,data:data})}),this.$results.on("mouseenter",".select2-results__option--selectable",function(evt){var data=Utils.GetData(this,"data");self2.getHighlightedResults().removeClass("select2-results__option--highlighted").attr("aria-selected","false"),self2.trigger("results:focus",{data:data,element:$2(this)})})},Results.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},Results.prototype.destroy=function(){this.$results.remove()},Results.prototype.ensureHighlightVisible=function(){var $highlighted=this.getHighlightedResults();if(0!==$highlighted.length){var currentIndex=this.$results.find(".select2-results__option--selectable").index($highlighted),currentOffset=this.$results.offset().top,nextTop=$highlighted.offset().top,nextOffset=this.$results.scrollTop()+(nextTop-currentOffset),offsetDelta=nextTop-currentOffset;nextOffset-=2*$highlighted.outerHeight(!1),currentIndex<=2?this.$results.scrollTop(0):(offsetDelta>this.$results.outerHeight()||offsetDelta<0)&&this.$results.scrollTop(nextOffset)}},Results.prototype.template=function(result,container){var template=this.options.get("templateResult"),escapeMarkup=this.options.get("escapeMarkup"),content=template(result,container);null==content?container.style.display="none":"string"==typeof content?container.innerHTML=escapeMarkup(content):$2(container).append(content)},Results}),S22.define("select2/keys",[],function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}}),S22.define("select2/selection/base",["jquery","../utils","../keys"],function($2,Utils,KEYS){function BaseSelection($element,options){this.$element=$element,this.options=options,BaseSelection.__super__.constructor.call(this)}return Utils.Extend(BaseSelection,Utils.Observable),BaseSelection.prototype.render=function(){var $selection=$2('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=Utils.GetData(this.$element[0],"old-tabindex")?this._tabindex=Utils.GetData(this.$element[0],"old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),$selection.attr("title",this.$element.attr("title")),$selection.attr("tabindex",this._tabindex),$selection.attr("aria-disabled","false"),this.$selection=$selection,$selection},BaseSelection.prototype.bind=function(container,$container){var self2=this,resultsId=container.id+"-results";this.container=container,this.$selection.on("focus",function(evt){self2.trigger("focus",evt)}),this.$selection.on("blur",function(evt){self2._handleBlur(evt)}),this.$selection.on("keydown",function(evt){self2.trigger("keypress",evt),evt.which===KEYS.SPACE&&evt.preventDefault()}),container.on("results:focus",function(params){self2.$selection.attr("aria-activedescendant",params.data._resultId)}),container.on("selection:update",function(params){self2.update(params.data)}),container.on("open",function(){self2.$selection.attr("aria-expanded","true"),self2.$selection.attr("aria-owns",resultsId),self2._attachCloseHandler(container)}),container.on("close",function(){self2.$selection.attr("aria-expanded","false"),self2.$selection.removeAttr("aria-activedescendant"),self2.$selection.removeAttr("aria-owns"),self2.$selection.trigger("focus"),self2._detachCloseHandler(container)}),container.on("enable",function(){self2.$selection.attr("tabindex",self2._tabindex),self2.$selection.attr("aria-disabled","false")}),container.on("disable",function(){self2.$selection.attr("tabindex","-1"),self2.$selection.attr("aria-disabled","true")})},BaseSelection.prototype._handleBlur=function(evt){var self2=this;window.setTimeout(function(){document.activeElement==self2.$selection[0]||$2.contains(self2.$selection[0],document.activeElement)||self2.trigger("blur",evt)},1)},BaseSelection.prototype._attachCloseHandler=function(container){$2(document.body).on("mousedown.select2."+container.id,function(e){var $select=$2(e.target).closest(".select2");$2(".select2.select2-container--open").each(function(){this!=$select[0]&&Utils.GetData(this,"element").select2("close")})})},BaseSelection.prototype._detachCloseHandler=function(container){$2(document.body).off("mousedown.select2."+container.id)},BaseSelection.prototype.position=function($selection,$container){$container.find(".selection").append($selection)},BaseSelection.prototype.destroy=function(){this._detachCloseHandler(this.container)},BaseSelection.prototype.update=function(data){throw new Error("The `update` method must be defined in child classes.")},BaseSelection.prototype.isEnabled=function(){return!this.isDisabled()},BaseSelection.prototype.isDisabled=function(){return this.options.get("disabled")},BaseSelection}),S22.define("select2/selection/single",["jquery","./base","../utils","../keys"],function($2,BaseSelection,Utils,KEYS){function SingleSelection(){SingleSelection.__super__.constructor.apply(this,arguments)}return Utils.Extend(SingleSelection,BaseSelection),SingleSelection.prototype.render=function(){var $selection=SingleSelection.__super__.render.call(this);return $selection[0].classList.add("select2-selection--single"),$selection.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),$selection},SingleSelection.prototype.bind=function(container,$container){var self2=this;SingleSelection.__super__.bind.apply(this,arguments);var id=container.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",id).attr("role","textbox").attr("aria-readonly","true"),this.$selection.attr("aria-labelledby",id),this.$selection.attr("aria-controls",id),this.$selection.on("mousedown",function(evt){1===evt.which&&self2.trigger("toggle",{originalEvent:evt})}),this.$selection.on("focus",function(evt){}),this.$selection.on("blur",function(evt){}),container.on("focus",function(evt){container.isOpen()||self2.$selection.trigger("focus")})},SingleSelection.prototype.clear=function(){var $rendered=this.$selection.find(".select2-selection__rendered");$rendered.empty(),$rendered.removeAttr("title")},SingleSelection.prototype.display=function(data,container){var template=this.options.get("templateSelection");return this.options.get("escapeMarkup")(template(data,container))},SingleSelection.prototype.selectionContainer=function(){return $2("<span></span>")},SingleSelection.prototype.update=function(data){if(0!==data.length){var selection=data[0],$rendered=this.$selection.find(".select2-selection__rendered"),formatted=this.display(selection,$rendered);$rendered.empty().append(formatted);var title=selection.title||selection.text;title?$rendered.attr("title",title.trim()):$rendered.removeAttr("title")}else this.clear()},SingleSelection}),S22.define("select2/selection/multiple",["jquery","./base","../utils"],function($2,BaseSelection,Utils){function MultipleSelection($element,options){MultipleSelection.__super__.constructor.apply(this,arguments)}return Utils.Extend(MultipleSelection,BaseSelection),MultipleSelection.prototype.render=function(){var $selection=MultipleSelection.__super__.render.call(this);return $selection[0].classList.add("select2-selection--multiple"),$selection.html('<ul class="select2-selection__rendered"></ul>'),$selection},MultipleSelection.prototype.bind=function(container,$container){var self2=this;MultipleSelection.__super__.bind.apply(this,arguments);var id=container.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",id),this.$selection.on("click",function(evt){self2.trigger("toggle",{originalEvent:evt})}),this.$selection.on("click",".select2-selection__choice__remove",function(evt){if(!self2.isDisabled()){var $selection=$2(this).parent(),data=Utils.GetData($selection[0],"data");self2.trigger("unselect",{originalEvent:evt,data:data})}}),this.$selection.on("keydown",".select2-selection__choice__remove",function(evt){self2.isDisabled()||evt.stopPropagation()})},MultipleSelection.prototype.clear=function(){var $rendered=this.$selection.find(".select2-selection__rendered");$rendered.empty(),$rendered.removeAttr("title")},MultipleSelection.prototype.display=function(data,container){var template=this.options.get("templateSelection");return this.options.get("escapeMarkup")(template(data,container))},MultipleSelection.prototype.selectionContainer=function(){return $2('<li class="select2-selection__choice"><button type="button" class="select2-selection__choice__remove" tabindex="-1"><span aria-hidden="true">&times;</span></button><span class="select2-selection__choice__display"></span></li>')},MultipleSelection.prototype.update=function(data){if(this.clear(),0!==data.length){for(var $selections=[],selectionIdPrefix=this.$selection.find(".select2-selection__rendered").attr("id")+"-choice-",d=0;d<data.length;d++){var selection=data[d],$selection=this.selectionContainer(),formatted=this.display(selection,$selection),selectionId=selectionIdPrefix+Utils.generateChars(4)+"-";selection.id?selectionId+=selection.id:selectionId+=Utils.generateChars(4),$selection.find(".select2-selection__choice__display").append(formatted).attr("id",selectionId);var title=selection.title||selection.text;title&&$selection.attr("title",title.trim());var removeItem=this.options.get("translations").get("removeItem"),$remove=$selection.find(".select2-selection__choice__remove");$remove.attr("title",removeItem()),$remove.attr("aria-label",removeItem()),$remove.attr("aria-describedby",selectionId),Utils.StoreData($selection[0],"data",selection),$selections.push($selection)}this.$selection.find(".select2-selection__rendered").append($selections)}},MultipleSelection}),S22.define("select2/selection/placeholder",[],function(){function Placeholder(decorated,$element,options){this.placeholder=this.normalizePlaceholder(options.get("placeholder")),decorated.call(this,$element,options)}return Placeholder.prototype.normalizePlaceholder=function(_,placeholder){return"string"==typeof placeholder&&(placeholder={id:"",text:placeholder}),placeholder},Placeholder.prototype.createPlaceholder=function(decorated,placeholder){var $placeholder=this.selectionContainer();$placeholder.html(this.display(placeholder)),$placeholder[0].classList.add("select2-selection__placeholder"),$placeholder[0].classList.remove("select2-selection__choice");var placeholderTitle=placeholder.title||placeholder.text||$placeholder.text();return this.$selection.find(".select2-selection__rendered").attr("title",placeholderTitle),$placeholder},Placeholder.prototype.update=function(decorated,data){var singlePlaceholder=1==data.length&&data[0].id!=this.placeholder.id;if(data.length>1||singlePlaceholder)return decorated.call(this,data);this.clear();var $placeholder=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append($placeholder)},Placeholder}),S22.define("select2/selection/allowClear",["jquery","../keys","../utils"],function($2,KEYS,Utils){function AllowClear(){}return AllowClear.prototype.bind=function(decorated,container,$container){var self2=this;decorated.call(this,container,$container),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(evt){self2._handleClear(evt)}),container.on("keypress",function(evt){self2._handleKeyboardClear(evt,container)})},AllowClear.prototype._handleClear=function(_,evt){if(!this.isDisabled()){var $clear=this.$selection.find(".select2-selection__clear");if(0!==$clear.length){evt.stopPropagation();var data=Utils.GetData($clear[0],"data"),previousVal=this.$element.val();this.$element.val(this.placeholder.id);var unselectData={data:data};if(this.trigger("clear",unselectData),unselectData.prevented)this.$element.val(previousVal);else{for(var d=0;d<data.length;d++)if(unselectData={data:data[d]},this.trigger("unselect",unselectData),unselectData.prevented)return void this.$element.val(previousVal);this.$element.trigger("input").trigger("change"),this.trigger("toggle",{})}}}},AllowClear.prototype._handleKeyboardClear=function(_,evt,container){container.isOpen()||evt.which!=KEYS.DELETE&&evt.which!=KEYS.BACKSPACE||this._handleClear(evt)},AllowClear.prototype.update=function(decorated,data){if(decorated.call(this,data),this.$selection.find(".select2-selection__clear").remove(),this.$selection[0].classList.remove("select2-selection--clearable"),!(this.$selection.find(".select2-selection__placeholder").length>0||0===data.length)){var selectionId=this.$selection.find(".select2-selection__rendered").attr("id"),removeAll=this.options.get("translations").get("removeAllItems"),$remove=$2('<button type="button" class="select2-selection__clear" tabindex="-1"><span aria-hidden="true">&times;</span></button>');$remove.attr("title",removeAll()),$remove.attr("aria-label",removeAll()),$remove.attr("aria-describedby",selectionId),Utils.StoreData($remove[0],"data",data),this.$selection.prepend($remove),this.$selection[0].classList.add("select2-selection--clearable")}},AllowClear}),S22.define("select2/selection/search",["jquery","../utils","../keys"],function($2,Utils,KEYS){function Search(decorated,$element,options){decorated.call(this,$element,options)}return Search.prototype.render=function(decorated){var searchLabel=this.options.get("translations").get("search"),$search=$2('<span class="select2-search select2-search--inline"><textarea class="select2-search__field" type="search" tabindex="-1" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" ></textarea></span>');this.$searchContainer=$search,this.$search=$search.find("textarea"),this.$search.prop("autocomplete",this.options.get("autocomplete")),this.$search.attr("aria-label",searchLabel());var $rendered=decorated.call(this);return this._transferTabIndex(),$rendered.append(this.$searchContainer),$rendered},Search.prototype.bind=function(decorated,container,$container){var self2=this,resultsId=container.id+"-results",selectionId=container.id+"-container";decorated.call(this,container,$container),self2.$search.attr("aria-describedby",selectionId),container.on("open",function(){self2.$search.attr("aria-controls",resultsId),self2.$search.trigger("focus")}),container.on("close",function(){self2.$search.val(""),self2.resizeSearch(),self2.$search.removeAttr("aria-controls"),self2.$search.removeAttr("aria-activedescendant"),self2.$search.trigger("focus")}),container.on("enable",function(){self2.$search.prop("disabled",!1),self2._transferTabIndex()}),container.on("disable",function(){self2.$search.prop("disabled",!0)}),container.on("focus",function(evt){self2.$search.trigger("focus")}),container.on("results:focus",function(params){params.data._resultId?self2.$search.attr("aria-activedescendant",params.data._resultId):self2.$search.removeAttr("aria-activedescendant")}),this.$selection.on("focusin",".select2-search--inline",function(evt){self2.trigger("focus",evt)}),this.$selection.on("focusout",".select2-search--inline",function(evt){self2._handleBlur(evt)}),this.$selection.on("keydown",".select2-search--inline",function(evt){if(evt.stopPropagation(),self2.trigger("keypress",evt),self2._keyUpPrevented=evt.isDefaultPrevented(),evt.which===KEYS.BACKSPACE&&""===self2.$search.val()){var $previousChoice=self2.$selection.find(".select2-selection__choice").last();if($previousChoice.length>0){var item=Utils.GetData($previousChoice[0],"data");self2.searchRemoveChoice(item),evt.preventDefault()}}}),this.$selection.on("click",".select2-search--inline",function(evt){self2.$search.val()&&evt.stopPropagation()});var msie=document.documentMode,disableInputEvents=msie&&msie<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(evt){disableInputEvents?self2.$selection.off("input.search input.searchcheck"):self2.$selection.off("keyup.search")}),this.$selection.on("keyup.search input.search",".select2-search--inline",function(evt){if(disableInputEvents&&"input"===evt.type)self2.$selection.off("input.search input.searchcheck");else{var key=evt.which;key!=KEYS.SHIFT&&key!=KEYS.CTRL&&key!=KEYS.ALT&&key!=KEYS.TAB&&self2.handleSearch(evt)}})},Search.prototype._transferTabIndex=function(decorated){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},Search.prototype.createPlaceholder=function(decorated,placeholder){this.$search.attr("placeholder",placeholder.text)},Search.prototype.update=function(decorated,data){var searchHadFocus=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),decorated.call(this,data),this.resizeSearch(),searchHadFocus&&this.$search.trigger("focus")},Search.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var input=this.$search.val();this.trigger("query",{term:input})}this._keyUpPrevented=!1},Search.prototype.searchRemoveChoice=function(decorated,item){this.trigger("unselect",{data:item}),this.$search.val(item.text),this.handleSearch()},Search.prototype.resizeSearch=function(){this.$search.css("width","25px");var width="100%";""===this.$search.attr("placeholder")&&(width=.75*(this.$search.val().length+1)+"em"),this.$search.css("width",width)},Search}),S22.define("select2/selection/selectionCss",["../utils"],function(Utils){function SelectionCSS(){}return SelectionCSS.prototype.render=function(decorated){var $selection=decorated.call(this),selectionCssClass=this.options.get("selectionCssClass")||"";return-1!==selectionCssClass.indexOf(":all:")&&(selectionCssClass=selectionCssClass.replace(":all:",""),Utils.copyNonInternalCssClasses($selection[0],this.$element[0])),$selection.addClass(selectionCssClass),$selection},SelectionCSS}),S22.define("select2/selection/eventRelay",["jquery"],function($2){function EventRelay(){}return EventRelay.prototype.bind=function(decorated,container,$container){var self2=this,relayEvents=["open","opening","close","closing","select","selecting","unselect","unselecting","clear","clearing"],preventableEvents=["opening","closing","selecting","unselecting","clearing"];decorated.call(this,container,$container),container.on("*",function(name,params){if(-1!==relayEvents.indexOf(name)){params=params||{};var evt=$2.Event("select2:"+name,{params:params});self2.$element.trigger(evt),-1!==preventableEvents.indexOf(name)&&(params.prevented=evt.isDefaultPrevented())}})},EventRelay}),S22.define("select2/translation",["jquery","require"],function($2,require2){function Translation(dict){this.dict=dict||{}}return Translation.prototype.all=function(){return this.dict},Translation.prototype.get=function(key){return this.dict[key]},Translation.prototype.extend=function(translation){this.dict=$2.extend({},translation.all(),this.dict)},Translation._cache={},Translation.loadPath=function(path){if(!(path in Translation._cache)){var translations=require2(path);Translation._cache[path]=translations}return new Translation(Translation._cache[path])},Translation}),S22.define("select2/diacritics",[],function(){return{"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"DZ","":"DZ","":"Dz","":"Dz","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"F","":"F","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"J","":"J","":"J","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"Lj","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"NJ","":"Nj","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OE","":"OI","":"OO","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"Q","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"dz","":"dz","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"m","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oe","":"oi","":"ou","":"oo","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q","":"q","":"q","":"q","":"q","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"'"}}),S22.define("select2/data/base",["../utils"],function(Utils){function BaseAdapter($element,options){BaseAdapter.__super__.constructor.call(this)}return Utils.Extend(BaseAdapter,Utils.Observable),BaseAdapter.prototype.current=function(callback){throw new Error("The `current` method must be defined in child classes.")},BaseAdapter.prototype.query=function(params,callback){throw new Error("The `query` method must be defined in child classes.")},BaseAdapter.prototype.bind=function(container,$container){},BaseAdapter.prototype.destroy=function(){},BaseAdapter.prototype.generateResultId=function(container,data){var id=container.id+"-result-";return id+=Utils.generateChars(4),null!=data.id?id+="-"+data.id.toString():id+="-"+Utils.generateChars(4),id},BaseAdapter}),S22.define("select2/data/select",["./base","../utils","jquery"],function(BaseAdapter,Utils,$2){function SelectAdapter($element,options){this.$element=$element,this.options=options,SelectAdapter.__super__.constructor.call(this)}return Utils.Extend(SelectAdapter,BaseAdapter),SelectAdapter.prototype.current=function(callback){var self2=this;callback(Array.prototype.map.call(this.$element[0].querySelectorAll(":checked"),function(selectedElement){return self2.item($2(selectedElement))}))},SelectAdapter.prototype.select=function(data){var self2=this;if(data.selected=!0,null!=data.element&&"option"===data.element.tagName.toLowerCase())return data.element.selected=!0,void this.$element.trigger("input").trigger("change");if(this.$element.prop("multiple"))this.current(function(currentData){var val2=[];(data=[data]).push.apply(data,currentData);for(var d=0;d<data.length;d++){var id=data[d].id;-1===val2.indexOf(id)&&val2.push(id)}self2.$element.val(val2),self2.$element.trigger("input").trigger("change")});else{var val=data.id;this.$element.val(val),this.$element.trigger("input").trigger("change")}},SelectAdapter.prototype.unselect=function(data){var self2=this;if(this.$element.prop("multiple")){if(data.selected=!1,null!=data.element&&"option"===data.element.tagName.toLowerCase())return data.element.selected=!1,void this.$element.trigger("input").trigger("change");this.current(function(currentData){for(var val=[],d=0;d<currentData.length;d++){var id=currentData[d].id;id!==data.id&&-1===val.indexOf(id)&&val.push(id)}self2.$element.val(val),self2.$element.trigger("input").trigger("change")})}},SelectAdapter.prototype.bind=function(container,$container){var self2=this;this.container=container,container.on("select",function(params){self2.select(params.data)}),container.on("unselect",function(params){self2.unselect(params.data)})},SelectAdapter.prototype.destroy=function(){this.$element.find("*").each(function(){Utils.RemoveData(this)})},SelectAdapter.prototype.query=function(params,callback){var data=[],self2=this;this.$element.children().each(function(){if("option"===this.tagName.toLowerCase()||"optgroup"===this.tagName.toLowerCase()){var $option=$2(this),option=self2.item($option),matches=self2.matches(params,option);null!==matches&&data.push(matches)}}),callback({results:data})},SelectAdapter.prototype.addOptions=function($options){this.$element.append($options)},SelectAdapter.prototype.option=function(data){var option;data.children?(option=document.createElement("optgroup")).label=data.text:void 0!==(option=document.createElement("option")).textContent?option.textContent=data.text:option.innerText=data.text,void 0!==data.id&&(option.value=data.id),data.disabled&&(option.disabled=!0),data.selected&&(option.selected=!0),data.title&&(option.title=data.title);var normalizedData=this._normalizeItem(data);return normalizedData.element=option,Utils.StoreData(option,"data",normalizedData),$2(option)},SelectAdapter.prototype.item=function($option){var data={};if(null!=(data=Utils.GetData($option[0],"data")))return data;var option=$option[0];if("option"===option.tagName.toLowerCase())data={id:$option.val(),text:$option.text(),disabled:$option.prop("disabled"),selected:$option.prop("selected"),title:$option.prop("title")};else if("optgroup"===option.tagName.toLowerCase()){data={text:$option.prop("label"),children:[],title:$option.prop("title")};for(var $children=$option.children("option"),children=[],c=0;c<$children.length;c++){var $child=$2($children[c]),child=this.item($child);children.push(child)}data.children=children}return(data=this._normalizeItem(data)).element=$option[0],Utils.StoreData($option[0],"data",data),data},SelectAdapter.prototype._normalizeItem=function(item){return item!==Object(item)&&(item={id:item,text:item}),null!=(item=$2.extend({},{text:""},item)).id&&(item.id=item.id.toString()),null!=item.text&&(item.text=item.text.toString()),null==item._resultId&&item.id&&null!=this.container&&(item._resultId=this.generateResultId(this.container,item)),$2.extend({},{selected:!1,disabled:!1},item)},SelectAdapter.prototype.matches=function(params,data){return this.options.get("matcher")(params,data)},SelectAdapter}),S22.define("select2/data/array",["./select","../utils","jquery"],function(SelectAdapter,Utils,$2){function ArrayAdapter($element,options){this._dataToConvert=options.get("data")||[],ArrayAdapter.__super__.constructor.call(this,$element,options)}return Utils.Extend(ArrayAdapter,SelectAdapter),ArrayAdapter.prototype.bind=function(container,$container){ArrayAdapter.__super__.bind.call(this,container,$container),this.addOptions(this.convertToOptions(this._dataToConvert))},ArrayAdapter.prototype.select=function(data){var $option=this.$element.find("option").filter(function(i,elm){return elm.value==data.id.toString()});0===$option.length&&($option=this.option(data),this.addOptions($option)),ArrayAdapter.__super__.select.call(this,data)},ArrayAdapter.prototype.convertToOptions=function(data){var self2=this,$existing=this.$element.find("option"),existingIds=$existing.map(function(){return self2.item($2(this)).id}).get(),$options=[];function onlyItem(item2){return function(){return $2(this).val()==item2.id}}for(var d=0;d<data.length;d++){var item=this._normalizeItem(data[d]);if(existingIds.indexOf(item.id)>=0){var $existingOption=$existing.filter(onlyItem(item)),existingData=this.item($existingOption),newData=$2.extend(!0,{},item,existingData),$newOption=this.option(newData);$existingOption.replaceWith($newOption)}else{var $option=this.option(item);if(item.children){var $children=this.convertToOptions(item.children);$option.append($children)}$options.push($option)}}return $options},ArrayAdapter}),S22.define("select2/data/ajax",["./array","../utils","jquery"],function(ArrayAdapter,Utils,$2){function AjaxAdapter($element,options){this.ajaxOptions=this._applyDefaults(options.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),AjaxAdapter.__super__.constructor.call(this,$element,options)}return Utils.Extend(AjaxAdapter,ArrayAdapter),AjaxAdapter.prototype._applyDefaults=function(options){var defaults={data:function(params){return $2.extend({},params,{q:params.term})},transport:function(params,success,failure){var $request=$2.ajax(params);return $request.then(success),$request.fail(failure),$request}};return $2.extend({},defaults,options,!0)},AjaxAdapter.prototype.processResults=function(results){return results},AjaxAdapter.prototype.query=function(params,callback){var self2=this;null!=this._request&&("function"==typeof this._request.abort&&this._request.abort(),this._request=null);var options=$2.extend({type:"GET"},this.ajaxOptions);function request(){var $request=options.transport(options,function(data){var results=self2.processResults(data,params);self2.options.get("debug")&&window.console&&console.error&&(results&&results.results&&Array.isArray(results.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),callback(results)},function(){(!("status"in $request)||0!==$request.status&&"0"!==$request.status)&&self2.trigger("results:message",{message:"errorLoading"})});self2._request=$request}"function"==typeof options.url&&(options.url=options.url.call(this.$element,params)),"function"==typeof options.data&&(options.data=options.data.call(this.$element,params)),this.ajaxOptions.delay&&null!=params.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(request,this.ajaxOptions.delay)):request()},AjaxAdapter}),S22.define("select2/data/tags",["jquery"],function($2){function Tags(decorated,$element,options){var tags=options.get("tags"),createTag=options.get("createTag");void 0!==createTag&&(this.createTag=createTag);var insertTag=options.get("insertTag");if(void 0!==insertTag&&(this.insertTag=insertTag),decorated.call(this,$element,options),Array.isArray(tags))for(var t=0;t<tags.length;t++){var tag=tags[t],item=this._normalizeItem(tag),$option=this.option(item);this.$element.append($option)}}return Tags.prototype.query=function(decorated,params,callback){var self2=this;this._removeOldTags(),null!=params.term&&null==params.page?decorated.call(this,params,function wrapper(obj,child){for(var data=obj.results,i=0;i<data.length;i++){var option=data[i],checkChildren=null!=option.children&&!wrapper({results:option.children},!0);if((option.text||"").toUpperCase()===(params.term||"").toUpperCase()||checkChildren)return!child&&(obj.data=data,void callback(obj))}if(child)return!0;var tag=self2.createTag(params);if(null!=tag){var $option=self2.option(tag);$option.attr("data-select2-tag","true"),self2.addOptions([$option]),self2.insertTag(data,tag)}obj.results=data,callback(obj)}):decorated.call(this,params,callback)},Tags.prototype.createTag=function(decorated,params){if(null==params.term)return null;var term=params.term.trim();return""===term?null:{id:term,text:term}},Tags.prototype.insertTag=function(_,data,tag){data.unshift(tag)},Tags.prototype._removeOldTags=function(_){this.$element.find("option[data-select2-tag]").each(function(){this.selected||$2(this).remove()})},Tags}),S22.define("select2/data/tokenizer",["jquery"],function($2){function Tokenizer(decorated,$element,options){var tokenizer=options.get("tokenizer");void 0!==tokenizer&&(this.tokenizer=tokenizer),decorated.call(this,$element,options)}return Tokenizer.prototype.bind=function(decorated,container,$container){decorated.call(this,container,$container),this.$search=container.dropdown.$search||container.selection.$search||$container.find(".select2-search__field")},Tokenizer.prototype.query=function(decorated,params,callback){var self2=this;params.term=params.term||"";var tokenData=this.tokenizer(params,this.options,function createAndSelect(data){var item=self2._normalizeItem(data);if(!self2.$element.find("option").filter(function(){return $2(this).val()===item.id}).length){var $option=self2.option(item);$option.attr("data-select2-tag",!0),self2._removeOldTags(),self2.addOptions([$option])}!function select(data){self2.trigger("select",{data:data})}(item)});tokenData.term!==params.term&&(this.$search.length&&(this.$search.val(tokenData.term),this.$search.trigger("focus")),params.term=tokenData.term),decorated.call(this,params,callback)},Tokenizer.prototype.tokenizer=function(_,params,options,callback){for(var separators=options.get("tokenSeparators")||[],term=params.term,i=0,createTag=this.createTag||function(params2){return{id:params2.term,text:params2.term}};i<term.length;){var termChar=term[i];if(-1!==separators.indexOf(termChar)){var part=term.substr(0,i),data=createTag($2.extend({},params,{term:part}));null!=data?(callback(data),term=term.substr(i+1)||"",i=0):i++}else i++}return{term:term}},Tokenizer}),S22.define("select2/data/minimumInputLength",[],function(){function MinimumInputLength(decorated,$e,options){this.minimumInputLength=options.get("minimumInputLength"),decorated.call(this,$e,options)}return MinimumInputLength.prototype.query=function(decorated,params,callback){params.term=params.term||"",params.term.length<this.minimumInputLength?this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:params.term,params:params}}):decorated.call(this,params,callback)},MinimumInputLength}),S22.define("select2/data/maximumInputLength",[],function(){function MaximumInputLength(decorated,$e,options){this.maximumInputLength=options.get("maximumInputLength"),decorated.call(this,$e,options)}return MaximumInputLength.prototype.query=function(decorated,params,callback){params.term=params.term||"",this.maximumInputLength>0&&params.term.length>this.maximumInputLength?this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:params.term,params:params}}):decorated.call(this,params,callback)},MaximumInputLength}),S22.define("select2/data/maximumSelectionLength",[],function(){function MaximumSelectionLength(decorated,$e,options){this.maximumSelectionLength=options.get("maximumSelectionLength"),decorated.call(this,$e,options)}return MaximumSelectionLength.prototype.bind=function(decorated,container,$container){var self2=this;decorated.call(this,container,$container),container.on("select",function(){self2._checkIfMaximumSelected()})},MaximumSelectionLength.prototype.query=function(decorated,params,callback){var self2=this;this._checkIfMaximumSelected(function(){decorated.call(self2,params,callback)})},MaximumSelectionLength.prototype._checkIfMaximumSelected=function(_,successCallback){var self2=this;this.current(function(currentData){var count=null!=currentData?currentData.length:0;self2.maximumSelectionLength>0&&count>=self2.maximumSelectionLength?self2.trigger("results:message",{message:"maximumSelected",args:{maximum:self2.maximumSelectionLength}}):successCallback&&successCallback()})},MaximumSelectionLength}),S22.define("select2/dropdown",["jquery","./utils"],function($2,Utils){function Dropdown($element,options){this.$element=$element,this.options=options,Dropdown.__super__.constructor.call(this)}return Utils.Extend(Dropdown,Utils.Observable),Dropdown.prototype.render=function(){var $dropdown=$2('<span class="select2-dropdown"><span class="select2-results"></span></span>');return $dropdown.attr("dir",this.options.get("dir")),this.$dropdown=$dropdown,$dropdown},Dropdown.prototype.bind=function(){},Dropdown.prototype.position=function($dropdown,$container){},Dropdown.prototype.destroy=function(){this.$dropdown.remove()},Dropdown}),S22.define("select2/dropdown/search",["jquery"],function($2){function Search(){}return Search.prototype.render=function(decorated){var $rendered=decorated.call(this),searchLabel=this.options.get("translations").get("search"),$search=$2('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" /></span>');return this.$searchContainer=$search,this.$search=$search.find("input"),this.$search.prop("autocomplete",this.options.get("autocomplete")),this.$search.attr("aria-label",searchLabel()),$rendered.prepend($search),$rendered},Search.prototype.bind=function(decorated,container,$container){var self2=this,resultsId=container.id+"-results";decorated.call(this,container,$container),this.$search.on("keydown",function(evt){self2.trigger("keypress",evt),self2._keyUpPrevented=evt.isDefaultPrevented()}),this.$search.on("input",function(evt){$2(this).off("keyup")}),this.$search.on("keyup input",function(evt){self2.handleSearch(evt)}),container.on("open",function(){self2.$search.attr("tabindex",0),self2.$search.attr("aria-controls",resultsId),self2.$search.trigger("focus"),window.setTimeout(function(){self2.$search.trigger("focus")},0)}),container.on("close",function(){self2.$search.attr("tabindex",-1),self2.$search.removeAttr("aria-controls"),self2.$search.removeAttr("aria-activedescendant"),self2.$search.val(""),self2.$search.trigger("blur")}),container.on("focus",function(){container.isOpen()||self2.$search.trigger("focus")}),container.on("results:all",function(params){null!=params.query.term&&""!==params.query.term||(self2.showSearch(params)?self2.$searchContainer[0].classList.remove("select2-search--hide"):self2.$searchContainer[0].classList.add("select2-search--hide"))}),container.on("results:focus",function(params){params.data._resultId?self2.$search.attr("aria-activedescendant",params.data._resultId):self2.$search.removeAttr("aria-activedescendant")})},Search.prototype.handleSearch=function(evt){if(!this._keyUpPrevented){var input=this.$search.val();this.trigger("query",{term:input})}this._keyUpPrevented=!1},Search.prototype.showSearch=function(_,params){return!0},Search}),S22.define("select2/dropdown/hidePlaceholder",[],function(){function HidePlaceholder(decorated,$element,options,dataAdapter){this.placeholder=this.normalizePlaceholder(options.get("placeholder")),decorated.call(this,$element,options,dataAdapter)}return HidePlaceholder.prototype.append=function(decorated,data){data.results=this.removePlaceholder(data.results),decorated.call(this,data)},HidePlaceholder.prototype.normalizePlaceholder=function(_,placeholder){return"string"==typeof placeholder&&(placeholder={id:"",text:placeholder}),placeholder},HidePlaceholder.prototype.removePlaceholder=function(_,data){for(var modifiedData=data.slice(0),d=data.length-1;d>=0;d--){var item=data[d];this.placeholder.id===item.id&&modifiedData.splice(d,1)}return modifiedData},HidePlaceholder}),S22.define("select2/dropdown/infiniteScroll",["jquery"],function($2){function InfiniteScroll(decorated,$element,options,dataAdapter){this.lastParams={},decorated.call(this,$element,options,dataAdapter),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return InfiniteScroll.prototype.append=function(decorated,data){this.$loadingMore.remove(),this.loading=!1,decorated.call(this,data),this.showLoadingMore(data)&&(this.$results.append(this.$loadingMore),this.loadMoreIfNeeded())},InfiniteScroll.prototype.bind=function(decorated,container,$container){var self2=this;decorated.call(this,container,$container),container.on("query",function(params){self2.lastParams=params,self2.loading=!0}),container.on("query:append",function(params){self2.lastParams=params,self2.loading=!0}),this.$results.on("scroll",this.loadMoreIfNeeded.bind(this))},InfiniteScroll.prototype.loadMoreIfNeeded=function(){var isLoadMoreVisible=$2.contains(document.documentElement,this.$loadingMore[0]);!this.loading&&isLoadMoreVisible&&this.$results.offset().top+this.$results.outerHeight(!1)+50>=this.$loadingMore.offset().top+this.$loadingMore.outerHeight(!1)&&this.loadMore()},InfiniteScroll.prototype.loadMore=function(){this.loading=!0;var params=$2.extend({},{page:1},this.lastParams);params.page++,this.trigger("query:append",params)},InfiniteScroll.prototype.showLoadingMore=function(_,data){return data.pagination&&data.pagination.more},InfiniteScroll.prototype.createLoadingMore=function(){var $option=$2('<li class="select2-results__option select2-results__option--load-more"role="option" aria-disabled="true"></li>'),message=this.options.get("translations").get("loadingMore");return $option.html(message(this.lastParams)),$option},InfiniteScroll}),S22.define("select2/dropdown/attachBody",["jquery","../utils"],function($2,Utils){function AttachBody(decorated,$element,options){this.$dropdownParent=$2(options.get("dropdownParent")||document.body),decorated.call(this,$element,options)}return AttachBody.prototype.bind=function(decorated,container,$container){var self2=this;decorated.call(this,container,$container),container.on("open",function(){self2._showDropdown(),self2._attachPositioningHandler(container),self2._bindContainerResultHandlers(container)}),container.on("close",function(){self2._hideDropdown(),self2._detachPositioningHandler(container)}),this.$dropdownContainer.on("mousedown",function(evt){evt.stopPropagation()})},AttachBody.prototype.destroy=function(decorated){decorated.call(this),this.$dropdownContainer.remove()},AttachBody.prototype.position=function(decorated,$dropdown,$container){$dropdown.attr("class",$container.attr("class")),$dropdown[0].classList.remove("select2"),$dropdown[0].classList.add("select2-container--open"),$dropdown.css({position:"absolute",top:-999999}),this.$container=$container},AttachBody.prototype.render=function(decorated){var $container=$2("<span></span>"),$dropdown=decorated.call(this);return $container.append($dropdown),this.$dropdownContainer=$container,$container},AttachBody.prototype._hideDropdown=function(decorated){this.$dropdownContainer.detach()},AttachBody.prototype._bindContainerResultHandlers=function(decorated,container){if(!this._containerResultsHandlersBound){var self2=this;container.on("results:all",function(){self2._positionDropdown(),self2._resizeDropdown()}),container.on("results:append",function(){self2._positionDropdown(),self2._resizeDropdown()}),container.on("results:message",function(){self2._positionDropdown(),self2._resizeDropdown()}),container.on("select",function(){self2._positionDropdown(),self2._resizeDropdown()}),container.on("unselect",function(){self2._positionDropdown(),self2._resizeDropdown()}),this._containerResultsHandlersBound=!0}},AttachBody.prototype._attachPositioningHandler=function(decorated,container){var self2=this,scrollEvent="scroll.select2."+container.id,resizeEvent="resize.select2."+container.id,orientationEvent="orientationchange.select2."+container.id,$watchers=this.$container.parents().filter(Utils.hasScroll);$watchers.each(function(){Utils.StoreData(this,"select2-scroll-position",{x:$2(this).scrollLeft(),y:$2(this).scrollTop()})}),$watchers.on(scrollEvent,function(ev){var position=Utils.GetData(this,"select2-scroll-position");$2(this).scrollTop(position.y)}),$2(window).on(scrollEvent+" "+resizeEvent+" "+orientationEvent,function(e){self2._positionDropdown(),self2._resizeDropdown()})},AttachBody.prototype._detachPositioningHandler=function(decorated,container){var scrollEvent="scroll.select2."+container.id,resizeEvent="resize.select2."+container.id,orientationEvent="orientationchange.select2."+container.id;this.$container.parents().filter(Utils.hasScroll).off(scrollEvent),$2(window).off(scrollEvent+" "+resizeEvent+" "+orientationEvent)},AttachBody.prototype._positionDropdown=function(){var $window=$2(window),isCurrentlyAbove=this.$dropdown[0].classList.contains("select2-dropdown--above"),isCurrentlyBelow=this.$dropdown[0].classList.contains("select2-dropdown--below"),newDirection=null,offset=this.$container.offset();offset.bottom=offset.top+this.$container.outerHeight(!1);var container={height:this.$container.outerHeight(!1)};container.top=offset.top,container.bottom=offset.top+container.height;var dropdown_height=this.$dropdown.outerHeight(!1),viewport_top=$window.scrollTop(),viewport_bottom=$window.scrollTop()+$window.height(),enoughRoomAbove=viewport_top<offset.top-dropdown_height,enoughRoomBelow=viewport_bottom>offset.bottom+dropdown_height,css={left:offset.left,top:container.bottom},$offsetParent=this.$dropdownParent;"static"===$offsetParent.css("position")&&($offsetParent=$offsetParent.offsetParent());var parentOffset={top:0,left:0};($2.contains(document.body,$offsetParent[0])||$offsetParent[0].isConnected)&&(parentOffset=$offsetParent.offset()),css.top-=parentOffset.top,css.left-=parentOffset.left,isCurrentlyAbove||isCurrentlyBelow||(newDirection="below"),enoughRoomBelow||!enoughRoomAbove||isCurrentlyAbove?!enoughRoomAbove&&enoughRoomBelow&&isCurrentlyAbove&&(newDirection="below"):newDirection="above",("above"==newDirection||isCurrentlyAbove&&"below"!==newDirection)&&(css.top=container.top-parentOffset.top-dropdown_height),null!=newDirection&&(this.$dropdown[0].classList.remove("select2-dropdown--below"),this.$dropdown[0].classList.remove("select2-dropdown--above"),this.$dropdown[0].classList.add("select2-dropdown--"+newDirection),this.$container[0].classList.remove("select2-container--below"),this.$container[0].classList.remove("select2-container--above"),this.$container[0].classList.add("select2-container--"+newDirection)),this.$dropdownContainer.css(css)},AttachBody.prototype._resizeDropdown=function(){var css={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(css.minWidth=css.width,css.position="relative",css.width="auto"),this.$dropdown.css(css)},AttachBody.prototype._showDropdown=function(decorated){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},AttachBody}),S22.define("select2/dropdown/minimumResultsForSearch",[],function(){function countResults(data){for(var count=0,d=0;d<data.length;d++){var item=data[d];item.children?count+=countResults(item.children):count++}return count}function MinimumResultsForSearch(decorated,$element,options,dataAdapter){this.minimumResultsForSearch=options.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),decorated.call(this,$element,options,dataAdapter)}return MinimumResultsForSearch.prototype.showSearch=function(decorated,params){return!(countResults(params.data.results)<this.minimumResultsForSearch)&&decorated.call(this,params)},MinimumResultsForSearch}),S22.define("select2/dropdown/selectOnClose",["../utils"],function(Utils){function SelectOnClose(){}return SelectOnClose.prototype.bind=function(decorated,container,$container){var self2=this;decorated.call(this,container,$container),container.on("close",function(params){self2._handleSelectOnClose(params)})},SelectOnClose.prototype._handleSelectOnClose=function(_,params){if(params&&null!=params.originalSelect2Event){var event=params.originalSelect2Event;if("select"===event._type||"unselect"===event._type)return}var $highlightedResults=this.getHighlightedResults();if(!($highlightedResults.length<1)){var data=Utils.GetData($highlightedResults[0],"data");null!=data.element&&data.element.selected||null==data.element&&data.selected||this.trigger("select",{data:data})}},SelectOnClose}),S22.define("select2/dropdown/closeOnSelect",[],function(){function CloseOnSelect(){}return CloseOnSelect.prototype.bind=function(decorated,container,$container){var self2=this;decorated.call(this,container,$container),container.on("select",function(evt){self2._selectTriggered(evt)}),container.on("unselect",function(evt){self2._selectTriggered(evt)})},CloseOnSelect.prototype._selectTriggered=function(_,evt){var originalEvent=evt.originalEvent;originalEvent&&(originalEvent.ctrlKey||originalEvent.metaKey)||this.trigger("close",{originalEvent:originalEvent,originalSelect2Event:evt})},CloseOnSelect}),S22.define("select2/dropdown/dropdownCss",["../utils"],function(Utils){function DropdownCSS(){}return DropdownCSS.prototype.render=function(decorated){var $dropdown=decorated.call(this),dropdownCssClass=this.options.get("dropdownCssClass")||"";return-1!==dropdownCssClass.indexOf(":all:")&&(dropdownCssClass=dropdownCssClass.replace(":all:",""),Utils.copyNonInternalCssClasses($dropdown[0],this.$element[0])),$dropdown.addClass(dropdownCssClass),$dropdown},DropdownCSS}),S22.define("select2/dropdown/tagsSearchHighlight",["../utils"],function(Utils){function TagsSearchHighlight(){}return TagsSearchHighlight.prototype.highlightFirstItem=function(decorated){var $options=this.$results.find(".select2-results__option--selectable:not(.select2-results__option--selected)");if($options.length>0){var $firstOption=$options.first(),firstElement=Utils.GetData($firstOption[0],"data").element;if(firstElement&&firstElement.getAttribute&&"true"===firstElement.getAttribute("data-select2-tag"))return void $firstOption.trigger("mouseenter")}decorated.call(this)},TagsSearchHighlight}),S22.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(args){var overChars=args.input.length-args.maximum,message="Please delete "+overChars+" character";return 1!=overChars&&(message+="s"),message},inputTooShort:function(args){return"Please enter "+(args.minimum-args.input.length)+" or more characters"},loadingMore:function(){return"Loading more results"},maximumSelected:function(args){var message="You can only select "+args.maximum+" item";return 1!=args.maximum&&(message+="s"),message},noResults:function(){return"   "},searching:function(){return"  ..."},removeAllItems:function(){return" "},removeItem:function(){return""},search:function(){return""}}}),S22.define("select2/defaults",["jquery","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/selectionCss","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./dropdown/dropdownCss","./dropdown/tagsSearchHighlight","./i18n/en"],function($2,ResultsList,SingleSelection,MultipleSelection,Placeholder,AllowClear,SelectionSearch,SelectionCSS,EventRelay,Utils,Translation,DIACRITICS,SelectData,ArrayData,AjaxData,Tags,Tokenizer,MinimumInputLength,MaximumInputLength,MaximumSelectionLength,Dropdown,DropdownSearch,HidePlaceholder,InfiniteScroll,AttachBody,MinimumResultsForSearch,SelectOnClose,CloseOnSelect,DropdownCSS,TagsSearchHighlight,EnglishTranslation){function Defaults(){this.reset()}return Defaults.prototype.apply=function(options){if(null==(options=$2.extend(!0,{},this.defaults,options)).dataAdapter&&(null!=options.ajax?options.dataAdapter=AjaxData:null!=options.data?options.dataAdapter=ArrayData:options.dataAdapter=SelectData,options.minimumInputLength>0&&(options.dataAdapter=Utils.Decorate(options.dataAdapter,MinimumInputLength)),options.maximumInputLength>0&&(options.dataAdapter=Utils.Decorate(options.dataAdapter,MaximumInputLength)),options.maximumSelectionLength>0&&(options.dataAdapter=Utils.Decorate(options.dataAdapter,MaximumSelectionLength)),options.tags&&(options.dataAdapter=Utils.Decorate(options.dataAdapter,Tags)),null==options.tokenSeparators&&null==options.tokenizer||(options.dataAdapter=Utils.Decorate(options.dataAdapter,Tokenizer))),null==options.resultsAdapter&&(options.resultsAdapter=ResultsList,null!=options.ajax&&(options.resultsAdapter=Utils.Decorate(options.resultsAdapter,InfiniteScroll)),null!=options.placeholder&&(options.resultsAdapter=Utils.Decorate(options.resultsAdapter,HidePlaceholder)),options.selectOnClose&&(options.resultsAdapter=Utils.Decorate(options.resultsAdapter,SelectOnClose)),options.tags&&(options.resultsAdapter=Utils.Decorate(options.resultsAdapter,TagsSearchHighlight))),null==options.dropdownAdapter){var SearchableDropdown=Utils.Decorate(Dropdown,DropdownSearch);options.dropdownAdapter=SearchableDropdown,0!==options.minimumResultsForSearch&&(options.dropdownAdapter=Utils.Decorate(options.dropdownAdapter,MinimumResultsForSearch)),options.closeOnSelect&&(options.dropdownAdapter=Utils.Decorate(options.dropdownAdapter,CloseOnSelect)),null!=options.dropdownCssClass&&(options.dropdownAdapter=Utils.Decorate(options.dropdownAdapter,DropdownCSS)),options.dropdownAdapter=Utils.Decorate(options.dropdownAdapter,AttachBody)}null==options.selectionAdapter&&(options.multiple?options.selectionAdapter=MultipleSelection:options.selectionAdapter=SingleSelection,null!=options.placeholder&&(options.selectionAdapter=Utils.Decorate(options.selectionAdapter,Placeholder)),options.allowClear&&(options.selectionAdapter=Utils.Decorate(options.selectionAdapter,AllowClear)),null!=options.selectionCssClass&&(options.selectionAdapter=Utils.Decorate(options.selectionAdapter,SelectionCSS)),options.selectionAdapter=Utils.Decorate(options.selectionAdapter,EventRelay)),options.language=this._resolveLanguage(options.language),options.language.push("en");for(var uniqueLanguages=[],l=0;l<options.language.length;l++){var language=options.language[l];-1===uniqueLanguages.indexOf(language)&&uniqueLanguages.push(language)}return options.language=uniqueLanguages,options.translations=this._processTranslations(options.language,options.debug),options},Defaults.prototype.reset=function(){function stripDiacritics(text){return text.replace(/[^\u0000-\u007E]/g,function match(a){return DIACRITICS[a]||a})}this.defaults={amdLanguageBase:"./i18n/",autocomplete:"off",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:Utils.escapeMarkup,language:{},matcher:function matcher(params,data){if(null==params.term||""===params.term.trim())return data;if(data.children&&data.children.length>0){for(var match=$2.extend(!0,{},data),c=data.children.length-1;c>=0;c--)null==matcher(params,data.children[c])&&match.children.splice(c,1);return match.children.length>0?match:matcher(params,match)}var original=stripDiacritics(data.text).toUpperCase(),term=stripDiacritics(params.term).toUpperCase();return original.indexOf(term)>-1?data:null},minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,scrollAfterSelect:!1,sorter:function(data){return data},templateResult:function(result){return result.text},templateSelection:function(selection){return selection.text},theme:"default",width:"resolve"}},Defaults.prototype.applyFromElement=function(options,$element){var optionLanguage=options.language,defaultLanguage=this.defaults.language,elementLanguage=$element.prop("lang"),parentLanguage=$element.closest("[lang]").prop("lang"),languages=Array.prototype.concat.call(this._resolveLanguage(elementLanguage),this._resolveLanguage(optionLanguage),this._resolveLanguage(defaultLanguage),this._resolveLanguage(parentLanguage));return options.language=languages,options},Defaults.prototype._resolveLanguage=function(language){if(!language)return[];if($2.isEmptyObject(language))return[];if($2.isPlainObject(language))return[language];var languages;languages=Array.isArray(language)?language:[language];for(var resolvedLanguages=[],l=0;l<languages.length;l++)if(resolvedLanguages.push(languages[l]),"string"==typeof languages[l]&&languages[l].indexOf("-")>0){var baseLanguage=languages[l].split("-")[0];resolvedLanguages.push(baseLanguage)}return resolvedLanguages},Defaults.prototype._processTranslations=function(languages,debug){for(var translations=new Translation,l=0;l<languages.length;l++){var languageData=new Translation,language=languages[l];if("string"==typeof language)try{languageData=Translation.loadPath(language)}catch(e){try{language=this.defaults.amdLanguageBase+language,languageData=Translation.loadPath(language)}catch(ex){debug&&window.console&&console.warn&&console.warn('Select2: The language file for "'+language+'" could not be automatically loaded. A fallback will be used instead.')}}else languageData=$2.isPlainObject(language)?new Translation(language):language;translations.extend(languageData)}return translations},Defaults.prototype.set=function(key,value){var data={};data[$2.camelCase(key)]=value;var convertedData=Utils._convertData(data);$2.extend(!0,this.defaults,convertedData)},new Defaults}),S22.define("select2/options",["jquery","./defaults","./utils"],function($2,Defaults,Utils){function Options(options,$element){this.options=options,null!=$element&&this.fromElement($element),null!=$element&&(this.options=Defaults.applyFromElement(this.options,$element)),this.options=Defaults.apply(this.options)}return Options.prototype.fromElement=function($e){var excludedData=["select2"];null==this.options.multiple&&(this.options.multiple=$e.prop("multiple")),null==this.options.disabled&&(this.options.disabled=$e.prop("disabled")),null==this.options.autocomplete&&$e.prop("autocomplete")&&(this.options.autocomplete=$e.prop("autocomplete")),null==this.options.dir&&($e.prop("dir")?this.options.dir=$e.prop("dir"):$e.closest("[dir]").prop("dir")?this.options.dir=$e.closest("[dir]").prop("dir"):this.options.dir="ltr"),$e.prop("disabled",this.options.disabled),$e.prop("multiple",this.options.multiple),Utils.GetData($e[0],"select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),Utils.StoreData($e[0],"data",Utils.GetData($e[0],"select2Tags")),Utils.StoreData($e[0],"tags",!0)),Utils.GetData($e[0],"ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),$e.attr("ajax--url",Utils.GetData($e[0],"ajaxUrl")),Utils.StoreData($e[0],"ajax-Url",Utils.GetData($e[0],"ajaxUrl")));var dataset={};function upperCaseLetter(_,letter){return letter.toUpperCase()}for(var attr=0;attr<$e[0].attributes.length;attr++){var attributeName=$e[0].attributes[attr].name;if("data-"==attributeName.substr(0,5)){var dataName=attributeName.substring(5),dataValue=Utils.GetData($e[0],dataName);dataset[dataName.replace(/-([a-z])/g,upperCaseLetter)]=dataValue}}$2.fn.jquery&&"1."==$2.fn.jquery.substr(0,2)&&$e[0].dataset&&(dataset=$2.extend(!0,{},$e[0].dataset,dataset));var data=$2.extend(!0,{},Utils.GetData($e[0]),dataset);for(var key in data=Utils._convertData(data))excludedData.indexOf(key)>-1||($2.isPlainObject(this.options[key])?$2.extend(this.options[key],data[key]):this.options[key]=data[key]);return this},Options.prototype.get=function(key){return this.options[key]},Options.prototype.set=function(key,val){this.options[key]=val},Options}),S22.define("select2/core",["jquery","./options","./utils","./keys"],function($2,Options,Utils,KEYS){var Select2=function($element,options){null!=Utils.GetData($element[0],"select2")&&Utils.GetData($element[0],"select2").destroy(),this.$element=$element,this.id=this._generateId($element),options=options||{},this.options=new Options(options,$element),Select2.__super__.constructor.call(this);var tabindex=$element.attr("tabindex")||0;Utils.StoreData($element[0],"old-tabindex",tabindex),$element.attr("tabindex","-1");var DataAdapter=this.options.get("dataAdapter");this.dataAdapter=new DataAdapter($element,this.options);var $container=this.render();this._placeContainer($container);var SelectionAdapter=this.options.get("selectionAdapter");this.selection=new SelectionAdapter($element,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,$container);var DropdownAdapter=this.options.get("dropdownAdapter");this.dropdown=new DropdownAdapter($element,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,$container);var ResultsAdapter=this.options.get("resultsAdapter");this.results=new ResultsAdapter($element,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var self2=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(initialData){self2.trigger("selection:update",{data:initialData})}),$element[0].classList.add("select2-hidden-accessible"),$element.attr("aria-hidden","true"),this._syncAttributes(),Utils.StoreData($element[0],"select2",this),$element.data("select2",this)};return Utils.Extend(Select2,Utils.Observable),Select2.prototype._generateId=function($element){return"select2-"+(null!=$element.attr("id")?$element.attr("id"):null!=$element.attr("name")?$element.attr("name")+"-"+Utils.generateChars(2):Utils.generateChars(4)).replace(/(:|\.|\[|\]|,)/g,"")},Select2.prototype._placeContainer=function($container){$container.insertAfter(this.$element);var width=this._resolveWidth(this.$element,this.options.get("width"));null!=width&&$container.css("width",width)},Select2.prototype._resolveWidth=function($element,method){var WIDTH=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==method){var styleWidth=this._resolveWidth($element,"style");return null!=styleWidth?styleWidth:this._resolveWidth($element,"element")}if("element"==method){var elementWidth=$element.outerWidth(!1);return elementWidth<=0?"auto":elementWidth+"px"}if("style"==method){var style=$element.attr("style");if("string"!=typeof style)return null;for(var attrs=style.split(";"),i=0,l=attrs.length;i<l;i+=1){var matches=attrs[i].replace(/\s/g,"").match(WIDTH);if(null!==matches&&matches.length>=1)return matches[1]}return null}return"computedstyle"==method?window.getComputedStyle($element[0]).width:method},Select2.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},Select2.prototype._registerDomEvents=function(){var self2=this;this.$element.on("change.select2",function(){self2.dataAdapter.current(function(data){self2.trigger("selection:update",{data:data})})}),this.$element.on("focus.select2",function(evt){self2.trigger("focus",evt)}),this._syncA=Utils.bind(this._syncAttributes,this),this._syncS=Utils.bind(this._syncSubtree,this),this._observer=new window.MutationObserver(function(mutations){self2._syncA(),self2._syncS(mutations)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})},Select2.prototype._registerDataEvents=function(){var self2=this;this.dataAdapter.on("*",function(name,params){self2.trigger(name,params)})},Select2.prototype._registerSelectionEvents=function(){var self2=this,nonRelayEvents=["toggle","focus"];this.selection.on("toggle",function(){self2.toggleDropdown()}),this.selection.on("focus",function(params){self2.focus(params)}),this.selection.on("*",function(name,params){-1===nonRelayEvents.indexOf(name)&&self2.trigger(name,params)})},Select2.prototype._registerDropdownEvents=function(){var self2=this;this.dropdown.on("*",function(name,params){self2.trigger(name,params)})},Select2.prototype._registerResultsEvents=function(){var self2=this;this.results.on("*",function(name,params){self2.trigger(name,params)})},Select2.prototype._registerEvents=function(){var self2=this;this.on("open",function(){self2.$container[0].classList.add("select2-container--open")}),this.on("close",function(){self2.$container[0].classList.remove("select2-container--open")}),this.on("enable",function(){self2.$container[0].classList.remove("select2-container--disabled")}),this.on("disable",function(){self2.$container[0].classList.add("select2-container--disabled")}),this.on("blur",function(){self2.$container[0].classList.remove("select2-container--focus")}),this.on("query",function(params){self2.isOpen()||self2.trigger("open",{}),this.dataAdapter.query(params,function(data){self2.trigger("results:all",{data:data,query:params})})}),this.on("query:append",function(params){this.dataAdapter.query(params,function(data){self2.trigger("results:append",{data:data,query:params})})}),this.on("keypress",function(evt){var key=evt.which;self2.isOpen()?key===KEYS.ESC||key===KEYS.UP&&evt.altKey?(self2.close(evt),evt.preventDefault()):key===KEYS.ENTER||key===KEYS.TAB?(self2.trigger("results:select",{}),evt.preventDefault()):key===KEYS.SPACE&&evt.ctrlKey?(self2.trigger("results:toggle",{}),evt.preventDefault()):key===KEYS.UP?(self2.trigger("results:previous",{}),evt.preventDefault()):key===KEYS.DOWN&&(self2.trigger("results:next",{}),evt.preventDefault()):(key===KEYS.ENTER||key===KEYS.SPACE||key===KEYS.DOWN&&evt.altKey)&&(self2.open(),evt.preventDefault())})},Select2.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.isDisabled()?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},Select2.prototype._isChangeMutation=function(mutations){var self2=this;if(mutations.addedNodes&&mutations.addedNodes.length>0){for(var n=0;n<mutations.addedNodes.length;n++)if(mutations.addedNodes[n].selected)return!0}else{if(mutations.removedNodes&&mutations.removedNodes.length>0)return!0;if(Array.isArray(mutations))return mutations.some(function(mutation){return self2._isChangeMutation(mutation)})}return!1},Select2.prototype._syncSubtree=function(mutations){var changed=this._isChangeMutation(mutations),self2=this;changed&&this.dataAdapter.current(function(currentData){self2.trigger("selection:update",{data:currentData})})},Select2.prototype.trigger=function(name,args){var actualTrigger=Select2.__super__.trigger,preTriggerMap={open:"opening",close:"closing",select:"selecting",unselect:"unselecting",clear:"clearing"};if(void 0===args&&(args={}),name in preTriggerMap){var preTriggerName=preTriggerMap[name],preTriggerArgs={prevented:!1,name:name,args:args};if(actualTrigger.call(this,preTriggerName,preTriggerArgs),preTriggerArgs.prevented)return void(args.prevented=!0)}actualTrigger.call(this,name,args)},Select2.prototype.toggleDropdown=function(){this.isDisabled()||(this.isOpen()?this.close():this.open())},Select2.prototype.open=function(){this.isOpen()||this.isDisabled()||this.trigger("query",{})},Select2.prototype.close=function(evt){this.isOpen()&&this.trigger("close",{originalEvent:evt})},Select2.prototype.isEnabled=function(){return!this.isDisabled()},Select2.prototype.isDisabled=function(){return this.options.get("disabled")},Select2.prototype.isOpen=function(){return this.$container[0].classList.contains("select2-container--open")},Select2.prototype.hasFocus=function(){return this.$container[0].classList.contains("select2-container--focus")},Select2.prototype.focus=function(data){this.hasFocus()||(this.$container[0].classList.add("select2-container--focus"),this.trigger("focus",{}))},Select2.prototype.enable=function(args){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),null!=args&&0!==args.length||(args=[!0]);var disabled=!args[0];this.$element.prop("disabled",disabled)},Select2.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var data=[];return this.dataAdapter.current(function(currentData){data=currentData}),data},Select2.prototype.val=function(args){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==args||0===args.length)return this.$element.val();var newVal=args[0];Array.isArray(newVal)&&(newVal=newVal.map(function(obj){return obj.toString()})),this.$element.val(newVal).trigger("input").trigger("change")},Select2.prototype.destroy=function(){Utils.RemoveData(this.$container[0]),this.$container.remove(),this._observer.disconnect(),this._observer=null,this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",Utils.GetData(this.$element[0],"old-tabindex")),this.$element[0].classList.remove("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),Utils.RemoveData(this.$element[0]),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},Select2.prototype.render=function(){var $container=$2('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return $container.attr("dir",this.options.get("dir")),this.$container=$container,this.$container[0].classList.add("select2-container--"+this.options.get("theme")),Utils.StoreData($container[0],"element",this.$element),$container},Select2}),S22.define("select2/dropdown/attachContainer",[],function(){function AttachContainer(decorated,$element,options){decorated.call(this,$element,options)}return AttachContainer.prototype.position=function(decorated,$dropdown,$container){$container.find(".dropdown-wrapper").append($dropdown),$dropdown[0].classList.add("select2-dropdown--below"),$container[0].classList.add("select2-container--below")},AttachContainer}),S22.define("select2/dropdown/stopPropagation",[],function(){function StopPropagation(){}return StopPropagation.prototype.bind=function(decorated,container,$container){decorated.call(this,container,$container),this.$dropdown.on(["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"].join(" "),function(evt){evt.stopPropagation()})},StopPropagation}),S22.define("select2/selection/stopPropagation",[],function(){function StopPropagation(){}return StopPropagation.prototype.bind=function(decorated,container,$container){decorated.call(this,container,$container),this.$selection.on(["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"].join(" "),function(evt){evt.stopPropagation()})},StopPropagation}),factory=function($2){var nullLowestDeltaTimeout,lowestDelta,toFix=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],toBind="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],slice=Array.prototype.slice;if($2.event.fixHooks)for(var i=toFix.length;i;)$2.event.fixHooks[toFix[--i]]=$2.event.mouseHooks;var special=$2.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var i2=toBind.length;i2;)this.addEventListener(toBind[--i2],handler,!1);else this.onmousewheel=handler;$2.data(this,"mousewheel-line-height",special.getLineHeight(this)),$2.data(this,"mousewheel-page-height",special.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var i2=toBind.length;i2;)this.removeEventListener(toBind[--i2],handler,!1);else this.onmousewheel=null;$2.removeData(this,"mousewheel-line-height"),$2.removeData(this,"mousewheel-page-height")},getLineHeight:function(elem){var $elem=$2(elem),$parent=$elem["offsetParent"in $2.fn?"offsetParent":"parent"]();return $parent.length||($parent=$2("body")),parseInt($parent.css("fontSize"),10)||parseInt($elem.css("fontSize"),10)||16},getPageHeight:function(elem){return $2(elem).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};function handler(event){var absDelta,orgEvent=event||window.event,args=slice.call(arguments,1),delta=0,deltaX=0,deltaY=0,offsetX=0,offsetY=0;if((event=$2.event.fix(orgEvent)).type="mousewheel","detail"in orgEvent&&(deltaY=-1*orgEvent.detail),"wheelDelta"in orgEvent&&(deltaY=orgEvent.wheelDelta),"wheelDeltaY"in orgEvent&&(deltaY=orgEvent.wheelDeltaY),"wheelDeltaX"in orgEvent&&(deltaX=-1*orgEvent.wheelDeltaX),"axis"in orgEvent&&orgEvent.axis===orgEvent.HORIZONTAL_AXIS&&(deltaX=-1*deltaY,deltaY=0),delta=0===deltaY?deltaX:deltaY,"deltaY"in orgEvent&&(delta=deltaY=-1*orgEvent.deltaY),"deltaX"in orgEvent&&(deltaX=orgEvent.deltaX,0===deltaY&&(delta=-1*deltaX)),0!==deltaY||0!==deltaX){if(1===orgEvent.deltaMode){var lineHeight=$2.data(this,"mousewheel-line-height");delta*=lineHeight,deltaY*=lineHeight,deltaX*=lineHeight}else if(2===orgEvent.deltaMode){var pageHeight=$2.data(this,"mousewheel-page-height");delta*=pageHeight,deltaY*=pageHeight,deltaX*=pageHeight}if(absDelta=Math.max(Math.abs(deltaY),Math.abs(deltaX)),(!lowestDelta||absDelta<lowestDelta)&&(lowestDelta=absDelta,shouldAdjustOldDeltas(orgEvent,absDelta)&&(lowestDelta/=40)),shouldAdjustOldDeltas(orgEvent,absDelta)&&(delta/=40,deltaX/=40,deltaY/=40),delta=Math[delta>=1?"floor":"ceil"](delta/lowestDelta),deltaX=Math[deltaX>=1?"floor":"ceil"](deltaX/lowestDelta),deltaY=Math[deltaY>=1?"floor":"ceil"](deltaY/lowestDelta),special.settings.normalizeOffset&&this.getBoundingClientRect){var boundingRect=this.getBoundingClientRect();offsetX=event.clientX-boundingRect.left,offsetY=event.clientY-boundingRect.top}return event.deltaX=deltaX,event.deltaY=deltaY,event.deltaFactor=lowestDelta,event.offsetX=offsetX,event.offsetY=offsetY,event.deltaMode=0,args.unshift(event,delta,deltaX,deltaY),nullLowestDeltaTimeout&&clearTimeout(nullLowestDeltaTimeout),nullLowestDeltaTimeout=setTimeout(nullLowestDelta,200),($2.event.dispatch||$2.event.handle).apply(this,args)}}function nullLowestDelta(){lowestDelta=null}function shouldAdjustOldDeltas(orgEvent,absDelta){return special.settings.adjustOldDeltas&&"mousewheel"===orgEvent.type&&absDelta%120==0}$2.fn.extend({mousewheel:function(fn){return fn?this.bind("mousewheel",fn):this.trigger("mousewheel")},unmousewheel:function(fn){return this.unbind("mousewheel",fn)}})},"function"==typeof S22.define&&S22.define.amd?S22.define("jquery-mousewheel",["jquery"],factory):"object"==typeof exports?module.exports=factory:factory(jQuery2),S22.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults","./select2/utils"],function($2,_,Select2,Defaults,Utils){if(null==$2.fn.select2){var thisMethods=["open","close","destroy"];$2.fn.select2=function(options){if("object"==typeof(options=options||{}))return this.each(function(){var instanceOptions=$2.extend(!0,{},options);new Select2($2(this),instanceOptions)}),this;if("string"==typeof options){var ret,args=Array.prototype.slice.call(arguments,1);return this.each(function(){var instance=Utils.GetData(this,"select2");null==instance&&window.console&&console.error&&console.error("The select2('"+options+"') method was called on an element that is not using Select2."),ret=instance[options].apply(instance,args)}),thisMethods.indexOf(options)>-1?this:ret}throw new Error("Invalid arguments for Select2: "+options)}}return null==$2.fn.select2.defaults&&($2.fn.select2.defaults=Defaults),Select2}),{define:S22.define,require:S22.require}}(),select2=S2.require("jquery.select2");return jQuery2.fn.select2.amd=S2,select2},"function"==typeof define&&define.amd?define(["jquery"],factory):"object"==typeof module&&module.exports?module.exports=function(root,jQuery2){return void 0===jQuery2&&(jQuery2="undefined"!=typeof window?require("jquery"):require("jquery")(root)),factory(jQuery2),jQuery2}:factory(jQuery),$.fn.select2.defaults.set("theme","bootstrap5"),$.fn.select2.defaults.set("width","100%"),$.fn.select2.defaults.set("selectionCssClass",":all:"),function(p,m){"undefined"!=typeof module?module.exports=m():"function"==typeof define&&"object"==typeof define.amd?define(m):this.Clusterize=m()}(0,function(){function p(b,a,c){return a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)}function m(b,a,c){return a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent("on"+b,c)}function t(b){return"[object Array]"===Object.prototype.toString.call(b)}function q(b,a){return window.getComputedStyle?window.getComputedStyle(a)[b]:a.currentStyle[b]}var r=function(){for(var b=3,a=document.createElement("b"),c=a.all||[];a.innerHTML="\x3c!--[if gt IE "+ ++b+"]><i><![endif]--\x3e",c[0];);return 4<b?b:document.documentMode}(),C=navigator.platform.toLowerCase().indexOf("mac")+1,n=function(b){if(!(this instanceof n))return new n(b);var a=this,c={rows_in_block:50,blocks_in_cluster:4,tag:null,show_no_data_row:!0,no_data_class:"clusterize-no-data",no_data_text:"No data",keep_parity:!0,callbacks:{}};a.options={};for(var g,d="rows_in_block blocks_in_cluster show_no_data_row no_data_class no_data_text keep_parity tag callbacks".split(" "),h=0;g=d[h];h++)a.options[g]=void 0!==b[g]&&null!=b[g]?b[g]:c[g];for(c=["scroll","content"],h=0;d=c[h];h++)if(a[d+"_elem"]=b[d+"Id"]?document.getElementById(b[d+"Id"]):b[d+"Elem"],!a[d+"_elem"])throw Error("Error! Could not find "+d+" element");a.content_elem.hasAttribute("tabindex")||a.content_elem.setAttribute("tabindex",0);var e=t(b.rows)?b.rows:a.fetchMarkup(),k={};b=a.scroll_elem.scrollTop,a.insertToDOM(e,k),a.scroll_elem.scrollTop=b;var l=!1,w=0,u=!1,x=function(){C&&(u||(a.content_elem.style.pointerEvents="none"),u=!0,clearTimeout(w),w=setTimeout(function(){a.content_elem.style.pointerEvents="auto",u=!1},50)),l!=(l=a.getClusterNum(e))&&a.insertToDOM(e,k),a.options.callbacks.scrollingProgress&&a.options.callbacks.scrollingProgress(a.getScrollProgress())},y=0,z=function(){clearTimeout(y),y=setTimeout(a.refresh,100)};p("scroll",a.scroll_elem,x),p("resize",window,z),a.destroy=function(f){m("scroll",a.scroll_elem,x),m("resize",window,z),a.html((f?a.generateEmptyRow():e).join(""))},a.refresh=function(f){(a.getRowsHeight(e)||f)&&a.update(e)},a.update=function(f){e=t(f)?f:[],f=a.scroll_elem.scrollTop,e.length*a.options.item_height<f&&(l=a.scroll_elem.scrollTop=0),a.insertToDOM(e,k),a.scroll_elem.scrollTop=f},a.clear=function(){a.update([])},a.getRowsAmount=function(){return e.length},a.getScrollProgress=function(){return this.options.scroll_top/(e.length*this.options.item_height)*100||0};var B=function(f,A){var v=t(A)?A:[];v.length&&(e="append"==f?e.concat(v):v.concat(e),a.insertToDOM(e,k))};a.append=function(f){B("append",f)},a.prepend=function(f){B("prepend",f)}};return n.prototype={constructor:n,fetchMarkup:function(){for(var b=[],a=this.getChildNodes(this.content_elem);a.length;)b.push(a.shift().outerHTML);return b},exploreEnvironment:function(b,a){var c=this.options;c.content_tag=this.content_elem.tagName.toLowerCase(),b.length&&(r&&9>=r&&!c.tag&&(c.tag=b[0].match(/<([^>\s/]*)/)[1].toLowerCase()),1>=this.content_elem.children.length&&(a.data=this.html(b[0]+b[0]+b[0])),c.tag||(c.tag=this.content_elem.children[0].tagName.toLowerCase()),this.getRowsHeight(b))},getRowsHeight:function(b){var a=this.options,c=a.item_height;if(a.cluster_height=0,b.length&&(b=this.content_elem.children).length){var d=b[Math.floor(b.length/2)];return a.item_height=d.offsetHeight,"tr"==a.tag&&"collapse"!=q("borderCollapse",this.content_elem)&&(a.item_height+=parseInt(q("borderSpacing",this.content_elem),10)||0),"tr"!=a.tag&&(b=parseInt(q("marginTop",d),10)||0,d=parseInt(q("marginBottom",d),10)||0,a.item_height+=Math.max(b,d)),a.block_height=a.item_height*a.rows_in_block,a.rows_in_cluster=a.blocks_in_cluster*a.rows_in_block,a.cluster_height=a.blocks_in_cluster*a.block_height,c!=a.item_height}},getClusterNum:function(b){var a=this.options;a.scroll_top=this.scroll_elem.scrollTop;var c=a.cluster_height-a.block_height;return Math.min(Math.floor(a.scroll_top/c),Math.floor(b.length*a.item_height/c))},generateEmptyRow:function(){var b=this.options;if(!b.tag||!b.show_no_data_row)return[];var a=document.createElement(b.tag),c=document.createTextNode(b.no_data_text);if(a.className=b.no_data_class,"tr"==b.tag){var d=document.createElement("td");d.colSpan=100,d.appendChild(c)}return a.appendChild(d||c),[a.outerHTML]},generate:function(b){var a=this.options,c=b.length;if(c<a.rows_in_block)return{top_offset:0,bottom_offset:0,rows_above:0,rows:c?b:this.generateEmptyRow()};var d=Math.max((a.rows_in_cluster-a.rows_in_block)*this.getClusterNum(b),0),h=d+a.rows_in_cluster,g=Math.max(d*a.item_height,0);a=Math.max((c-h)*a.item_height,0),c=[];var e=d;for(1>g&&e++;d<h;d++)b[d]&&c.push(b[d]);return{top_offset:g,bottom_offset:a,rows_above:e,rows:c}},renderExtraTag:function(b,a){var c=document.createElement(this.options.tag);return c.className=["clusterize-extra-row","clusterize-"+b].join(" "),a&&(c.style.height=a+"px"),c.outerHTML},insertToDOM:function(b,a){this.options.cluster_height||this.exploreEnvironment(b,a);var c=this.generate(b),d=c.rows.join(""),h=this.checkChanges("data",d,a),g=this.checkChanges("top",c.top_offset,a),e=this.checkChanges("bottom",c.bottom_offset,a),k=this.options.callbacks,l=[];h||g?(c.top_offset&&(this.options.keep_parity&&l.push(this.renderExtraTag("keep-parity")),l.push(this.renderExtraTag("top-space",c.top_offset))),l.push(d),c.bottom_offset&&l.push(this.renderExtraTag("bottom-space",c.bottom_offset)),k.clusterWillChange&&k.clusterWillChange(),this.html(l.join("")),"ol"==this.options.content_tag&&this.content_elem.setAttribute("start",c.rows_above),this.content_elem.style["counter-increment"]="clusterize-counter "+(c.rows_above-1),k.clusterChanged&&k.clusterChanged()):e&&(this.content_elem.lastChild.style.height=c.bottom_offset+"px")},html:function(b){var a=this.content_elem;if(r&&9>=r&&"tr"==this.options.tag){var c=document.createElement("div");for(c.innerHTML="<table><tbody>"+b+"</tbody></table>";b=a.lastChild;)a.removeChild(b);for(c=this.getChildNodes(c.firstChild.firstChild);c.length;)a.appendChild(c.shift())}else a.innerHTML=b},getChildNodes:function(b){for(var a=[],c=0,d=(b=b.children).length;c<d;c++)a.push(b[c]);return a},checkChanges:function(b,a,c){var d=a!=c[b];return c[b]=a,d}},n}),window.persianDate=function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module2=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module2.exports,module2,module2.exports,__webpack_require__),module2.l=!0,module2.exports}return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.i=function(value){return value},__webpack_require__.d=function(exports2,name,getter){__webpack_require__.o(exports2,name)||Object.defineProperty(exports2,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module2){var getter=module2&&module2.__esModule?function getDefault(){return module2.default}:function getModuleExports(){return module2};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=8)}([function(module2,exports2,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();var durationUnit=__webpack_require__(4).durationUnit,Helpers=function(){function Helpers2(){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Helpers2)}return _createClass(Helpers2,[{key:"toPersianDigit",value:function toPersianDigit(digit){var latinDigit=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return digit.toString().replace(/\d+/g,function(digit2){var enDigitArr=[],peDigitArr=[],i=void 0,j=void 0;for(i=0;i<digit2.length;i+=1)enDigitArr.push(digit2.charCodeAt(i));for(j=0;j<enDigitArr.length;j+=1)peDigitArr.push(String.fromCharCode(enDigitArr[j]+(latinDigit&&!0===latinDigit?1584:1728)));return peDigitArr.join("")})}},{key:"leftZeroFill",value:function leftZeroFill(number,targetLength){for(var output=number+"";output.length<targetLength;)output="0"+output;return output}},{key:"normalizeDuration",value:function normalizeDuration(){var unit=void 0,value=void 0;return"string"==typeof arguments[0]?(unit=arguments[0],value=arguments[1]):(value=arguments[0],unit=arguments[1]),durationUnit.year.indexOf(unit)>-1?unit="year":durationUnit.month.indexOf(unit)>-1?unit="month":durationUnit.week.indexOf(unit)>-1?unit="week":durationUnit.day.indexOf(unit)>-1?unit="day":durationUnit.hour.indexOf(unit)>-1?unit="hour":durationUnit.minute.indexOf(unit)>-1?unit="minute":durationUnit.second.indexOf(unit)>-1?unit="second":durationUnit.millisecond.indexOf(unit)>-1&&(unit="millisecond"),{unit:unit,value:value}}},{key:"absRound",value:function absRound(number){return number<0?Math.ceil(number):Math.floor(number)}},{key:"absFloor",value:function absFloor(number){return number<0?Math.ceil(number)||0:Math.floor(number)}}]),Helpers2}();module2.exports=Helpers},function(module2,exports2,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();var TypeChecking=__webpack_require__(10),Algorithms=__webpack_require__(2),Helpers=__webpack_require__(0),Duration=__webpack_require__(5),Validator=__webpack_require__(11),toPersianDigit=(new Helpers).toPersianDigit,leftZeroFill=(new Helpers).leftZeroFill,normalizeDuration=(new Helpers).normalizeDuration,fa=__webpack_require__(7),en=__webpack_require__(6),PersianDateClass=function(){function PersianDateClass2(input){return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PersianDateClass2),this.calendarType=PersianDateClass2.calendarType,this.localType=PersianDateClass2.localType,this.leapYearMode=PersianDateClass2.leapYearMode,this.algorithms=new Algorithms(this),this.version="1.1.0",this._utcMode=!1,"fa"!==this.localType?this.formatPersian=!1:this.formatPersian="_default",this.State=this.algorithms.State,this.setup(input),this.State.isInvalidDate?new Date([-1,-1]):this}return _createClass(PersianDateClass2,[{key:"setup",value:function setup(input){if(TypeChecking.isDate(input))this._gDateToCalculators(input);else if(TypeChecking.isArray(input)){if(!Validator.validateInputArray(input))return this.State.isInvalidDate=!0,!1;this.algorithmsCalc([input[0],input[1]?input[1]:1,input[2]?input[2]:1,input[3]?input[3]:0,input[4]?input[4]:0,input[5]?input[5]:0,input[6]?input[6]:0])}else if(TypeChecking.isNumber(input)){var fromUnix=new Date(input);this._gDateToCalculators(fromUnix)}else if(input instanceof PersianDateClass2)this.algorithmsCalc([input.year(),input.month(),input.date(),input.hour(),input.minute(),input.second(),input.millisecond()]);else if(input&&"/Date("===input.substring(0,6)){var fromDotNet=new Date(parseInt(input.substr(6)));this._gDateToCalculators(fromDotNet)}else{var now=new Date;this._gDateToCalculators(now)}}},{key:"_getSyncedClass",value:function _getSyncedClass(input){return new(PersianDateClass2.toCalendar(this.calendarType).toLocale(this.localType).toLeapYearMode(this.leapYearMode))(input)}},{key:"_gDateToCalculators",value:function _gDateToCalculators(inputgDate){this.algorithms.calcGregorian([inputgDate.getFullYear(),inputgDate.getMonth(),inputgDate.getDate(),inputgDate.getHours(),inputgDate.getMinutes(),inputgDate.getSeconds(),inputgDate.getMilliseconds()])}},{key:"rangeName",value:function rangeName(){var t=this.calendarType;return"fa"===this.localType?"persian"===t?fa.persian:fa.gregorian:"persian"===t?en.persian:en.gregorian}},{key:"toLeapYearMode",value:function toLeapYearMode(input){return this.leapYearMode=input,"astronomical"===input&&"persian"==this.calendarType?this.leapYearMode="astronomical":"algorithmic"===input&&"persian"==this.calendarType&&(this.leapYearMode="algorithmic"),this.algorithms.updateFromGregorian(),this}},{key:"toCalendar",value:function toCalendar(input){return this.calendarType=input,this.algorithms.updateFromGregorian(),this}},{key:"toLocale",value:function toLocale(input){return this.localType=input,"fa"!==this.localType?this.formatPersian=!1:this.formatPersian="_default",this}},{key:"_locale",value:function _locale(){var t=this.calendarType;return"fa"===this.localType?"persian"===t?fa.persian:fa.gregorian:"persian"===t?en.persian:en.gregorian}},{key:"_weekName",value:function _weekName(input){return this._locale().weekdays[input-1]}},{key:"_weekNameShort",value:function _weekNameShort(input){return this._locale().weekdaysShort[input-1]}},{key:"_weekNameMin",value:function _weekNameMin(input){return this._locale().weekdaysMin[input-1]}},{key:"_dayName",value:function _dayName(input){return this._locale().persianDaysName[input-1]}},{key:"_monthName",value:function _monthName(input){return this._locale().months[input-1]}},{key:"_monthNameShort",value:function _monthNameShort(input){return this._locale().monthsShort[input-1]}},{key:"isPersianDate",value:function isPersianDate(obj){return obj instanceof PersianDateClass2}},{key:"clone",value:function clone(){return this._getSyncedClass(this.State.gDate)}},{key:"algorithmsCalc",value:function algorithmsCalc(dateArray){return this.isPersianDate(dateArray)&&(dateArray=[dateArray.year(),dateArray.month(),dateArray.date(),dateArray.hour(),dateArray.minute(),dateArray.second(),dateArray.millisecond()]),"persian"===this.calendarType&&"algorithmic"==this.leapYearMode?this.algorithms.calcPersian(dateArray):"persian"===this.calendarType&&"astronomical"==this.leapYearMode?this.algorithms.calcPersiana(dateArray):"gregorian"===this.calendarType?(dateArray[1]=dateArray[1]-1,this.algorithms.calcGregorian(dateArray)):void 0}},{key:"calendar",value:function calendar(){var key=void 0;return"persian"==this.calendarType?"astronomical"==this.leapYearMode?key="persianAstro":"algorithmic"==this.leapYearMode&&(key="persianAlgo"):key="gregorian",this.State[key]}},{key:"duration",value:function duration(input,key){return new Duration(input,key)}},{key:"isDuration",value:function isDuration(obj){return obj instanceof Duration}},{key:"years",value:function years(input){return this.year(input)}},{key:"year",value:function year(input){return input||0===input?(this.algorithmsCalc([input,this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]),this):this.calendar().year}},{key:"month",value:function month(input){return input||0===input?(this.algorithmsCalc([this.year(),input,this.date()]),this):this.calendar().month+1}},{key:"days",value:function days(){return this.day()}},{key:"day",value:function day(){return this.calendar().weekday}},{key:"dates",value:function dates(input){return this.date(input)}},{key:"date",value:function date(input){return input||0===input?(this.algorithmsCalc([this.year(),this.month(),input]),this):this.calendar().day}},{key:"hour",value:function hour(input){return this.hours(input)}},{key:"hours",value:function hours(input){return input||0===input?(0===input&&(input=24),this.algorithmsCalc([this.year(),this.month(),this.date(),input]),this):this.State.gDate.getHours()}},{key:"minute",value:function minute(input){return this.minutes(input)}},{key:"minutes",value:function minutes(input){return input||0===input?(this.algorithmsCalc([this.year(),this.month(),this.date(),this.hour(),input]),this):this.State.gDate.getMinutes()}},{key:"second",value:function second(input){return this.seconds(input)}},{key:"seconds",value:function seconds(input){return input||0===input?(this.algorithmsCalc([this.year(),this.month(),this.date(),this.hour(),this.minute(),input]),this):this.State.gDate.getSeconds()}},{key:"millisecond",value:function millisecond(input){return this.milliseconds(input)}},{key:"milliseconds",value:function milliseconds(input){return input||0===input?(this.algorithmsCalc([this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),input]),this):this.State.gregorian.millisecond}},{key:"unix",value:function unix(timestamp){var output=void 0;if(timestamp)return this._getSyncedClass(1e3*timestamp);var str=this.State.gDate.valueOf().toString();return output=str.substring(0,str.length-3),parseInt(output)}},{key:"valueOf",value:function valueOf(){return this.State.gDate.valueOf()}},{key:"getFirstWeekDayOfMonth",value:function getFirstWeekDayOfMonth(year,month){return this._getSyncedClass([year,month,1]).day()}},{key:"diff",value:function diff(input,val,asFloat){var inputMoment=input,diff2=this.State.gDate-inputMoment.toDate()-0,year=this.year()-inputMoment.year(),month=this.month()-inputMoment.month(),date=-1*(this.date()-inputMoment.date()),output=void 0;return output="months"===val||"month"===val?12*year+month+date/30:"years"===val||"year"===val?year+(month+date/30)/12:"seconds"===val||"second"===val?diff2/1e3:"minutes"===val||"minute"===val?diff2/6e4:"hours"===val||"hour"===val?diff2/36e5:"days"===val||"day"===val?diff2/864e5:"weeks"===val||"week"===val?diff2/6048e5:diff2,asFloat?output:Math.round(output)}},{key:"startOf",value:function startOf(key){var syncedCelander=PersianDateClass2.toCalendar(this.calendarType).toLocale(this.localType),newArray=new PersianDateClass2(this.valueOf()-864e5*(this.calendar().weekday-1)).toArray();switch(key){case"years":case"year":return new syncedCelander([this.year(),1,1]);case"months":case"month":return new syncedCelander([this.year(),this.month(),1]);case"days":case"day":return new syncedCelander([this.year(),this.month(),this.date(),0,0,0]);case"hours":case"hour":return new syncedCelander([this.year(),this.month(),this.date(),this.hours(),0,0]);case"minutes":case"minute":return new syncedCelander([this.year(),this.month(),this.date(),this.hours(),this.minutes(),0]);case"seconds":case"second":return new syncedCelander([this.year(),this.month(),this.date(),this.hours(),this.minutes(),this.seconds()]);case"weeks":case"week":return new syncedCelander(newArray);default:return this.clone()}}},{key:"endOf",value:function endOf(key){var syncedCelander=PersianDateClass2.toCalendar(this.calendarType).toLocale(this.localType);switch(key){case"years":case"year":var days=this.isLeapYear()?30:29;return new syncedCelander([this.year(),12,days,23,59,59]);case"months":case"month":var monthDays=this.daysInMonth(this.year(),this.month());return new syncedCelander([this.year(),this.month(),monthDays,23,59,59]);case"days":case"day":return new syncedCelander([this.year(),this.month(),this.date(),23,59,59]);case"hours":case"hour":return new syncedCelander([this.year(),this.month(),this.date(),this.hours(),59,59]);case"minutes":case"minute":return new syncedCelander([this.year(),this.month(),this.date(),this.hours(),this.minutes(),59]);case"seconds":case"second":return new syncedCelander([this.year(),this.month(),this.date(),this.hours(),this.minutes(),this.seconds()]);case"weeks":case"week":var weekDayNumber=this.calendar().weekday;return new syncedCelander([this.year(),this.month(),this.date()+(7-weekDayNumber)]);default:return this.clone()}}},{key:"sod",value:function sod(){return this.startOf("day")}},{key:"eod",value:function eod(){return this.endOf("day")}},{key:"zone",value:function zone(input){return input||0===input?(this.State.zone=input,this):this.State.zone}},{key:"local",value:function local(){var utcStamp=void 0;if(this._utcMode){var ThatDayOffset=new Date(this.toDate()).getTimezoneOffset(),offsetMils=60*ThatDayOffset*1e3;utcStamp=ThatDayOffset<0?this.valueOf()-offsetMils:this.valueOf()+offsetMils,this.toCalendar(PersianDateClass2.calendarType);var utcDate=new Date(utcStamp);return this._gDateToCalculators(utcDate),this._utcMode=!1,this.zone(ThatDayOffset),this}return this}},{key:"utc",value:function utc(input){var utcStamp=void 0;if(input)return this._getSyncedClass(input).utc();if(this._utcMode)return this;var offsetMils=60*this.zone()*1e3;utcStamp=this.zone()<0?this.valueOf()+offsetMils:this.valueOf()-offsetMils;var utcDate=new Date(utcStamp),d=this._getSyncedClass(utcDate);return this.algorithmsCalc(d),this._utcMode=!0,this.zone(0),this}},{key:"isUtc",value:function isUtc(){return this._utcMode}},{key:"isDST",value:function isDST(){var month=this.month(),day=this.date();return 1==month&&day>1||6==month&&day<31||month<6&&month>=2}},{key:"isLeapYear",value:function isLeapYear2(year){return void 0===year&&(year=this.year()),"persian"==this.calendarType&&"algorithmic"===this.leapYearMode?this.algorithms.leap_persian(year):"persian"==this.calendarType&&"astronomical"===this.leapYearMode?this.algorithms.leap_persiana(year):"gregorian"==this.calendarType?this.algorithms.leap_gregorian(year):void 0}},{key:"daysInMonth",value:function daysInMonth(yearInput,monthInput){var year=yearInput||this.year(),month=monthInput||this.month();return"persian"===this.calendarType?month<1||month>12?0:month<7?31:month<12||this.isLeapYear(year)?30:29:"gregorian"===this.calendarType?new Date(year,month,0).getDate():void 0}},{key:"toDate",value:function toDate(){return this.State.gDate}},{key:"toArray",value:function toArray(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]}},{key:"formatNumber",value:function formatNumber(){var output=void 0;return"_default"===this.formatPersian?output=void 0!==module2&&void 0!==module2.exports?!1!==this.formatPersian:!1!==window.formatPersian:!0===this.formatPersian?output=!0:!1===this.formatPersian?output=!1:Error('Invalid Config "formatPersian" !!'),output}},{key:"format",value:function format(inputString){if(this.State.isInvalidDate)return!1;var self2=this,formattingTokens=/([[^[]*])|(\\)?(Mo|MM?M?M?|Do|DD?D?D?|dddddd?|ddddd?|dddd?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|zz?|ZZ?|X|LT|ll?l?l?|LL?L?L?)/g,info={year:self2.year(),month:self2.month(),hour:self2.hours(),minute:self2.minutes(),second:self2.seconds(),date:self2.date(),timezone:self2.zone(),unix:self2.unix()},formatToPersian=self2.formatNumber(),checkPersian=function checkPersian2(i){return formatToPersian?toPersianDigit(i):i};function replaceFunction(input){switch(input){case"a":return formatToPersian?info.hour>=12?" ":" ":info.hour>=12?"PM":"AM";case"H":return checkPersian(info.hour);case"HH":return checkPersian(leftZeroFill(info.hour,2));case"h":return checkPersian(info.hour%12);case"hh":return checkPersian(leftZeroFill(info.hour%12,2));case"m":case"mm":return checkPersian(leftZeroFill(info.minute,2));case"s":return checkPersian(info.second);case"ss":return checkPersian(leftZeroFill(info.second,2));case"D":return checkPersian(leftZeroFill(info.date));case"DD":return checkPersian(leftZeroFill(info.date,2));case"DDD":var t=self2.startOf("year");return checkPersian(leftZeroFill(self2.diff(t,"days"),3));case"DDDD":var _t=self2.startOf("year");return checkPersian(leftZeroFill(self2.diff(_t,"days"),3));case"d":return checkPersian(self2.calendar().weekday);case"ddd":return self2._weekNameShort(self2.calendar().weekday);case"dddd":return self2._weekName(self2.calendar().weekday);case"ddddd":return self2._dayName(self2.calendar().day);case"dddddd":return self2._weekNameMin(self2.calendar().weekday);case"w":var _t2=self2.startOf("year"),day=parseInt(self2.diff(_t2,"days")/7)+1;return checkPersian(day);case"ww":var _t3=self2.startOf("year"),_day=leftZeroFill(parseInt(self2.diff(_t3,"days")/7)+1,2);return checkPersian(_day);case"M":return checkPersian(info.month);case"MM":return checkPersian(leftZeroFill(info.month,2));case"MMM":return self2._monthNameShort(info.month);case"MMMM":return self2._monthName(info.month);case"YY":var yearDigitArray=info.year.toString().split("");return checkPersian(yearDigitArray[2]+yearDigitArray[3]);case"YYYY":return checkPersian(info.year);case"Z":var flag="+",hours=Math.round(info.timezone/60),minutes=info.timezone%60;minutes<0&&(minutes*=-1),hours<0&&(flag="-",hours*=-1);var z=flag+leftZeroFill(hours,2)+":"+leftZeroFill(minutes,2);return checkPersian(z);case"ZZ":var _flag="+",_hours=Math.round(info.timezone/60),_minutes=info.timezone%60;_minutes<0&&(_minutes*=-1),_hours<0&&(_flag="-",_hours*=-1);var _z=_flag+leftZeroFill(_hours,2)+""+leftZeroFill(_minutes,2);return checkPersian(_z);case"X":return self2.unix();case"LT":return self2.format("H:m a");case"L":return self2.format("YYYY/MM/DD");case"l":return self2.format("YYYY/M/D");case"LL":return self2.format("MMMM DD YYYY");case"ll":return self2.format("MMM DD YYYY");case"LLL":return self2.format("MMMM YYYY DD   H:m  a");case"lll":return self2.format("MMM YYYY DD   H:m  a");case"LLLL":return self2.format("dddd D MMMM YYYY  H:m  a");case"llll":return self2.format("ddd D MMM YYYY  H:m  a")}}if(inputString)return inputString.replace(formattingTokens,replaceFunction);return"YYYY-MM-DD HH:mm:ss a".replace(formattingTokens,replaceFunction)}},{key:"add",value:function add(key,value){if(0===value)return this;var unit=normalizeDuration(key,value).unit,arr=this.toArray();if(value=normalizeDuration(key,value).value,"year"===unit){var normalizedDate=arr[2],monthDays=this.daysInMonth(arr[0]+value,arr[1]);return arr[2]>monthDays&&(normalizedDate=monthDays),new PersianDateClass2([arr[0]+value,arr[1],normalizedDate,arr[3],arr[4],arr[5],arr[6],arr[7]])}if("month"===unit){var tempYear=Math.floor(value/12),remainingMonth=value-12*tempYear,calcedMonth=null;arr[1]+remainingMonth>12?(tempYear+=1,calcedMonth=arr[1]+remainingMonth-12):calcedMonth=arr[1]+remainingMonth;var normalizaedDate=arr[2],tempDateArray=new PersianDateClass2([arr[0]+tempYear,calcedMonth,1,arr[3],arr[4],arr[5],arr[6],arr[7]]).toArray(),_monthDays=this.daysInMonth(arr[0]+tempYear,calcedMonth);return arr[2]>_monthDays&&(normalizaedDate=_monthDays),new PersianDateClass2([tempDateArray[0],tempDateArray[1],normalizaedDate,tempDateArray[3],tempDateArray[4],tempDateArray[5],tempDateArray[6],tempDateArray[7]])}if("day"===unit){var calcedDay=new PersianDateClass2(this.valueOf()).hour(12);return new PersianDateClass2(calcedDay.valueOf()+864e5*value).hour(arr[3])}if("week"===unit){var _calcedDay=new PersianDateClass2(this.valueOf()).hour(12);return new PersianDateClass2(_calcedDay.valueOf()+7*value*864e5).hour(arr[3])}if("hour"===unit){var _newMillisecond2=this.valueOf()+36e5*value;return this.unix(_newMillisecond2/1e3)}if("minute"===unit){var _newMillisecond3=this.valueOf()+6e4*value;return this.unix(_newMillisecond3/1e3)}if("second"===unit){var _newMillisecond4=this.valueOf()+1e3*value;return this.unix(_newMillisecond4/1e3)}if("millisecond"===unit){var _newMillisecond5=this.valueOf()+value;return this.unix(_newMillisecond5/1e3)}return this._getSyncedClass(this.valueOf())}},{key:"subtract",value:function subtract(key,value){return this.add(key,-1*value)}},{key:"isSameDay",value:function isSameDay(dateB){return this&&dateB&&this.date()==dateB.date()&&this.year()==dateB.year()&&this.month()==dateB.month()}},{key:"isSameMonth",value:function isSameMonth(dateB){return this&&dateB&&this.year()==this.year()&&this.month()==dateB.month()}}],[{key:"rangeName",value:function rangeName(){var p=PersianDateClass2,t=p.calendarType;return"fa"===p.localType?"persian"===t?fa.persian:fa.gregorian:"persian"===t?en.persian:en.gregorian}},{key:"toLeapYearMode",value:function toLeapYearMode(input){var d=PersianDateClass2;return d.leapYearMode=input,d}},{key:"toCalendar",value:function toCalendar(input){var d=PersianDateClass2;return d.calendarType=input,d}},{key:"toLocale",value:function toLocale(input){var d=PersianDateClass2;return d.localType=input,"fa"!==d.localType?d.formatPersian=!1:d.formatPersian="_default",d}},{key:"isPersianDate",value:function isPersianDate(obj){return obj instanceof PersianDateClass2}},{key:"duration",value:function duration(input,key){return new Duration(input,key)}},{key:"isDuration",value:function isDuration(obj){return obj instanceof Duration}},{key:"unix",value:function unix(timestamp){return timestamp?new PersianDateClass2(1e3*timestamp):(new PersianDateClass2).unix()}},{key:"getFirstWeekDayOfMonth",value:function getFirstWeekDayOfMonth(year,month){return new PersianDateClass2([year,month,1]).day()}},{key:"utc",value:function utc(input){return input?new PersianDateClass2(input).utc():(new PersianDateClass2).utc()}},{key:"isSameDay",value:function isSameDay(dateA,dateB){return dateA&&dateB&&dateA.date()==dateB.date()&&dateA.year()==dateB.year()&&dateA.month()==dateB.month()}},{key:"isSameMonth",value:function isSameMonth(dateA,dateB){return dateA&&dateB&&dateA.year()==dateB.year()&&dateA.month()==dateB.month()}}]),PersianDateClass2}();module2.exports=PersianDateClass},function(module2,exports2,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();var ASTRO=__webpack_require__(3),State=__webpack_require__(9),Algorithms=function(){function Algorithms2(parent){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Algorithms2),this.parent=parent,this.ASTRO=new ASTRO,this.State=new State,this.J0000=1721424.5,this.J1970=2440587.5,this.JMJD=2400000.5,this.NormLeap=[!1,!0],this.GREGORIAN_EPOCH=1721425.5,this.PERSIAN_EPOCH=1948320.5}return _createClass(Algorithms2,[{key:"leap_gregorian",value:function leap_gregorian(year){return year%4==0&&!(year%100==0&&year%400!=0)}},{key:"gregorian_to_jd",value:function gregorian_to_jd(year,month,day){return this.GREGORIAN_EPOCH-1+365*(year-1)+Math.floor((year-1)/4)+-Math.floor((year-1)/100)+Math.floor((year-1)/400)+Math.floor((367*month-362)/12+(month<=2?0:this.leap_gregorian(year)?-1:-2)+day)}},{key:"jd_to_gregorian",value:function jd_to_gregorian(jd){var wjd,depoch,quadricent,dqc,cent,dcent,quad,dquad,yindex,yearday,leapadj,month,year=void 0;return depoch=(wjd=Math.floor(jd-.5)+.5)-this.GREGORIAN_EPOCH,quadricent=Math.floor(depoch/146097),dqc=this.ASTRO.mod(depoch,146097),cent=Math.floor(dqc/36524),dcent=this.ASTRO.mod(dqc,36524),quad=Math.floor(dcent/1461),dquad=this.ASTRO.mod(dcent,1461),year=400*quadricent+100*cent+4*quad+(yindex=Math.floor(dquad/365)),4!==cent&&4!==yindex&&year++,yearday=wjd-this.gregorian_to_jd(year,1,1),leapadj=wjd<this.gregorian_to_jd(year,3,1)?0:this.leap_gregorian(year)?1:2,[year,month=Math.floor((12*(yearday+leapadj)+373)/367),wjd-this.gregorian_to_jd(year,month,1)+1]}},{key:"tehran_equinox",value:function tehran_equinox(year){var equJED;return(equJED=this.ASTRO.equinox(year,0))-this.ASTRO.deltat(year)/86400+this.ASTRO.equationOfTime(equJED)+.14583333333333334}},{key:"tehran_equinox_jd",value:function tehran_equinox_jd(year){var ep;return ep=this.tehran_equinox(year),Math.floor(ep)}},{key:"persiana_year",value:function persiana_year(jd){var guess=this.jd_to_gregorian(jd)[0]-2,lasteq=void 0,nexteq=void 0;for(lasteq=this.tehran_equinox_jd(guess);lasteq>jd;)guess--,lasteq=this.tehran_equinox_jd(guess);for(nexteq=lasteq-1;!(lasteq<=jd&&jd<nexteq);)lasteq=nexteq,guess++,nexteq=this.tehran_equinox_jd(guess);return[Math.round((lasteq-this.PERSIAN_EPOCH)/this.ASTRO.TropicalYear)+1,lasteq]}},{key:"jd_to_persiana",value:function jd_to_persiana(jd){var year,month,adr,equinox,yday;return jd=Math.floor(jd)+.5,year=(adr=this.persiana_year(jd))[0],equinox=adr[1],Math.floor((jd-equinox)/30)+1,[year,month=(yday=Math.floor(jd)-this.persiana_to_jd(year,1,1)+1)<=186?Math.ceil(yday/31):Math.ceil((yday-6)/30),Math.floor(jd)-this.persiana_to_jd(year,month,1)+1]}},{key:"persiana_to_jd",value:function persiana_to_jd(year,month,day){var adr=void 0,guess=void 0;for(guess=this.PERSIAN_EPOCH-1+this.ASTRO.TropicalYear*(year-1-1),adr=[year-1,0];adr[0]<year;)guess=(adr=this.persiana_year(guess))[1]+(this.ASTRO.TropicalYear+2);return adr[1]+(month<=7?31*(month-1):30*(month-1)+6)+(day-1)}},{key:"leap_persiana",value:function leap_persiana(year){return this.persiana_to_jd(year+1,1,1)-this.persiana_to_jd(year,1,1)>365}},{key:"leap_persian",value:function leap_persian(year){return 682*((year-(year>0?474:473))%2820+474+38)%2816<682}},{key:"persian_to_jd",value:function persian_to_jd(year,month,day){var epbase,epyear;return epbase=year-(year>=0?474:473),epyear=474+this.ASTRO.mod(epbase,2820),day+(month<=7?31*(month-1):30*(month-1)+6)+Math.floor((682*epyear-110)/2816)+365*(epyear-1)+1029983*Math.floor(epbase/2820)+(this.PERSIAN_EPOCH-1)}},{key:"jd_to_persian",value:function jd_to_persian(jd){var month,depoch,cycle,cyear,yday,year=void 0,ycycle=void 0,aux1=void 0,aux2=void 0;return depoch=(jd=Math.floor(jd)+.5)-this.persian_to_jd(475,1,1),cycle=Math.floor(depoch/1029983),1029982===(cyear=this.ASTRO.mod(depoch,1029983))?ycycle=2820:(aux1=Math.floor(cyear/366),aux2=this.ASTRO.mod(cyear,366),ycycle=Math.floor((2134*aux1+2816*aux2+2815)/1028522)+aux1+1),(year=ycycle+2820*cycle+474)<=0&&year--,[year,month=(yday=jd-this.persian_to_jd(year,1,1)+1)<=186?Math.ceil(yday/31):Math.ceil((yday-6)/30),jd-this.persian_to_jd(year,month,1)+1]}},{key:"gWeekDayToPersian",value:function gWeekDayToPersian(weekday){return weekday+2===8?1:weekday+2===7?7:weekday+2}},{key:"updateFromGregorian",value:function updateFromGregorian(){var j,year,mon,mday,utime,weekday=void 0,perscal=void 0;year=this.State.gregorian.year,mon=this.State.gregorian.month,mday=this.State.gregorian.day,this.State.gDate=new Date(year,mon,mday,this.State.gregorian.hour,this.State.gregorian.minute,this.State.gregorian.second,this.State.gregorian.millisecond),!1===this.parent._utcMode&&(this.State.zone=this.State.gDate.getTimezoneOffset()),this.State.gregorian.year=this.State.gDate.getFullYear(),this.State.gregorian.month=this.State.gDate.getMonth(),this.State.gregorian.day=this.State.gDate.getDate(),j=this.gregorian_to_jd(year,mon+1,mday)+Math.floor(.5)/86400,this.State.julianday=j,this.State.modifiedjulianday=j-this.JMJD,weekday=this.ASTRO.jwday(j),this.State.gregorian.weekday=weekday+1,this.State.gregorian.leap=this.NormLeap[this.leap_gregorian(year)?1:0],weekday=this.ASTRO.jwday(j),"persian"==this.parent.calendarType&&"algorithmic"==this.parent.leapYearMode&&(perscal=this.jd_to_persian(j),this.State.persian.year=perscal[0],this.State.persian.month=perscal[1]-1,this.State.persian.day=perscal[2],this.State.persian.weekday=this.gWeekDayToPersian(weekday),this.State.persian.leap=this.NormLeap[this.leap_persian(perscal[0])?1:0]),"persian"==this.parent.calendarType&&"astronomical"==this.parent.leapYearMode&&(perscal=this.jd_to_persiana(j),this.State.persianAstro.year=perscal[0],this.State.persianAstro.month=perscal[1]-1,this.State.persianAstro.day=perscal[2],this.State.persianAstro.weekday=this.gWeekDayToPersian(weekday),this.State.persianAstro.leap=this.NormLeap[this.leap_persiana(perscal[0])?1:0]),null!==this.State.gregserial.day&&(this.State.gregserial.day=j-this.J0000),utime=864e5*(j-this.J1970),this.State.unixtime=Math.round(utime/1e3)}},{key:"calcGregorian",value:function calcGregorian(dateArray){(dateArray[0]||0===dateArray[0])&&(this.State.gregorian.year=dateArray[0]),(dateArray[1]||0===dateArray[1])&&(this.State.gregorian.month=dateArray[1]),(dateArray[2]||0===dateArray[2])&&(this.State.gregorian.day=dateArray[2]),(dateArray[3]||0===dateArray[3])&&(this.State.gregorian.hour=dateArray[3]),(dateArray[4]||0===dateArray[4])&&(this.State.gregorian.minute=dateArray[4]),(dateArray[5]||0===dateArray[5])&&(this.State.gregorian.second=dateArray[5]),(dateArray[6]||0===dateArray[6])&&(this.State.gregorian.millisecond=dateArray[6]),this.updateFromGregorian()}},{key:"calcJulian",value:function calcJulian(){var j,date;j=this.State.julianday,date=this.jd_to_gregorian(j),this.State.gregorian.year=date[0],this.State.gregorian.month=date[1]-1,this.State.gregorian.day=date[2],this.updateFromGregorian()}},{key:"setJulian",value:function setJulian(j){this.State.julianday=j,this.calcJulian()}},{key:"calcPersian",value:function calcPersian(dateArray){(dateArray[0]||0===dateArray[0])&&(this.State.persian.year=dateArray[0]),(dateArray[1]||0===dateArray[1])&&(this.State.persian.month=dateArray[1]),(dateArray[2]||0===dateArray[2])&&(this.State.persian.day=dateArray[2]),(dateArray[3]||0===dateArray[3])&&(this.State.gregorian.hour=dateArray[3]),(dateArray[4]||0===dateArray[4])&&(this.State.gregorian.minute=dateArray[4]),(dateArray[5]||0===dateArray[5])&&(this.State.gregorian.second=dateArray[5]),(dateArray[6]||0===dateArray[6])&&(this.State.gregorian.millisecond=dateArray[6]),this.setJulian(this.persian_to_jd(this.State.persian.year,this.State.persian.month,this.State.persian.day))}},{key:"calcPersiana",value:function calcPersiana(dateArray){(dateArray[0]||0===dateArray[0])&&(this.State.persianAstro.year=dateArray[0]),(dateArray[1]||0===dateArray[1])&&(this.State.persianAstro.month=dateArray[1]),(dateArray[2]||0===dateArray[2])&&(this.State.persianAstro.day=dateArray[2]),(dateArray[3]||0===dateArray[3])&&(this.State.gregorian.hour=dateArray[3]),(dateArray[4]||0===dateArray[4])&&(this.State.gregorian.minute=dateArray[4]),(dateArray[5]||0===dateArray[5])&&(this.State.gregorian.second=dateArray[5]),(dateArray[6]||0===dateArray[6])&&(this.State.gregorian.millisecond=dateArray[6]),this.setJulian(this.persiana_to_jd(this.State.persianAstro.year,this.State.persianAstro.month,this.State.persianAstro.day+.5))}}]),Algorithms2}();module2.exports=Algorithms},function(module2,exports2,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();var ASTRO=function(){function ASTRO2(){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ASTRO2),this.J2000=2451545,this.JulianCentury=36525,this.JulianMillennium=10*this.JulianCentury,this.TropicalYear=365.24219878,this.oterms=[-4680.93,-1.55,1999.25,-51.38,-249.67,-39.05,7.12,27.87,5.79,2.45],this.nutArgMult=[0,0,0,0,1,-2,0,0,2,2,0,0,0,2,2,0,0,0,0,2,0,1,0,0,0,0,0,1,0,0,-2,1,0,2,2,0,0,0,2,1,0,0,1,2,2,-2,-1,0,2,2,-2,0,1,0,0,-2,0,0,2,1,0,0,-1,2,2,2,0,0,0,0,0,0,1,0,1,2,0,-1,2,2,0,0,-1,0,1,0,0,1,2,1,-2,0,2,0,0,0,0,-2,2,1,2,0,0,2,2,0,0,2,2,2,0,0,2,0,0,-2,0,1,2,2,0,0,0,2,0,-2,0,0,2,0,0,0,-1,2,1,0,2,0,0,0,2,0,-1,0,1,-2,2,0,2,2,0,1,0,0,1,-2,0,1,0,1,0,-1,0,0,1,0,0,2,-2,0,2,0,-1,2,1,2,0,1,2,2,0,1,0,2,2,-2,1,1,0,0,0,-1,0,2,2,2,0,0,2,1,2,0,1,0,0,-2,0,2,2,2,-2,0,1,2,1,2,0,-2,0,1,2,0,0,0,1,0,-1,1,0,0,-2,-1,0,2,1,-2,0,0,0,1,0,0,2,2,1,-2,0,2,0,1,-2,1,0,2,1,0,0,1,-2,0,-1,0,1,0,0,-2,1,0,0,0,1,0,0,0,0,0,0,1,2,0,-1,-1,1,0,0,0,1,1,0,0,0,-1,1,2,2,2,-1,-1,2,2,0,0,-2,2,2,0,0,3,2,2,2,-1,0,2,2],this.nutArgCoeff=[-171996,-1742,92095,89,-13187,-16,5736,-31,-2274,-2,977,-5,2062,2,-895,5,1426,-34,54,-1,712,1,-7,0,-517,12,224,-6,-386,-4,200,0,-301,0,129,-1,217,-5,-95,3,-158,0,0,0,129,1,-70,0,123,0,-53,0,63,0,0,0,63,1,-33,0,-59,0,26,0,-58,-1,32,0,-51,0,27,0,48,0,0,0,46,0,-24,0,-38,0,16,0,-31,0,13,0,29,0,0,0,29,0,-12,0,26,0,0,0,-22,0,0,0,21,0,-10,0,17,-1,0,0,16,0,-8,0,-16,1,7,0,-15,0,9,0,-13,0,7,0,-12,0,6,0,11,0,0,0,-10,0,5,0,-8,0,3,0,7,0,-3,0,-7,0,0,0,-7,0,3,0,-7,0,3,0,6,0,0,0,6,0,-3,0,6,0,-3,0,-6,0,3,0,-6,0,3,0,5,0,0,0,-5,0,3,0,-5,0,3,0,-5,0,3,0,4,0,0,0,4,0,0,0,4,0,0,0,-4,0,0,0,-4,0,0,0,-4,0,0,0,3,0,0,0,-3,0,0,0,-3,0,0,0,-3,0,0,0,-3,0,0,0,-3,0,0,0,-3,0,0,0,-3,0,0,0],this.deltaTtab=[121,112,103,95,88,82,77,72,68,63,60,56,53,51,48,46,44,42,40,38,35,33,31,29,26,24,22,20,18,16,14,12,11,10,9,8,7,7,7,7,7,7,8,8,9,9,9,9,9,10,10,10,10,10,10,10,10,11,11,11,11,11,12,12,12,12,13,13,13,14,14,14,14,15,15,15,15,15,16,16,16,16,16,16,16,16,15,15,14,13,13.1,12.5,12.2,12,12,12,12,12,12,11.9,11.6,11,10.2,9.2,8.2,7.1,6.2,5.6,5.4,5.3,5.4,5.6,5.9,6.2,6.5,6.8,7.1,7.3,7.5,7.6,7.7,7.3,6.2,5.2,2.7,1.4,-1.2,-2.8,-3.8,-4.8,-5.5,-5.3,-5.6,-5.7,-5.9,-6,-6.3,-6.5,-6.2,-4.7,-2.8,-.1,2.6,5.3,7.7,10.4,13.3,16,18.2,20.2,21.1,22.4,23.5,23.8,24.3,24,23.9,23.9,23.7,24,24.3,25.3,26.2,27.3,28.2,29.1,30,30.7,31.4,32.2,33.1,34,35,36.5,38.3,40.2,42.2,44.5,46.5,48.5,50.5,52.2,53.8,54.9,55.8,56.9,58.3,60,61.6,63,65,66.6],this.EquinoxpTerms=[485,324.96,1934.136,203,337.23,32964.467,199,342.08,20.186,182,27.85,445267.112,156,73.14,45036.886,136,171.52,22518.443,77,222.54,65928.934,74,296.72,3034.906,70,243.58,9037.513,58,119.81,33718.147,52,297.17,150.678,50,21.02,2281.226,45,247.54,29929.562,44,325.15,31555.956,29,60.93,4443.417,18,155.12,67555.328,17,288.79,4562.452,16,198.04,62894.029,14,199.76,31436.921,12,95.39,14577.848,12,287.11,31931.756,12,320.81,34777.259,9,227.73,1222.114,8,15.45,16859.074],this.JDE0tab1000=[new Array(1721139.29189,365242.1374,.06134,.00111,-71e-5),new Array(1721233.25401,365241.72562,-.05323,.00907,25e-5),new Array(1721325.70455,365242.49558,-.11677,-.00297,74e-5),new Array(1721414.39987,365242.88257,-.00769,-.00933,-6e-5)],this.JDE0tab2000=[new Array(2451623.80984,365242.37404,.05169,-.00411,-57e-5),new Array(2451716.56767,365241.62603,.00325,.00888,-3e-4),new Array(2451810.21715,365242.01767,-.11575,.00337,78e-5),new Array(2451900.05952,365242.74049,-.06223,-.00823,32e-5)]}return _createClass(ASTRO2,[{key:"dtr",value:function dtr(d){return d*Math.PI/180}},{key:"rtd",value:function rtd(r){return 180*r/Math.PI}},{key:"fixangle",value:function fixangle(a){return a-360*Math.floor(a/360)}},{key:"fixangr",value:function fixangr(a){return a-2*Math.PI*Math.floor(a/(2*Math.PI))}},{key:"dsin",value:function dsin(d){return Math.sin(this.dtr(d))}},{key:"dcos",value:function dcos(d){return Math.cos(this.dtr(d))}},{key:"mod",value:function mod(a,b){return a-b*Math.floor(a/b)}},{key:"jwday",value:function jwday(j){return this.mod(Math.floor(j+1.5),7)}},{key:"obliqeq",value:function obliqeq(jd){var eps,u,v,i;if(v=u=(jd-this.J2000)/(100*this.JulianCentury),eps=23.43929111111111,Math.abs(u)<1)for(i=0;i<10;i++)eps+=this.oterms[i]/3600*v,v*=u;return eps}},{key:"nutation",value:function nutation(jd){var i,j,t2,t3,to10,ang,t=(jd-2451545)/36525,ta=[],dp=0,de=0;for(t3=t*(t2=t*t),ta[0]=this.dtr(297.850363+445267.11148*t-.0019142*t2+t3/189474),ta[1]=this.dtr(357.52772+35999.05034*t-1603e-7*t2-t3/3e5),ta[2]=this.dtr(134.96298+477198.867398*t+.0086972*t2+t3/56250),ta[3]=this.dtr(93.27191+483202.017538*t-.0036825*t2+t3/327270),ta[4]=this.dtr(125.04452-1934.136261*t+.0020708*t2+t3/45e4),i=0;i<5;i++)ta[i]=this.fixangr(ta[i]);for(to10=t/10,i=0;i<63;i++){for(ang=0,j=0;j<5;j++)0!==this.nutArgMult[5*i+j]&&(ang+=this.nutArgMult[5*i+j]*ta[j]);dp+=(this.nutArgCoeff[4*i+0]+this.nutArgCoeff[4*i+1]*to10)*Math.sin(ang),de+=(this.nutArgCoeff[4*i+2]+this.nutArgCoeff[4*i+3]*to10)*Math.cos(ang)}return[dp/36e6,de/36e6]}},{key:"deltat",value:function deltat(year){var dt,f,i,t;return year>=1620&&year<=2e3?(f=(year-1620)/2-(i=Math.floor((year-1620)/2)),dt=this.deltaTtab[i]+(this.deltaTtab[i+1]-this.deltaTtab[i])*f):(t=(year-2e3)/100,year<948?dt=2177+497*t+44.1*t*t:(dt=102+102*t+25.3*t*t,year>2e3&&year<2100&&(dt+=.37*(year-2100)))),dt}},{key:"equinox",value:function equinox(year,which){var deltaL,JDE0,T,W,i=void 0,j=void 0,JDE0tab=void 0,S=void 0,Y=void 0;for(year<1e3?(JDE0tab=this.JDE0tab1000,Y=year/1e3):(JDE0tab=this.JDE0tab2000,Y=(year-2e3)/1e3),W=35999.373*(T=((JDE0=JDE0tab[which][0]+JDE0tab[which][1]*Y+JDE0tab[which][2]*Y*Y+JDE0tab[which][3]*Y*Y*Y+JDE0tab[which][4]*Y*Y*Y*Y)-2451545)/36525)-2.47,deltaL=1+.0334*this.dcos(W)+7e-4*this.dcos(2*W),S=0,i=j=0;i<24;i++)S+=this.EquinoxpTerms[j]*this.dcos(this.EquinoxpTerms[j+1]+this.EquinoxpTerms[j+2]*T),j+=3;return JDE0+1e-5*S/deltaL}},{key:"sunpos",value:function sunpos(jd){var T,T2,e,C,sunLong,sunAnomaly,sunR,Omega,Lambda,epsilon,epsilon0,Delta,L0=void 0,M=void 0,Alpha=void 0,AlphaApp=void 0;return L0=280.46646+36000.76983*(T=(jd-this.J2000)/this.JulianCentury)+3032e-7*(T2=T*T),L0=this.fixangle(L0),M=357.52911+35999.05029*T+-1537e-7*T2,M=this.fixangle(M),e=.016708634+-42037e-9*T+-1.267e-7*T2,sunLong=L0+(C=(1.914602+-.004817*T+-14e-6*T2)*this.dsin(M)+(.019993-101e-6*T)*this.dsin(2*M)+289e-6*this.dsin(3*M)),sunAnomaly=M+C,sunR=1.000001018*(1-e*e)/(1+e*this.dcos(sunAnomaly)),Omega=125.04-1934.136*T,Lambda=sunLong+-.00569+-.00478*this.dsin(Omega),epsilon=(epsilon0=this.obliqeq(jd))+.00256*this.dcos(Omega),Alpha=this.rtd(Math.atan2(this.dcos(epsilon0)*this.dsin(sunLong),this.dcos(sunLong))),Alpha=this.fixangle(Alpha),Delta=this.rtd(Math.asin(this.dsin(epsilon0)*this.dsin(sunLong))),AlphaApp=this.rtd(Math.atan2(this.dcos(epsilon)*this.dsin(Lambda),this.dcos(Lambda))),[L0,M,e,C,sunLong,sunAnomaly,sunR,Lambda,Alpha,Delta,AlphaApp=this.fixangle(AlphaApp),this.rtd(Math.asin(this.dsin(epsilon)*this.dsin(Lambda)))]}},{key:"equationOfTime",value:function equationOfTime(jd){var alpha,deltaPsi,epsilon,tau,E=void 0,L0=void 0;return L0=280.4664567+360007.6982779*(tau=(jd-this.J2000)/this.JulianMillennium)+.03032028*tau*tau+tau*tau*tau/49931+-tau*tau*tau*tau/15300+-tau*tau*tau*tau*tau/2e6,L0=this.fixangle(L0),alpha=this.sunpos(jd)[10],deltaPsi=this.nutation(jd)[0],epsilon=this.obliqeq(jd)+this.nutation(jd)[1],E=L0+-.0057183+-alpha+deltaPsi*this.dcos(epsilon),E-=20*Math.floor(E/20),E/=1440}}]),ASTRO2}();module2.exports=ASTRO},function(module2,exports2,__webpack_require__){"use strict";module2.exports={durationUnit:{year:["y","years","year"],month:["M","months","month"],day:["d","days","day"],hour:["h","hours","hour"],minute:["m","minutes","minute"],second:["s","second","seconds"],millisecond:["ms","milliseconds","millisecond"],week:["W","w","weeks","week"]}}},function(module2,exports2,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();var Helpers=__webpack_require__(0),normalizeDuration=(new Helpers).normalizeDuration,absRound=(new Helpers).absRound,absFloor=(new Helpers).absFloor,Duration=function(){function Duration2(key,value){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Duration2);var milliseconds,duration={},data=this._data={},normalizedUnit=normalizeDuration(key,value);duration[normalizedUnit.unit]=normalizedUnit.value,milliseconds=duration.milliseconds||duration.millisecond||duration.ms||0;var years=duration.years||duration.year||duration.y||0,months=duration.months||duration.month||duration.M||0,weeks=duration.weeks||duration.w||duration.week||0,days=duration.days||duration.d||duration.day||0,hours=duration.hours||duration.hour||duration.h||0,minutes=duration.minutes||duration.minute||duration.m||0,seconds=duration.seconds||duration.second||duration.s||0;return this._milliseconds=milliseconds+1e3*seconds+6e4*minutes+36e5*hours,this._days=days+7*weeks,this._months=months+12*years,data.milliseconds=milliseconds%1e3,seconds+=absFloor(milliseconds/1e3),data.seconds=seconds%60,minutes+=absRound(seconds/60),data.minutes=minutes%60,hours+=absRound(minutes/60),data.hours=hours%24,days+=absRound(hours/24),days+=7*weeks,data.days=days%30,months+=absRound(days/30),data.months=months%12,years+=absRound(months/12),data.years=years,this}return _createClass(Duration2,[{key:"valueOf",value:function valueOf(){return this._milliseconds+864e5*this._days+2592e6*this._months}}]),Duration2}();module2.exports=Duration},function(module2,exports2,__webpack_require__){"use strict";module2.exports={gregorian:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysMin:["Su","Mo","Tu","We","Th","Fr","Sa"]},persian:{months:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Dey","Bahman","Esfand"],monthsShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Dey","Bah","Esf"],weekdays:["Saturday","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday"],weekdaysShort:["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],weekdaysMin:["Sa","Su","Mo","Tu","We","Th","Fr"],persianDaysName:["Urmazd","Bahman","Ordibehesht","Shahrivar","Sepandarmaz","Khurdad","Amordad","Dey-be-azar","Azar","Aban","Khorshid","Mah","Tir","Gush","Dey-be-mehr","Mehr","Sorush","Rashn","Farvardin","Bahram","Ram","Bad","Dey-be-din","Din","Ord","Ashtad","Asman","Zamyad","Mantre-sepand","Anaram","Ziadi"]}}},function(module2,exports2,__webpack_require__){"use strict";module2.exports={gregorian:{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_")},persian:{months:["","","","","","","","","","","",""],monthsShort:["","","","","","","","","","","",""],weekdays:["","",""," "," ","",""],weekdaysShort:["","","","","","",""],weekdaysMin:["","","","","","",""],persianDaysName:["","","","","","","","  ","","","","","","","  ","","","","","","","","  ","","","","",""," ","",""]}}},function(module2,exports2,__webpack_require__){"use strict";var PersianDateClass=__webpack_require__(1);PersianDateClass.calendarType="persian",PersianDateClass.leapYearMode="astronomical",PersianDateClass.localType="fa",module2.exports=PersianDateClass},function(module2,exports2,__webpack_require__){"use strict";module2.exports=function Container2(){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Container2),this.isInvalidDate=null,this.gDate=null,this.modifiedjulianday=0,this.julianday=0,this.gregserial={day:0},this.zone=0,this.gregorian={year:0,month:0,day:0,hour:0,minute:0,second:0,millisecond:0,weekday:0,unix:0,leap:0},this.juliancalendar={year:0,month:0,day:0,leap:0,weekday:0},this.islamic={year:0,month:0,day:0,leap:0,weekday:0},this.persianAlgo=this.persian={year:0,month:0,day:0,leap:0,weekday:0},this.persianAstro={year:0,month:0,day:0,leap:0,weekday:0},this.isoweek={year:0,week:0,day:0},this.isoday={year:0,day:0}}},function(module2,exports2,__webpack_require__){"use strict";module2.exports={isArray:function isArray(input){return"[object Array]"===Object.prototype.toString.call(input)},isNumber:function isNumber(input){return"number"==typeof input},isDate:function isDate(input){return input instanceof Date}}},function(module2,exports2,__webpack_require__){"use strict";module2.exports={validateInputArray:function validateInputArray(input){var out=!0;return(input[1]<1||input[1]>12)&&(out=!1),(input[2]<1||input[1]>31)&&(out=!1),(input[3]<0||input[3]>24)&&(out=!1),(input[4]<0||input[4]>60)&&(out=!1),(input[5]<0||input[5]>60)&&(out=!1),out}}}]),window.persianDatepicker=function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module2=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module2.exports,module2,module2.exports,__webpack_require__),module2.l=!0,module2.exports}return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.i=function(value){return value},__webpack_require__.d=function(exports2,name,getter){__webpack_require__.o(exports2,name)||Object.defineProperty(exports2,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module2){var getter=module2&&module2.__esModule?function getDefault(){return module2.default}:function getModuleExports(){return module2};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=5)}([function(module2,exports2,__webpack_require__){"use strict";var a,check,Helper={debounce:function debounce2(func,wait,immediate){var timeout;return function(){var context=this,args=arguments,callNow=immediate&&!timeout;clearTimeout(timeout),timeout=setTimeout(function later2(){timeout=null,immediate||func.apply(context,args)},wait),callNow&&func.apply(context,args)}},log:function log(input){console.log(input)},isMobile:(check=!1,a=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))&&(check=!0),check),debug:function debug(elem,input){window.persianDatepickerDebug&&(elem.constructor.name?console.log("Debug: "+elem.constructor.name+" : "+input):console.log("Debug: "+input))},delay:function delay(callback,ms){clearTimeout(window.datepickerTimer),window.datepickerTimer=setTimeout(callback,ms)}};module2.exports=Helper},function(module2,exports2,__webpack_require__){"use strict";module2.exports='\n<div id="plotId" class="datepicker-plot-area {{cssClass}}">\n    {{#navigator.enabled}}\n        <div data-navigator class="datepicker-navigator">\n            <div class="pwt-btn pwt-btn-next">{{navigator.text.btnNextText}}</div>\n            <div class="pwt-btn pwt-btn-switch">{{navigator.switch.text}}</div>\n            <div class="pwt-btn pwt-btn-prev">{{navigator.text.btnPrevText}}</div>\n        </div>\n    {{/navigator.enabled}}\n    <div class="datepicker-grid-view" >\n    {{#days.enabled}}\n        {{#days.viewMode}}\n        <div class="datepicker-day-view" >    \n            <div class="month-grid-box">\n                <div class="header">\n                    <div class="title"></div>\n                    <div class="header-row">\n                        {{#weekdays.list}}\n                            <div class="header-row-cell">{{.}}</div>\n                        {{/weekdays.list}}\n                    </div>\n                </div>    \n                <table cellspacing="0" class="table-days">\n                    <tbody>\n                        {{#days.list}}\n                           \n                            <tr>\n                                {{#.}}\n                                    {{#enabled}}\n                                        <td data-date="{{dataDate}}" data-unix="{{dataUnix}}" >\n                                            <span  class="{{#otherMonth}}other-month{{/otherMonth}}">{{title}}</span>\n                                            {{#altCalendarShowHint}}\n                                            <i  class="alter-calendar-day">{{alterCalTitle}}</i>\n                                            {{/altCalendarShowHint}}\n                                        </td>\n                                    {{/enabled}}\n                                    {{^enabled}}\n                                        <td data-date="{{dataDate}}" data-unix="{{dataUnix}}" class="disabled">\n                                            <span class="{{#otherMonth}}other-month{{/otherMonth}}">{{title}}</span>\n                                            {{#altCalendarShowHint}}\n                                            <i  class="alter-calendar-day">{{alterCalTitle}}</i>\n                                            {{/altCalendarShowHint}}\n                                        </td>\n                                    {{/enabled}}\n                                    \n                                {{/.}}\n                            </tr>\n                        {{/days.list}}\n                    </tbody>\n                </table>\n            </div>\n        </div>\n        {{/days.viewMode}}\n    {{/days.enabled}}\n    \n    {{#month.enabled}}\n        {{#month.viewMode}}\n            <div class="datepicker-month-view">\n                {{#month.list}}\n                    {{#enabled}}               \n                        <div data-year="{{year}}" data-month="{{dataMonth}}" class="month-item {{#selected}}selected{{/selected}}">{{title}}</small></div>\n                    {{/enabled}}\n                    {{^enabled}}               \n                        <div data-year="{{year}}"data-month="{{dataMonth}}" class="month-item month-item-disable {{#selected}}selected{{/selected}}">{{title}}</small></div>\n                    {{/enabled}}\n                {{/month.list}}\n            </div>\n        {{/month.viewMode}}\n    {{/month.enabled}}\n    \n    {{#year.enabled }}\n        {{#year.viewMode }}\n            <div class="datepicker-year-view" >\n                {{#year.list}}\n                    {{#enabled}}\n                        <div data-year="{{dataYear}}" class="year-item {{#selected}}selected{{/selected}}">{{title}}</div>\n                    {{/enabled}}\n                    {{^enabled}}\n                        <div data-year="{{dataYear}}" class="year-item year-item-disable {{#selected}}selected{{/selected}}">{{title}}</div>\n                    {{/enabled}}                    \n                {{/year.list}}\n            </div>\n        {{/year.viewMode }}\n    {{/year.enabled }}\n    \n    </div>\n    {{#time}}\n    {{#enabled}}\n    <div class="datepicker-time-view">\n        {{#hour.enabled}}\n            <div class="hour time-segment" data-time-key="hour">\n                <div class="up-btn" data-time-key="hour"></div>\n                <input disabled value="{{hour.title}}" type="text" placeholder="hour" class="hour-input">\n                <div class="down-btn" data-time-key="hour"></div>                    \n            </div>       \n            <div class="divider">\n                <span>:</span>\n            </div>\n        {{/hour.enabled}}\n        {{#minute.enabled}}\n            <div class="minute time-segment" data-time-key="minute" >\n                <div class="up-btn" data-time-key="minute"></div>\n                <input disabled value="{{minute.title}}" type="text" placeholder="minute" class="minute-input">\n                <div class="down-btn" data-time-key="minute"></div>\n            </div>        \n            <div class="divider second-divider">\n                <span>:</span>\n            </div>\n        {{/minute.enabled}}\n        {{#second.enabled}}\n            <div class="second time-segment" data-time-key="second"  >\n                <div class="up-btn" data-time-key="second" ></div>\n                <input disabled value="{{second.title}}"  type="text" placeholder="second" class="second-input">\n                <div class="down-btn" data-time-key="second" ></div>\n            </div>\n            <div class="divider meridian-divider"></div>\n            <div class="divider meridian-divider"></div>\n        {{/second.enabled}}\n        {{#meridian.enabled}}\n            <div class="meridian time-segment" data-time-key="meridian" >\n                <div class="up-btn" data-time-key="meridian"></div>\n                <input disabled value="{{meridian.title}}" type="text" class="meridian-input">\n                <div class="down-btn" data-time-key="meridian"></div>\n            </div>\n        {{/meridian.enabled}}\n    </div>\n    {{/enabled}}\n    {{/time}}\n    \n    {{#toolbox}}\n    {{#enabled}}\n    <div class="toolbox">\n        {{#toolbox.submitButton.enabled}}\n            <div class="pwt-btn-submit">{{submitButtonText}}</div>\n        {{/toolbox.submitButton.enabled}}        \n        {{#toolbox.todayButton.enabled}}\n            <div class="pwt-btn-today">{{todayButtonText}}</div>\n        {{/toolbox.todayButton.enabled}}        \n        {{#toolbox.calendarSwitch.enabled}}\n            <div class="pwt-btn-calendar">{{calendarSwitchText}}</div>\n        {{/toolbox.calendarSwitch.enabled}}\n    </div>\n    {{/enabled}}\n    {{^enabled}}\n        {{#onlyTimePicker}}\n        <div class="toolbox">\n            <div class="pwt-btn-submit">{{submitButtonText}}</div>\n        </div>\n        {{/onlyTimePicker}}\n    {{/enabled}}\n    {{/toolbox}}\n</div>\n'},function(module2,exports2,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();var State=__webpack_require__(11),Toolbox=__webpack_require__(12),View=__webpack_require__(13),Input=__webpack_require__(6),API=__webpack_require__(3),Navigator=__webpack_require__(7),Options=__webpack_require__(8),PersianDateWrapper=__webpack_require__(10),Model=function(){function Model2(inputElement,options){return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Model2),this.components(inputElement,options)}return _createClass(Model2,[{key:"components",value:function components(inputElement,options){return this.initialUnix=null,this.inputElement=inputElement,this.options=new Options(options,this),this.PersianDate=new PersianDateWrapper(this),this.state=new State(this),this.api=new API(this),this.input=new Input(this,inputElement),this.view=new View(this),this.toolbox=new Toolbox(this),this.updateInput=function(unix){this.input.update(unix)},this.state.setViewDateTime("unix",this.input.getOnInitState()),this.state.setSelectedDateTime("unix",this.input.getOnInitState()),this.view.render(),this.navigator=new Navigator(this),this.api}}]),Model2}();module2.exports=Model},function(module2,exports2,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();var API=function(){function API2(model){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,API2),this.model=model}return _createClass(API2,[{key:"show",value:function show(){return this.model.view.show(),this.model.options.onShow(this.model),this.model}},{key:"getState",value:function getState(){return this.model.state}},{key:"hide",value:function hide(){return this.model.view.hide(),this.model.options.onHide(this.model),this.model}},{key:"toggle",value:function toggle(){return this.model.view.toggle(),this.model.options.onToggle(this.model),this.model}},{key:"destroy",value:function destroy(){this.model&&(this.model.view.destroy(),this.model.options.onDestroy(this.model),delete this.model)}},{key:"setDate",value:function setDate(unix){return this.model.state.setSelectedDateTime("unix",unix),this.model.state.setViewDateTime("unix",unix),this.model.state.setSelectedDateTime("unix",unix),this.model.view.render(this.view),this.model.options.onSet(unix),this.model}},{key:"options",get:function get(){return this.model.options},set:function set(inputOptions){var opt=$.extend(!0,this.model.options,inputOptions);this.model.view.destroy(),this.model.components(this.model.inputElement,opt)}}]),API2}();module2.exports=API},function(module2,exports2,__webpack_require__){"use strict";var Helper=__webpack_require__(0),Config={calendarType:"persian",calendar:{persian:{locale:"fa",showHint:!1,leapYearMode:"algorithmic"},gregorian:{locale:"en",showHint:!1}},responsive:!0,inline:!1,initialValue:!0,initialValueType:"gregorian",persianDigit:!0,viewMode:"day",format:"LLLL",formatter:function formatter(unixDate){return this.model.PersianDate.date(unixDate).format(this.format)},altField:!1,altFormat:"unix",altFieldFormatter:function altFieldFormatter(unixDate){var thisAltFormat=this.altFormat.toLowerCase();return"gregorian"===thisAltFormat||"g"===thisAltFormat?new Date(unixDate):"unix"===thisAltFormat||"u"===thisAltFormat?unixDate:this.model.PersianDate.date(unixDate).format(this.altFormat)},minDate:null,maxDate:null,navigator:{enabled:!0,scroll:{enabled:!0},text:{btnNextText:"<",btnPrevText:">"},onNext:function onNext(datepickerObject){Helper.debug(datepickerObject,"Event: onNext")},onPrev:function onPrev(datepickerObject){Helper.debug(datepickerObject,"Event: onPrev")},onSwitch:function onSwitch(datepickerObject){Helper.debug(datepickerObject,"dayPicker Event: onSwitch")}},toolbox:{enabled:!0,text:{btnToday:""},submitButton:{enabled:Helper.isMobile,text:{fa:"",en:"submit"},onSubmit:function onSubmit(datepickerObject){Helper.debug(datepickerObject,"dayPicker Event: onSubmit")}},todayButton:{enabled:!0,text:{fa:"",en:"today"},onToday:function onToday(datepickerObject){Helper.debug(datepickerObject,"dayPicker Event: onToday")}},calendarSwitch:{enabled:!0,format:"MMMM",onSwitch:function onSwitch(datepickerObject){Helper.debug(datepickerObject,"dayPicker Event: onSwitch")}},onToday:function onToday(datepickerObject){Helper.debug(datepickerObject,"dayPicker Event: onToday")}},onlyTimePicker:!1,onlySelectOnDate:!0,checkDate:function checkDate(){return!0},checkMonth:function checkMonth(){return!0},checkYear:function checkYear(){return!0},timePicker:{enabled:!1,step:1,hour:{enabled:!0,step:null},minute:{enabled:!0,step:null},second:{enabled:!0,step:null},meridian:{enabled:!1}},dayPicker:{enabled:!0,titleFormat:"YYYY MMMM",titleFormatter:function titleFormatter(year,month){return this.model.PersianDate.date([year,month]).format(this.model.options.dayPicker.titleFormat)},onSelect:function onSelect(selectedDayUnix){Helper.debug(this,"dayPicker Event: onSelect : "+selectedDayUnix)}},monthPicker:{enabled:!0,titleFormat:"YYYY",titleFormatter:function titleFormatter(unix){return this.model.PersianDate.date(unix).format(this.model.options.monthPicker.titleFormat)},onSelect:function onSelect(monthIndex){Helper.debug(this,"monthPicker Event: onSelect : "+monthIndex)}},yearPicker:{enabled:!0,titleFormat:"YYYY",titleFormatter:function titleFormatter(year){var remaining=12*parseInt(year/12,10),startYear=this.model.PersianDate.date([remaining]),endYear=this.model.PersianDate.date([remaining+11]);return startYear.format(this.model.options.yearPicker.titleFormat)+"-"+endYear.format(this.model.options.yearPicker.titleFormat)},onSelect:function onSelect(year){Helper.debug(this,"yearPicker Event: onSelect : "+year)}},onSelect:function onSelect(unixDate){Helper.debug(this,"datepicker Event: onSelect : "+unixDate)},onSet:function onSet(unixDate){Helper.debug(this,"datepicker Event: onSet : "+unixDate)},position:"auto",onShow:function onShow(datepickerObject){Helper.debug(datepickerObject,"Event: onShow ")},onHide:function onHide(datepickerObject){Helper.debug(datepickerObject,"Event: onHide ")},onToggle:function onToggle(datepickerObject){Helper.debug(datepickerObject,"Event: onToggle ")},onDestroy:function onDestroy(datepickerObject){Helper.debug(datepickerObject,"Event: onDestroy ")},autoClose:!1,template:null,observer:!1,inputDelay:800};module2.exports=Config},function(module2,exports2,__webpack_require__){"use strict";var $2,Model=__webpack_require__(2);($2=jQuery).fn.persianDatepicker=$2.fn.pDatepicker=function(options){var args=Array.prototype.slice.call(arguments),self2=this;return this||$2.error("Invalid selector"),$2(this).each(function(){var tempArg=args.concat([]),dp=$2(this).data("datepicker"),funcName=null;dp&&"string"==typeof tempArg[0]?(funcName=tempArg[0],dp[funcName](tempArg[0])):self2.pDatePicker=new Model(this,options)}),$2(this).data("datepicker",self2.pDatePicker),self2.pDatePicker}},function(module2,exports2,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();var Helper=__webpack_require__(0),PersianDateParser=__webpack_require__(9),Input=function(){function Input2(model,inputElement){return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Input2),this.model=model,this._firstUpdate=!0,this.elem=inputElement,this.model.options.observer&&this.observe(),this.addInitialClass(),this.initialUnix=null,0==this.model.options.inline&&this._attachInputElementEvents(),this}return _createClass(Input2,[{key:"addInitialClass",value:function addInitialClass(){$(this.elem).addClass("pwt-datepicker-input-element")}},{key:"parseInput",value:function parseInput(inputString){var parse=new PersianDateParser;if(void 0!==parse.parse(inputString)){var pd=this.model.PersianDate.date(parse.parse(inputString)).valueOf();this.model.state.setSelectedDateTime("unix",pd),this.model.state.setViewDateTime("unix",pd),this.model.view.render()}}},{key:"observe",value:function observe(){var that=this;$(that.elem).bind("paste",function(e){Helper.delay(function(){that.parseInput(e.target.value)},60)});var typingTimer=void 0,doneTypingInterval=that.model.options.inputDelay,ctrlDown=!1,ctrlKey=[17,91];$(document).keydown(function(e){$.inArray(e.keyCode,ctrlKey)>0&&(ctrlDown=!0)}).keyup(function(e){$.inArray(e.keyCode,ctrlKey)>0&&(ctrlDown=!1)}),$(that.elem).bind("keyup",function(e){var $self=$(this),trueKey=!1;(8===e.keyCode||e.keyCode<105&&e.keyCode>96||e.keyCode<58&&e.keyCode>47||ctrlDown&&(86==e.keyCode||$.inArray(e.keyCode,ctrlKey)>0))&&(trueKey=!0),trueKey&&(clearTimeout(typingTimer),typingTimer=setTimeout(function(){!function doneTyping($self){that.parseInput($self.val())}($self)},doneTypingInterval))}),$(that.elem).on("keydown",function(){clearTimeout(typingTimer)})}},{key:"_attachInputElementEvents",value:function _attachInputElementEvents(){var that=this,closePickerHandler=function closePickerHandler2(e){$(e.target).is(that.elem)||$(e.target).is(that.model.view.$container)||0!=$(e.target).closest("#"+that.model.view.$container.attr("id")).length||$(e.target).is($(that.elem).children())||(that.model.api.hide(),$("body").unbind("click",closePickerHandler2))};$(this.elem).on("focus click",Helper.debounce(function(evt){return that.model.api.show(),!1===that.model.state.ui.isInline&&$("body").unbind("click",closePickerHandler).bind("click",closePickerHandler),Helper.isMobile&&$(this).blur(),evt.stopPropagation(),!1},200)),$(this.elem).on("keydown",Helper.debounce(function(evt){if(9===evt.which)return that.model.api.hide(),!1},200))}},{key:"getInputPosition",value:function getInputPosition(){return $(this.elem).offset()}},{key:"getInputSize",value:function getInputSize(){return{width:$(this.elem).outerWidth(),height:$(this.elem).outerHeight()}}},{key:"_updateAltField",value:function _updateAltField(unix){var value=this.model.options.altFieldFormatter(unix);$(this.model.options.altField).val(value)}},{key:"_updateInputField",value:function _updateInputField(unix){var value=this.model.options.formatter(unix);$(this.elem).val()!=value&&$(this.elem).val(value)}},{key:"update",value:function update(unix){0==this.model.options.initialValue&&this._firstUpdate?this._firstUpdate=!1:(this._updateInputField(unix),this._updateAltField(unix))}},{key:"getOnInitState",value:function getOnInitState(){var garegurianDate=null,$inputElem=$(this.elem),inputValue=void 0;if((inputValue="INPUT"===$inputElem[0].nodeName?$inputElem[0].getAttribute("value"):$inputElem.data("date"))&&inputValue.match("^([0-1][0-9]|2[0-3]):([0-5][0-9])(?::([0-5][0-9]))?$")){var timeArray=inputValue.split(":"),tempDate=new Date;tempDate.setHours(timeArray[0]),tempDate.setMinutes(timeArray[1]),timeArray[2]?tempDate.setSeconds(timeArray[2]):tempDate.setSeconds(0),this.initialUnix=tempDate.valueOf()}else{if("persian"===this.model.options.initialValueType&&inputValue){var parse=new PersianDateParser,pd=new persianDate(parse.parse(inputValue)).valueOf();garegurianDate=new Date(pd).valueOf()}else"unix"===this.model.options.initialValueType&&inputValue?garegurianDate=parseInt(inputValue):inputValue&&(garegurianDate=new Date(inputValue).valueOf());this.initialUnix=garegurianDate&&"undefined"!=garegurianDate?garegurianDate:(new Date).valueOf()}return this.initialUnix}}]),Input2}();module2.exports=Input},function(module2,exports2,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();var Hamster=__webpack_require__(14),Navigator=function(){function Navigator2(model){return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Navigator2),this.model=model,this.liveAttach(),this._attachEvents(),this}return _createClass(Navigator2,[{key:"liveAttach",value:function liveAttach(){if(this.model.options.navigator.scroll.enabled){var that=this,gridPlot=$("#"+that.model.view.id+" .datepicker-grid-view")[0];Hamster(gridPlot).wheel(function(event,delta){delta>0?that.model.state.navigate("next"):that.model.state.navigate("prev"),that.model.view.render(),event.preventDefault()}),this.model.options.timePicker.enabled&&$("#"+that.model.view.id+" .time-segment").each(function(){Hamster(this).wheel(function(event,delta){var $target=$(event.target),key=$target.data("time-key")?$target.data("time-key"):$target.parents("[data-time-key]").data("time-key");key&&(delta>0?that.timeUp(key):that.timeDown(key)),that.model.view.render(),event.preventDefault()})})}}},{key:"timeUp",value:function timeUp(timekey){if(null!=this.model.options.timePicker[timekey]){var step=void 0,t=void 0,that=this;"meridian"==timekey?(step=12,t="PM"==this.model.state.view.meridian?this.model.PersianDate.date(this.model.state.selected.unixDate).add("hour",step).valueOf():this.model.PersianDate.date(this.model.state.selected.unixDate).subtract("hour",step).valueOf(),this.model.state.meridianToggle()):(step=this.model.options.timePicker[timekey].step,t=this.model.PersianDate.date(this.model.state.selected.unixDate).add(timekey,step).valueOf()),this.model.state.setViewDateTime("unix",t),this.model.state.setSelectedDateTime("unix",t),this.model.view.renderTimePartial(),clearTimeout(this.scrollDelayTimeDown),this.scrollDelayTimeUp=setTimeout(function(){that.model.view.markSelectedDay()},300)}}},{key:"timeDown",value:function timeDown(timekey){if(null!=this.model.options.timePicker[timekey]){var step=void 0,t=void 0,that=this;"meridian"==timekey?(step=12,t="AM"==this.model.state.view.meridian?this.model.PersianDate.date(this.model.state.selected.unixDate).add("hour",step).valueOf():this.model.PersianDate.date(this.model.state.selected.unixDate).subtract("hour",step).valueOf(),this.model.state.meridianToggle()):(step=this.model.options.timePicker[timekey].step,t=this.model.PersianDate.date(this.model.state.selected.unixDate).subtract(timekey,step).valueOf()),this.model.state.setViewDateTime("unix",t),this.model.state.setSelectedDateTime("unix",t),this.model.view.renderTimePartial(),clearTimeout(this.scrollDelayTimeDown),this.scrollDelayTimeDown=setTimeout(function(){that.model.view.markSelectedDay()},300)}}},{key:"_attachEvents",value:function _attachEvents(){var that=this;this.model.options.navigator.enabled&&$(document).on("click","#"+that.model.view.id+" .pwt-btn",function(){$(this).is(".pwt-btn-next")?(that.model.state.navigate("next"),that.model.view.render(),that.model.options.navigator.onNext(that.model)):$(this).is(".pwt-btn-switch")?(that.model.state.switchViewMode(),that.model.view.render(),that.model.options.navigator.onSwitch(that.model)):$(this).is(".pwt-btn-prev")&&(that.model.state.navigate("prev"),that.model.view.render(),that.model.options.navigator.onPrev(that.model))}),this.model.options.timePicker.enabled&&($(document).on("click","#"+that.model.view.id+" .up-btn",function(){var timekey=$(this).data("time-key");that.timeUp(timekey),that.model.options.onSelect(that.model.state.selected.unixDate)}),$(document).on("click","#"+that.model.view.id+" .down-btn",function(){var timekey=$(this).data("time-key");that.timeDown(timekey),that.model.options.onSelect(that.model.state.selected.unixDate)})),this.model.options.dayPicker.enabled&&$(document).on("click","#"+that.model.view.id+" .datepicker-day-view td:not(.disabled)",function(){var thisUnix=$(this).data("unix"),mustRender=void 0;that.model.state.setSelectedDateTime("unix",thisUnix),mustRender=that.model.state.selected.month!==that.model.state.view.month,that.model.state.setViewDateTime("unix",that.model.state.selected.unixDate),that.model.options.autoClose&&(that.model.view.hide(),that.model.options.onHide(that)),mustRender?that.model.view.render():that.model.view.markSelectedDay(),that.model.options.dayPicker.onSelect(thisUnix),that.model.options.onSelect(thisUnix)}),this.model.options.monthPicker.enabled&&$(document).on("click","#"+that.model.view.id+" .datepicker-month-view .month-item:not(.month-item-disable)",function(){var month=$(this).data("month"),year=$(this).data("year");that.model.state.switchViewModeTo("day"),that.model.options.onlySelectOnDate||(that.model.state.setSelectedDateTime("year",year),that.model.state.setSelectedDateTime("month",month),that.model.options.autoClose&&(that.model.view.hide(),that.model.options.onHide(that))),that.model.state.setViewDateTime("month",month),that.model.view.render(),that.model.options.monthPicker.onSelect(month),that.model.options.onSelect(that.model.state.selected.unixDate)}),this.model.options.yearPicker.enabled&&$(document).on("click","#"+that.model.view.id+" .datepicker-year-view .year-item:not(.year-item-disable)",function(){var year=$(this).data("year");that.model.state.switchViewModeTo("month"),that.model.options.onlySelectOnDate||(that.model.state.setSelectedDateTime("year",year),that.model.options.autoClose&&(that.model.view.hide(),that.model.options.onHide(that))),that.model.state.setViewDateTime("year",year),that.model.view.render(),that.model.options.yearPicker.onSelect(year),that.model.options.onSelect(that.model.state.selected.unixDate)})}}]),Navigator2}();module2.exports=Navigator},function(module2,exports2,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();var Config=__webpack_require__(4),Template=__webpack_require__(1),Options=function(){function Options2(options,model){return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Options2),this.model=model,this._compatibility($.extend(!0,this,Config,options))}return _createClass(Options2,[{key:"_compatibility",value:function _compatibility(options){options.inline&&(options.toolbox.submitButton.enabled=!1),options.template||(options.template=Template),persianDate.toCalendar(options.calendarType),persianDate.toLocale(options.calendar[options.calendarType].locale),options.onlyTimePicker&&(options.dayPicker.enabled=!1,options.monthPicker.enabled=!1,options.yearPicker.enabled=!1,options.navigator.enabled=!1,options.toolbox.enabled=!1,options.timePicker.enabled=!0),null===options.timePicker.hour.step&&(options.timePicker.hour.step=options.timePicker.step),null===options.timePicker.minute.step&&(options.timePicker.minute.step=options.timePicker.step),null===options.timePicker.second.step&&(options.timePicker.second.step=options.timePicker.step),!1===options.dayPicker.enabled&&(options.onlySelectOnDate=!1),options._viewModeList=[],options.dayPicker.enabled&&options._viewModeList.push("day"),options.monthPicker.enabled&&options._viewModeList.push("month"),options.yearPicker.enabled&&options._viewModeList.push("year")}}]),Options2}();module2.exports=Options},function(module2,exports2,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();var PersianDateParser=function(){function PersianDateParser2(){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PersianDateParser2),this.pattern={iso:/^(-?(?:[1-9][0-9]*)?[0-9]{4})-(1[0-2]|0[1-9])-(3[01]|0[1-9]|[12][0-9])T(2[0-3]|[01][0-9]):([0-5][0-9]):([0-5][0-9])(\\.[0-9]+)?(Z)?$/g,jalali:/^[1-4]\d{3}(\/|-|\.)((0?[1-6](\/|-|\.)((3[0-1])|([1-2][0-9])|(0?[1-9])))|((1[0-2]|(0?[7-9]))(\/|-|\.)(30|([1-2][0-9])|(0?[1-9]))))$/g}}return _createClass(PersianDateParser2,[{key:"parse",value:function parse(inputString){var isoPat=new RegExp(this.pattern.iso),jalaliPat=new RegExp(this.pattern.jalali);return String.prototype.toEnglishDigits=function(){var charCodeZero="".charCodeAt(0);return this.replace(/[-]/g,function(w){return w.charCodeAt(0)-charCodeZero})},inputString=inputString.toEnglishDigits(),jalaliPat.test(inputString)?inputString.split(/\/|-|\,|\./).map(Number):isoPat.test(inputString)?inputString.split(/\/|-|\,|\:|\T|\Z/g).map(Number):void 0}}]),PersianDateParser2}();module2.exports=PersianDateParser},function(module2,exports2,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();var PersianDateWrapper=function(){function PersianDateWrapper2(model){return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PersianDateWrapper2),this.model=model,this.model.options.calendar_=this.model.options.calendarType,this.model.options.locale_=this.model.options.calendar[this.model.options.calendarType].locale,this}return _createClass(PersianDateWrapper2,[{key:"date",value:function date(input){window.inspdCount||0===window.inspdCount?window.inspdCount++:window.inspdCount=0;var cp=void 0;return cp=persianDate.toCalendar(this.model.options.calendar_),this.model.options.calendar[this.model.options.calendarType].leapYearMode&&cp.toLeapYearMode(this.model.options.calendar[this.model.options.calendarType].leapYearMode),new cp(input).toLocale(this.model.options.locale_)}}]),PersianDateWrapper2}();module2.exports=PersianDateWrapper},function(module2,exports2,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();var State=function(){function State2(model){return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,State2),this.model=model,this.filetredDate=this.model.options.minDate||this.model.options.maxDate,this.viewModeList=this.model.options._viewModeList,this.viewMode=this.viewModeList.indexOf(model.options.viewMode)>0?model.options.viewMode:this.viewModeList[0],this.viewModeIndex=this.viewModeList.indexOf(model.options.viewMode)>0?this.viewModeList.indexOf(model.options.viewMode):0,this.filterDate={start:{year:0,month:0,date:0,hour:0,minute:0,second:0,unixDate:0},end:{year:0,month:0,date:0,hour:0,minute:0,second:0,unixDate:0}},this.view={year:0,month:0,date:0,hour:0,minute:0,second:0,unixDate:0,dateObject:null,meridian:"AM"},this.selected={year:0,month:0,date:0,hour:0,hour12:0,minute:0,second:0,unixDate:0,dateObject:null},this.ui={isOpen:!1,isInline:this.model.options.inline},this._setFilterDate(this.model.options.minDate,this.model.options.maxDate),this}return _createClass(State2,[{key:"_setFilterDate",value:function _setFilterDate(minDate,maxDate){minDate||(minDate=-2e15),maxDate||(maxDate=2e15);var pd=this.model.PersianDate.date(minDate);this.filterDate.start.unixDate=minDate,this.filterDate.start.hour=pd.hour(),this.filterDate.start.minute=pd.minute(),this.filterDate.start.second=pd.second(),this.filterDate.start.month=pd.month(),this.filterDate.start.date=pd.date(),this.filterDate.start.year=pd.year();var pdEnd=this.model.PersianDate.date(maxDate);this.filterDate.end.unixDate=maxDate,this.filterDate.end.hour=pdEnd.hour(),this.filterDate.end.minute=pdEnd.minute(),this.filterDate.end.second=pdEnd.second(),this.filterDate.end.month=pdEnd.month(),this.filterDate.end.date=pdEnd.date(),this.filterDate.end.year=pdEnd.year()}},{key:"navigate",value:function navigate(nav){if("next"==nav){if("year"==this.viewMode&&this.setViewDateTime("year",this.view.year+12),"month"==this.viewMode){var newYear=this.view.year+1;0===newYear&&(newYear=1),this.setViewDateTime("year",newYear)}if("day"==this.viewMode){var _newYear=this.view.year+1;0===_newYear&&(_newYear=1),this.view.month+1==13?(this.setViewDateTime("year",_newYear),this.setViewDateTime("month",1)):this.setViewDateTime("month",this.view.month+1)}}else{if("year"==this.viewMode&&this.setViewDateTime("year",this.view.year-12),"month"==this.viewMode){var _newYear2=this.view.year-1;0===_newYear2&&(_newYear2=-1),this.setViewDateTime("year",_newYear2)}if("day"==this.viewMode)if(this.view.month-1<=0){var _newYear3=this.view.year-1;0===_newYear3&&(_newYear3=-1),this.setViewDateTime("year",_newYear3),this.setViewDateTime("month",12)}else this.setViewDateTime("month",this.view.month-1)}}},{key:"switchViewMode",value:function switchViewMode(){return this.viewModeIndex=this.viewModeIndex+1>=this.viewModeList.length?0:this.viewModeIndex+1,this.viewMode=this.viewModeList[this.viewModeIndex]?this.viewModeList[this.viewModeIndex]:this.viewModeList[0],this._setViewDateTimeUnix(),this}},{key:"switchViewModeTo",value:function switchViewModeTo(viewMode){this.viewModeList.indexOf(viewMode)>=0&&(this.viewMode=viewMode,this.viewModeIndex=this.viewModeList.indexOf(viewMode))}},{key:"setSelectedDateTime",value:function setSelectedDateTime(key,value){switch(key){case"unix":this.selected.unixDate=value;var pd=this.model.PersianDate.date(value);this.selected.year=pd.year(),this.selected.month=pd.month(),this.selected.date=pd.date(),this.selected.hour=pd.hour(),this.selected.hour12=pd.format("hh"),this.selected.minute=pd.minute(),this.selected.second=pd.second();break;case"year":this.selected.year=value;break;case"month":this.selected.month=value;break;case"date":this.selected.date=value;break;case"hour":this.selected.hour=value;break;case"minute":this.selected.minute=value;break;case"second":this.selected.second=value}return this._updateSelectedUnix(),this}},{key:"_updateSelectedUnix",value:function _updateSelectedUnix(){return this.selected.dateObject=this.model.PersianDate.date([this.selected.year,this.selected.month,this.selected.date,this.view.hour,this.view.minute,this.view.second]),this.selected.unixDate=this.selected.dateObject.valueOf(),this.model.updateInput(this.selected.unixDate),this}},{key:"_setViewDateTimeUnix",value:function _setViewDateTimeUnix(){var daysInMonth=(new persianDate).daysInMonth(this.view.year,this.view.month);return this.view.date>daysInMonth&&(this.view.date=daysInMonth),this.view.dateObject=this.model.PersianDate.date([this.view.year,this.view.month,this.view.date,this.view.hour,this.view.minute,this.view.second]),this.view.year=this.view.dateObject.year(),this.view.month=this.view.dateObject.month(),this.view.date=this.view.dateObject.date(),this.view.hour=this.view.dateObject.hour(),this.view.hour12=this.view.dateObject.format("hh"),this.view.minute=this.view.dateObject.minute(),this.view.second=this.view.dateObject.second(),this.view.unixDate=this.view.dateObject.valueOf(),this}},{key:"setViewDateTime",value:function setViewDateTime(key,value){switch(key){case"unix":var pd=this.model.PersianDate.date(value);this.view.year=pd.year(),this.view.month=pd.month(),this.view.date=pd.date(),this.view.hour=pd.hour(),this.view.minute=pd.minute(),this.view.second=pd.second();break;case"year":this.view.year=value;break;case"month":this.view.month=value;break;case"date":this.view.date=value;break;case"hour":this.view.hour=value;break;case"minute":this.view.minute=value;break;case"second":this.view.second=value}return this._setViewDateTimeUnix(),this}},{key:"meridianToggle",value:function meridianToggle(){"AM"===this.view.meridian?this.view.meridian="PM":"PM"===this.view.meridian&&(this.view.meridian="AM")}}]),State2}();module2.exports=State},function(module2,exports2,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();var Toolbox=function(){function Toolbox2(model){return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Toolbox2),this.model=model,this._attachEvents(),this}return _createClass(Toolbox2,[{key:"_toggleCalendartype",value:function _toggleCalendartype(){"persian"==this.model.options.calendar_?(this.model.options.calendar_="gregorian",this.model.options.locale_=this.model.options.calendar.gregorian.locale):(this.model.options.calendar_="persian",this.model.options.locale_=this.model.options.calendar.persian.locale)}},{key:"_attachEvents",value:function _attachEvents(){var that=this;$(document).on("click","#"+that.model.view.id+" .pwt-btn-today",function(){that.model.state.setSelectedDateTime("unix",(new Date).valueOf()),that.model.state.setViewDateTime("unix",(new Date).valueOf()),that.model.view.reRender(),that.model.options.toolbox.onToday(that.model),that.model.options.toolbox.todayButton.onToday(that.model)}),$(document).on("click","#"+that.model.view.id+" .pwt-btn-calendar",function(){that._toggleCalendartype(),that.model.state.setSelectedDateTime("unix",that.model.state.selected.unixDate),that.model.state.setViewDateTime("unix",that.model.state.view.unixDate),that.model.view.render(),that.model.options.toolbox.calendarSwitch.onSwitch(that.model)}),$(document).on("click","#"+that.model.view.id+" .pwt-btn-submit",function(){that.model.view.hide(),that.model.options.toolbox.submitButton.onSubmit(that.model),that.model.options.onHide(this)})}}]),Toolbox2}();module2.exports=Toolbox},function(module2,exports2,__webpack_require__){"use strict";var _slicedToArray=function(){return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return function sliceIterator(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i.return&&_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();var Template=__webpack_require__(1),Helper=__webpack_require__(0),Mustache=__webpack_require__(15),View=function(){function View2(model){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,View2),this.yearsViewCount=12,this.model=model,this.rendered=null,this.$container=null,this.id="persianDateInstance-"+parseInt(1e3*Math.random(100));return this.model.state.ui.isInline?this.$container=$('<div  id="'+this.id+'" class="datepicker-container-inline"></div>').appendTo(this.model.inputElement):(this.$container=$('<div  id="'+this.id+'" class="datepicker-container"></div>').appendTo("body"),this.hide(),this.setPickerBoxPosition(),this.addCompatibilityClass()),this}return _createClass(View2,[{key:"addCompatibilityClass",value:function addCompatibilityClass(){Helper.isMobile&&this.model.options.responsive&&this.$container.addClass("pwt-mobile-view")}},{key:"destroy",value:function destroy(){this.$container.remove()}},{key:"setPickerBoxPosition",value:function setPickerBoxPosition(){var inputPosition=this.model.input.getInputPosition(),inputSize=this.model.input.getInputSize();if(Helper.isMobile&&this.model.options.responsive)return!1;"auto"===this.model.options.position?this.$container.css({left:inputPosition.left+"px",top:inputSize.height+inputPosition.top+"px"}):this.$container.css({left:this.model.options.position[1]+inputPosition.left+"px",top:this.model.options.position[0]+inputPosition.top+"px"})}},{key:"show",value:function show(){this.$container.removeClass("pwt-hide"),this.setPickerBoxPosition()}},{key:"hide",value:function hide(){this.$container.addClass("pwt-hide")}},{key:"toggle",value:function toggle(){this.$container.toggleClass("pwt-hide")}},{key:"_getNavSwitchText",value:function _getNavSwitchText(data){var output=void 0;return"day"==this.model.state.viewMode?output=this.model.options.dayPicker.titleFormatter.call(this,data.year,data.month):"month"==this.model.state.viewMode?output=this.model.options.monthPicker.titleFormatter.call(this,data.dateObject.valueOf()):"year"==this.model.state.viewMode&&(output=this.model.options.yearPicker.titleFormatter.call(this,data.year)),output}},{key:"checkYearAccess",value:function checkYearAccess(year){if(this.model.state.filetredDate){var startYear=this.model.state.filterDate.start.year,endYear=this.model.state.filterDate.end.year;if(startYear&&year<startYear)return!1;if(endYear&&year>endYear)return!1}return this.model.options.checkYear(year)}},{key:"_getYearViewModel",value:function _getYearViewModel(viewState){var _this=this,isEnabled=this.model.options.yearPicker.enabled;if(!isEnabled)return{enabled:!1};var list=[].concat(function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}(Array(this.yearsViewCount).keys())).map(function(value){return value+parseInt(viewState.year/_this.yearsViewCount)*_this.yearsViewCount}),yearsModel=[],yearStr=this.model.PersianDate.date(),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=list[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var i=_step.value;yearStr.year([i]),yearsModel.push({title:yearStr.format("YYYY"),enabled:this.checkYearAccess(i),dataYear:i,selected:this.model.state.selected.year==i})}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return{enabled:isEnabled,viewMode:"year"==this.model.state.viewMode,list:yearsModel}}},{key:"checkMonthAccess",value:function checkMonthAccess(month){month+=1;var y=this.model.state.view.year;if(this.model.state.filetredDate){var startMonth=this.model.state.filterDate.start.month,endMonth=this.model.state.filterDate.end.month,startYear=this.model.state.filterDate.start.year,endYear=this.model.state.filterDate.end.year;if(startMonth&&endMonth&&(y==endYear&&month>endMonth||y>endYear)||y==startYear&&month<startMonth||y<startYear)return!1;if(endMonth&&(y==endYear&&month>endMonth||y>endYear))return!1;if(startMonth&&(y==startYear&&month<startMonth||y<startYear))return!1}return this.model.options.checkMonth(month,y)}},{key:"_getMonthViewModel",value:function _getMonthViewModel(){var isEnaled=this.model.options.monthPicker.enabled;if(!isEnaled)return{enabled:!1};var monthModel=[],_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=this.model.PersianDate.date().rangeName().months.entries()[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var _step2$value=_slicedToArray(_step2.value,2),index=_step2$value[0],month=_step2$value[1];monthModel.push({title:month,enabled:this.checkMonthAccess(index),year:this.model.state.view.year,dataMonth:index+1,selected:this.model.state.selected.year==this.model.state.view.year&&this.model.state.selected.month==index+1})}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}return{enabled:isEnaled,viewMode:"month"==this.model.state.viewMode,list:monthModel}}},{key:"checkDayAccess",value:function checkDayAccess(unixtimespan){if(this.minDate=this.model.options.minDate,this.maxDate=this.model.options.maxDate,this.model.state.filetredDate)if(this.minDate&&this.maxDate){if(this.minDate=this.model.PersianDate.date(this.minDate).startOf("day").valueOf(),this.maxDate=this.model.PersianDate.date(this.maxDate).endOf("day").valueOf(),!(unixtimespan>=this.minDate&&unixtimespan<=this.maxDate))return!1}else if(this.minDate){if(this.minDate=this.model.PersianDate.date(this.minDate).startOf("day").valueOf(),unixtimespan<=this.minDate)return!1}else if(this.maxDate&&(this.maxDate=this.model.PersianDate.date(this.maxDate).endOf("day").valueOf(),unixtimespan>=this.maxDate))return!1;return this.model.options.checkDate(unixtimespan)}},{key:"_getDayViewModel",value:function _getDayViewModel(){if("day"!=this.model.state.viewMode)return[];var isEnabled=this.model.options.dayPicker.enabled;if(!isEnabled)return{enabled:!1};var viewMonth=this.model.state.view.month,viewYear=this.model.state.view.year,pdateInstance=this.model.PersianDate.date(),daysCount=pdateInstance.daysInMonth(viewYear,viewMonth),firstWeekDayOfMonth=pdateInstance.getFirstWeekDayOfMonth(viewYear,viewMonth)-1,outputList=[],daysListindex=0,nextMonthListIndex=0,anotherCalendar=this._getAnotherCalendar(),_iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=[["null","null","null","null","null","null","null"],["null","null","null","null","null","null","null"],["null","null","null","null","null","null","null"],["null","null","null","null","null","null","null"],["null","null","null","null","null","null","null"],["null","null","null","null","null","null","null"]].entries()[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var _step3$value=_slicedToArray(_step3.value,2),rowIndex=_step3$value[0],daysRow=_step3$value[1];outputList[rowIndex]=[];var _iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var _step4,_iterator4=daysRow.entries()[Symbol.iterator]();!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=!0){var dayIndex=_slicedToArray(_step4.value,1)[0],calcedDate=void 0,otherMonth=void 0;0===rowIndex&&dayIndex<firstWeekDayOfMonth?(calcedDate=this.model.state.view.dateObject.startOf("month").hour(12).subtract("days",firstWeekDayOfMonth-dayIndex),otherMonth=!0):0===rowIndex&&dayIndex>=firstWeekDayOfMonth||rowIndex<=5&&daysListindex<daysCount?(daysListindex+=1,calcedDate=new persianDate([this.model.state.view.year,this.model.state.view.month,daysListindex]),otherMonth=!1):(nextMonthListIndex+=1,calcedDate=this.model.state.view.dateObject.endOf("month").hour(12).add("days",nextMonthListIndex),otherMonth=!0),outputList[rowIndex].push({title:calcedDate.format("D"),alterCalTitle:new persianDate(calcedDate.valueOf()).toCalendar(anotherCalendar[0]).toLocale(anotherCalendar[1]).format("D"),dataDate:[calcedDate.year(),calcedDate.month(),calcedDate.date()].join(","),dataUnix:calcedDate.hour(12).valueOf(),otherMonth:otherMonth,enabled:this.checkDayAccess(calcedDate.valueOf())})}}catch(err){_didIteratorError4=!0,_iteratorError4=err}finally{try{!_iteratorNormalCompletion4&&_iterator4.return&&_iterator4.return()}finally{if(_didIteratorError4)throw _iteratorError4}}}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{!_iteratorNormalCompletion3&&_iterator3.return&&_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}return{enabled:isEnabled,viewMode:"day"==this.model.state.viewMode,list:outputList}}},{key:"markSelectedDay",value:function markSelectedDay(){var selected=this.model.state.selected;this.$container.find(".table-days td").each(function(){$(this).data("date")==[selected.year,selected.month,selected.date].join(",")?$(this).addClass("selected"):$(this).removeClass("selected")})}},{key:"markToday",value:function markToday(){var today=new persianDate;this.$container.find(".table-days td").each(function(){$(this).data("date")==[today.year(),today.month(),today.date()].join(",")?$(this).addClass("today"):$(this).removeClass("today")})}},{key:"_getTimeViewModel",value:function _getTimeViewModel(){var isEnabled=this.model.options.timePicker.enabled;if(!isEnabled)return{enabled:!1};return{enabled:isEnabled,hour:{title:this.model.options.timePicker.meridian.enabled?this.model.state.view.dateObject.format("hh"):this.model.state.view.dateObject.format("HH"),enabled:this.model.options.timePicker.hour.enabled},minute:{title:this.model.state.view.dateObject.format("mm"),enabled:this.model.options.timePicker.minute.enabled},second:{title:this.model.state.view.dateObject.format("ss"),enabled:this.model.options.timePicker.second.enabled},meridian:{title:this.model.state.view.dateObject.format("a"),enabled:this.model.options.timePicker.meridian.enabled}}}},{key:"_getWeekViewModel",value:function _getWeekViewModel(){return{enabled:!0,list:this.model.PersianDate.date().rangeName().weekdaysMin}}},{key:"getCssClass",value:function getCssClass(){return[this.model.state.ui.isInline?"datepicker-plot-area-inline-view":"",this.model.options.timePicker.meridian.enabled?"":"datepicker-state-no-meridian",this.model.options.onlyTimePicker?"datepicker-state-only-time":"",this.model.options.timePicker.second.enabled?"":"datepicker-state-no-second","gregorian"==this.model.options.calendar_?"datepicker-gregorian":"datepicker-persian"].join(" ")}},{key:"getViewModel",value:function getViewModel(data){var anotherCalendar=this._getAnotherCalendar();return{plotId:"",navigator:{enabled:this.model.options.navigator.enabled,switch:{enabled:!0,text:this._getNavSwitchText(data)},text:this.model.options.navigator.text},selected:this.model.state.selected,time:this._getTimeViewModel(data),days:this._getDayViewModel(data),weekdays:this._getWeekViewModel(data),month:this._getMonthViewModel(data),year:this._getYearViewModel(data),toolbox:this.model.options.toolbox,cssClass:this.getCssClass(),onlyTimePicker:this.model.options.onlyTimePicker,altCalendarShowHint:this.model.options.calendar[anotherCalendar[0]].showHint,calendarSwitchText:this.model.state.view.dateObject.toCalendar(anotherCalendar[0]).toLocale(anotherCalendar[1]).format(this.model.options.toolbox.calendarSwitch.format),todayButtonText:this._getButtonText().todayButtontext,submitButtonText:this._getButtonText().submitButtonText}}},{key:"_getButtonText",value:function _getButtonText(){var output={};return"fa"==this.model.options.locale_?(output.todayButtontext=this.model.options.toolbox.todayButton.text.fa,output.submitButtonText=this.model.options.toolbox.submitButton.text.fa):"en"==this.model.options.locale_&&(output.todayButtontext=this.model.options.toolbox.todayButton.text.en,output.submitButtonText=this.model.options.toolbox.submitButton.text.en),output}},{key:"_getAnotherCalendar",value:function _getAnotherCalendar(){var cal=void 0,loc=void 0;return"persian"==this.model.options.calendar_?(cal="gregorian",loc=this.model.options.calendar.gregorian.locale):(cal="persian",loc=this.model.options.calendar.persian.locale),[cal,loc]}},{key:"renderTimePartial",value:function renderTimePartial(){var timeViewModel=this._getTimeViewModel(this.model.state.view);this.$container.find('[data-time-key="hour"] input').val(timeViewModel.hour.title),this.$container.find('[data-time-key="minute"] input').val(timeViewModel.minute.title),this.$container.find('[data-time-key="second"] input').val(timeViewModel.second.title),this.$container.find('[data-time-key="meridian"] input').val(timeViewModel.meridian.title)}},{key:"render",value:function render(data){data||(data=this.model.state.view),Helper.debug(this,"render"),Mustache.parse(Template),this.rendered=$(Mustache.render(this.model.options.template,this.getViewModel(data))),this.$container.empty().append(this.rendered),this.markSelectedDay(),this.markToday(),this.afterRender()}},{key:"reRender",value:function reRender(){var data=this.model.state.view;this.render(data)}},{key:"afterRender",value:function afterRender(){this.model.navigator&&this.model.navigator.liveAttach()}}]),View2}();module2.exports=View},function(module2,exports2,__webpack_require__){!function(window2,document2){"use strict";var lowestDelta,lowestDeltaXY,Hamster=function(element){return new Hamster.Instance(element)};Hamster.SUPPORT="wheel",Hamster.ADD_EVENT="addEventListener",Hamster.REMOVE_EVENT="removeEventListener",Hamster.PREFIX="",Hamster.READY=!1,Hamster.Instance=function(element){return Hamster.READY||(Hamster.normalise.browser(),Hamster.READY=!0),this.element=element,this.handlers=[],this},Hamster.Instance.prototype={wheel:function onEvent(handler,useCapture){return Hamster.event.add(this,Hamster.SUPPORT,handler,useCapture),"DOMMouseScroll"===Hamster.SUPPORT&&Hamster.event.add(this,"MozMousePixelScroll",handler,useCapture),this},unwheel:function offEvent(handler,useCapture){return void 0===handler&&(handler=this.handlers.slice(-1)[0])&&(handler=handler.original),Hamster.event.remove(this,Hamster.SUPPORT,handler,useCapture),"DOMMouseScroll"===Hamster.SUPPORT&&Hamster.event.remove(this,"MozMousePixelScroll",handler,useCapture),this}},Hamster.event={add:function add(hamster,eventName,handler,useCapture){var originalHandler=handler;handler=function(originalEvent){originalEvent||(originalEvent=window2.event);var event=Hamster.normalise.event(originalEvent),delta=Hamster.normalise.delta(originalEvent);return originalHandler(event,delta[0],delta[1],delta[2])},hamster.element[Hamster.ADD_EVENT](Hamster.PREFIX+eventName,handler,useCapture||!1),hamster.handlers.push({original:originalHandler,normalised:handler})},remove:function remove(hamster,eventName,handler,useCapture){for(var handlers,originalHandler=handler,lookup={},i=0,len=hamster.handlers.length;i<len;++i)lookup[hamster.handlers[i].original]=hamster.handlers[i];for(var h in handler=(handlers=lookup[originalHandler]).normalised,hamster.element[Hamster.REMOVE_EVENT](Hamster.PREFIX+eventName,handler,useCapture||!1),hamster.handlers)if(hamster.handlers[h]==handlers){hamster.handlers.splice(h,1);break}}},Hamster.normalise={browser:function normaliseBrowser(){"onwheel"in document2||document2.documentMode>=9||(Hamster.SUPPORT=void 0!==document2.onmousewheel?"mousewheel":"DOMMouseScroll"),window2.addEventListener||(Hamster.ADD_EVENT="attachEvent",Hamster.REMOVE_EVENT="detachEvent",Hamster.PREFIX="on")},event:function normaliseEvent(originalEvent){var event={originalEvent:originalEvent,target:originalEvent.target||originalEvent.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"===originalEvent.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){originalEvent.preventDefault?originalEvent.preventDefault():originalEvent.returnValue=!1},stopPropagation:function(){originalEvent.stopPropagation?originalEvent.stopPropagation():originalEvent.cancelBubble=!1}};return originalEvent.wheelDelta&&(event.deltaY=-1/40*originalEvent.wheelDelta),originalEvent.wheelDeltaX&&(event.deltaX=-1/40*originalEvent.wheelDeltaX),originalEvent.detail&&(event.deltaY=originalEvent.detail),event},delta:function normaliseDelta(originalEvent){var absDelta,absDeltaXY,fn,delta=0,deltaX=0,deltaY=0;return originalEvent.deltaY&&(delta=deltaY=-1*originalEvent.deltaY),originalEvent.deltaX&&(delta=-1*(deltaX=originalEvent.deltaX)),originalEvent.wheelDelta&&(delta=originalEvent.wheelDelta),originalEvent.wheelDeltaY&&(deltaY=originalEvent.wheelDeltaY),originalEvent.wheelDeltaX&&(deltaX=-1*originalEvent.wheelDeltaX),originalEvent.detail&&(delta=-1*originalEvent.detail),0===delta?[0,0,0]:(absDelta=Math.abs(delta),(!lowestDelta||absDelta<lowestDelta)&&(lowestDelta=absDelta),absDeltaXY=Math.max(Math.abs(deltaY),Math.abs(deltaX)),(!lowestDeltaXY||absDeltaXY<lowestDeltaXY)&&(lowestDeltaXY=absDeltaXY),fn=delta>0?"floor":"ceil",[delta=Math[fn](delta/lowestDelta),deltaX=Math[fn](deltaX/lowestDeltaXY),deltaY=Math[fn](deltaY/lowestDeltaXY)])}},"function"==typeof window2.define&&window2.define.amd?window2.define("hamster",[],function(){return Hamster}):module2.exports=Hamster}(window,window.document)},function(module2,exports2,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function defineMustache(global2,factory){"object"==typeof exports2&&exports2&&"string"!=typeof exports2.nodeName?factory(exports2):(__WEBPACK_AMD_DEFINE_ARRAY__=[exports2],void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=factory)?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports2,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)||(module2.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(0,function mustacheFactory(mustache){var objectToString=Object.prototype.toString,isArray=Array.isArray||function isArrayPolyfill(object){return"[object Array]"===objectToString.call(object)};function isFunction(object){return"function"==typeof object}function escapeRegExp(string){return string.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function hasProperty(obj,propName){return null!=obj&&"object"==typeof obj&&propName in obj}function primitiveHasOwnProperty(primitive,propName){return null!=primitive&&"object"!=typeof primitive&&primitive.hasOwnProperty&&primitive.hasOwnProperty(propName)}var regExpTest=RegExp.prototype.test;var nonSpaceRe=/\S/;function isWhitespace(string){return!function testRegExp(re,string){return regExpTest.call(re,string)}(nonSpaceRe,string)}var entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var whiteRe=/\s*/,spaceRe=/\s+/,equalsRe=/\s*=/,curlyRe=/\s*\}/,tagRe=/#|\^|\/|>|\{|&|=|!/;function Scanner(string){this.string=string,this.tail=string,this.pos=0}function Context(view,parentContext){this.view=view,this.cache={".":this.view},this.parent=parentContext}function Writer(){this.cache={}}Scanner.prototype.eos=function eos(){return""===this.tail},Scanner.prototype.scan=function scan(re){var match=this.tail.match(re);if(!match||0!==match.index)return"";var string=match[0];return this.tail=this.tail.substring(string.length),this.pos+=string.length,string},Scanner.prototype.scanUntil=function scanUntil(re){var match,index=this.tail.search(re);switch(index){case-1:match=this.tail,this.tail="";break;case 0:match="";break;default:match=this.tail.substring(0,index),this.tail=this.tail.substring(index)}return this.pos+=match.length,match},Context.prototype.push=function push(view){return new Context(view,this)},Context.prototype.lookup=function lookup(name){var value,cache=this.cache;if(cache.hasOwnProperty(name))value=cache[name];else{for(var intermediateValue,names,index,context=this,lookupHit=!1;context;){if(name.indexOf(".")>0)for(intermediateValue=context.view,names=name.split("."),index=0;null!=intermediateValue&&index<names.length;)index===names.length-1&&(lookupHit=hasProperty(intermediateValue,names[index])||primitiveHasOwnProperty(intermediateValue,names[index])),intermediateValue=intermediateValue[names[index++]];else intermediateValue=context.view[name],lookupHit=hasProperty(context.view,name);if(lookupHit){value=intermediateValue;break}context=context.parent}cache[name]=value}return isFunction(value)&&(value=value.call(this.view)),value},Writer.prototype.clearCache=function clearCache(){this.cache={}},Writer.prototype.parse=function parse(template,tags){var cache=this.cache,cacheKey=template+":"+(tags||mustache.tags).join(":"),tokens=cache[cacheKey];return null==tokens&&(tokens=cache[cacheKey]=function parseTemplate(template,tags){if(!template)return[];var openingTagRe,closingTagRe,closingCurlyRe,sections=[],tokens=[],spaces=[],hasTag=!1,nonSpace=!1;function stripSpace(){if(hasTag&&!nonSpace)for(;spaces.length;)delete tokens[spaces.pop()];else spaces=[];hasTag=!1,nonSpace=!1}function compileTags(tagsToCompile){if("string"==typeof tagsToCompile&&(tagsToCompile=tagsToCompile.split(spaceRe,2)),!isArray(tagsToCompile)||2!==tagsToCompile.length)throw new Error("Invalid tags: "+tagsToCompile);openingTagRe=new RegExp(escapeRegExp(tagsToCompile[0])+"\\s*"),closingTagRe=new RegExp("\\s*"+escapeRegExp(tagsToCompile[1])),closingCurlyRe=new RegExp("\\s*"+escapeRegExp("}"+tagsToCompile[1]))}compileTags(tags||mustache.tags);for(var start,type,value,chr,token,openSection,scanner=new Scanner(template);!scanner.eos();){if(start=scanner.pos,value=scanner.scanUntil(openingTagRe))for(var i=0,valueLength=value.length;i<valueLength;++i)isWhitespace(chr=value.charAt(i))?spaces.push(tokens.length):nonSpace=!0,tokens.push(["text",chr,start,start+1]),start+=1,"\n"===chr&&stripSpace();if(!scanner.scan(openingTagRe))break;if(hasTag=!0,type=scanner.scan(tagRe)||"name",scanner.scan(whiteRe),"="===type?(value=scanner.scanUntil(equalsRe),scanner.scan(equalsRe),scanner.scanUntil(closingTagRe)):"{"===type?(value=scanner.scanUntil(closingCurlyRe),scanner.scan(curlyRe),scanner.scanUntil(closingTagRe),type="&"):value=scanner.scanUntil(closingTagRe),!scanner.scan(closingTagRe))throw new Error("Unclosed tag at "+scanner.pos);if(token=[type,value,start,scanner.pos],tokens.push(token),"#"===type||"^"===type)sections.push(token);else if("/"===type){if(!(openSection=sections.pop()))throw new Error('Unopened section "'+value+'" at '+start);if(openSection[1]!==value)throw new Error('Unclosed section "'+openSection[1]+'" at '+start)}else"name"===type||"{"===type||"&"===type?nonSpace=!0:"="===type&&compileTags(value)}if(openSection=sections.pop())throw new Error('Unclosed section "'+openSection[1]+'" at '+scanner.pos);return function nestTokens(tokens){for(var token,nestedTokens=[],collector=nestedTokens,sections=[],i=0,numTokens=tokens.length;i<numTokens;++i)switch((token=tokens[i])[0]){case"#":case"^":collector.push(token),sections.push(token),collector=token[4]=[];break;case"/":sections.pop()[5]=token[2],collector=sections.length>0?sections[sections.length-1][4]:nestedTokens;break;default:collector.push(token)}return nestedTokens}(function squashTokens(tokens){for(var token,lastToken,squashedTokens=[],i=0,numTokens=tokens.length;i<numTokens;++i)(token=tokens[i])&&("text"===token[0]&&lastToken&&"text"===lastToken[0]?(lastToken[1]+=token[1],lastToken[3]=token[3]):(squashedTokens.push(token),lastToken=token));return squashedTokens}(tokens))}(template,tags)),tokens},Writer.prototype.render=function render(template,view,partials,tags){var tokens=this.parse(template,tags),context=view instanceof Context?view:new Context(view);return this.renderTokens(tokens,context,partials,template,tags)},Writer.prototype.renderTokens=function renderTokens(tokens,context,partials,originalTemplate,tags){for(var token,symbol,value,buffer="",i=0,numTokens=tokens.length;i<numTokens;++i)value=void 0,"#"===(symbol=(token=tokens[i])[0])?value=this.renderSection(token,context,partials,originalTemplate):"^"===symbol?value=this.renderInverted(token,context,partials,originalTemplate):">"===symbol?value=this.renderPartial(token,context,partials,tags):"&"===symbol?value=this.unescapedValue(token,context):"name"===symbol?value=this.escapedValue(token,context):"text"===symbol&&(value=this.rawValue(token)),void 0!==value&&(buffer+=value);return buffer},Writer.prototype.renderSection=function renderSection(token,context,partials,originalTemplate){var self2=this,buffer="",value=context.lookup(token[1]);if(value){if(isArray(value))for(var j=0,valueLength=value.length;j<valueLength;++j)buffer+=this.renderTokens(token[4],context.push(value[j]),partials,originalTemplate);else if("object"==typeof value||"string"==typeof value||"number"==typeof value)buffer+=this.renderTokens(token[4],context.push(value),partials,originalTemplate);else if(isFunction(value)){if("string"!=typeof originalTemplate)throw new Error("Cannot use higher-order sections without the original template");null!=(value=value.call(context.view,originalTemplate.slice(token[3],token[5]),function subRender(template){return self2.render(template,context,partials)}))&&(buffer+=value)}else buffer+=this.renderTokens(token[4],context,partials,originalTemplate);return buffer}},Writer.prototype.renderInverted=function renderInverted(token,context,partials,originalTemplate){var value=context.lookup(token[1]);if(!value||isArray(value)&&0===value.length)return this.renderTokens(token[4],context,partials,originalTemplate)},Writer.prototype.renderPartial=function renderPartial(token,context,partials,tags){if(partials){var value=isFunction(partials)?partials(token[1]):partials[token[1]];return null!=value?this.renderTokens(this.parse(value,tags),context,partials,value):void 0}},Writer.prototype.unescapedValue=function unescapedValue(token,context){var value=context.lookup(token[1]);if(null!=value)return value},Writer.prototype.escapedValue=function escapedValue(token,context){var value=context.lookup(token[1]);if(null!=value)return mustache.escape(value)},Writer.prototype.rawValue=function rawValue(token){return token[1]},mustache.name="mustache.js",mustache.version="3.0.1",mustache.tags=["{{","}}"];var defaultWriter=new Writer;return mustache.clearCache=function clearCache(){return defaultWriter.clearCache()},mustache.parse=function parse(template,tags){return defaultWriter.parse(template,tags)},mustache.render=function render(template,view,partials,tags){if("string"!=typeof template)throw new TypeError('Invalid template! Template should be a "string" but "'+function typeStr(obj){return isArray(obj)?"array":typeof obj}(template)+'" was given as the first argument for mustache#render(template, view, partials)');return defaultWriter.render(template,view,partials,tags)},mustache.to_html=function to_html(template,view,partials,send){var result=mustache.render(template,view,partials);if(!isFunction(send))return result;send(result)},mustache.escape=function escapeHtml(string){return String(string).replace(/[&<>"'`=\/]/g,function fromEntityMap(s){return entityMap[s]})},mustache.Scanner=Scanner,mustache.Context=Context,mustache.Writer=Writer,mustache})}]),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).videojs=t()}(void 0,function(){var M="8.23.3";let U={},B=function(e2,t2){return U[e2]=U[e2]||[],t2&&(U[e2]=U[e2].concat(t2)),U[e2]};function F(e2,t2){return!((t2=B(e2).indexOf(t2))<=-1||(U[e2]=U[e2].slice(),U[e2].splice(t2,1),0))}let q={prefixed:!0};var j=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"]],V=j[0];let H;for(let e2=0;e2<j.length;e2++)if(j[e2][1]in document){H=j[e2];break}if(H){for(let e2=0;e2<H.length;e2++)q[V[e2]]=H[e2];q.prefixed=H[0]!==V[0]}let z=[];function $2(e2){return Y(e2)?Object.keys(e2):[]}let o=function s2(r2,n2=":",a2=""){let i2,t2="info";function o2(...e2){i2("log",t2,e2)}var l2,d2,h2;return l2=r2,h2=a2,i2=(t3,i3,s3)=>{i3=d2.levels[i3];var e2,r3=new RegExp(`^(${i3})$`);let n3=l2;if("log"!==t3&&s3.unshift(t3.toUpperCase()+":"),h2&&(n3="%c"+l2,s3.unshift(h2)),s3.unshift(n3+":"),z&&(z.push([].concat(s3)),e2=z.length-1e3,z.splice(0,0<e2?e2:0)),window.console){let e3=window.console[t3];(e3=e3||"debug"!==t3?e3:window.console.info||window.console.log)&&i3&&r3.test(t3)&&e3[Array.isArray(s3)?"apply":"call"](window.console,s3)}},(d2=o2).createLogger=(e2,t3,i3)=>s2(r2+` ${t3=void 0!==t3?t3:n2} `+e2,t3,void 0!==i3?i3:a2),o2.createNewLogger=(e2,t3,i3)=>s2(e2,t3,i3),o2.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:t2},o2.level=e2=>{if("string"==typeof e2){if(!o2.levels.hasOwnProperty(e2))throw new Error(`"${e2}" in not a valid log level`);t2=e2}return t2},(o2.history=()=>z?[].concat(z):[]).filter=t3=>(z||[]).filter(e2=>new RegExp(`.*${t3}.*`).test(e2[0])),o2.history.clear=()=>{z&&(z.length=0)},o2.history.disable=()=>{null!==z&&(z.length=0,z=null)},o2.history.enable=()=>{null===z&&(z=[])},o2.error=(...e2)=>i2("error",t2,e2),o2.warn=(...e2)=>i2("warn",t2,e2),o2.debug=(...e2)=>i2("debug",t2,e2),o2}("VIDEOJS"),W=o.createLogger,G=Object.prototype.toString;function X(t2,i2){$2(t2).forEach(e2=>i2(t2[e2],e2))}function K(i2,s2,e2=0){return $2(i2).reduce((e3,t2)=>s2(e3,i2[t2],t2),e2)}function Y(e2){return!!e2&&"object"==typeof e2}function Q(e2){return Y(e2)&&"[object Object]"===G.call(e2)&&e2.constructor===Object}function d(...e2){let i2={};return e2.forEach(e3=>{e3&&X(e3,(e4,t2)=>{Q(e4)?(Q(i2[t2])||(i2[t2]={}),i2[t2]=d(i2[t2],e4)):i2[t2]=e4})}),i2}function J(e2={}){var t2,i2,s2=[];for(t2 in e2)e2.hasOwnProperty(t2)&&(i2=e2[t2],s2.push(i2));return s2}function Z(t2,i2,s2,e2=!0){let r2=e3=>Object.defineProperty(t2,i2,{value:e3,enumerable:!0,writable:!0});var n2={configurable:!0,enumerable:!0,get(){var e3=s2();return r2(e3),e3}};return e2&&(n2.set=r2),Object.defineProperty(t2,i2,n2)}let re,ee=Object.freeze({__proto__:null,each:X,reduce:K,isObject:Y,isPlain:Q,merge:d,values:J,defineLazyProperty:Z}),te=!1,ie=null,se=!1,ne=!1,ae=!1,oe=!1,le=!1,de=null,he=null;var e=Boolean(window.cast&&window.cast.framework&&window.cast.framework.CastReceiverContext);let ue=null,ce=!1,pe=!1,me=!1,ge=!1,fe=!1,ye=!1,_e=!1,ve=Boolean(Ee()&&("ontouchstart"in window||window.navigator.maxTouchPoints||window.DocumentTouch&&window.document instanceof window.DocumentTouch));var be,t=window.navigator&&window.navigator.userAgentData;if(t&&t.platform&&t.brands&&(se="Android"===t.platform,ae=Boolean(t.brands.find(e2=>"Microsoft Edge"===e2.brand)),oe=Boolean(t.brands.find(e2=>"Chromium"===e2.brand)),le=!ae&&oe,de=he=(t.brands.find(e2=>"Chromium"===e2.brand)||{}).version||null,pe="Windows"===t.platform),!oe){let i2=window.navigator&&window.navigator.userAgent||"";te=/iPod/i.test(i2),ie=(t=i2.match(/OS (\d+)_/i))&&t[1]?t[1]:null,se=/Android/i.test(i2),re=(t=i2.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i))?(bi=t[1]&&parseFloat(t[1]),be=t[2]&&parseFloat(t[2]),bi&&be?parseFloat(t[1]+"."+t[2]):bi||null):null,ne=/Firefox/i.test(i2),ae=/Edg/i.test(i2),oe=/Chrome/i.test(i2)||/CriOS/i.test(i2),le=!ae&&oe,de=he=(be=i2.match(/(Chrome|CriOS)\/(\d+)/))&&be[2]?parseFloat(be[2]):null,ue=function(){var e2=/MSIE\s(\d+)\.\d/.exec(i2);let t2=e2&&parseFloat(e2[1]);return!t2&&/Trident\/7.0/i.test(i2)&&/rv:11.0/.test(i2)?11:t2}(),fe=/Tizen/i.test(i2),ye=/Web0S/i.test(i2),_e=fe||ye,ce=/Safari/i.test(i2)&&!le&&!se&&!ae&&!_e,pe=/Windows/i.test(i2),me=/iPad/i.test(i2)||ce&&ve&&!/iPhone/i.test(i2),ge=/iPhone/i.test(i2)&&!me}let u=ge||me||te,Te=(ce||u)&&!le;var Se=Object.freeze({__proto__:null,get IS_IPOD(){return te},get IOS_VERSION(){return ie},get IS_ANDROID(){return se},get ANDROID_VERSION(){return re},get IS_FIREFOX(){return ne},get IS_EDGE(){return ae},get IS_CHROMIUM(){return oe},get IS_CHROME(){return le},get CHROMIUM_VERSION(){return de},get CHROME_VERSION(){return he},IS_CHROMECAST_RECEIVER:e,get IE_VERSION(){return ue},get IS_SAFARI(){return ce},get IS_WINDOWS(){return pe},get IS_IPAD(){return me},get IS_IPHONE(){return ge},get IS_TIZEN(){return fe},get IS_WEBOS(){return ye},get IS_SMART_TV(){return _e},TOUCH_ENABLED:ve,IS_IOS:u,IS_ANY_SAFARI:Te});function we(e2){return"string"==typeof e2&&Boolean(e2.trim())}function Ee(){return document===window.document}function Ce(e2){return Y(e2)&&1===e2.nodeType}function ke(){try{return window.parent!==window.self}catch(e2){return!0}}function Ie(i2){return function(e2,t2){return we(e2)?(t2=Ce(t2=we(t2)?document.querySelector(t2):t2)?t2:document)[i2]&&t2[i2](e2):document[i2](null)}}function l(e2="div",i2={},t2={},s2){let r2=document.createElement(e2);return Object.getOwnPropertyNames(i2).forEach(function(e3){var t3=i2[e3];"textContent"===e3?xe(r2,t3):r2[e3]===t3&&"tabIndex"!==e3||(r2[e3]=t3)}),Object.getOwnPropertyNames(t2).forEach(function(e3){r2.setAttribute(e3,t2[e3])}),s2&&Ge(r2,s2),r2}function xe(e2,t2){return void 0===e2.textContent?e2.innerText=t2:e2.textContent=t2,e2}function Ae(e2,t2){t2.firstChild?t2.insertBefore(e2,t2.firstChild):t2.appendChild(e2)}function De(e2,t2){if(0<=t2.indexOf(" "))throw new Error("class has illegal whitespace characters");return e2.classList.contains(t2)}function Pe(e2,...t2){return e2.classList.add(...t2.reduce((e3,t3)=>e3.concat(t3.split(/\s+/)),[])),e2}function Le(e2,...t2){return e2?(e2.classList.remove(...t2.reduce((e3,t3)=>e3.concat(t3.split(/\s+/)),[])),e2):(o.warn("removeClass was called with an element that doesn't exist"),null)}function Oe(t2,e2,i2){return"boolean"!=typeof(i2="function"==typeof i2?i2(t2,e2):i2)&&(i2=void 0),e2.split(/\s+/).forEach(e3=>t2.classList.toggle(e3,i2)),t2}function Re(i2,s2){Object.getOwnPropertyNames(s2).forEach(function(e2){var t2=s2[e2];null==t2||!1===t2?i2.removeAttribute(e2):i2.setAttribute(e2,!0===t2?"":t2)})}function Ne(e2){var i2={},s2=["autoplay","controls","playsinline","loop","muted","default","defaultMuted"];if(e2&&e2.attributes&&0<e2.attributes.length){var r2=e2.attributes;for(let t2=r2.length-1;0<=t2;t2--){var n2=r2[t2].name;let e3=r2[t2].value;s2.includes(n2)&&(e3=null!==e3),i2[n2]=e3}}return i2}function Me(e2,t2){return e2.getAttribute(t2)}function Ue(e2,t2,i2){e2.setAttribute(t2,i2)}function Be(e2,t2){e2.removeAttribute(t2)}function Fe(){document.body.focus(),document.onselectstart=function(){return!1}}function qe(){document.onselectstart=function(){return!0}}function je(e2){if(e2&&e2.getBoundingClientRect&&e2.parentNode){let t2=e2.getBoundingClientRect(),i2={};return["bottom","height","left","right","top","width"].forEach(e3=>{void 0!==t2[e3]&&(i2[e3]=t2[e3])}),i2.height||(i2.height=parseFloat(Je(e2,"height"))),i2.width||(i2.width=parseFloat(Je(e2,"width"))),i2}}function Ve(e2){if(!e2||!e2.offsetParent)return{left:0,top:0,width:0,height:0};var t2=e2.offsetWidth,i2=e2.offsetHeight;let s2=0,r2=0;for(;e2.offsetParent&&e2!==document[q.fullscreenElement];)s2+=e2.offsetLeft,r2+=e2.offsetTop,e2=e2.offsetParent;return{left:s2,top:r2,width:t2,height:i2}}function He(t2,e2){var i2={x:0,y:0};if(u){let e3=t2;for(;e3&&"html"!==e3.nodeName.toLowerCase();){var s2,r2=Je(e3,"transform");/^matrix/.test(r2)?(s2=r2.slice(7,-1).split(/,\s/).map(Number),i2.x+=s2[4],i2.y+=s2[5]):/^matrix3d/.test(r2)&&(s2=r2.slice(9,-1).split(/,\s/).map(Number),i2.x+=s2[12],i2.y+=s2[13]),e3.assignedSlot&&e3.assignedSlot.parentElement&&window.WebKitCSSMatrix&&(r2=window.getComputedStyle(e3.assignedSlot.parentElement).transform,r2=new window.WebKitCSSMatrix(r2),i2.x+=r2.m41,i2.y+=r2.m42),e3=e3.parentNode||e3.host}}var n2={},a2=Ve(e2.target),o2=(t2=Ve(t2)).width,l2=t2.height;let d2=e2.offsetY-(t2.top-a2.top),h2=e2.offsetX-(t2.left-a2.left);return e2.changedTouches&&(h2=e2.changedTouches[0].pageX-t2.left,d2=e2.changedTouches[0].pageY+t2.top,u)&&(h2-=i2.x,d2-=i2.y),n2.y=1-Math.max(0,Math.min(1,d2/l2)),n2.x=Math.max(0,Math.min(1,h2/o2)),n2}function ze(e2){return Y(e2)&&3===e2.nodeType}function $e(e2){for(;e2.firstChild;)e2.removeChild(e2.firstChild);return e2}function We(e2){return"function"==typeof e2&&(e2=e2()),(Array.isArray(e2)?e2:[e2]).map(e3=>Ce(e3="function"==typeof e3?e3():e3)||ze(e3)?e3:"string"==typeof e3&&/\S/.test(e3)?document.createTextNode(e3):void 0).filter(e3=>e3)}function Ge(t2,e2){return We(e2).forEach(e3=>t2.appendChild(e3)),t2}function Xe(e2,t2){return Ge($e(e2),t2)}function Ke(e2){return void 0===e2.button&&void 0===e2.buttons||0===e2.button&&void 0===e2.buttons||"mouseup"===e2.type&&0===e2.button&&0===e2.buttons||"mousedown"===e2.type&&0===e2.button&&0===e2.buttons||0===e2.button&&1===e2.buttons}let Ye=Ie("querySelector"),Qe=Ie("querySelectorAll");function Je(t2,i2){if(!t2||!i2)return"";if("function"!=typeof window.getComputedStyle)return"";{let e2;try{e2=window.getComputedStyle(t2)}catch(e3){return""}return e2?e2.getPropertyValue(i2)||e2[i2]:""}}function Ze(s2){[...document.styleSheets].forEach(t2=>{try{var i2=[...t2.cssRules].map(e3=>e3.cssText).join(""),e2=document.createElement("style");e2.textContent=i2,s2.document.head.appendChild(e2)}catch(e3){(i2=document.createElement("link")).rel="stylesheet",i2.type=t2.type,i2.media=t2.media.mediaText,i2.href=t2.href,s2.document.head.appendChild(i2)}})}var et=Object.freeze({__proto__:null,isReal:Ee,isEl:Ce,isInFrame:ke,createEl:l,textContent:xe,prependTo:Ae,hasClass:De,addClass:Pe,removeClass:Le,toggleClass:Oe,setAttributes:Re,getAttributes:Ne,getAttribute:Me,setAttribute:Ue,removeAttribute:Be,blockTextSelection:Fe,unblockTextSelection:qe,getBoundingClientRect:je,findPosition:Ve,getPointerPosition:He,isTextNode:ze,emptyEl:$e,normalizeContent:We,appendContent:Ge,insertContent:Xe,isSingleLeftClick:Ke,$:Ye,$$:Qe,computedStyle:Je,copyStyleSheetsToWindow:Ze});function tt(){if(!1!==st.options.autoSetup){var e2=Array.prototype.slice.call(document.getElementsByTagName("video")),t2=Array.prototype.slice.call(document.getElementsByTagName("audio")),i2=Array.prototype.slice.call(document.getElementsByTagName("video-js")),s2=e2.concat(t2,i2);if(s2&&0<s2.length)for(let e3=0,t3=s2.length;e3<t3;e3++){var r2=s2[e3];if(!r2||!r2.getAttribute){rt(1);break}void 0===r2.player&&null!==r2.getAttribute("data-setup")&&st(r2)}else it||rt(1)}}let st,it=!1;function rt(e2,t2){Ee()&&(t2&&(st=t2),window.setTimeout(tt,e2))}function nt(){it=!0,window.removeEventListener("load",nt)}function at(e2){var t2=document.createElement("style");return t2.className=e2,t2}function ot(e2,t2){e2.styleSheet?e2.styleSheet.cssText=t2:e2.textContent=t2}Ee()&&("complete"===document.readyState?nt():window.addEventListener("load",nt));var h=new WeakMap;let lt=3;function dt(e2,t2){var i2;h.has(e2)&&(0===(i2=h.get(e2)).handlers[t2].length&&(delete i2.handlers[t2],e2.removeEventListener?e2.removeEventListener(t2,i2.dispatcher,!1):e2.detachEvent&&e2.detachEvent("on"+t2,i2.dispatcher)),Object.getOwnPropertyNames(i2.handlers).length<=0&&(delete i2.handlers,delete i2.dispatcher,delete i2.disabled),0===Object.getOwnPropertyNames(i2).length)&&h.delete(e2)}function ht(t2,i2,e2,s2){e2.forEach(function(e3){t2(i2,e3,s2)})}function ut(t2){if(!t2.fixed_){if(!t2||!t2.isPropagationStopped||!t2.isImmediatePropagationStopped){let e2=t2||window.event;t2={};var i2,s2,r2,n2=["layerX","layerY","keyLocation","path","webkitMovementX","webkitMovementY","mozPressure","mozInputSource"];for(i2 in e2)n2.includes(i2)||"returnValue"===i2&&e2.preventDefault||(t2[i2]=e2[i2]);t2.target||(t2.target=t2.srcElement||document),t2.relatedTarget||(t2.relatedTarget=t2.fromElement===t2.target?t2.toElement:t2.fromElement),t2.preventDefault=function(){e2.preventDefault&&e2.preventDefault(),t2.returnValue=!1,e2.returnValue=!1,t2.defaultPrevented=!0},t2.defaultPrevented=!1,t2.stopPropagation=function(){e2.stopPropagation&&e2.stopPropagation(),t2.cancelBubble=!0,e2.cancelBubble=!0,t2.isPropagationStopped=a2},t2.isPropagationStopped=o2,t2.stopImmediatePropagation=function(){e2.stopImmediatePropagation&&e2.stopImmediatePropagation(),t2.isImmediatePropagationStopped=a2,t2.stopPropagation()},t2.isImmediatePropagationStopped=o2,null!=t2.clientX&&(s2=document.documentElement,r2=document.body,t2.pageX=t2.clientX+(s2&&s2.scrollLeft||r2&&r2.scrollLeft||0)-(s2&&s2.clientLeft||r2&&r2.clientLeft||0),t2.pageY=t2.clientY+(s2&&s2.scrollTop||r2&&r2.scrollTop||0)-(s2&&s2.clientTop||r2&&r2.clientTop||0)),t2.which=t2.charCode||t2.keyCode,null!=t2.button&&(t2.button=1&t2.button?0:4&t2.button?1:2&t2.button?2:0)}t2.fixed_=!0}return t2;function a2(){return!0}function o2(){return!1}}let ct,pt=["touchstart","touchmove"];function mt(n2,t2,e2){if(Array.isArray(t2))return ht(mt,n2,t2,e2);h.has(n2)||h.set(n2,{});let a2=h.get(n2);if(a2.handlers||(a2.handlers={}),a2.handlers[t2]||(a2.handlers[t2]=[]),e2.guid||(e2.guid=lt++),a2.handlers[t2].push(e2),a2.dispatcher||(a2.disabled=!1,a2.dispatcher=function(i2,s2){if(!a2.disabled){i2=ut(i2);var e3=a2.handlers[i2.type];if(e3){var r2=e3.slice(0);for(let e4=0,t3=r2.length;e4<t3&&!i2.isImmediatePropagationStopped();e4++)try{r2[e4].call(n2,i2,s2)}catch(e5){o.error(e5)}}}}),1===a2.handlers[t2].length)if(n2.addEventListener){let e3=!1;(function(){if("boolean"!=typeof ct){ct=!1;try{var e4=Object.defineProperty({},"passive",{get(){ct=!0}});window.addEventListener("test",null,e4),window.removeEventListener("test",null,e4)}catch(e5){}}return ct})()&&-1<pt.indexOf(t2)&&(e3={passive:!0}),n2.addEventListener(t2,a2.dispatcher,e3)}else n2.attachEvent&&n2.attachEvent("on"+t2,a2.dispatcher)}function c(e2,t2,s2){if(h.has(e2)){let i2=h.get(e2);if(i2.handlers){if(Array.isArray(t2))return ht(c,e2,t2,s2);var r2=function(e3,t3){i2.handlers[t3]=[],dt(e3,t3)};if(void 0===t2)for(var n2 in i2.handlers)Object.prototype.hasOwnProperty.call(i2.handlers||{},n2)&&r2(e2,n2);else{var a2=i2.handlers[t2];if(a2)if(s2){if(s2.guid)for(let e3=0;e3<a2.length;e3++)a2[e3].guid===s2.guid&&a2.splice(e3--,1);dt(e2,t2)}else r2(e2,t2)}}}}function gt(e2,t2,i2){var s2=h.has(e2)?h.get(e2):{},r2=e2.parentNode||e2.ownerDocument;return"string"==typeof t2?t2={type:t2,target:e2}:t2.target||(t2.target=e2),t2=ut(t2),s2.dispatcher&&s2.dispatcher.call(e2,t2,i2),r2&&!t2.isPropagationStopped()&&!0===t2.bubbles?gt.call(null,r2,t2,i2):!r2&&!t2.defaultPrevented&&t2.target&&t2.target[t2.type]&&(h.has(t2.target)||h.set(t2.target,{}),s2=h.get(t2.target),t2.target[t2.type])&&(s2.disabled=!0,"function"==typeof t2.target[t2.type]&&t2.target[t2.type](),s2.disabled=!1),!t2.defaultPrevented}function ft(e2,t2,i2){if(Array.isArray(t2))return ht(ft,e2,t2,i2);function s2(){c(e2,t2,s2),i2.apply(this,arguments)}s2.guid=i2.guid=i2.guid||lt++,mt(e2,t2,s2)}function yt(e2,t2,i2){function s2(){c(e2,t2,s2),i2.apply(this,arguments)}s2.guid=i2.guid=i2.guid||lt++,mt(e2,t2,s2)}var _t=Object.freeze({__proto__:null,fixEvent:ut,on:mt,off:c,trigger:gt,one:ft,any:yt});function p(e2,t2,i2){return t2.guid||(t2.guid=lt++),(e2=t2.bind(e2)).guid=i2?i2+"_"+t2.guid:t2.guid,e2}function vt(i2,s2){let r2=window.performance.now();return function(...e2){var t2=window.performance.now();t2-r2>=s2&&(i2(...e2),r2=t2)}}function bt(s2,r2,n2,a2=window){let o2;function e2(){let e3=this,t2=arguments,i2=function(){o2=null,i2=null,n2||s2.apply(e3,t2)};!o2&&n2&&s2.apply(e3,t2),a2.clearTimeout(o2),o2=a2.setTimeout(i2,r2)}return e2.cancel=()=>{a2.clearTimeout(o2),o2=null},e2}let St,Tt=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:30,bind_:p,throttle:vt,debounce:bt});class wt{on(e2,t2){var i2=this.addEventListener;this.addEventListener=()=>{},mt(this,e2,t2),this.addEventListener=i2}off(e2,t2){c(this,e2,t2)}one(e2,t2){var i2=this.addEventListener;this.addEventListener=()=>{},ft(this,e2,t2),this.addEventListener=i2}any(e2,t2){var i2=this.addEventListener;this.addEventListener=()=>{},yt(this,e2,t2),this.addEventListener=i2}trigger(e2){var t2=e2.type||e2;e2=ut(e2="string"==typeof e2?{type:t2}:e2),this.allowedEvents_[t2]&&this["on"+t2]&&this["on"+t2](e2),gt(this,e2)}queueTrigger(e2){St=St||new Map;let t2=e2.type||e2,i2=St.get(this);i2||(i2=new Map,St.set(this,i2));var s2=i2.get(t2);i2.delete(t2),window.clearTimeout(s2),s2=window.setTimeout(()=>{i2.delete(t2),0===i2.size&&(i2=null,St.delete(this)),this.trigger(e2)},0);i2.set(t2,s2)}}wt.prototype.allowedEvents_={},wt.prototype.addEventListener=wt.prototype.on,wt.prototype.removeEventListener=wt.prototype.off,wt.prototype.dispatchEvent=wt.prototype.trigger;let Et=e2=>"function"==typeof e2.name?e2.name():"string"==typeof e2.name?e2.name:e2.name_||(e2.constructor&&e2.constructor.name?e2.constructor.name:typeof e2),Ct=t2=>t2 instanceof wt||!!t2.eventBusEl_&&["on","one","off","trigger"].every(e2=>"function"==typeof t2[e2]),kt=e2=>"string"==typeof e2&&/\S/.test(e2)||Array.isArray(e2)&&!!e2.length,It=(e2,t2,i2)=>{if(!e2||!e2.nodeName&&!Ct(e2))throw new Error(`Invalid target for ${Et(t2)}#${i2}; must be a DOM node or evented object.`)},xt=(e2,t2,i2)=>{if(!kt(e2))throw new Error(`Invalid event type for ${Et(t2)}#${i2}; must be a non-empty string or array.`)},At=(e2,t2,i2)=>{if("function"!=typeof e2)throw new Error(`Invalid listener for ${Et(t2)}#${i2}; must be a function.`)},Dt=(e2,t2,i2)=>{var s2=t2.length<3||t2[0]===e2||t2[0]===e2.eventBusEl_;let r2,n2,a2;return s2?(r2=e2.eventBusEl_,3<=t2.length&&t2.shift(),[n2,a2]=t2):(r2=t2[0],n2=t2[1],a2=t2[2]),It(r2,e2,i2),xt(n2,e2,i2),At(a2,e2,i2),a2=p(e2,a2),{isTargetingSelf:s2,target:r2,type:n2,listener:a2}},Pt=(e2,t2,i2,s2)=>{It(e2,e2,t2),e2.nodeName?_t[t2](e2,i2,s2):e2[t2](i2,s2)},Lt={on(...t2){let{isTargetingSelf:e2,target:i2,type:s2,listener:r2}=Dt(this,t2,"on");if(Pt(i2,"on",s2,r2),!e2){let e3=()=>this.off(i2,s2,r2);e3.guid=r2.guid,(t2=()=>this.off("dispose",e3)).guid=r2.guid,Pt(this,"on","dispose",e3),Pt(i2,"on","dispose",t2)}},one(...e2){let{isTargetingSelf:t2,target:i2,type:s2,listener:r2}=Dt(this,e2,"one");if(t2)Pt(i2,"one",s2,r2);else{let t3=(...e3)=>{this.off(i2,s2,t3),r2.apply(null,e3)};t3.guid=r2.guid,Pt(i2,"one",s2,t3)}},any(...e2){let{isTargetingSelf:t2,target:i2,type:s2,listener:r2}=Dt(this,e2,"any");if(t2)Pt(i2,"any",s2,r2);else{let t3=(...e3)=>{this.off(i2,s2,t3),r2.apply(null,e3)};t3.guid=r2.guid,Pt(i2,"any",s2,t3)}},off(e2,t2,i2){!e2||kt(e2)?c(this.eventBusEl_,e2,t2):(It(e2,this,"off"),xt(t2,this,"off"),At(i2,this,"off"),i2=p(this,i2),this.off("dispose",i2),e2.nodeName?(c(e2,t2,i2),c(e2,"dispose",i2)):Ct(e2)&&(e2.off(t2,i2),e2.off("dispose",i2)))},trigger(e2,t2){It(this.eventBusEl_,this,"trigger");var i2=e2&&"string"!=typeof e2?e2.type:e2;if(kt(i2))return gt(this.eventBusEl_,e2,t2);throw new Error(`Invalid event type for ${Et(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`)}};function Ot(e2,t2={}){if(t2=t2.eventBusKey){if(!e2[t2].nodeName)throw new Error(`The eventBusKey "${t2}" does not refer to an element.`);e2.eventBusEl_=e2[t2]}else e2.eventBusEl_=l("span",{className:"vjs-event-bus"});Object.assign(e2,Lt),e2.eventedCallbacks&&e2.eventedCallbacks.forEach(e3=>{e3()}),e2.on("dispose",()=>{e2.off(),[e2,e2.el_,e2.eventBusEl_].forEach(function(e3){e3&&h.has(e3)&&h.delete(e3)}),window.setTimeout(()=>{e2.eventBusEl_=null},0)})}let Rt={state:{},setState(e2){let i2;return"function"==typeof e2&&(e2=e2()),X(e2,(e3,t2)=>{this.state[t2]!==e3&&((i2=i2||{})[t2]={from:this.state[t2],to:e3}),this.state[t2]=e3}),i2&&Ct(this)&&this.trigger({changes:i2,type:"statechanged"}),i2}};function Nt(e2,t2){Object.assign(e2,Rt),e2.state=Object.assign({},e2.state,t2),"function"==typeof e2.handleStateChanged&&Ct(e2)&&e2.on("statechanged",e2.handleStateChanged)}function Mt(e2){return"string"!=typeof e2?e2:e2.replace(/./,e3=>e3.toLowerCase())}function m(e2){return"string"!=typeof e2?e2:e2.replace(/./,e3=>e3.toUpperCase())}function Ut(e2,t2){return m(e2)===m(t2)}let Bt=Object.freeze({__proto__:null,toLowerCase:Mt,toTitleCase:m,titleCaseEquals:Ut});class g{constructor(e2,t2,i2){!e2&&this.play?this.player_=e2=this:this.player_=e2,this.isDisposed_=!1,this.parentComponent_=null,this.options_=d({},this.options_),t2=this.options_=d(this.options_,t2),this.id_=t2.id||t2.el&&t2.el.id,this.id_||(e2=e2&&e2.id&&e2.id()||"no_player",this.id_=e2+"_component_"+lt++),this.name_=t2.name||null,t2.el?this.el_=t2.el:!1!==t2.createEl&&(this.el_=this.createEl()),t2.className&&this.el_&&t2.className.split(" ").forEach(e3=>this.addClass(e3)),["on","off","one","any","trigger"].forEach(e3=>{this[e3]=void 0}),!1!==t2.evented&&(Ot(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),Nt(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,(this.clearingTimersOnDispose_=!1)!==t2.initChildren&&this.initChildren(),this.ready(i2),!1!==t2.reportTouchActivity&&this.enableTouchActivity()}dispose(e2={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let e3=this.children_.length-1;0<=e3;e3--)this.children_[e3].dispose&&this.children_[e3].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e2.restoreEl?this.el_.parentNode.replaceChild(e2.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return Boolean(this.isDisposed_)}player(){return this.player_}options(e2){return e2&&(this.options_=d(this.options_,e2)),this.options_}el(){return this.el_}createEl(e2,t2,i2){return l(e2,t2,i2)}localize(e2,s2,t2=e2){var i2=this.player_.language&&this.player_.language(),n2=(r2=this.player_.languages&&this.player_.languages())&&r2[i2],r2=(i2=i2&&i2.split("-")[0],r2&&r2[i2]);let a2=t2;return n2&&n2[e2]?a2=n2[e2]:r2&&r2[e2]&&(a2=r2[e2]),s2?a2.replace(/\{(\d+)\}/g,function(e3,t3){return void 0===(t3=s2[t3-1])?e3:t3}):a2}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(e2){return this.childIndex_[e2]}getChild(e2){if(e2)return this.childNameIndex_[e2]}getDescendant(...t2){t2=t2.reduce((e2,t3)=>e2.concat(t3),[]);let i2=this;for(let e2=0;e2<t2.length;e2++)if(!(i2=i2.getChild(t2[e2]))||!i2.getChild)return;return i2}setIcon(e2,t2=this.el()){var i2,s2,r2;if(this.player_.options_.experimentalSvgIcons)return r2="http://www.w3.org/2000/svg",i2=l("span",{className:"vjs-icon-placeholder vjs-svg-icon"},{"aria-hidden":"true"}),(s2=document.createElementNS(r2,"svg")).setAttributeNS(null,"viewBox","0 0 512 512"),r2=document.createElementNS(r2,"use"),s2.appendChild(r2),r2.setAttributeNS(null,"href","#vjs-icon-"+e2),i2.appendChild(s2),this.iconIsSet_?t2.replaceChild(i2,t2.querySelector(".vjs-icon-placeholder")):t2.appendChild(i2),this.iconIsSet_=!0,i2}addChild(e2,t2={},i2=this.children_.length){let s2,r2;if("string"==typeof e2){r2=m(e2);var n2=t2.componentClass||r2,a2=(t2.name=r2,g.getComponent(n2));if(!a2)throw new Error(`Component ${n2} does not exist`);if("function"!=typeof a2)return null;s2=new a2(this.player_||this,t2)}else s2=e2;if(s2.parentComponent_&&s2.parentComponent_.removeChild(s2),this.children_.splice(i2,0,s2),s2.parentComponent_=this,"function"==typeof s2.id&&(this.childIndex_[s2.id()]=s2),(r2=r2||s2.name&&m(s2.name()))&&(this.childNameIndex_[r2]=s2,this.childNameIndex_[Mt(r2)]=s2),"function"==typeof s2.el&&s2.el()){let e3=null;this.children_[i2+1]&&(this.children_[i2+1].el_?e3=this.children_[i2+1].el_:Ce(this.children_[i2+1])&&(e3=this.children_[i2+1])),this.contentEl().insertBefore(s2.el(),e3)}return s2}removeChild(i2){if((i2="string"==typeof i2?this.getChild(i2):i2)&&this.children_){let t2=!1;for(let e3=this.children_.length-1;0<=e3;e3--)if(this.children_[e3]===i2){t2=!0,this.children_.splice(e3,1);break}var e2;t2&&(i2.parentComponent_=null,this.childIndex_[i2.id()]=null,this.childNameIndex_[m(i2.name())]=null,this.childNameIndex_[Mt(i2.name())]=null,e2=i2.el())&&e2.parentNode===this.contentEl()&&this.contentEl().removeChild(i2.el())}}initChildren(){let r2=this.options_.children;if(r2){let e2,s2=this.options_,t2=g.getComponent("Tech");(e2=Array.isArray(r2)?r2:Object.keys(r2)).concat(Object.keys(this.options_).filter(function(t3){return!e2.some(function(e3){return"string"==typeof e3?t3===e3:t3===e3.name})})).map(e3=>{let t3,i2;return i2="string"==typeof e3?(t3=e3,r2[t3]||this.options_[t3]||{}):(t3=e3.name,e3),{name:t3,opts:i2}}).filter(e3=>(e3=g.getComponent(e3.opts.componentClass||m(e3.name)))&&!t2.isTech(e3)).forEach(e3=>{var t3=e3.name;let i2=e3.opts;!1!==(i2=void 0!==s2[t3]?s2[t3]:i2)&&((i2=!0===i2?{}:i2).playerOptions=this.options_.playerOptions,e3=this.addChild(t3,i2))&&(this[t3]=e3)})}}buildCSSClass(){return""}ready(e2,t2=!1){e2&&(this.isReady_?t2?e2.call(this):this.setTimeout(e2,1):(this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(e2)))}triggerReady(){this.isReady_=!0,this.setTimeout(function(){var e2=this.readyQueue_;this.readyQueue_=[],e2&&0<e2.length&&e2.forEach(function(e3){e3.call(this)},this),this.trigger("ready")},1)}$(e2,t2){return Ye(e2,t2||this.contentEl())}$$(e2,t2){return Qe(e2,t2||this.contentEl())}hasClass(e2){return De(this.el_,e2)}addClass(...e2){Pe(this.el_,...e2)}removeClass(...e2){Le(this.el_,...e2)}toggleClass(e2,t2){Oe(this.el_,e2,t2)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(e2){return Me(this.el_,e2)}setAttribute(e2,t2){Ue(this.el_,e2,t2)}removeAttribute(e2){Be(this.el_,e2)}width(e2,t2){return this.dimension("width",e2,t2)}height(e2,t2){return this.dimension("height",e2,t2)}dimensions(e2,t2){this.width(e2,!0),this.height(t2)}dimension(e2,t2,i2){var s2,r2;if(void 0===t2)return this.el_?-1!==(r2=(s2=this.el_.style[e2]).indexOf("px"))?parseInt(s2.slice(0,r2),10):parseInt(this.el_["offset"+m(e2)],10):0;-1!==(""+(t2=null!==t2&&t2==t2?t2:0)).indexOf("%")||-1!==(""+t2).indexOf("px")?this.el_.style[e2]=t2:this.el_.style[e2]="auto"===t2?"":t2+"px",i2||this.trigger("componentresize")}currentDimension(e2){let t2=0;if("width"!==e2&&"height"!==e2)throw new Error("currentDimension only accepts width or height value");return t2=Je(this.el_,e2),0!==(t2=parseFloat(t2))&&!isNaN(t2)||(e2="offset"+m(e2),t2=this.el_[e2]),t2}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}getPositions(){var e2=this.el_.getBoundingClientRect();return{boundingClientRect:{x:e2.x,y:e2.y,width:e2.width,height:e2.height,top:e2.top,right:e2.right,bottom:e2.bottom,left:e2.left},center:{x:e2.left+e2.width/2,y:e2.top+e2.height/2,width:0,height:0,top:e2.top+e2.height/2,right:e2.left+e2.width/2,bottom:e2.top+e2.height/2,left:e2.left+e2.width/2}}}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(e2){this.player_&&("Tab"===e2.key||this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled||e2.stopPropagation(),this.player_.handleKeyDown(e2))}handleKeyPress(e2){this.handleKeyDown(e2)}emitTapEvents(){let s2,t2=0,i2=null;function e2(){s2=!1}this.on("touchstart",function(e3){1===e3.touches.length&&(i2={pageX:e3.touches[0].pageX,pageY:e3.touches[0].pageY},t2=window.performance.now(),s2=!0)}),this.on("touchmove",function(e3){var t3;(1<e3.touches.length||i2&&(t3=e3.touches[0].pageX-i2.pageX,e3=e3.touches[0].pageY-i2.pageY,10<Math.sqrt(t3*t3+e3*e3)))&&(s2=!1)}),this.on("touchleave",e2),this.on("touchcancel",e2),this.on("touchend",function(e3){!(i2=null)===s2&&window.performance.now()-t2<200&&(e3.preventDefault(),this.trigger("tap"))})}enableTouchActivity(){if(this.player()&&this.player().reportUserActivity){let i2,t2=p(this.player(),this.player().reportUserActivity);this.on("touchstart",function(){t2(),this.clearInterval(i2),i2=this.setInterval(t2,250)});var e2=function(e3){t2(),this.clearInterval(i2)};this.on("touchmove",t2),this.on("touchend",e2),this.on("touchcancel",e2)}}setTimeout(e2,t2){var i2;return e2=p(this,e2),this.clearTimersOnDispose_(),i2=window.setTimeout(()=>{this.setTimeoutIds_.has(i2)&&this.setTimeoutIds_.delete(i2),e2()},t2),this.setTimeoutIds_.add(i2),i2}clearTimeout(e2){return this.setTimeoutIds_.has(e2)&&(this.setTimeoutIds_.delete(e2),window.clearTimeout(e2)),e2}setInterval(e2,t2){return e2=p(this,e2),this.clearTimersOnDispose_(),e2=window.setInterval(e2,t2),this.setIntervalIds_.add(e2),e2}clearInterval(e2){return this.setIntervalIds_.has(e2)&&(this.setIntervalIds_.delete(e2),window.clearInterval(e2)),e2}requestAnimationFrame(e2){var t2;return this.clearTimersOnDispose_(),e2=p(this,e2),t2=window.requestAnimationFrame(()=>{this.rafIds_.has(t2)&&this.rafIds_.delete(t2),e2()}),this.rafIds_.add(t2),t2}requestNamedAnimationFrame(e2,t2){this.namedRafs_.has(e2)&&this.cancelNamedAnimationFrame(e2),this.clearTimersOnDispose_(),t2=p(this,t2);var i2=this.requestAnimationFrame(()=>{t2(),this.namedRafs_.has(e2)&&this.namedRafs_.delete(e2)});return this.namedRafs_.set(e2,i2),e2}cancelNamedAnimationFrame(e2){this.namedRafs_.has(e2)&&(this.cancelAnimationFrame(this.namedRafs_.get(e2)),this.namedRafs_.delete(e2))}cancelAnimationFrame(e2){return this.rafIds_.has(e2)&&(this.rafIds_.delete(e2),window.cancelAnimationFrame(e2)),e2}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(([e2,i2])=>{this[e2].forEach((e3,t2)=>this[i2](t2))}),this.clearingTimersOnDispose_=!1}))}getIsDisabled(){return Boolean(this.el_.disabled)}getIsExpresslyInert(){return this.el_.inert&&!this.el_.ownerDocument.documentElement.inert}getIsFocusable(e2){return 0<=(e2||this.el_).tabIndex&&!(this.getIsDisabled()||this.getIsExpresslyInert())}getIsAvailableToBeFocused(e2){function t2(e3){var t3=(e3=window.getComputedStyle(e3,null)).getPropertyValue("visibility");return"none"!==e3.getPropertyValue("display")&&!["hidden","collapse"].includes(t3)}var i2;return!(!function(t3){if(t3.offsetWidth+t3.offsetHeight+t3.getBoundingClientRect().height+t3.getBoundingClientRect().width!==0){var i3={x:t3.getBoundingClientRect().left+t3.offsetWidth/2,y:t3.getBoundingClientRect().top+t3.offsetHeight/2};if(!(i3.x<0||i3.x>(document.documentElement.clientWidth||window.innerWidth)||i3.y<0||i3.y>(document.documentElement.clientHeight||window.innerHeight))){let e3=document.elementFromPoint(i3.x,i3.y);for(;e3;){if(e3===t3)return 1;if(!e3.parentNode)return;e3=e3.parentNode}}}}(e2=e2||this.el())||!t2((i2=e2).parentElement)||!t2(i2)||"0"===i2.style.opacity||"0px"===window.getComputedStyle(i2).height||"0px"===window.getComputedStyle(i2).width||e2.parentElement&&!(0<=e2.tabIndex))}static registerComponent(t2,e2){if("string"!=typeof t2||!t2)throw new Error(`Illegal component name, "${t2}"; must be a non-empty string.`);var i2=(i2=g.getComponent("Tech"))&&i2.isTech(e2),s2=g===e2||g.prototype.isPrototypeOf(e2.prototype);if(i2||!s2){let e3;throw e3=i2?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error(`Illegal component, "${t2}"; ${e3}.`)}if(t2=m(t2),g.components_||(g.components_={}),s2=g.getComponent("Player"),"Player"===t2&&s2&&s2.players){var r2=s2.players,n2=Object.keys(r2);if(r2&&0<n2.length)for(let e3=0;e3<n2.length;e3++)if(null!==r2[n2[e3]])throw new Error("Can not register Player component after player has been created.")}return g.components_[t2]=e2,g.components_[Mt(t2)]=e2}static getComponent(e2){if(e2&&g.components_)return g.components_[e2]}}function Ft(e2,t2,i2,s2){var r2=s2,n2=i2.length-1;if("number"!=typeof r2||r2<0||n2<r2)throw new Error(`Failed to execute '${e2}' on 'TimeRanges': The index provided (${r2}) is non-numeric or out of bounds (0-${n2}).`);return i2[s2][t2]}function qt(e2){let t2;return t2=void 0===e2||0===e2.length?{length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:{length:e2.length,start:Ft.bind(null,"start",0,e2),end:Ft.bind(null,"end",1,e2)},window.Symbol&&window.Symbol.iterator&&(t2[window.Symbol.iterator]=()=>(e2||[]).values()),t2}function jt(e2,t2){return Array.isArray(e2)?qt(e2):void 0===e2||void 0===t2?qt():qt([[e2,t2]])}function Vt(e2,t2){e2=e2<0?0:e2;let i2=Math.floor(e2%60),s2=Math.floor(e2/60%60),r2=Math.floor(e2/3600);var n2=Math.floor(t2/60%60);t2=Math.floor(t2/3600);return r2=0<(r2=isNaN(e2)||e2===1/0?s2=i2="-":r2)||0<t2?r2+":":"",s2=((r2||10<=n2)&&s2<10?"0"+s2:s2)+":",i2=i2<10?"0"+i2:i2,r2+s2+i2}g.registerComponent("Component",g);let Ht=Vt;function zt(e2){Ht=e2}function $t(){Ht=Vt}function Wt(e2,t2=e2){return Ht(e2,t2)}function Gt(t2,i2){let s2=0;var r2;let n2;if(!i2)return 0;t2&&t2.length||(t2=jt(0,0));for(let e2=0;e2<t2.length;e2++)r2=t2.start(e2),(n2=t2.end(e2))>i2&&(n2=i2),s2+=n2-r2;return s2/i2}function i(e2){if(e2 instanceof i)return e2;"number"==typeof e2?this.code=e2:"string"==typeof e2?this.message=e2:Y(e2)&&("number"==typeof e2.code&&(this.code=e2.code),Object.assign(this,e2)),this.message||(this.message=i.defaultMessages[this.code]||"")}function Xt(e2){return null!=e2&&"function"==typeof e2.then}function Kt(e2){Xt(e2)&&e2.then(null,e3=>{})}function Yt(s2){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((e2,t2,i2)=>(s2[t2]&&(e2[t2]=s2[t2]),e2),{cues:s2.cues&&Array.prototype.map.call(s2.cues,function(e2){return{startTime:e2.startTime,endTime:e2.endTime,text:e2.text,id:e2.id}})})}t=Object.freeze({__proto__:null,createTimeRanges:jt,createTimeRange:jt,setFormatTime:zt,resetFormatTime:$t,formatTime:Wt}),i.prototype.code=0,i.prototype.message="",i.prototype.status=null,i.prototype.metadata=null,i.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],i.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."},i.MEDIA_ERR_CUSTOM=0,i.prototype.MEDIA_ERR_CUSTOM=0,i.MEDIA_ERR_ABORTED=1,i.prototype.MEDIA_ERR_ABORTED=1,i.MEDIA_ERR_NETWORK=2,i.prototype.MEDIA_ERR_NETWORK=2,i.MEDIA_ERR_DECODE=3,i.prototype.MEDIA_ERR_DECODE=3,i.MEDIA_ERR_SRC_NOT_SUPPORTED=4,i.prototype.MEDIA_ERR_SRC_NOT_SUPPORTED=4,i.MEDIA_ERR_ENCRYPTED=5,i.prototype.MEDIA_ERR_ENCRYPTED=5;var Qt,ei=Yt;let ti="vjs-modal-dialog";class ii extends g{constructor(e2,t2){super(e2,t2),this.handleKeyDown_=e3=>this.handleKeyDown(e3),this.close_=e3=>this.close(e3),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=l("div",{className:ti+"-content"},{role:"document"}),this.descEl_=l("p",{className:ti+"-description vjs-control-text",id:this.el().getAttribute("aria-describedby")}),xe(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog","aria-live":"polite"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return ti+" vjs-hidden "+super.buildCSSClass()}label(){return this.localize(this.options_.label||"Modal Window")}description(){let e2=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e2+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e2}open(){var e2;this.opened_?this.options_.fillAlways&&this.fill():(e2=this.player(),this.trigger("beforemodalopen"),this.opened_=!0,!this.options_.fillAlways&&(this.hasBeenOpened_||this.hasBeenFilled_)||this.fill(),this.wasPlaying_=!e2.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e2.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e2.controls(),e2.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0)}opened(e2){return"boolean"==typeof e2&&this[e2?"open":"close"](),this.opened_}close(){var e2;this.opened_&&(e2=this.player(),this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e2.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e2.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger({type:"modalclose",bubbles:!0}),this.conditionalBlur_(),this.options_.temporary)&&this.dispose()}closeable(t2){if("boolean"==typeof t2){var i2;t2=this.closeable_=!!t2;let e2=this.getChild("closeButton");t2&&!e2&&(i2=this.contentEl_,this.contentEl_=this.el_,e2=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=i2,this.on(e2,"close",this.close_)),!t2&&e2&&(this.off(e2,"close",this.close_),this.removeChild(e2),e2.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(e2){var t2=this.contentEl(),i2=t2.parentNode,s2=t2.nextSibling;(e2=(this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,i2.removeChild(t2),this.empty(),Xe(t2,e2),this.trigger("modalfill"),s2?i2.insertBefore(t2,s2):i2.appendChild(t2),this.getChild("closeButton")))&&i2.appendChild(e2.el_),this.trigger("aftermodalfill")}empty(){this.trigger("beforemodalempty"),$e(this.contentEl()),this.trigger("modalempty")}content(e2){return void 0!==e2&&(this.content_=e2),this.content_}conditionalFocus_(){var e2=document.activeElement,t2=this.player_.el_;this.previouslyActiveEl_=null,!t2.contains(e2)&&t2!==e2||(this.previouslyActiveEl_=e2,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(e2){if(this.trigger({type:"modalKeydown",originalEvent:e2,target:this,bubbles:!0}),e2.stopPropagation(),"Escape"===e2.key&&this.closeable())e2.preventDefault(),this.close();else if("Tab"===e2.key){var i2=this.focusableEls_(),s2=this.el_.querySelector(":focus");let t2;for(let e3=0;e3<i2.length;e3++)if(s2===i2[e3]){t2=e3;break}document.activeElement===this.el_&&(t2=0),e2.shiftKey&&0===t2?(i2[i2.length-1].focus(),e2.preventDefault()):e2.shiftKey||t2!==i2.length-1||(i2[0].focus(),e2.preventDefault())}}focusableEls_(){var e2=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e2,e3=>(e3 instanceof window.HTMLAnchorElement||e3 instanceof window.HTMLAreaElement)&&e3.hasAttribute("href")||(e3 instanceof window.HTMLInputElement||e3 instanceof window.HTMLSelectElement||e3 instanceof window.HTMLTextAreaElement||e3 instanceof window.HTMLButtonElement)&&!e3.hasAttribute("disabled")||e3 instanceof window.HTMLIFrameElement||e3 instanceof window.HTMLObjectElement||e3 instanceof window.HTMLEmbedElement||e3.hasAttribute("tabindex")&&-1!==e3.getAttribute("tabindex")||e3.hasAttribute("contenteditable"))}}ii.prototype.options_={pauseOnOpen:!0,temporary:!0},g.registerComponent("ModalDialog",ii);class si extends wt{constructor(t2=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let e2=0;e2<t2.length;e2++)this.addTrack(t2[e2])}addTrack(e2){let t2=this.tracks_.length;""+t2 in this||Object.defineProperty(this,t2,{get(){return this.tracks_[t2]}}),-1===this.tracks_.indexOf(e2)&&(this.tracks_.push(e2),this.trigger({track:e2,type:"addtrack",target:this})),e2.labelchange_=()=>{this.trigger({track:e2,type:"labelchange",target:this})},Ct(e2)&&e2.addEventListener("labelchange",e2.labelchange_)}removeTrack(i2){let s2;for(let e2=0,t2=this.length;e2<t2;e2++)if(this[e2]===i2){(s2=this[e2]).off&&s2.off(),this.tracks_.splice(e2,1);break}s2&&this.trigger({track:s2,type:"removetrack",target:this})}getTrackById(i2){let s2=null;for(let e2=0,t2=this.length;e2<t2;e2++){var r2=this[e2];if(r2.id===i2){s2=r2;break}}return s2}}for(Qt in si.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"})si.prototype["on"+Qt]=null;function ri(t2,i2){for(let e2=0;e2<t2.length;e2++)Object.keys(t2[e2]).length&&i2.id!==t2[e2].id&&(t2[e2].enabled=!1)}class ni extends si{constructor(t2=[]){for(let e2=t2.length-1;0<=e2;e2--)if(t2[e2].enabled){ri(t2,t2[e2]);break}super(t2),this.changing_=!1}addTrack(e2){e2.enabled&&ri(this,e2),super.addTrack(e2),e2.addEventListener&&(e2.enabledChange_=()=>{this.changing_||(this.changing_=!0,ri(this,e2),this.changing_=!1,this.trigger("change"))},e2.addEventListener("enabledchange",e2.enabledChange_))}removeTrack(e2){super.removeTrack(e2),e2.removeEventListener&&e2.enabledChange_&&(e2.removeEventListener("enabledchange",e2.enabledChange_),e2.enabledChange_=null)}}function ai(t2,i2){for(let e2=0;e2<t2.length;e2++)Object.keys(t2[e2]).length&&i2.id!==t2[e2].id&&(t2[e2].selected=!1)}class oi extends si{constructor(t2=[]){for(let e2=t2.length-1;0<=e2;e2--)if(t2[e2].selected){ai(t2,t2[e2]);break}super(t2),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let e2=0;e2<this.length;e2++)if(this[e2].selected)return e2;return-1},set(){}})}addTrack(e2){e2.selected&&ai(this,e2),super.addTrack(e2),e2.addEventListener&&(e2.selectedChange_=()=>{this.changing_||(this.changing_=!0,ai(this,e2),this.changing_=!1,this.trigger("change"))},e2.addEventListener("selectedchange",e2.selectedChange_))}removeTrack(e2){super.removeTrack(e2),e2.removeEventListener&&e2.selectedChange_&&(e2.removeEventListener("selectedchange",e2.selectedChange_),e2.selectedChange_=null)}}class li extends si{addTrack(e2){super.addTrack(e2),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),e2.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(e2.kind)&&e2.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(e2){super.removeTrack(e2),e2.removeEventListener&&(this.queueChange_&&e2.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_)&&e2.removeEventListener("modechange",this.triggerSelectedlanguagechange_)}toJSON(){return this.tracks_.map(e2=>e2.toJSON())}}class di{constructor(e2){di.prototype.setCues_.call(this,e2),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(e2){var t2=this.length||0;let i2=0;function s2(e3){""+e3 in this||Object.defineProperty(this,""+e3,{get(){return this.cues_[e3]}})}var r2=e2.length;if(this.cues_=e2,this.length_=e2.length,t2<r2)for(i2=t2;i2<r2;i2++)s2.call(this,i2)}getCueById(i2){let s2=null;for(let e2=0,t2=this.length;e2<t2;e2++){var r2=this[e2];if(r2.id===i2){s2=r2;break}}return s2}}let hi={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},ui={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},ci={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},pi={disabled:"disabled",hidden:"hidden",showing:"showing"};class mi extends wt{constructor(e2={}){super();let t2={id:e2.id||"vjs_track_"+lt++,kind:e2.kind||"",language:e2.language||""},i2=e2.label||"";for(let e3 in t2)Object.defineProperty(this,e3,{get:()=>t2[e3],set(){}});Object.defineProperty(this,"label",{get:()=>i2,set(e3){e3!==i2&&(i2=e3,this.trigger("labelchange"))}})}}function gi(e2){return new URL(e2,document.baseURI)}function fi(e2){return new URL(e2,document.baseURI).href}function yi(e2,t2=window.location){return gi(e2).origin!==t2.origin}let _i=function(e2){return"string"==typeof e2&&(e2=e2.split("?")[0].replace(/\/+$/,"").match(/\.([^.\/]+)$/))?e2[1].toLowerCase():""},vi=Object.freeze({__proto__:null,parseUrl:gi,getAbsoluteURL:fi,getFileExtension:_i,isCrossOrigin:yi});var bi="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Ti(e2,t2){return e2(t2={exports:{}},t2.exports),t2.exports}var Si="undefined"!=typeof window?window:void 0!==bi?bi:"undefined"!=typeof self?self:{},wi=Ti(function(e2){function t2(){return e2.exports=t2=Object.assign?Object.assign.bind():function(e3){for(var t3=1;t3<arguments.length;t3++){var i2,s2=arguments[t3];for(i2 in s2)!{}.hasOwnProperty.call(s2,i2)||(e3[i2]=s2[i2])}return e3},e2.exports.__esModule=!0,e2.exports.default=e2.exports,t2.apply(null,arguments)}e2.exports=t2,e2.exports.__esModule=!0,e2.exports.default=e2.exports}),f=(e=wi)&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,Ci=Object.prototype.toString;function Ii(e2,t2){(null==t2||t2>e2.length)&&(t2=e2.length);for(var i2=0,s2=new Array(t2);i2<t2;i2++)s2[i2]=e2[i2];return s2}e=function(){function e2(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1}var t2=e2.prototype;return t2.getIsEnabled=function(){return this.enabled_},t2.enable=function(){this.enabled_=!0},t2.disable=function(){this.enabled_=!1},t2.reset=function(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1},t2.addInterceptor=function(e3,t3){return this.typeToInterceptorsMap_.has(e3)||this.typeToInterceptorsMap_.set(e3,new Set),!(e3=this.typeToInterceptorsMap_.get(e3)).has(t3)&&(e3.add(t3),!0)},t2.removeInterceptor=function(e3,t3){return!(!(e3=this.typeToInterceptorsMap_.get(e3))||!e3.has(t3)||(e3.delete(t3),0))},t2.clearInterceptorsByType=function(e3){return!!this.typeToInterceptorsMap_.get(e3)&&(this.typeToInterceptorsMap_.delete(e3),this.typeToInterceptorsMap_.set(e3,new Set),!0)},t2.clear=function(){return!!this.typeToInterceptorsMap_.size&&(this.typeToInterceptorsMap_=new Map,!0)},t2.getForType=function(e3){return this.typeToInterceptorsMap_.get(e3)||new Set},t2.execute=function(e3,t3){for(var i2=function ki(e2,t2){var i2,s2="undefined"!=typeof Symbol&&e2[Symbol.iterator]||e2["@@iterator"];if(s2)return(s2=s2.call(e2)).next.bind(s2);if(Array.isArray(e2)||(s2=function(e3){var i3;if(e3)return"string"==typeof e3?Ii(e3,void 0):"Map"===(i3="Object"===(i3=Object.prototype.toString.call(e3).slice(8,-1))&&e3.constructor?e3.constructor.name:i3)||"Set"===i3?Array.from(e3):"Arguments"===i3||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i3)?Ii(e3,void 0):void 0}(e2))||t2&&e2&&"number"==typeof e2.length)return s2&&(e2=s2),i2=0,function(){return i2>=e2.length?{done:!0}:{done:!1,value:e2[i2++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(this.getForType(e3));!(s2=i2()).done;){var s2=s2.value;try{t3=s2(t3)}catch(e4){}}return t3},e2}();var xi=function(){function e2(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1}var t2=e2.prototype;return t2.getIsEnabled=function(){return this.enabled_},t2.enable=function(){this.enabled_=!0},t2.disable=function(){this.enabled_=!1},t2.reset=function(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1},t2.getMaxAttempts=function(){return this.maxAttempts_},t2.setMaxAttempts=function(e3){this.maxAttempts_=e3},t2.getDelayFactor=function(){return this.delayFactor_},t2.setDelayFactor=function(e3){this.delayFactor_=e3},t2.getFuzzFactor=function(){return this.fuzzFactor_},t2.setFuzzFactor=function(e3){this.fuzzFactor_=e3},t2.getInitialDelay=function(){return this.initialDelay_},t2.setInitialDelay=function(e3){this.initialDelay_=e3},t2.createRetry=function(e3){var t3=(e3=void 0===e3?{}:e3).maxAttempts;return new Ai({maxAttempts:t3||this.maxAttempts_,delayFactor:e3.delayFactor||this.delayFactor_,fuzzFactor:e3.fuzzFactor||this.fuzzFactor_,initialDelay:e3.initialDelay||this.initialDelay_})},e2}(),Ai=function(){function e2(e3){this.maxAttempts_=e3.maxAttempts,this.delayFactor_=e3.delayFactor,this.fuzzFactor_=e3.fuzzFactor,this.currentDelay_=e3.initialDelay,this.currentAttempt_=1}var t2=e2.prototype;return t2.moveToNextAttempt=function(){this.currentAttempt_++;var e3=this.currentDelay_*this.delayFactor_;this.currentDelay_=this.currentDelay_+e3},t2.shouldRetry=function(){return this.currentAttempt_<this.maxAttempts_},t2.getCurrentDelay=function(){return this.currentDelay_},t2.getCurrentMinPossibleDelay=function(){return(1-this.fuzzFactor_)*this.currentDelay_},t2.getCurrentMaxPossibleDelay=function(){return(1+this.fuzzFactor_)*this.currentDelay_},t2.getCurrentFuzzedDelay=function(){var e3=this.getCurrentMinPossibleDelay(),t3=this.getCurrentMaxPossibleDelay();return e3+Math.random()*(t3-e3)},e2}();y.httpHandler=function(s2,r2){return void 0===r2&&(r2=!1),function(e2,t2,i2){if(e2)s2(e2);else if(400<=t2.statusCode&&t2.statusCode<=599){if(e2=i2,r2)if(Si.TextDecoder){void 0===(e3=t2.headers&&t2.headers["content-type"])&&(e3=""),t2=e3.toLowerCase().split(";").reduce(function(e4,t3){var i3=(t3=t3.split("="))[0];return t3=t3[1],"charset"===i3.trim()?t3.trim():e4},"utf-8");try{e2=new TextDecoder(t2).decode(i2)}catch(e3){}}else e2=String.fromCharCode.apply(null,new Uint8Array(i2));s2({cause:e2})}else s2(null,i2);var e3}},y.requestInterceptorsStorage=new e,y.responseInterceptorsStorage=new e,y.retryManager=new xi;for(var Di=function(e2){var s2={};return e2&&e2.trim().split("\n").forEach(function(e3){var t2=e3.indexOf(":"),i2=e3.slice(0,t2).trim().toLowerCase();e3=e3.slice(t2+1).trim();void 0===s2[i2]?s2[i2]=e3:Array.isArray(s2[i2])?s2[i2].push(e3):s2[i2]=[s2[i2],e3]}),s2},Pi=y,Li=(e=y,y.XMLHttpRequest=Si.XMLHttpRequest||function(){},y.XDomainRequest="withCredentials"in new y.XMLHttpRequest?y.XMLHttpRequest:Si.XDomainRequest,["get","put","post","patch","head","delete"]),Oi=function(s2){y["delete"===s2?"del":s2]=function(e2,t2,i2){return(t2=Ni(e2,t2,i2)).method=s2.toUpperCase(),Mi(t2)}},Ri=0;Ri<Li.length;Ri++)Oi(Li[Ri]);function Ni(e2,t2,i2){var s2=e2;return function(e2){var t2;return!!e2&&("[object Function]"===(t2=Ci.call(e2))||"function"==typeof e2&&"[object RegExp]"!==t2||"undefined"!=typeof window&&(e2===window.setTimeout||e2===window.alert||e2===window.confirm||e2===window.prompt))}(t2)?(i2=t2,"string"==typeof e2&&(s2={uri:e2})):s2=wi({},t2,{uri:e2}),s2.callback=i2,s2}function y(e2,t2,i2){return Mi(t2=Ni(e2,t2,i2))}function Mi(s2){if(void 0===s2.callback)throw new Error("callback argument missing");s2.requestType&&y.requestInterceptorsStorage.getIsEnabled()&&(c2=y.requestInterceptorsStorage.execute(s2.requestType,{uri:s2.uri||s2.url,headers:s2.headers||{},body:s2.body,metadata:s2.metadata||{},retry:s2.retry,timeout:s2.timeout}),s2.uri=c2.uri,s2.headers=c2.headers,s2.body=c2.body,s2.metadata=c2.metadata,s2.retry=c2.retry,s2.timeout=c2.timeout);var r2=!1,n2=function(e3,t3,i3){r2||(r2=!0,s2.callback(e3,t3,i3))};function a2(){var e3=void 0;e3=d2.response||d2.responseText||function(e4){try{if("document"===e4.responseType)return e4.responseXML;var t3=e4.responseXML&&"parsererror"===e4.responseXML.documentElement.nodeName;if(""===e4.responseType&&!t3)return e4.responseXML}catch(e5){}return null}(d2);if(g2)try{e3=JSON.parse(e3)}catch(e4){}return e3}function t2(e3){var t3;if(clearTimeout(l2),clearTimeout(s2.retryTimeout),(e3=e3 instanceof Error?e3:new Error(""+(e3||"Unknown XMLHttpRequest Error"))).statusCode=0,o2||!y.retryManager.getIsEnabled()||!s2.retry||!s2.retry.shouldRetry())return s2.requestType&&y.responseInterceptorsStorage.getIsEnabled()&&(t3={headers:f2.headers||{},body:f2.body,responseUrl:d2.responseURL,responseType:d2.responseType},t3=y.responseInterceptorsStorage.execute(s2.requestType,t3),f2.body=t3.body,f2.headers=t3.headers),n2(e3,f2);s2.retryTimeout=setTimeout(function(){s2.retry.moveToNextAttempt(),s2.xhr=d2,Mi(s2)},s2.retry.getCurrentFuzzedDelay())}function e2(){var e3,t3,i3;if(!o2)return clearTimeout(l2),clearTimeout(s2.retryTimeout),i3=s2.useXDR&&void 0===d2.status?200:1223===d2.status?204:d2.status,e3=f2,t3=null,0!==i3?(e3={body:a2(),statusCode:i3,method:u2,headers:{},url:h2,rawRequest:d2},d2.getAllResponseHeaders&&(e3.headers=Di(d2.getAllResponseHeaders()))):t3=new Error("Internal XMLHttpRequest Error"),s2.requestType&&y.responseInterceptorsStorage.getIsEnabled()&&(i3={headers:e3.headers||{},body:e3.body,responseUrl:d2.responseURL,responseType:d2.responseType},i3=y.responseInterceptorsStorage.execute(s2.requestType,i3),e3.body=i3.body,e3.headers=i3.headers),n2(t3,e3,e3.body)}var i2,o2,l2,d2=s2.xhr||null,h2=(d2=d2||new(s2.cors||s2.useXDR?y.XDomainRequest:y.XMLHttpRequest)).url=s2.uri||s2.url,u2=d2.method=s2.method||"GET",c2=s2.body||s2.data,p2=d2.headers=s2.headers||{},m2=!!s2.sync,g2=!1,f2={body:void 0,headers:{},statusCode:0,method:u2,url:h2,rawRequest:d2};if("json"in s2&&!1!==s2.json&&(g2=!0,p2.accept||p2.Accept||(p2.Accept="application/json"),"GET"!==u2)&&"HEAD"!==u2&&(p2["content-type"]||p2["Content-Type"]||(p2["Content-Type"]="application/json"),c2=JSON.stringify(!0===s2.json?c2:s2.json)),d2.onreadystatechange=function(){4!==d2.readyState||y.responseInterceptorsStorage.getIsEnabled()||setTimeout(e2,0)},d2.onload=e2,d2.onerror=t2,d2.onprogress=function(){},d2.onabort=function(){o2=!0,clearTimeout(s2.retryTimeout)},d2.ontimeout=t2,d2.open(u2,h2,!m2,s2.username,s2.password),m2||(d2.withCredentials=!!s2.withCredentials),!m2&&0<s2.timeout&&(l2=setTimeout(function(){var e3;o2||(o2=!0,d2.abort("timeout"),(e3=new Error("XMLHttpRequest timeout")).code="ETIMEDOUT",t2(e3))},s2.timeout)),d2.setRequestHeader)for(i2 in p2)p2.hasOwnProperty(i2)&&d2.setRequestHeader(i2,p2[i2]);else if(s2.headers&&!function(e3){for(var t3 in e3)if(e3.hasOwnProperty(t3))return;return 1}(s2.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in s2&&(d2.responseType=s2.responseType),"beforeSend"in s2&&"function"==typeof s2.beforeSend&&s2.beforeSend(d2),d2.send(c2||null),d2}function Ui(e2,t2){var i2=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder());let s2=[];i2.oncue=function(e3){t2.addCue(e3)},i2.onparsingerror=function(e3){s2.push(e3)},i2.onflush=function(){t2.trigger({type:"loadeddata",target:t2})},i2.parse(e2),0<s2.length&&(window.console&&window.console.groupCollapsed&&window.console.groupCollapsed("Text Track parsing errors for "+t2.src),s2.forEach(e3=>o.error(e3)),window.console)&&window.console.groupEnd&&window.console.groupEnd(),i2.flush()}function Bi(e2,s2){var t2={uri:e2};(e2=yi(e2))&&(t2.cors=e2),(e2="use-credentials"===s2.tech_.crossOrigin())&&(t2.withCredentials=e2),Pi(t2,p(this,function(e3,t3,i2){if(e3)return o.error(e3,t3);s2.loaded_=!0,"function"!=typeof window.WebVTT?s2.tech_&&s2.tech_.any(["vttjsloaded","vttjserror"],e4=>{if("vttjserror"!==e4.type)return Ui(i2,s2);o.error("vttjs failed to load, stopping trying to process "+s2.src)}):Ui(i2,s2)}))}Pi.default=e;class Fi extends mi{constructor(e2={}){if(!e2.tech)throw new Error("A tech was not provided.");e2=d(e2,{kind:ci[e2.kind]||"subtitles",language:e2.language||e2.srclang||""});let t2=pi[e2.mode]||"disabled",i2=e2.default,s2=("metadata"!==e2.kind&&"chapters"!==e2.kind||(t2="hidden"),super(e2),this.tech_=e2.tech,this.cues_=[],this.activeCues_=[],this.preload_=!1!==this.tech_.preloadTextTracks,new di(this.cues_)),n2=new di(this.activeCues_),a2=!1;this.timeupdateHandler=p(this,function(e3={}){this.tech_.isDisposed()||(this.tech_.isReady_&&(this.activeCues=this.activeCues,a2)&&(this.trigger("cuechange"),a2=!1),"timeupdate"!==e3.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)))}),this.tech_.one("dispose",()=>{this.stopTracking()}),"disabled"!==t2&&this.startTracking(),Object.defineProperties(this,{default:{get:()=>i2,set(){}},mode:{get:()=>t2,set(e3){pi[e3]&&t2!==e3&&(t2=e3,this.preload_||"disabled"===t2||0!==this.cues.length||Bi(this.src,this),this.stopTracking(),"disabled"!==t2&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?s2:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(0!==this.cues.length){var i3=this.tech_.currentTime(),s3=[];for(let e3=0,t3=this.cues.length;e3<t3;e3++){var r2=this.cues[e3];r2.startTime<=i3&&i3<=r2.endTime&&s3.push(r2)}if(a2=!1,s3.length!==this.activeCues_.length)a2=!0;else for(let e3=0;e3<s3.length;e3++)-1===this.activeCues_.indexOf(s3[e3])&&(a2=!0);this.activeCues_=s3,n2.setCues_(this.activeCues_)}return n2},set(){}}}),e2.src?(this.src=e2.src,this.preload_||(this.loaded_=!0),(this.preload_||"subtitles"!==e2.kind&&"captions"!==e2.kind)&&Bi(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(e2){let t2=e2;if(!("getCueAsHTML"in t2)){for(var i2 in t2=new window.vttjs.VTTCue(e2.startTime,e2.endTime,e2.text),e2)i2 in t2||(t2[i2]=e2[i2]);t2.id=e2.id,t2.originalCue_=e2}var s2=this.tech_.textTracks();for(let e3=0;e3<s2.length;e3++)s2[e3]!==this&&s2[e3].removeCue(t2);this.cues_.push(t2),this.cues.setCues_(this.cues_)}toJSON(){return ei(this)}removeCue(e2){let t2=this.cues_.length;for(;t2--;){var i2=this.cues_[t2];if(i2===e2||i2.originalCue_&&i2.originalCue_===e2){this.cues_.splice(t2,1),this.cues.setCues_(this.cues_);break}}}}Fi.prototype.allowedEvents_={cuechange:"cuechange"};class qi extends mi{constructor(e2={}){super(e2=d(e2,{kind:ui[e2.kind]||""}));let t2=!1;Object.defineProperty(this,"enabled",{get:()=>t2,set(e3){"boolean"==typeof e3&&e3!==t2&&(t2=e3,this.trigger("enabledchange"))}}),e2.enabled&&(this.enabled=e2.enabled),this.loaded_=!0}}class ji extends mi{constructor(e2={}){super(e2=d(e2,{kind:hi[e2.kind]||""}));let t2=!1;Object.defineProperty(this,"selected",{get:()=>t2,set(e3){"boolean"==typeof e3&&e3!==t2&&(t2=e3,this.trigger("selectedchange"))}}),e2.selected&&(this.selected=e2.selected)}}class Vi extends wt{constructor(e2={}){super();let t2,i2=new Fi(e2);this.kind=i2.kind,this.src=i2.src,this.srclang=i2.language,this.label=i2.label,this.default=i2.default,Object.defineProperties(this,{readyState:{get:()=>t2},track:{get:()=>i2}}),t2=Vi.NONE,i2.addEventListener("loadeddata",()=>{t2=Vi.LOADED,this.trigger({type:"load",target:this})})}}Vi.prototype.allowedEvents_={load:"load"},Vi.NONE=0,Vi.LOADING=1,Vi.LOADED=2,Vi.ERROR=3;let Hi={audio:{ListClass:ni,TrackClass:qi,capitalName:"Audio"},video:{ListClass:oi,TrackClass:ji,capitalName:"Video"},text:{ListClass:li,TrackClass:Fi,capitalName:"Text"}},zi=(Object.keys(Hi).forEach(function(e2){Hi[e2].getterName=e2+"Tracks",Hi[e2].privateName=e2+"Tracks_"}),{remoteText:{ListClass:li,TrackClass:Fi,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:class{constructor(i2=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let e2=0,t2=i2.length;e2<t2;e2++)this.addTrackElement_(i2[e2])}addTrackElement_(e2){let t2=this.trackElements_.length;""+t2 in this||Object.defineProperty(this,t2,{get(){return this.trackElements_[t2]}}),-1===this.trackElements_.indexOf(e2)&&this.trackElements_.push(e2)}getTrackElementByTrack_(i2){let s2;for(let e2=0,t2=this.trackElements_.length;e2<t2;e2++)if(i2===this.trackElements_[e2].track){s2=this.trackElements_[e2];break}return s2}removeTrackElement_(i2){for(let e2=0,t2=this.trackElements_.length;e2<t2;e2++)if(i2===this.trackElements_[e2]){this.trackElements_[e2].track&&"function"==typeof this.trackElements_[e2].track.off&&this.trackElements_[e2].track.off(),"function"==typeof this.trackElements_[e2].off&&this.trackElements_[e2].off(),this.trackElements_.splice(e2,1);break}}},TrackClass:Vi,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}}),a=Object.assign({},Hi,zi);zi.names=Object.keys(zi),Hi.names=Object.keys(Hi),a.names=[].concat(zi.names).concat(Hi.names);xi=void 0!==bi?bi:"undefined"!=typeof window?window:{};var $i="undefined"!=typeof document?document:($i=xi["__GLOBAL_DOCUMENT_CACHE@4"])||(xi["__GLOBAL_DOCUMENT_CACHE@4"]={}),Wi=(e=$i,Object.create||function(e2){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return Gi.prototype=e2,new Gi});function Gi(){}function Xi(e2,t2){this.name="ParsingError",this.code=e2.code,this.message=t2||e2.message}function Ki(e2){function t2(e3,t3,i2,s2){return 3600*(0|e3)+60*(0|t3)+(0|i2)+(0|s2)/1e3}return(e2=e2.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/))?e2[3]?t2(e2[1],e2[2],e2[3].replace(":",""),e2[4]):59<e2[1]?t2(e2[1],e2[2],0,e2[4]):t2(0,e2[1],e2[2],e2[4]):null}function Yi(){this.values=Wi(null)}function Qi(e2,t2,i2,s2){var r2,n2,a2=s2?e2.split(s2):[e2];for(r2 in a2)"string"==typeof a2[r2]&&2===(n2=a2[r2].split(i2)).length&&t2(n2[0].trim(),n2[1].trim())}((Xi.prototype=Wi(Error.prototype)).constructor=Xi).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},Yi.prototype={set:function(e2,t2){this.get(e2)||""===t2||(this.values[e2]=t2)},get:function(e2,t2,i2){return i2?this.has(e2)?this.values[e2]:t2[i2]:this.has(e2)?this.values[e2]:t2},has:function(e2){return e2 in this.values},alt:function(e2,t2,i2){for(var s2=0;s2<i2.length;++s2)if(t2===i2[s2]){this.set(e2,t2);break}},integer:function(e2,t2){/^-?\d+$/.test(t2)&&this.set(e2,parseInt(t2,10))},percent:function(e2,t2){return!!(t2.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(t2=parseFloat(t2))&&t2<=100)&&(this.set(e2,t2),!0)}};var Ji=e.createElement&&e.createElement("textarea"),Zi={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},es={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},ts={v:"title",lang:"lang"},is={rt:"ruby"};function ss(e2,t2){for(var i2,s2,r2,n2,a2,o2,l2=e2.document.createElement("div"),d2=l2,h2=[];null!==(o2=void 0,o2=t2?(o2=(o2=t2.match(/^([^<]*)(<[^>]*>?)?/))[1]||o2[2],t2=t2.substr(o2.length),o2):null);)"<"===o2[0]?"/"===o2[1]?h2.length&&h2[h2.length-1]===o2.substr(2).replace(">","")&&(h2.pop(),d2=d2.parentNode):(s2=Ki(o2.substr(1,o2.length-2)))?(i2=e2.document.createProcessingInstruction("timestamp",s2),d2.appendChild(i2)):(s2=o2.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/))&&(r2=s2[1],n2=s2[3],a2=void 0,i2=(a2=Zi[r2])?(a2=e2.document.createElement(a2),(r2=ts[r2])&&n2&&(a2[r2]=n2.trim()),a2):null)&&(r2=d2,is[(n2=i2).localName]&&is[n2.localName]!==r2.localName||(s2[2]&&((a2=s2[2].split(".")).forEach(function(e3){var t3=/^bg_/.test(e3);e3=t3?e3.slice(3):e3;es.hasOwnProperty(e3)&&(e3=es[e3],i2.style[t3?"background-color":"color"]=e3)}),i2.className=a2.join(" ")),h2.push(s2[1]),d2.appendChild(i2),d2=i2)):d2.appendChild(e2.document.createTextNode((n2=o2,Ji.innerHTML=n2,n2=Ji.textContent,Ji.textContent="",n2)));return l2}var rs=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function ns(e2){var t2=[],i2="";if(e2&&e2.childNodes)for(n2(t2,e2);i2=function e3(t3){var i3,s3,r2;return t3&&t3.length?(s3=(i3=t3.pop()).textContent||i3.innerText)?(r2=s3.match(/^.*(\n|\r)/))?r2[t3.length=0]:s3:"ruby"===i3.tagName?e3(t3):i3.childNodes?(n2(t3,i3),e3(t3)):void 0:null}(t2);)for(var s2=0;s2<i2.length;s2++)if(function(e3){for(var t3=0;t3<rs.length;t3++){var i3=rs[t3];if(e3>=i3[0]&&e3<=i3[1])return 1}}(i2.charCodeAt(s2)))return"rtl";return"ltr";function n2(e3,t3){for(var i3=t3.childNodes.length-1;0<=i3;i3--)e3.push(t3.childNodes[i3])}}function as(){}function os(e2,t2,i2){as.call(this),this.cue=t2,this.cueDiv=ss(e2,t2.text),this.applyStyles({color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t2.vertical?"horizontal-tb":"lr"===t2.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"},this.cueDiv),this.div=e2.document.createElement("div"),e2={direction:ns(this.cueDiv),writingMode:""===t2.vertical?"horizontal-tb":"lr"===t2.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t2.align?"center":t2.align,font:i2.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(e2),this.div.appendChild(this.cueDiv);var s2=0;switch(t2.positionAlign){case"start":case"line-left":s2=t2.position;break;case"center":s2=t2.position-t2.size/2;break;case"end":case"line-right":s2=t2.position-t2.size}""===t2.vertical?this.applyStyles({left:this.formatStyle(s2,"%"),width:this.formatStyle(t2.size,"%")}):this.applyStyles({top:this.formatStyle(s2,"%"),height:this.formatStyle(t2.size,"%")}),this.move=function(e3){this.applyStyles({top:this.formatStyle(e3.top,"px"),bottom:this.formatStyle(e3.bottom,"px"),left:this.formatStyle(e3.left,"px"),right:this.formatStyle(e3.right,"px"),height:this.formatStyle(e3.height,"px"),width:this.formatStyle(e3.width,"px")})}}function _(e2){var t2,i2,s2,r2;e2.div&&(t2=e2.div.offsetHeight,i2=e2.div.offsetWidth,s2=e2.div.offsetTop,r2=(r2=(r2=e2.div.childNodes)&&r2[0])&&r2.getClientRects&&r2.getClientRects(),e2=e2.div.getBoundingClientRect(),r2=r2?Math.max(r2[0]&&r2[0].height||0,e2.height/r2.length):0),this.left=e2.left,this.right=e2.right,this.top=e2.top||s2,this.height=e2.height||t2,this.bottom=e2.bottom||s2+(e2.height||t2),this.width=e2.width||i2,this.lineHeight=void 0!==r2?r2:e2.lineHeight}function ls(e2,t2,o2,l2){var i2,s2=new _(t2),r2=t2.cue,n2=function(e3){if("number"==typeof e3.line&&(e3.snapToLines||0<=e3.line&&e3.line<=100))return e3.line;if(!e3.track||!e3.track.textTrackList||!e3.track.textTrackList.mediaElement)return-1;for(var t3=e3.track,i3=t3.textTrackList,s3=0,r3=0;r3<i3.length&&i3[r3]!==t3;r3++)"showing"===i3[r3].mode&&s3++;return-1*++s3}(r2),a2=[];if(r2.snapToLines){switch(r2.vertical){case"":a2=["+y","-y"],i2="height";break;case"rl":a2=["+x","-x"],i2="width";break;case"lr":a2=["-x","+x"],i2="width"}var d2=s2.lineHeight,h2=d2*Math.round(n2),u2=o2[i2]+d2,c2=a2[0];Math.abs(h2)>u2&&(h2=h2<0?-1:1,h2*=Math.ceil(u2/d2)*d2),n2<0&&(h2+=""===r2.vertical?o2.height:o2.width,a2=a2.reverse()),s2.move(c2,h2)}else{var p2=s2.lineHeight/o2.height*100;switch(r2.lineAlign){case"center":n2-=p2/2;break;case"end":n2-=p2}switch(r2.vertical){case"":t2.applyStyles({top:t2.formatStyle(n2,"%")});break;case"rl":t2.applyStyles({left:t2.formatStyle(n2,"%")});break;case"lr":t2.applyStyles({right:t2.formatStyle(n2,"%")})}a2=["+y","-x","+x","-y"],s2=new _(t2)}u2=function(e3,t3){for(var i3,s3=new _(e3),r3=1,n3=0;n3<t3.length;n3++){for(;e3.overlapsOppositeAxis(o2,t3[n3])||e3.within(o2)&&e3.overlapsAny(l2);)e3.move(t3[n3]);if(e3.within(o2))return e3;var a3=e3.intersectPercentage(o2);a3<r3&&(i3=new _(e3),r3=a3),e3=new _(s3)}return i3||s3}(s2,a2),t2.move(u2.toCSSCompatValues(o2))}function ds(){}as.prototype.applyStyles=function(e2,t2){for(var i2 in t2=t2||this.div,e2)e2.hasOwnProperty(i2)&&(t2.style[i2]=e2[i2])},as.prototype.formatStyle=function(e2,t2){return 0===e2?0:e2+t2},(os.prototype=Wi(as.prototype)).constructor=os,_.prototype.move=function(e2,t2){switch(t2=void 0!==t2?t2:this.lineHeight,e2){case"+x":this.left+=t2,this.right+=t2;break;case"-x":this.left-=t2,this.right-=t2;break;case"+y":this.top+=t2,this.bottom+=t2;break;case"-y":this.top-=t2,this.bottom-=t2}},_.prototype.overlaps=function(e2){return this.left<e2.right&&this.right>e2.left&&this.top<e2.bottom&&this.bottom>e2.top},_.prototype.overlapsAny=function(e2){for(var t2=0;t2<e2.length;t2++)if(this.overlaps(e2[t2]))return!0;return!1},_.prototype.within=function(e2){return this.top>=e2.top&&this.bottom<=e2.bottom&&this.left>=e2.left&&this.right<=e2.right},_.prototype.overlapsOppositeAxis=function(e2,t2){switch(t2){case"+x":return this.left<e2.left;case"-x":return this.right>e2.right;case"+y":return this.top<e2.top;case"-y":return this.bottom>e2.bottom}},_.prototype.intersectPercentage=function(e2){return Math.max(0,Math.min(this.right,e2.right)-Math.max(this.left,e2.left))*Math.max(0,Math.min(this.bottom,e2.bottom)-Math.max(this.top,e2.top))/(this.height*this.width)},_.prototype.toCSSCompatValues=function(e2){return{top:this.top-e2.top,bottom:e2.bottom-this.bottom,left:this.left-e2.left,right:e2.right-this.right,height:this.height,width:this.width}},_.getSimpleBoxPosition=function(e2){var t2=e2.div?e2.div.offsetHeight:e2.tagName?e2.offsetHeight:0,i2=e2.div?e2.div.offsetWidth:e2.tagName?e2.offsetWidth:0,s2=e2.div?e2.div.offsetTop:e2.tagName?e2.offsetTop:0;return{left:(e2=e2.div?e2.div.getBoundingClientRect():e2.tagName?e2.getBoundingClientRect():e2).left,right:e2.right,top:e2.top||s2,height:e2.height||t2,bottom:e2.bottom||s2+(e2.height||t2),width:e2.width||i2}},ds.StringDecoder=function(){return{decode:function(e2){if(!e2)return"";if("string"!=typeof e2)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e2))}}},ds.convertCueToDOMTree=function(e2,t2){return e2&&t2?ss(e2,t2):null},ds.processCues=function(e2,t2,i2){if(!e2||!t2||!i2)return null;for(;i2.firstChild;)i2.removeChild(i2.firstChild);var s2=e2.document.createElement("div");if(s2.style.position="absolute",s2.style.left="0",s2.style.right="0",s2.style.top="0",s2.style.bottom="0",s2.style.margin="1.5%",i2.appendChild(s2),function(e3){for(var t3=0;t3<e3.length;t3++)if(e3[t3].hasBeenReset||!e3[t3].displayState)return 1}(t2))for(var r2,n2,a2=[],o2=_.getSimpleBoxPosition(s2),l2={font:Math.round(.05*o2.height*100)/100+"px sans-serif"},d2=0;d2<t2.length;d2++)r2=new os(e2,n2=t2[d2],l2),s2.appendChild(r2.div),ls(0,r2,o2,a2),n2.displayState=r2.div,a2.push(_.getSimpleBoxPosition(r2));else for(var h2=0;h2<t2.length;h2++)s2.appendChild(t2[h2].displayState)},(ds.Parser=function(e2,t2,i2){i2||(i2=t2,t2={}),t2=t2||{},this.window=e2,this.vttjs=t2,this.state="INITIAL",this.buffer="",this.decoder=i2||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(e2){if(!(e2 instanceof Xi))throw e2;this.onparsingerror&&this.onparsingerror(e2)},parse:function(e2){var s2=this;function t2(){for(var e3=s2.buffer,t3=0;t3<e3.length&&"\r"!==e3[t3]&&"\n"!==e3[t3];)++t3;var i3=e3.substr(0,t3);return"\r"===e3[t3]&&++t3,"\n"===e3[t3]&&++t3,s2.buffer=e3.substr(t3),i3}function i2(e3){e3.match(/X-TIMESTAMP-MAP/)?Qi(e3,function(e4,t3){var i3;"X-TIMESTAMP-MAP"===e4&&(e4=t3,i3=new Yi,Qi(e4,function(e5,t4){switch(e5){case"MPEGT":i3.integer(e5+"S",t4);break;case"LOCA":i3.set(e5+"L",Ki(t4))}},/[^\d]:/,/,/),s2.ontimestampmap)&&s2.ontimestampmap({MPEGTS:i3.get("MPEGTS"),LOCAL:i3.get("LOCAL")})},/=/):Qi(e3,function(e4,t3){var r3;"Region"===e4&&(e4=t3,r3=new Yi,Qi(e4,function(e5,t4){switch(e5){case"id":r3.set(e5,t4);break;case"width":r3.percent(e5,t4);break;case"lines":r3.integer(e5,t4);break;case"regionanchor":case"viewportanchor":var i3,s3=t4.split(",");2===s3.length&&((i3=new Yi).percent("x",s3[0]),i3.percent("y",s3[1]),i3.has("x")&&i3.has("y"))&&(r3.set(e5+"X",i3.get("x")),r3.set(e5+"Y",i3.get("y")));break;case"scroll":r3.alt(e5,t4,["up"])}},/=/,/\s/),r3.has("id"))&&((e4=new(s2.vttjs.VTTRegion||s2.window.VTTRegion)).width=r3.get("width",100),e4.lines=r3.get("lines",3),e4.regionAnchorX=r3.get("regionanchorX",0),e4.regionAnchorY=r3.get("regionanchorY",100),e4.viewportAnchorX=r3.get("viewportanchorX",0),e4.viewportAnchorY=r3.get("viewportanchorY",100),e4.scroll=r3.get("scroll",""),s2.onregion&&s2.onregion(e4),s2.regionList.push({id:r3.get("id"),region:e4}))},/:/)}e2&&(s2.buffer+=s2.decoder.decode(e2,{stream:!0}));try{if("INITIAL"===s2.state){if(!/\r\n|\n/.test(s2.buffer))return this;var r2,n2=(r2=t2()).match(/^WEBVTT([ \t].*)?$/);if(!n2||!n2[0])throw new Xi(Xi.Errors.BadSignature);s2.state="HEADER"}for(var a2=!1;s2.buffer;){if(!/\r\n|\n/.test(s2.buffer))return this;switch(a2?a2=!1:r2=t2(),s2.state){case"HEADER":/:/.test(r2)?i2(r2):r2||(s2.state="ID");continue;case"NOTE":r2||(s2.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r2)){s2.state="NOTE";break}if(!r2)continue;s2.cue=new(s2.vttjs.VTTCue||s2.window.VTTCue)(0,0,"");try{s2.cue.align="center"}catch(e3){s2.cue.align="middle"}if(s2.state="CUE",-1===r2.indexOf("--\x3e")){s2.cue.id=r2;continue}case"CUE":try{!function(t3,i3,n3){var s3=t3;function e3(){var e4=Ki(t3);if(null===e4)throw new Xi(Xi.Errors.BadTimeStamp,"Malformed timestamp: "+s3);return t3=t3.replace(/^[^\sa-zA-Z-]+/,""),e4}function r3(){t3=t3.replace(/^\s+/,"")}if(r3(),i3.startTime=e3(),r3(),"--\x3e"!==t3.substr(0,3))throw new Xi(Xi.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+s3);t3=t3.substr(3),r3(),i3.endTime=e3(),r3();var a3=t3,o3=new Yi;Qi(a3,function(e4,t4){switch(e4){case"region":for(var i4=n3.length-1;0<=i4;i4--)if(n3[i4].id===t4){o3.set(e4,n3[i4].region);break}break;case"vertical":o3.alt(e4,t4,["rl","lr"]);break;case"line":var s4=t4.split(","),r4=s4[0];o3.integer(e4,r4),o3.percent(e4,r4)&&o3.set("snapToLines",!1),o3.alt(e4,r4,["auto"]),2===s4.length&&o3.alt("lineAlign",s4[1],["start","center","end"]);break;case"position":s4=t4.split(","),o3.percent(e4,s4[0]),2===s4.length&&o3.alt("positionAlign",s4[1],["start","center","end"]);break;case"size":o3.percent(e4,t4);break;case"align":o3.alt(e4,t4,["start","center","end","left","right"])}},/:/,/\s/),i3.region=o3.get("region",null),i3.vertical=o3.get("vertical","");try{i3.line=o3.get("line","auto")}catch(e4){}i3.lineAlign=o3.get("lineAlign","start"),i3.snapToLines=o3.get("snapToLines",!0),i3.size=o3.get("size",100);try{i3.align=o3.get("align","center")}catch(e4){i3.align=o3.get("align","middle")}try{i3.position=o3.get("position","auto")}catch(e4){i3.position=o3.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},i3.align)}i3.positionAlign=o3.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},i3.align)}(r2,s2.cue,s2.regionList)}catch(e3){s2.reportOrThrowError(e3),s2.cue=null,s2.state="BADCUE";continue}s2.state="CUETEXT";continue;case"CUETEXT":var o2=-1!==r2.indexOf("--\x3e");if(!r2||o2&&(a2=!0)){s2.oncue&&s2.oncue(s2.cue),s2.cue=null,s2.state="ID";continue}s2.cue.text&&(s2.cue.text+="\n"),s2.cue.text+=r2.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":r2||(s2.state="ID");continue}}}catch(e3){s2.reportOrThrowError(e3),"CUETEXT"===s2.state&&s2.cue&&s2.oncue&&s2.oncue(s2.cue),s2.cue=null,s2.state="INITIAL"===s2.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t2=this;try{if(t2.buffer+=t2.decoder.decode(),!t2.cue&&"HEADER"!==t2.state||(t2.buffer+="\n\n",t2.parse()),"INITIAL"===t2.state)throw new Xi(Xi.Errors.BadSignature)}catch(e2){t2.reportOrThrowError(e2)}return t2.onflush&&t2.onflush(),this}};var hs=ds,us={"":1,lr:1,rl:1},cs={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function ps(e2){return"string"==typeof e2&&!!cs[e2.toLowerCase()]&&e2.toLowerCase()}function ms(e2,t2,i2){this.hasBeenReset=!1;var s2="",r2=!1,n2=e2,a2=t2,o2=i2,l2=null,d2="",h2=!0,u2="auto",c2="start",p2="auto",m2="auto",g2=100,f2="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return s2},set:function(e3){s2=""+e3}},pauseOnExit:{enumerable:!0,get:function(){return r2},set:function(e3){r2=!!e3}},startTime:{enumerable:!0,get:function(){return n2},set:function(e3){if("number"!=typeof e3)throw new TypeError("Start time must be set to a number.");n2=e3,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return a2},set:function(e3){if("number"!=typeof e3)throw new TypeError("End time must be set to a number.");a2=e3,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return o2},set:function(e3){o2=""+e3,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return l2},set:function(e3){l2=e3,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return d2},set:function(e3){if(!1===(e3="string"==typeof e3&&!!us[e3.toLowerCase()]&&e3.toLowerCase()))throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");d2=e3,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return h2},set:function(e3){h2=!!e3,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return u2},set:function(e3){if("number"!=typeof e3&&"auto"!==e3)throw new SyntaxError("Line: an invalid number or illegal string was specified.");u2=e3,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return c2},set:function(e3){(e3=ps(e3))&&(c2=e3,this.hasBeenReset=!0)}},position:{enumerable:!0,get:function(){return p2},set:function(e3){if(e3<0||100<e3)throw new Error("Position must be between 0 and 100.");p2=e3,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return m2},set:function(e3){(e3=ps(e3))&&(m2=e3,this.hasBeenReset=!0)}},size:{enumerable:!0,get:function(){return g2},set:function(e3){if(e3<0||100<e3)throw new Error("Size must be between 0 and 100.");g2=e3,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return f2},set:function(e3){if(!(e3=ps(e3)))throw new SyntaxError("align: an invalid or illegal alignment string was specified.");f2=e3,this.hasBeenReset=!0}}}),this.displayState=void 0}ms.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var gs=ms,fs={"":!0,up:!0};function ys(e2){return"number"==typeof e2&&0<=e2&&e2<=100}function _s(){var t2=100,i2=3,s2=0,r2=100,n2=0,a2=100,o2="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return t2},set:function(e2){if(!ys(e2))throw new Error("Width must be between 0 and 100.");t2=e2}},lines:{enumerable:!0,get:function(){return i2},set:function(e2){if("number"!=typeof e2)throw new TypeError("Lines must be set to a number.");i2=e2}},regionAnchorY:{enumerable:!0,get:function(){return r2},set:function(e2){if(!ys(e2))throw new Error("RegionAnchorX must be between 0 and 100.");r2=e2}},regionAnchorX:{enumerable:!0,get:function(){return s2},set:function(e2){if(!ys(e2))throw new Error("RegionAnchorY must be between 0 and 100.");s2=e2}},viewportAnchorY:{enumerable:!0,get:function(){return a2},set:function(e2){if(!ys(e2))throw new Error("ViewportAnchorY must be between 0 and 100.");a2=e2}},viewportAnchorX:{enumerable:!0,get:function(){return n2},set:function(e2){if(!ys(e2))throw new Error("ViewportAnchorX must be between 0 and 100.");n2=e2}},scroll:{enumerable:!0,get:function(){return o2},set:function(e2){!1!==(e2="string"==typeof e2&&!!fs[e2.toLowerCase()]&&e2.toLowerCase())&&(o2=e2)}}})}var vs=Ti(function(e2){e2=e2.exports={WebVTT:hs,VTTCue:gs,VTTRegion:_s};var t2=(Si.vttjs=e2,Si.WebVTT=e2.WebVTT,e2.VTTCue),i2=e2.VTTRegion,s2=Si.VTTCue,r2=Si.VTTRegion;e2.shim=function(){Si.VTTCue=t2,Si.VTTRegion=i2},e2.restore=function(){Si.VTTCue=s2,Si.VTTRegion=r2},Si.VTTCue||e2.shim()});vs.WebVTT;class v extends g{constructor(t2={},e2=function(){}){t2.reportTouchActivity=!1,super(null,t2,e2),this.onDurationChange_=e3=>this.onDurationChange(e3),this.trackProgress_=e3=>this.trackProgress(e3),this.trackCurrentTime_=e3=>this.trackCurrentTime(e3),this.stopTrackingCurrentTime_=e3=>this.stopTrackingCurrentTime(e3),this.disposeSourceHandler_=e3=>this.disposeSourceHandler(e3),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),a.names.forEach(e3=>{e3=a[e3],t2&&t2[e3.getterName]&&(this[e3.privateName]=t2[e3.getterName])}),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(e3=>{!1===t2[`native${e3}Tracks`]&&(this[`featuresNative${e3}Tracks`]=!1)}),!1===t2.nativeCaptions||!1===t2.nativeTextTracks?this.featuresNativeTextTracks=!1:!0!==t2.nativeCaptions&&!0!==t2.nativeTextTracks||(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=!1!==t2.preloadTextTracks,this.autoRemoteTextTracks_=new a.text.ListClass,this.initTrackListeners(),t2.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(e2){this.isReady_||this.one("ready",()=>this.setTimeout(()=>this.triggerSourceset(e2),1)),this.trigger({src:e2,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(e2){this.stopTrackingProgress(),this.progressInterval=this.setInterval(p(this,function(){var e3=this.bufferedPercent();this.bufferedPercent_!==e3&&this.trigger("progress"),1===(this.bufferedPercent_=e3)&&this.stopTrackingProgress()}),500)}onDurationChange(e2){this.duration_=this.duration()}buffered(){return jt(0,0)}bufferedPercent(){return Gt(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(Hi.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(e2){(e2=[].concat(e2)).forEach(e3=>{var t2=this[e3+"Tracks"]()||[];let i2=t2.length;for(;i2--;){var s2=t2[i2];"text"===e3&&this.removeRemoteTextTrack(s2),t2.removeTrack(s2)}})}cleanupAutoTextTracks(){var e2=this.autoRemoteTextTracks_||[];let t2=e2.length;for(;t2--;){var i2=e2[t2];this.removeRemoteTextTrack(i2)}}reset(){}crossOrigin(){}setCrossOrigin(){}error(e2){return void 0!==e2&&(this.error_=new i(e2),this.trigger("error")),this.error_}played(){return this.hasStarted_?jt(0,0):jt()}play(){}setScrubbing(e2){}scrubbing(){}setCurrentTime(e2){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){Hi.names.forEach(e2=>{var t2=Hi[e2];let i2=()=>{this.trigger(e2+"trackchange")},s2=this[t2.getterName]();s2.addEventListener("removetrack",i2),s2.addEventListener("addtrack",i2),this.on("dispose",()=>{s2.removeEventListener("removetrack",i2),s2.removeEventListener("addtrack",i2)})})}addWebVttScript_(){if(!window.WebVTT)if(document.body.contains(this.el()))if(!this.options_["vtt.js"]&&Q(vs)&&0<Object.keys(vs).length)this.trigger("vttjsloaded");else{let e2=document.createElement("script");e2.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e2.onload=()=>{this.trigger("vttjsloaded")},e2.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",()=>{e2.onload=null,e2.onerror=null}),window.WebVTT=!0,this.el().parentNode.appendChild(e2)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){let i2=this.textTracks(),e2=this.remoteTextTracks(),t2=e3=>i2.addTrack(e3.track),s2=e3=>i2.removeTrack(e3.track),r2=(e2.on("addtrack",t2),e2.on("removetrack",s2),this.addWebVttScript_(),()=>this.trigger("texttrackchange")),n2=()=>{r2();for(let e3=0;e3<i2.length;e3++){var t3=i2[e3];t3.removeEventListener("cuechange",r2),"showing"===t3.mode&&t3.addEventListener("cuechange",r2)}};n2(),i2.addEventListener("change",n2),i2.addEventListener("addtrack",n2),i2.addEventListener("removetrack",n2),this.on("dispose",function(){e2.off("addtrack",t2),e2.off("removetrack",s2),i2.removeEventListener("change",n2),i2.removeEventListener("addtrack",n2),i2.removeEventListener("removetrack",n2);for(let e3=0;e3<i2.length;e3++)i2[e3].removeEventListener("cuechange",r2)})}addTextTrack(e2,t2,i2){if(e2)return r2={},n2=(s2=this).textTracks(),r2.kind=e2,t2&&(r2.label=t2),i2&&(r2.language=i2),r2.tech=s2,e2=new a.text.TrackClass(r2),n2.addTrack(e2),e2;throw new Error("TextTrack kind is required but was not provided");var s2,r2,n2}createRemoteTextTrack(e2){return e2=d(e2,{tech:this}),new zi.remoteTextEl.TrackClass(e2)}addRemoteTextTrack(e2={},t2){let i2=this.createRemoteTextTrack(e2);return"boolean"!=typeof t2&&(t2=!1),this.remoteTextTrackEls().addTrackElement_(i2),this.remoteTextTracks().addTrack(i2.track),!1===t2&&this.ready(()=>this.autoRemoteTextTracks_.addTrack(i2.track)),i2}removeRemoteTextTrack(e2){var t2=this.remoteTextTrackEls().getTrackElementByTrack_(e2);this.remoteTextTrackEls().removeTrackElement_(t2),this.remoteTextTracks().removeTrack(e2),this.autoRemoteTextTracks_.removeTrack(e2)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(e2){let t2=lt++;return!this.isReady_||this.paused()?(this.queuedHanders_.add(t2),this.one("playing",()=>{this.queuedHanders_.has(t2)&&(this.queuedHanders_.delete(t2),e2())})):this.requestNamedAnimationFrame(t2,e2),t2}cancelVideoFrameCallback(e2){this.queuedHanders_.has(e2)?this.queuedHanders_.delete(e2):this.cancelNamedAnimationFrame(e2)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(e2){}overrideNativeVideoTracks(e2){}canPlayType(e2){return""}static canPlayType(e2){return""}static canPlaySource(e2,t2){return v.canPlayType(e2.type)}static isTech(e2){return e2.prototype instanceof v||e2 instanceof v||e2===v}static registerTech(e2,t2){if(v.techs_||(v.techs_={}),!v.isTech(t2))throw new Error(`Tech ${e2} must be a Tech`);if(!v.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(v.canPlaySource)return e2=m(e2),v.techs_[e2]=t2,v.techs_[Mt(e2)]=t2,"Tech"!==e2&&v.defaultTechOrder_.push(e2),t2;throw new Error("Techs must have a static canPlaySource method on them")}static getTech(e2){if(e2)return v.techs_&&v.techs_[e2]?v.techs_[e2]:(e2=m(e2),window&&window.videojs&&window.videojs[e2]?(o.warn(`The ${e2} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),window.videojs[e2]):void 0)}}a.names.forEach(function(e2){let t2=a[e2];v.prototype[t2.getterName]=function(){return this[t2.privateName]=this[t2.privateName]||new t2.ListClass,this[t2.privateName]}}),v.prototype.featuresVolumeControl=!0,v.prototype.featuresMuteControl=!0,v.prototype.featuresFullscreenResize=!1,v.prototype.featuresPlaybackRate=!1,v.prototype.featuresProgressEvents=!1,v.prototype.featuresSourceset=!1,v.prototype.featuresTimeupdateEvents=!1,v.prototype.featuresNativeTextTracks=!1,v.prototype.featuresVideoFrameCallback=!1,v.withSourceHandlers=function(r2){r2.registerSourceHandler=function(e2,t2){let i2=r2.sourceHandlers;i2=i2||(r2.sourceHandlers=[]),void 0===t2&&(t2=i2.length),i2.splice(t2,0,e2)},r2.canPlayType=function(t2){var i2,s2=r2.sourceHandlers||[];for(let e2=0;e2<s2.length;e2++)if(i2=s2[e2].canPlayType(t2))return i2;return""},r2.selectSourceHandler=function(t2,i2){var s2=r2.sourceHandlers||[];for(let e2=0;e2<s2.length;e2++)if(s2[e2].canHandleSource(t2,i2))return s2[e2];return null},r2.canPlaySource=function(e2,t2){var i2=r2.selectSourceHandler(e2,t2);return i2?i2.canHandleSource(e2,t2):""},["seekable","seeking","duration"].forEach(function(e2){let t2=this[e2];"function"==typeof t2&&(this[e2]=function(){return this.sourceHandler_&&this.sourceHandler_[e2]?this.sourceHandler_[e2].apply(this.sourceHandler_,arguments):t2.apply(this,arguments)})},r2.prototype),r2.prototype.setSource=function(e2){let t2=r2.selectSourceHandler(e2,this.options_);t2||(r2.nativeSourceHandler?t2=r2.nativeSourceHandler:o.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),t2!==r2.nativeSourceHandler&&(this.currentSource_=e2),this.sourceHandler_=t2.handleSource(e2,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},r2.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},g.registerComponent("Tech",v),v.registerTech("Tech",v),v.defaultTechOrder_=[];let bs={},Ts={},Ss={};function ws(e2,t2,i2){e2.setTimeout(()=>function s2(r2={},e3=[],n2,a2,o2=[],l2=!1){let[t3,...d2]=e3;if("string"==typeof t3)s2(r2,bs[t3],n2,a2,o2,l2);else if(t3){let i3=function As(e2,t2){var i2=Ts[e2.id()];let s2=null;if(null==i2)s2=t2(e2),Ts[e2.id()]=[[t2,s2]];else{for(let e3=0;e3<i2.length;e3++){var[r2,n2]=i2[e3];r2===t2&&(s2=n2)}null===s2&&(s2=t2(e2),i2.push([t2,s2]))}return s2}(a2,t3);if(!i3.setSource)return o2.push(i3),s2(r2,d2,n2,a2,o2,l2);i3.setSource(Object.assign({},r2),function(e4,t4){if(e4)return s2(r2,d2,n2,a2,o2,l2);o2.push(i3),s2(t4,r2.type===t4.type?d2:bs[t4.type],n2,a2,o2,l2)})}else d2.length?s2(r2,d2,n2,a2,o2,l2):l2?n2(r2,o2):s2(r2,bs["*"],n2,a2,o2,!0)}(t2,bs[t2.type],i2,e2),1)}function Es(e2,t2,i2,s2=null){var r2="call"+m(i2),n2=(r2=e2.reduce(xs(r2),s2),e2),a2=i2,o2=t2=(s2=r2===Ss)?null:t2[i2](r2),l2=s2;for(let e3=n2.length-1;0<=e3;e3--){var d2=n2[e3];d2[a2]&&d2[a2](l2,o2)}return t2}let Cs={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},ks={setCurrentTime:1,setMuted:1,setVolume:1},Is={play:1,pause:1};function xs(i2){return(e2,t2)=>e2===Ss?Ss:t2[i2]?t2[i2](e2):e2}function Ds(e2){if(Array.isArray(e2)){let t2=[];e2.forEach(function(e3){e3=Ds(e3),Array.isArray(e3)?t2=t2.concat(e3):Y(e3)&&t2.push(e3)}),e2=t2}else e2="string"==typeof e2&&e2.trim()?[Os({src:e2})]:Y(e2)&&"string"==typeof e2.src&&e2.src&&e2.src.trim()?[Os(e2)]:[];return e2}let Ps={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},Ls=function(e2=""){return e2=_i(e2),Ps[e2.toLowerCase()]||""};function Os(e2){var t2;return e2.type||(t2=Ls(e2.src))&&(e2.type=t2),e2}let Rs={codes:{play:415,pause:19,ff:417,rw:412,back:xi=fe?10009:ye?461:8},names:{415:"play",19:"pause",417:"ff",412:"rw",[xi]:"back"},isEventKey(e2,t2){return t2=t2.toLowerCase(),!(!this.names[e2.keyCode]||this.names[e2.keyCode]!==t2)},getEventName(e2){return this.names[e2.keyCode]||(this.codes[e2.code]?(e2=this.codes[e2.code],this.names[e2]):null)}};class Ns extends wt{constructor(e2){super(),this.player_=e2,this.focusableComponents=[],this.isListening_=!1,this.isPaused_=!1,this.onKeyDown_=this.onKeyDown_.bind(this),this.lastFocusedComponent_=null}start(){this.isListening_||(this.player_.on("keydown",this.onKeyDown_),this.player_.on("modalKeydown",this.onKeyDown_),this.player_.on("loadedmetadata",()=>{this.focus(this.updateFocusableComponents()[0])}),this.player_.on("modalclose",()=>{this.refocusComponent()}),this.player_.on("focusin",this.handlePlayerFocus_.bind(this)),this.player_.on("focusout",this.handlePlayerBlur_.bind(this)),this.isListening_=!0,this.player_.errorDisplay&&this.player_.errorDisplay.on("aftermodalfill",()=>{this.updateFocusableComponents(),this.focusableComponents.length&&(1<this.focusableComponents.length?this.focusableComponents[1]:this.focusableComponents[0]).focus()}))}stop(){this.player_.off("keydown",this.onKeyDown_),this.isListening_=!1}onKeyDown_(e2){var t2,i2=e2.originalEvent||e2;["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(i2.key)?this.isPaused_||(i2.preventDefault(),t2=i2.key.substring(5).toLowerCase(),this.move(t2)):Rs.isEventKey(i2,"play")||Rs.isEventKey(i2,"pause")||Rs.isEventKey(i2,"ff")||Rs.isEventKey(i2,"rw")?(i2.preventDefault(),t2=Rs.getEventName(i2),this.performMediaAction_(t2)):Rs.isEventKey(i2,"Back")&&e2.target&&"function"==typeof e2.target.closeable&&e2.target.closeable()&&(i2.preventDefault(),e2.target.close())}performMediaAction_(e2){if(this.player_)switch(e2){case"play":this.player_.paused()&&this.player_.play();break;case"pause":this.player_.paused()||this.player_.pause();break;case"ff":this.userSeek_(this.player_.currentTime()+5);break;case"rw":this.userSeek_(this.player_.currentTime()-5)}}userSeek_(e2){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e2)}pause(){this.isPaused_=!0}resume(){this.isPaused_=!1}handlePlayerBlur_(e2){var t2=e2.relatedTarget;let i2=null;var s2=this.getCurrentComponent(e2.target);t2&&(i2=Boolean(t2.closest(".video-js")),t2.classList.contains("vjs-text-track-settings"))&&!this.isPaused_&&this.searchForTrackSelect_(),(e2.currentTarget.contains(e2.relatedTarget)||i2)&&t2||(s2&&"CloseButton"===s2.name()?this.refocusComponent():(this.pause(),s2&&s2.el()&&(this.lastFocusedComponent_=s2)))}handlePlayerFocus_(){this.getCurrentComponent()&&this.getCurrentComponent().getIsFocusable()&&this.resume()}updateFocusableComponents(){var e2=this.player_;let i2=[];function s2(e3){for(var t2 of e3)t2.hasOwnProperty("el_")&&t2.getIsFocusable()&&t2.getIsAvailableToBeFocused(t2.el())&&i2.push(t2),t2.hasOwnProperty("children_")&&0<t2.children_.length&&s2(t2.children_)}return e2.children_.forEach(e3=>{if(e3.hasOwnProperty("el_")){if(e3.getIsFocusable&&e3.getIsAvailableToBeFocused&&e3.getIsFocusable()&&e3.getIsAvailableToBeFocused(e3.el()))return void i2.push(e3);e3.hasOwnProperty("children_")&&0<e3.children_.length?s2(e3.children_):e3.hasOwnProperty("items")&&0<e3.items.length?s2(e3.items):this.findSuitableDOMChild(e3)&&i2.push(e3)}"ErrorDisplay"===e3.name_&&e3.opened_&&(e3=e3.el_.querySelector(".vjs-errors-ok-button-container"))&&e3.querySelectorAll("button").forEach((t2,e4)=>{i2.push({name:()=>"ModalButton"+(e4+1),el:()=>t2,getPositions:()=>{var e5=t2.getBoundingClientRect();return{boundingClientRect:{x:e5.x,y:e5.y,width:e5.width,height:e5.height,top:e5.top,right:e5.right,bottom:e5.bottom,left:e5.left},center:{x:e5.left+e5.width/2,y:e5.top+e5.height/2,width:0,height:0,top:e5.top+e5.height/2,right:e5.left+e5.width/2,bottom:e5.top+e5.height/2,left:e5.left+e5.width/2}}},getIsAvailableToBeFocused:()=>!0,getIsFocusable:e5=>!0,focus:()=>t2.focus()})})}),this.focusableComponents=i2,this.focusableComponents}findSuitableDOMChild(e2){return e2.el()?function t2(i2){if(e2.getIsFocusable(i2)&&e2.getIsAvailableToBeFocused(i2))return i2;for(let e3=0;e3<i2.children.length;e3++){var s2=t2(i2.children[e3]);if(s2)return s2}return null}(e2.el()):null}getCurrentComponent(e2){this.updateFocusableComponents();var t2=e2||document.activeElement;if(this.focusableComponents.length)for(var i2 of this.focusableComponents)if(i2.el()===t2)return i2}add(e2){var t2=[...this.focusableComponents];e2.hasOwnProperty("el_")&&e2.getIsFocusable()&&e2.getIsAvailableToBeFocused(e2.el())&&t2.push(e2),this.focusableComponents=t2,this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents})}remove(t2){for(let e2=0;e2<this.focusableComponents.length;e2++)if(this.focusableComponents[e2].name()===t2.name())return this.focusableComponents.splice(e2,1),void this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents})}clear(){0<this.focusableComponents.length&&(this.focusableComponents=[],this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents}))}move(i2){let s2=this.getCurrentComponent();if(s2){let t2=s2.getPositions();var e2=this.focusableComponents.filter(e3=>e3!==s2&&this.isInDirection_(t2.boundingClientRect,e3.getPositions().boundingClientRect,i2));(e2=this.findBestCandidate_(t2.center,e2,i2))?this.focus(e2):this.trigger({type:"endOfFocusableComponents",direction:i2,focusedComponent:s2})}}findBestCandidate_(e2,t2,i2){let s2=1/0,r2=null;for(var n2 of t2){var a2=n2.getPositions().center;(a2=this.calculateDistance_(e2,a2,i2))<s2&&(s2=a2,r2=n2)}return r2}isInDirection_(e2,t2,i2){switch(i2){case"right":return t2.left>=e2.right;case"left":return t2.right<=e2.left;case"down":return t2.top>=e2.bottom;case"up":return t2.bottom<=e2.top;default:return!1}}refocusComponent(){if(this.lastFocusedComponent_){this.player_.userActive()||this.player_.userActive(!0),this.updateFocusableComponents();for(let e2=0;e2<this.focusableComponents.length;e2++)if(this.focusableComponents[e2].name()===this.lastFocusedComponent_.name())return void this.focus(this.focusableComponents[e2])}else this.focus(this.updateFocusableComponents()[0])}focus(e2){"object"==typeof e2&&(e2.getIsAvailableToBeFocused(e2.el())?e2.focus():this.findSuitableDOMChild(e2)&&this.findSuitableDOMChild(e2).focus())}calculateDistance_(e2,t2,i2){var s2=Math.abs(e2.x-t2.x),r2=Math.abs(e2.y-t2.y);let n2;switch(i2){case"right":case"left":n2=s2+100*r2;break;case"up":n2=2*r2+.5*s2;break;case"down":n2=5*r2+s2;break;default:n2=s2+r2}return n2}searchForTrackSelect_(){var e2;for(e2 of this.updateFocusableComponents())if("TextTrackSelect"===e2.constructor.name){this.focus(e2);break}}}g.registerComponent("MediaLoader",class Ms extends g{constructor(s2,e2,t2){if(super(s2,d({createEl:!1},e2),t2),e2.playerOptions.sources&&0!==e2.playerOptions.sources.length)s2.src(e2.playerOptions.sources);else for(let t3=0,i2=e2.playerOptions.techOrder;t3<i2.length;t3++){var r2=m(i2[t3]);let e3=v.getTech(r2);if((e3=r2?e3:g.getComponent(r2))&&e3.isSupported()){s2.loadTech_(r2);break}}}});class Us extends g{constructor(e2,t2){super(e2,t2),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=e3=>this.handleMouseOver(e3),this.handleMouseOut_=e3=>this.handleMouseOut(e3),this.handleClick_=e3=>this.handleClick(e3),this.handleKeyDown_=e3=>this.handleKeyDown(e3),this.emitTapEvents(),this.enable()}createEl(e2="div",t2={},i2={}){return t2=Object.assign({className:this.buildCSSClass(),tabIndex:0},t2),"button"===e2&&o.error(`Creating a ClickableComponent with an HTML element of ${e2} is not supported; use a Button instead.`),i2=Object.assign({role:"button"},i2),this.tabIndex_=t2.tabIndex,e2=l(e2,t2,i2),this.player_.options_.experimentalSvgIcons||e2.appendChild(l("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(e2),e2}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(e2){return this.controlTextEl_=l("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e2&&e2.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e2),this.controlTextEl_}controlText(e2,t2=this.el()){if(void 0===e2)return this.controlText_||"Need Text";var i2=this.localize(e2);this.controlText_=e2,xe(this.controlTextEl_,i2),this.nonIconControl||this.player_.options_.noUITitleAttributes||t2.setAttribute("title",i2)}buildCSSClass(){return"vjs-control vjs-button "+super.buildCSSClass()}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(e2){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(e2){" "===e2.key||"Enter"===e2.key?(e2.preventDefault(),e2.stopPropagation(),this.trigger("click")):super.handleKeyDown(e2)}}g.registerComponent("ClickableComponent",Us);class Bs extends Us{constructor(e2,t2){super(e2,t2),this.update(),this.update_=e3=>this.update(e3),e2.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return l("div",{className:"vjs-poster"})}crossOrigin(e2){if(void 0===e2)return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;null!==e2&&"anonymous"!==e2&&"use-credentials"!==e2?this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e2}"`):this.$("img")&&(this.$("img").crossOrigin=e2)}update(e2){var t2=this.player().poster();this.setSrc(t2),t2?this.show():this.hide()}setSrc(e2){e2?(this.$("img")||this.el_.appendChild(l("picture",{className:"vjs-poster",tabIndex:-1},{},l("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))),this.$("img").src=e2):this.el_.textContent=""}handleClick(e2){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?Kt(this.player_.play()):this.player_.pause())}}Bs.prototype.crossorigin=Bs.prototype.crossOrigin,g.registerComponent("PosterImage",Bs);let Fs={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function qs(e2,t2){let i2;if(4===e2.length)i2=e2[1]+e2[1]+e2[2]+e2[2]+e2[3]+e2[3];else{if(7!==e2.length)throw new Error("Invalid color code provided, "+e2+"; must be formatted as e.g. #f0e or #f604e2.");i2=e2.slice(1)}return"rgba("+parseInt(i2.slice(0,2),16)+","+parseInt(i2.slice(2,4),16)+","+parseInt(i2.slice(4,6),16)+","+t2+")"}function js(e2,t2,i2){try{e2.style[t2]=i2}catch(e3){}}function Vs(e2){return e2?e2+"px":""}g.registerComponent("TextTrackDisplay",class Hs extends g{constructor(s2,e2,t2){super(s2,e2,t2),e2=e3=>this.updateDisplay(e3);let r2=e3=>{this.updateDisplayOverlay(),this.updateDisplay(e3)};s2.on("loadstart",e3=>this.toggleDisplay(e3)),s2.on("useractive",e2),s2.on("userinactive",e2),s2.on("texttrackchange",e2),s2.on("loadedmetadata",e3=>{this.updateDisplayOverlay(),this.preselectTrack(e3)}),s2.ready(p(this,function(){if(s2.tech_&&s2.tech_.featuresNativeTextTracks)this.hide();else{s2.on("fullscreenchange",r2),s2.on("playerresize",r2);let e3=window.screen.orientation||window,t3=window.screen.orientation?"change":"orientationchange";e3.addEventListener(t3,r2),s2.on("dispose",()=>e3.removeEventListener(t3,r2));var i2=this.options_.playerOptions.tracks||[];for(let e4=0;e4<i2.length;e4++)this.player_.addRemoteTextTrack(i2[e4],!0);this.preselectTrack()}}))}preselectTrack(){var t2={captions:1,subtitles:1},i2=this.player_.textTracks(),s2=this.player_.cache_.selectedLanguage;let r2,n2,a2;for(let e2=0;e2<i2.length;e2++){var o2=i2[e2];s2&&s2.enabled&&s2.language&&s2.language===o2.language&&o2.kind in t2?a2=o2.kind!==s2.kind&&a2||o2:s2&&!s2.enabled?(a2=null,r2=null,n2=null):o2.default&&("descriptions"!==o2.kind||r2?o2.kind in t2&&!n2&&(n2=o2):r2=o2)}a2?a2.mode="showing":n2?n2.mode="showing":r2&&(r2.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){"function"==typeof window.WebVTT&&window.WebVTT.processCues(window,[],this.el_)}updateDisplay(){var s2,r2,n2,a2=this.player_.textTracks(),o2=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),o2){var t2=[];for(let e2=0;e2<a2.length;++e2){var i2=a2[e2];"showing"===i2.mode&&t2.push(i2)}this.updateForTrack(t2)}else{let e2=null,t3=null,i3=a2.length;for(;i3--;){var l2=a2[i3];"showing"===l2.mode&&("descriptions"===l2.kind?e2=l2:t3=l2)}t3?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(t3)):e2&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(e2)),window.CSS.supports("inset","10px")||(s2=(o2=this.el_).querySelectorAll(".vjs-text-track-cue"),r2=this.player_.controlBar.el_.getBoundingClientRect().height,n2=this.player_.el_.getBoundingClientRect().height,o2.style="",js(o2,"position","relative"),js(o2,"height",n2-r2+"px"),js(o2,"top","unset"),js(o2,"bottom",_e?n2+"px":"0px"),0<s2.length&&s2.forEach(e3=>{var t4;e3.style.inset&&3===(t4=e3.style.inset.split(" ")).length&&Object.assign(e3.style,{top:t4[0],right:t4[1],bottom:t4[2],left:"unset"})}))}}updateDisplayOverlay(){if(this.player_.videoHeight()&&window.CSS.supports("inset-inline: 10px")){var i2=this.player_.currentWidth(),s2=this.player_.currentHeight(),r2=i2/s2,n2=this.player_.videoWidth()/this.player_.videoHeight();let e2=0,t2=0;.1<Math.abs(r2-n2)&&(n2<r2?e2=Math.round((i2-s2*n2)/2):t2=Math.round((s2-i2/n2)/2)),js(this.el_,"insetInline",Vs(e2)),js(this.el_,"insetBlock",Vs(t2))}}updateDisplayState(e2){var t2=this.player_.textTrackSettings.getValues(),i2=e2.activeCues;let s2=i2.length;for(;s2--;){var r2,n2=i2[s2];n2&&(n2=n2.displayState,t2.color&&(n2.firstChild.style.color=t2.color),t2.textOpacity&&js(n2.firstChild,"color",qs(t2.color||"#fff",t2.textOpacity)),t2.backgroundColor&&(n2.firstChild.style.backgroundColor=t2.backgroundColor),t2.backgroundOpacity&&js(n2.firstChild,"backgroundColor",qs(t2.backgroundColor||"#000",t2.backgroundOpacity)),t2.windowColor&&(t2.windowOpacity?js(n2,"backgroundColor",qs(t2.windowColor,t2.windowOpacity)):n2.style.backgroundColor=t2.windowColor),t2.edgeStyle&&("dropshadow"===t2.edgeStyle?n2.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222":"raised"===t2.edgeStyle?n2.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px #222":"depressed"===t2.edgeStyle?n2.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":"uniform"===t2.edgeStyle&&(n2.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222")),t2.fontPercent&&1!==t2.fontPercent&&(r2=window.parseFloat(n2.style.fontSize),n2.style.fontSize=r2*t2.fontPercent+"px",n2.style.height="auto",n2.style.top="auto"),t2.fontFamily)&&"default"!==t2.fontFamily&&("small-caps"===t2.fontFamily?n2.firstChild.style.fontVariant="small-caps":n2.firstChild.style.fontFamily=Fs[t2.fontFamily])}}updateForTrack(i2){if(Array.isArray(i2)||(i2=[i2]),"function"==typeof window.WebVTT&&!i2.every(e2=>!e2.activeCues)){var t2=[];for(let e2=0;e2<i2.length;++e2){var s2=i2[e2];for(let e3=0;e3<s2.activeCues.length;++e3)t2.push(s2.activeCues[e3])}window.WebVTT.processCues(window,t2,this.el_);for(let t3=0;t3<i2.length;++t3){var r2=i2[t3];for(let e2=0;e2<r2.activeCues.length;++e2){var n2=r2.activeCues[e2].displayState;Pe(n2,"vjs-text-track-cue","vjs-text-track-cue-"+(r2.language||t3)),r2.language&&Ue(n2,"lang",r2.language)}this.player_.textTrackSettings&&this.updateDisplayState(r2)}}}});g.registerComponent("LoadingSpinner",class zs extends g{createEl(){var e2=this.player_.isAudio(),t2=(e2=this.localize(e2?"Audio Player":"Video Player"),e2=l("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[e2])}),super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"}));return t2.appendChild(e2),t2}handleLanguagechange(){this.$(".vjs-control-text").textContent=this.localize("{1} is loading.",[this.player_.isAudio()?"Audio Player":"Video Player"])}});class s extends Us{createEl(e2,t2={},i2={}){return t2=l("button",t2=Object.assign({className:this.buildCSSClass()},t2),i2=Object.assign({type:"button"},i2)),this.player_.options_.experimentalSvgIcons||t2.appendChild(l("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(t2),t2}addChild(e2,t2={}){var i2=this.constructor.name;return o.warn(`Adding an actionable (user controllable) child to a Button (${i2}) is not supported; use a ClickableComponent instead.`),g.prototype.addChild.call(this,e2,t2)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(e2){" "===e2.key||"Enter"===e2.key?e2.stopPropagation():super.handleKeyDown(e2)}}g.registerComponent("Button",s);class $s extends s{constructor(e2,t2){super(e2,t2),this.mouseused_=!1,this.setIcon("play"),this.on("mousedown",e3=>this.handleMouseDown(e3))}buildCSSClass(){return"vjs-big-play-button"}handleClick(t2){var i2=this.player_.play();if("tap"===t2.type||this.mouseused_&&"clientX"in t2&&"clientY"in t2)Kt(i2),this.player_.tech(!0)&&this.player_.tech(!0).focus();else{let e2=(t2=this.player_.getChild("controlBar"))&&t2.getChild("playToggle");e2?(t2=()=>e2.focus(),Xt(i2)?i2.then(t2,()=>{}):this.setTimeout(t2,1)):this.player_.tech(!0).focus()}}handleKeyDown(e2){this.mouseused_=!1,super.handleKeyDown(e2)}handleMouseDown(e2){this.mouseused_=!0}}$s.prototype.controlText_="Play Video",g.registerComponent("BigPlayButton",$s);g.registerComponent("CloseButton",class Ws extends s{constructor(e2,t2){super(e2,t2),this.setIcon("cancel"),this.controlText(t2&&t2.controlText||this.localize("Close"))}buildCSSClass(){return"vjs-close-button "+super.buildCSSClass()}handleClick(e2){this.trigger({type:"close",bubbles:!1})}handleKeyDown(e2){"Escape"===e2.key?(e2.preventDefault(),e2.stopPropagation(),this.trigger("click")):super.handleKeyDown(e2)}});class Gs extends s{constructor(e2,t2={}){super(e2,t2),t2.replay=void 0===t2.replay||t2.replay,this.setIcon("play"),this.on(e2,"play",e3=>this.handlePlay(e3)),this.on(e2,"pause",e3=>this.handlePause(e3)),t2.replay&&this.on(e2,"ended",e3=>this.handleEnded(e3))}buildCSSClass(){return"vjs-play-control "+super.buildCSSClass()}handleClick(e2){this.player_.paused()?Kt(this.player_.play()):this.player_.pause()}handleSeeked(e2){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e2):this.handlePlay(e2)}handlePlay(e2){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.setIcon("pause"),this.controlText("Pause")}handlePause(e2){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.setIcon("play"),this.controlText("Play")}handleEnded(e2){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.setIcon("replay"),this.controlText("Replay"),this.one(this.player_,"seeked",e3=>this.handleSeeked(e3))}}Gs.prototype.controlText_="Play",g.registerComponent("PlayToggle",Gs);class Xs extends g{constructor(e2,t2){super(e2,t2),this.on(e2,["timeupdate","ended","seeking"],e3=>this.update(e3)),this.updateTextNode_()}createEl(){var e2=this.buildCSSClass(),t2=super.createEl("div",{className:e2+" vjs-time-control vjs-control"}),i2=l("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+" "},{role:"presentation"});return t2.appendChild(i2),this.contentEl_=l("span",{className:e2+"-display"},{role:"presentation"}),t2.appendChild(this.contentEl_),t2}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}update(e2){!this.player_.options_.enableSmoothSeeking&&"seeking"===e2.type||this.updateContent(e2)}updateTextNode_(e2=0){e2=Wt(e2),this.formattedTime_!==e2&&(this.formattedTime_=e2,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",()=>{if(this.contentEl_){let e3=this.textNode_;e3&&this.contentEl_.firstChild!==e3&&(e3=null,o.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=document.createTextNode(this.formattedTime_),this.textNode_&&(e3?this.contentEl_.replaceChild(this.textNode_,e3):this.contentEl_.appendChild(this.textNode_))}}))}updateContent(e2){}}Xs.prototype.labelText_="Time",Xs.prototype.controlText_="Time",g.registerComponent("TimeDisplay",Xs);class Ks extends Xs{buildCSSClass(){return"vjs-current-time"}updateContent(e2){let t2;t2=this.player_.ended()?this.player_.duration():e2&&e2.target&&"function"==typeof e2.target.pendingSeekTime?e2.target.pendingSeekTime():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(t2)}}Ks.prototype.labelText_="Current Time",Ks.prototype.controlText_="Current Time",g.registerComponent("CurrentTimeDisplay",Ks);class Ys extends Xs{constructor(e2,t2){super(e2,t2),t2=e3=>this.updateContent(e3),this.on(e2,"durationchange",t2),this.on(e2,"loadstart",t2),this.on(e2,"loadedmetadata",t2)}buildCSSClass(){return"vjs-duration"}updateContent(e2){var t2=this.player_.duration();this.updateTextNode_(t2)}}Ys.prototype.labelText_="Duration",Ys.prototype.controlText_="Duration",g.registerComponent("DurationDisplay",Ys);g.registerComponent("TimeDivider",class Qs extends g{createEl(){var e2=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),t2=super.createEl("div"),i2=super.createEl("span",{textContent:"/"});return t2.appendChild(i2),e2.appendChild(t2),e2}});class Js extends Xs{constructor(e2,t2){super(e2,t2),this.on(e2,"durationchange",e3=>this.updateContent(e3))}buildCSSClass(){return"vjs-remaining-time"}createEl(){var e2=super.createEl();return!1!==this.options_.displayNegative&&e2.insertBefore(l("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e2}updateContent(e2){if("number"==typeof this.player_.duration()){let e3;e3=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(e3)}}}Js.prototype.labelText_="Remaining Time",Js.prototype.controlText_="Remaining Time",g.registerComponent("RemainingTimeDisplay",Js);g.registerComponent("LiveDisplay",class Zs extends g{constructor(e2,t2){super(e2,t2),this.updateShowing(),this.on(this.player(),"durationchange",e3=>this.updateShowing(e3))}createEl(){var e2=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=l("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(l("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+" "})),this.contentEl_.appendChild(document.createTextNode(this.localize("LIVE"))),e2.appendChild(this.contentEl_),e2}dispose(){this.contentEl_=null,super.dispose()}updateShowing(e2){this.player().duration()===1/0?this.show():this.hide()}});class er extends s{constructor(e2,t2){super(e2,t2),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=e3=>this.updateLiveEdgeStatus(e3),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){var e2=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.setIcon("circle",e2),this.textEl_=l("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e2.appendChild(this.textEl_),e2}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}}function tr(e2,t2,i2){return e2=Number(e2),Math.min(i2,Math.max(t2,isNaN(e2)?t2:e2))}er.prototype.controlText_="Seek to live, currently playing live",g.registerComponent("SeekToLive",er),$i=Object.freeze({__proto__:null,clamp:tr});class ir extends g{constructor(e2,t2){super(e2,t2),this.handleMouseDown_=e3=>this.handleMouseDown(e3),this.handleMouseUp_=e3=>this.handleMouseUp(e3),this.handleKeyDown_=e3=>this.handleKeyDown(e3),this.handleClick_=e3=>this.handleClick(e3),this.handleMouseMove_=e3=>this.handleMouseMove(e3),this.update_=e3=>this.update(e3),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){var e2;this.enabled()&&(e2=this.bar.el_.ownerDocument,this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e2,"mousemove",this.handleMouseMove_),this.off(e2,"mouseup",this.handleMouseUp_),this.off(e2,"touchmove",this.handleMouseMove_),this.off(e2,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1)}createEl(e2,t2={},i2={}){return t2.className=t2.className+" vjs-slider",t2=Object.assign({tabIndex:0},t2),i2=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},i2),super.createEl(e2,t2,i2)}handleMouseDown(e2){var t2=this.bar.el_.ownerDocument;"mousedown"===e2.type&&e2.preventDefault(),"touchstart"!==e2.type||le||e2.preventDefault(),Fe(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t2,"mousemove",this.handleMouseMove_),this.on(t2,"mouseup",this.handleMouseUp_),this.on(t2,"touchmove",this.handleMouseMove_),this.on(t2,"touchend",this.handleMouseUp_),this.handleMouseMove(e2,!0)}handleMouseMove(e2){}handleMouseUp(e2){var t2=this.bar.el_.ownerDocument;qe(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(t2,"mousemove",this.handleMouseMove_),this.off(t2,"mouseup",this.handleMouseUp_),this.off(t2,"touchmove",this.handleMouseMove_),this.off(t2,"touchend",this.handleMouseUp_),this.update()}update(){if(this.el_&&this.bar){let t2=this.getProgress();return t2!==this.progress_&&(this.progress_=t2,this.requestNamedAnimationFrame("Slider#update",()=>{var e2=this.vertical()?"height":"width";this.bar.el().style[e2]=(100*t2).toFixed(2)+"%"})),t2}}getProgress(){return Number(tr(this.getPercent(),0,1).toFixed(4))}calculateDistance(e2){return e2=He(this.el_,e2),this.vertical()?e2.y:e2.x}handleKeyDown(e2){var i2=(t2=this.options_.playerOptions.spatialNavigation)&&t2.enabled,t2=t2&&t2.horizontalSeek;i2?t2&&"ArrowLeft"===e2.key||!t2&&"ArrowDown"===e2.key?(e2.preventDefault(),e2.stopPropagation(),this.stepBack()):t2&&"ArrowRight"===e2.key||!t2&&"ArrowUp"===e2.key?(e2.preventDefault(),e2.stopPropagation(),this.stepForward()):(this.pendingSeekTime()&&(this.pendingSeekTime(null),this.userSeek_(this.player_.currentTime())),super.handleKeyDown(e2)):"ArrowLeft"===e2.key||"ArrowDown"===e2.key?(e2.preventDefault(),e2.stopPropagation(),this.stepBack()):"ArrowUp"===e2.key||"ArrowRight"===e2.key?(e2.preventDefault(),e2.stopPropagation(),this.stepForward()):super.handleKeyDown(e2)}handleClick(e2){e2.stopPropagation(),e2.preventDefault()}vertical(e2){if(void 0===e2)return this.vertical_||!1;this.vertical_=!!e2,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}}g.registerComponent("Slider",ir);let sr=(e2,t2)=>tr(e2/t2*100,0,100).toFixed(2)+"%";g.registerComponent("LoadProgressBar",class rr extends g{constructor(e2,t2){super(e2,t2),this.partEls_=[],this.on(e2,"progress",e3=>this.update(e3))}createEl(){var e2=super.createEl("div",{className:"vjs-load-progress"}),t2=l("span",{className:"vjs-control-text"}),i2=l("span",{textContent:this.localize("Loaded")}),s2=document.createTextNode(": ");return this.percentageEl_=l("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e2.appendChild(t2),t2.appendChild(i2),t2.appendChild(s2),t2.appendChild(this.percentageEl_),e2}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(e2){this.requestNamedAnimationFrame("LoadProgressBar#update",()=>{var e3=this.player_.liveTracker,i2=this.player_.buffered(),s2=(e3=e3&&e3.isLive()?e3.seekableEnd():this.player_.duration(),this.player_.bufferedEnd()),r2=this.partEls_;e3=sr(s2,e3);this.percent_!==e3&&(this.el_.style.width=e3,xe(this.percentageEl_,e3),this.percent_=e3);for(let t2=0;t2<i2.length;t2++){var n2=i2.start(t2),a2=i2.end(t2);let e4=r2[t2];e4||(e4=this.el_.appendChild(l()),r2[t2]=e4),e4.dataset.start===n2&&e4.dataset.end===a2||(e4.dataset.start=n2,e4.dataset.end=a2,e4.style.left=sr(n2,s2),e4.style.width=sr(a2-n2,s2))}for(let e4=r2.length;e4>i2.length;e4--)this.el_.removeChild(r2[e4-1]);r2.length=i2.length})}});g.registerComponent("TimeTooltip",class nr extends g{constructor(e2,t2){super(e2,t2),this.update=vt(p(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(s2,r2,n2){var a2=Ve(this.el_),o2=je(this.player_.el());r2=s2.width*r2;if(o2&&a2){let e2=s2.left-o2.left+r2,t2=s2.width-r2+(o2.right-s2.right),i2=(t2||(t2=s2.width-r2,e2=r2),a2.width/2);e2<i2?i2+=i2-e2:t2<i2&&(i2=t2),i2<0?i2=0:i2>a2.width&&(i2=a2.width),i2=Math.round(i2),this.el_.style.right=`-${i2}px`,this.write(n2)}}write(e2){xe(this.el_,e2)}updateTime(r2,n2,a2,o2){this.requestNamedAnimationFrame("TimeTooltip#updateTime",()=>{let e2;var t2,i2,s2=this.player_.duration();e2=this.player_.liveTracker&&this.player_.liveTracker.isLive()?((i2=(t2=this.player_.liveTracker.liveWindow())-n2*t2)<1?"":"-")+Wt(i2,t2):Wt(a2,s2),this.update(r2,n2,e2),o2&&o2()})}});class ar extends g{constructor(e2,t2){super(e2,t2),this.setIcon("circle"),this.update=vt(p(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(e2,t2,i2){var s2=this.getChild("timeTooltip");s2&&(i2=i2&&i2.target&&"function"==typeof i2.target.pendingSeekTime?i2.target.pendingSeekTime():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),s2.updateTime(e2,t2,i2))}}ar.prototype.options_={children:[]},u||se||ar.prototype.options_.children.push("timeTooltip"),g.registerComponent("PlayProgressBar",ar);class or extends g{constructor(e2,t2){super(e2,t2),this.update=vt(p(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e2,t2){var i2=t2*this.player_.duration();this.getChild("timeTooltip").updateTime(e2,t2,i2,()=>{this.el_.style.left=e2.width*t2+"px"})}}or.prototype.options_={children:["timeTooltip"]},g.registerComponent("MouseTimeDisplay",or);class lr extends ir{constructor(e2,t2){(t2=d(lr.prototype.options_,t2)).children=[...t2.children];var i2=e2.options_.disableSeekWhileScrubbingOnMobile&&(u||se)||e2.options_.disableSeekWhileScrubbingOnSTV;(u||se)&&!i2||t2.children.splice(1,0,"mouseTimeDisplay"),super(e2,t2),this.shouldDisableSeekWhileScrubbing_=i2,this.pendingSeekTime_=null,this.setEventHandlers_()}setEventHandlers_(){this.update_=p(this,this.update),this.update=vt(this.update_,30),this.on(this.player_,["durationchange","timeupdate"],this.update),this.on(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=e2=>this.enableInterval_(e2),this.disableIntervalHandler_=e2=>this.disableInterval_(e2),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in document&&"visibilityState"in document&&this.on(document,"visibilitychange",this.toggleVisibility_)}toggleVisibility_(e2){"hidden"===document.visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e2)):(this.player_.ended()||this.player_.paused()||this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,30))}disableInterval_(e2){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e2&&"ended"!==e2.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(r2){if("hidden"!==document.visibilityState){let s2=super.update();return this.requestNamedAnimationFrame("SeekBar#update",()=>{var e2=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),t2=this.player_.liveTracker;let i2=this.player_.duration();t2&&t2.isLive()&&(i2=this.player_.liveTracker.liveCurrentTime()),this.percent_!==s2&&(this.el_.setAttribute("aria-valuenow",(100*s2).toFixed(2)),this.percent_=s2),this.currentTime_===e2&&this.duration_===i2||(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[Wt(e2,i2),Wt(i2,i2)],"{1} of {2}")),this.currentTime_=e2,this.duration_=i2),this.bar&&this.bar.update(je(this.el()),this.getProgress(),r2)}),s2}}userSeek_(e2){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e2)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}pendingSeekTime(e2){var t2;return void 0!==e2&&(null!==e2?(t2=this.player_.duration(),this.pendingSeekTime_=Math.max(0,Math.min(e2,t2))):this.pendingSeekTime_=null),this.pendingSeekTime_}getPercent(){if(null!==this.pendingSeekTime())return this.pendingSeekTime()/this.player_.duration();var e2=this.getCurrentTime_();let t2;var i2=this.player_.liveTracker;return i2&&i2.isLive()?(t2=(e2-i2.seekableStart())/i2.liveWindow(),i2.atLiveEdge()&&(t2=1)):t2=e2/this.player_.duration(),t2}handleMouseDown(e2){Ke(e2)&&(e2.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.shouldDisableSeekWhileScrubbing_||this.player_.pause(),super.handleMouseDown(e2))}handleMouseMove(t2,i2=!1){if(Ke(t2)&&!isNaN(this.player_.duration())){let e2;if(i2||this.player_.scrubbing()||this.player_.scrubbing(!0),i2=this.calculateDistance(t2),(t2=this.player_.liveTracker)&&t2.isLive()){if(.99<=i2)return void t2.seekToLiveEdge();var s2=t2.seekableStart(),r2=t2.liveCurrentTime();if((e2=(e2=(e2=s2+i2*t2.liveWindow())>=r2?r2:e2)<=s2?s2+.1:e2)===1/0)return}else(e2=i2*this.player_.duration())===this.player_.duration()&&(e2-=.1);this.shouldDisableSeekWhileScrubbing_?this.pendingSeekTime(e2):this.userSeek_(e2),this.player_.options_.enableSmoothSeeking&&this.update()}}enable(){super.enable();var e2=this.getChild("mouseTimeDisplay");e2&&e2.show()}disable(){super.disable();var e2=this.getChild("mouseTimeDisplay");e2&&e2.hide()}handleMouseUp(e2){super.handleMouseUp(e2),e2&&e2.stopPropagation(),this.player_.scrubbing(!1),null!==this.pendingSeekTime()&&(this.userSeek_(this.pendingSeekTime()),this.pendingSeekTime(null)),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?Kt(this.player_.play()):this.update_()}handlePendingSeek_(e2){this.player_.paused()||this.player_.pause();var t2=null!==this.pendingSeekTime()?this.pendingSeekTime():this.player_.currentTime();this.pendingSeekTime(t2+e2),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}stepForward(){this.shouldDisableSeekWhileScrubbing_?this.handlePendingSeek_(this.options().stepSeconds):this.userSeek_(this.player_.currentTime()+this.options().stepSeconds)}stepBack(){this.shouldDisableSeekWhileScrubbing_?this.handlePendingSeek_(-this.options().stepSeconds):this.userSeek_(this.player_.currentTime()-this.options().stepSeconds)}handleAction(e2){null!==this.pendingSeekTime()&&(this.userSeek_(this.pendingSeekTime()),this.pendingSeekTime(null)),this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(e2){var t2,i2=this.player_.liveTracker;" "===e2.key||"Enter"===e2.key?(e2.preventDefault(),e2.stopPropagation(),this.handleAction(e2)):"Home"===e2.key?(e2.preventDefault(),e2.stopPropagation(),this.userSeek_(0)):"End"===e2.key?(e2.preventDefault(),e2.stopPropagation(),i2&&i2.isLive()?this.userSeek_(i2.liveCurrentTime()):this.userSeek_(this.player_.duration())):/^[0-9]$/.test(e2.key)?(e2.preventDefault(),e2.stopPropagation(),t2=.1*parseInt(e2.key,10),i2&&i2.isLive()?this.userSeek_(i2.seekableStart()+i2.liveWindow()*t2):this.userSeek_(this.player_.duration()*t2)):"PageDown"===e2.key?(e2.preventDefault(),e2.stopPropagation(),this.userSeek_(this.player_.currentTime()-this.options().stepSeconds*this.options().pageMultiplier)):"PageUp"===e2.key?(e2.preventDefault(),e2.stopPropagation(),this.userSeek_(this.player_.currentTime()+this.options().stepSeconds*this.options().pageMultiplier)):super.handleKeyDown(e2)}dispose(){this.disableInterval_(),this.off(this.player_,["durationchange","timeupdate"],this.update),this.off(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in document&&"visibilityState"in document&&this.off(document,"visibilitychange",this.toggleVisibility_),super.dispose()}}lr.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar",stepSeconds:5,pageMultiplier:12},g.registerComponent("SeekBar",lr);class dr extends g{constructor(e2,t2){super(e2,t2),this.handleMouseMove=vt(p(this,this.handleMouseMove),30),this.throttledHandleMouseSeek=vt(p(this,this.handleMouseSeek),30),this.handleMouseUpHandler_=e3=>this.handleMouseUp(e3),this.handleMouseDownHandler_=e3=>this.handleMouseDown(e3),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(e2){var t2,i2,s2,r2,n2=this.getChild("seekBar");n2&&(t2=n2.getChild("playProgressBar"),i2=n2.getChild("mouseTimeDisplay"),t2||i2)&&(s2=Ve(r2=n2.el()),r2=tr(r2=He(r2,e2).x,0,1),i2&&i2.update(s2,r2),t2)&&t2.update(s2,n2.getProgress())}handleMouseSeek(e2){var t2=this.getChild("seekBar");t2&&t2.handleMouseMove(e2)}enabled(){return this.enabled_}disable(){var e2;this.children().forEach(e3=>e3.disable&&e3.disable()),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,["mousemove","touchmove"],this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())&&(e2=this.getChild("seekBar"),this.player_.scrubbing(!1),e2.videoWasPlaying)&&Kt(this.player_.play())}enable(){this.children().forEach(e2=>e2.enable&&e2.enable()),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,["mousemove","touchmove"],this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){var e2=this.el_.ownerDocument;this.off(e2,"mousemove",this.throttledHandleMouseSeek),this.off(e2,"touchmove",this.throttledHandleMouseSeek),this.off(e2,"mouseup",this.handleMouseUpHandler_),this.off(e2,"touchend",this.handleMouseUpHandler_)}handleMouseDown(e2){var t2=this.el_.ownerDocument,i2=this.getChild("seekBar");i2&&i2.handleMouseDown(e2),this.on(t2,"mousemove",this.throttledHandleMouseSeek),this.on(t2,"touchmove",this.throttledHandleMouseSeek),this.on(t2,"mouseup",this.handleMouseUpHandler_),this.on(t2,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e2){var t2=this.getChild("seekBar");t2&&t2.handleMouseUp(e2),this.removeListenersAddedOnMousedownAndTouchstart()}}dr.prototype.options_={children:["seekBar"]},g.registerComponent("ProgressControl",dr);class hr extends s{constructor(e2,t2){super(e2,t2),this.setIcon("picture-in-picture-enter"),this.on(e2,["enterpictureinpicture","leavepictureinpicture"],e3=>this.handlePictureInPictureChange(e3)),this.on(e2,["disablepictureinpicturechanged","loadedmetadata"],e3=>this.handlePictureInPictureEnabledChange(e3)),this.on(e2,["loadedmetadata","audioonlymodechange","audiopostermodechange"],()=>this.handlePictureInPictureAudioModeChange()),this.disable()}buildCSSClass(){return"vjs-picture-in-picture-control vjs-hidden "+super.buildCSSClass()}handlePictureInPictureAudioModeChange(){"audio"===this.player_.currentType().substring(0,5)||this.player_.audioPosterMode()||this.player_.audioOnlyMode()?(this.player_.isInPictureInPicture()&&this.player_.exitPictureInPicture(),this.hide()):this.show()}handlePictureInPictureEnabledChange(){document.pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()||this.player_.options_.enableDocumentPictureInPicture&&"documentPictureInPicture"in window?this.enable():this.disable()}handlePictureInPictureChange(e2){this.player_.isInPictureInPicture()?(this.setIcon("picture-in-picture-exit"),this.controlText("Exit Picture-in-Picture")):(this.setIcon("picture-in-picture-enter"),this.controlText("Picture-in-Picture")),this.handlePictureInPictureEnabledChange()}handleClick(e2){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}show(){"function"==typeof document.exitPictureInPicture&&super.show()}}hr.prototype.controlText_="Picture-in-Picture",g.registerComponent("PictureInPictureToggle",hr);class ur extends s{constructor(e2,t2){super(e2,t2),this.setIcon("fullscreen-enter"),this.on(e2,"fullscreenchange",e3=>this.handleFullscreenChange(e3)),!1===document[e2.fsApi_.fullscreenEnabled]&&this.disable()}buildCSSClass(){return"vjs-fullscreen-control "+super.buildCSSClass()}handleFullscreenChange(e2){this.player_.isFullscreen()?(this.controlText("Exit Fullscreen"),this.setIcon("fullscreen-exit")):(this.controlText("Fullscreen"),this.setIcon("fullscreen-enter"))}handleClick(e2){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}}ur.prototype.controlText_="Fullscreen",g.registerComponent("FullscreenToggle",ur);g.registerComponent("VolumeLevel",class cr extends g{createEl(){var e2=super.createEl("div",{className:"vjs-volume-level"});return this.setIcon("circle",e2),e2.appendChild(super.createEl("span",{className:"vjs-control-text"})),e2}});g.registerComponent("VolumeLevelTooltip",class pr extends g{constructor(e2,t2){super(e2,t2),this.update=vt(p(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(t2,i2,s2,e2){if(!s2){s2=je(this.el_);var r2=je(this.player_.el());i2=t2.width*i2;if(!r2||!s2)return;var n2=t2.left-r2.left+i2;i2=t2.width-i2+(r2.right-t2.right);let e3=s2.width/2;n2<e3?e3+=e3-n2:i2<e3&&(e3=i2),e3<0?e3=0:e3>s2.width&&(e3=s2.width),this.el_.style.right=`-${e3}px`}this.write(e2+"%")}write(e2){xe(this.el_,e2)}updateVolume(e2,t2,i2,s2,r2){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",()=>{this.update(e2,t2,i2,s2.toFixed(0)),r2&&r2()})}});class mr extends g{constructor(e2,t2){super(e2,t2),this.update=vt(p(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e2,t2,i2){var s2=100*t2;this.getChild("volumeLevelTooltip").updateVolume(e2,t2,i2,s2,()=>{i2?this.el_.style.bottom=e2.height*t2+"px":this.el_.style.left=e2.width*t2+"px"})}}mr.prototype.options_={children:["volumeLevelTooltip"]},g.registerComponent("MouseVolumeLevelDisplay",mr);class gr extends ir{constructor(e2,t2){super(e2,t2),this.on("slideractive",e3=>this.updateLastVolume_(e3)),this.on(e2,"volumechange",e3=>this.updateARIAAttributes(e3)),e2.ready(()=>this.updateARIAAttributes())}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(e2){Ke(e2)&&super.handleMouseDown(e2)}handleMouseMove(e2){var t2,i2,s2,r2=this.getChild("mouseVolumeLevelDisplay");r2&&(t2=je(s2=this.el()),i2=this.vertical(),s2=He(s2,e2),s2=tr(s2=i2?s2.y:s2.x,0,1),r2.update(t2,s2,i2)),Ke(e2)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e2)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(e2){var t2=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t2),this.el_.setAttribute("aria-valuetext",t2+"%")}volumeAsPercentage_(){return Math.round(100*this.player_.volume())}updateLastVolume_(){let e2=this.player_.volume();this.one("sliderinactive",()=>{0===this.player_.volume()&&this.player_.lastVolume_(e2)})}}gr.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},u||se||gr.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),gr.prototype.playerEvent="volumechange",g.registerComponent("VolumeBar",gr);class fr extends g{constructor(e2,t2={}){var i2,s2;t2.vertical=t2.vertical||!1,void 0!==t2.volumeBar&&!Q(t2.volumeBar)||(t2.volumeBar=t2.volumeBar||{},t2.volumeBar.vertical=t2.vertical),super(e2,t2),i2=this,(s2=e2).tech_&&!s2.tech_.featuresVolumeControl&&i2.addClass("vjs-hidden"),i2.on(s2,"loadstart",function(){s2.tech_.featuresVolumeControl?i2.removeClass("vjs-hidden"):i2.addClass("vjs-hidden")}),this.throttledHandleMouseMove=vt(p(this,this.handleMouseMove),30),this.handleMouseUpHandler_=e3=>this.handleMouseUp(e3),this.on("mousedown",e3=>this.handleMouseDown(e3)),this.on("touchstart",e3=>this.handleMouseDown(e3)),this.on("mousemove",e3=>this.handleMouseMove(e3)),this.on(this.volumeBar,["focus","slideractive"],()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")}),this.on(this.volumeBar,["blur","sliderinactive"],()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")})}createEl(){let e2="vjs-volume-horizontal";return this.options_.vertical&&(e2="vjs-volume-vertical"),super.createEl("div",{className:"vjs-volume-control vjs-control "+e2})}handleMouseDown(e2){var t2=this.el_.ownerDocument;this.on(t2,"mousemove",this.throttledHandleMouseMove),this.on(t2,"touchmove",this.throttledHandleMouseMove),this.on(t2,"mouseup",this.handleMouseUpHandler_),this.on(t2,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e2){var t2=this.el_.ownerDocument;this.off(t2,"mousemove",this.throttledHandleMouseMove),this.off(t2,"touchmove",this.throttledHandleMouseMove),this.off(t2,"mouseup",this.handleMouseUpHandler_),this.off(t2,"touchend",this.handleMouseUpHandler_)}handleMouseMove(e2){this.volumeBar.handleMouseMove(e2)}}fr.prototype.options_={children:["volumeBar"]},g.registerComponent("VolumeControl",fr);class yr extends s{constructor(e2,t2){var i2,s2;super(e2,t2),i2=this,(s2=e2).tech_&&!s2.tech_.featuresMuteControl&&i2.addClass("vjs-hidden"),i2.on(s2,"loadstart",function(){s2.tech_.featuresMuteControl?i2.removeClass("vjs-hidden"):i2.addClass("vjs-hidden")}),this.on(e2,["loadstart","volumechange"],e3=>this.update(e3))}buildCSSClass(){return"vjs-mute-control "+super.buildCSSClass()}handleClick(e2){var t2=this.player_.volume(),i2=this.player_.lastVolume_();0===t2?(this.player_.volume(i2<.1?.1:i2),this.player_.muted(!1)):this.player_.muted(!this.player_.muted())}update(e2){this.updateIcon_(),this.updateControlText_()}updateIcon_(){var e2=this.player_.volume();let t2=3;this.setIcon("volume-high"),u&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===e2||this.player_.muted()?(this.setIcon("volume-mute"),t2=0):e2<.33?(this.setIcon("volume-low"),t2=1):e2<.67&&(this.setIcon("volume-medium"),t2=2),Le(this.el_,[0,1,2,3].reduce((e3,t3)=>e3+(t3?" ":"")+"vjs-vol-"+t3,"")),Pe(this.el_,"vjs-vol-"+t2)}updateControlText_(){var e2=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==e2&&this.controlText(e2)}}yr.prototype.controlText_="Mute",g.registerComponent("MuteToggle",yr);class _r extends g{constructor(e2,t2={}){void 0!==t2.inline?t2.inline=t2.inline:t2.inline=!0,void 0!==t2.volumeControl&&!Q(t2.volumeControl)||(t2.volumeControl=t2.volumeControl||{},t2.volumeControl.vertical=!t2.inline),super(e2,t2),this.handleKeyPressHandler_=e3=>this.handleKeyPress(e3),this.on(e2,["loadstart"],e3=>this.volumePanelState_(e3)),this.on(this.muteToggle,"keyup",e3=>this.handleKeyPress(e3)),this.on(this.volumeControl,"keyup",e3=>this.handleVolumeControlKeyUp(e3)),this.on("keydown",e3=>this.handleKeyPress(e3)),this.on("mouseover",e3=>this.handleMouseOver(e3)),this.on("mouseout",e3=>this.handleMouseOut(e3)),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let e2="vjs-volume-panel-horizontal";return this.options_.inline||(e2="vjs-volume-panel-vertical"),super.createEl("div",{className:"vjs-volume-panel vjs-control "+e2})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(e2){"Escape"===e2.key&&this.muteToggle.focus()}handleMouseOver(e2){this.addClass("vjs-hover"),mt(document,"keyup",this.handleKeyPressHandler_)}handleMouseOut(e2){this.removeClass("vjs-hover"),c(document,"keyup",this.handleKeyPressHandler_)}handleKeyPress(e2){"Escape"===e2.key&&this.handleMouseOut()}}_r.prototype.options_={children:["muteToggle","volumeControl"]},g.registerComponent("VolumePanel",_r);class vr extends s{constructor(e2,t2){super(e2,t2),this.validOptions=[5,10,30],this.skipTime=this.getSkipForwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon("forward-"+this.skipTime),this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime.toLocaleString(e2.language())])),this.show()):this.hide()}getSkipForwardTime(){var e2=this.options_.playerOptions;return e2.controlBar&&e2.controlBar.skipButtons&&e2.controlBar.skipButtons.forward}buildCSSClass(){return`vjs-skip-forward-${this.getSkipForwardTime()} `+super.buildCSSClass()}handleClick(e2){if(!isNaN(this.player_.duration())){var t2=this.player_.currentTime(),i2=(i2=this.player_.liveTracker)&&i2.isLive()?i2.seekableEnd():this.player_.duration();let e3;e3=t2+this.skipTime<=i2?t2+this.skipTime:i2,this.player_.currentTime(e3)}}handleLanguagechange(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}}vr.prototype.controlText_="Skip Forward",g.registerComponent("SkipForward",vr);class br extends s{constructor(e2,t2){super(e2,t2),this.validOptions=[5,10,30],this.skipTime=this.getSkipBackwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon("replay-"+this.skipTime),this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime.toLocaleString(e2.language())])),this.show()):this.hide()}getSkipBackwardTime(){var e2=this.options_.playerOptions;return e2.controlBar&&e2.controlBar.skipButtons&&e2.controlBar.skipButtons.backward}buildCSSClass(){return`vjs-skip-backward-${this.getSkipBackwardTime()} `+super.buildCSSClass()}handleClick(e2){var i2,t2=this.player_.currentTime();let s2;s2=(i2=(i2=this.player_.liveTracker)&&i2.isLive()&&i2.seekableStart())&&t2-this.skipTime<=i2?i2:t2>=this.skipTime?t2-this.skipTime:0,this.player_.currentTime(s2)}handleLanguagechange(){this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime]))}}br.prototype.controlText_="Skip Backward",g.registerComponent("SkipBackward",br);class Tr extends g{constructor(e2,t2){super(e2,t2),t2&&(this.menuButton_=t2.menuButton),this.focusedChild_=-1,this.on("keydown",e3=>this.handleKeyDown(e3)),this.boundHandleBlur_=e3=>this.handleBlur(e3),this.boundHandleTapClick_=e3=>this.handleTapClick(e3)}addEventListenerForItem(e2){e2 instanceof g&&(this.on(e2,"blur",this.boundHandleBlur_),this.on(e2,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(e2){e2 instanceof g&&(this.off(e2,"blur",this.boundHandleBlur_),this.off(e2,["tap","click"],this.boundHandleTapClick_))}removeChild(e2){"string"==typeof e2&&(e2=this.getChild(e2)),this.removeEventListenerForItem(e2),super.removeChild(e2)}addItem(e2){(e2=this.addChild(e2))&&this.addEventListenerForItem(e2)}createEl(){var e2=this.options_.contentElType||"ul";return(e2=(this.contentEl_=l(e2,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu"),super.createEl("div",{append:this.contentEl_,className:"vjs-menu"}))).appendChild(this.contentEl_),mt(e2,"click",function(e3){e3.preventDefault(),e3.stopImmediatePropagation()}),e2}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(e2){let t2=e2.relatedTarget||document.activeElement;this.children().some(e3=>e3.el()===t2)||(e2=this.menuButton_)&&e2.buttonPressed_&&t2!==e2.el().firstChild&&e2.unpressButton()}handleTapClick(t2){var e2;this.menuButton_&&(this.menuButton_.unpressButton(),e2=this.children(),Array.isArray(e2))&&(e2=e2.filter(e3=>e3.el()===t2.target)[0])&&"CaptionSettingsMenuItem"!==e2.name()&&this.menuButton_.focus()}handleKeyDown(e2){"ArrowLeft"===e2.key||"ArrowDown"===e2.key?(e2.preventDefault(),e2.stopPropagation(),this.stepForward()):"ArrowRight"!==e2.key&&"ArrowUp"!==e2.key||(e2.preventDefault(),e2.stopPropagation(),this.stepBack())}stepForward(){let e2=0;void 0!==this.focusedChild_&&(e2=this.focusedChild_+1),this.focus(e2)}stepBack(){let e2=0;void 0!==this.focusedChild_&&(e2=this.focusedChild_-1),this.focus(e2)}focus(e2=0){var t2=this.children().slice();t2.length&&t2[0].hasClass("vjs-menu-title")&&t2.shift(),0<t2.length&&(e2<0?e2=0:t2.length<=e2&&(e2=t2.length-1),t2[this.focusedChild_=e2].el_.focus())}}g.registerComponent("Menu",Tr);class Sr extends g{constructor(e2,t2={}){super(e2,t2),this.menuButton_=new s(e2,t2),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true"),e2=s.prototype.buildCSSClass(),this.menuButton_.el_.className=this.buildCSSClass()+" "+e2,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0,t2=e3=>this.handleClick(e3),this.handleMenuKeyUp_=e3=>this.handleMenuKeyUp(e3),this.on(this.menuButton_,"tap",t2),this.on(this.menuButton_,"click",t2),this.on(this.menuButton_,"keydown",e3=>this.handleKeyDown(e3)),this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover"),this.menu.show(),mt(document,"keyup",this.handleMenuKeyUp_)}),this.on("mouseleave",e3=>this.handleMouseLeave(e3)),this.on("keydown",e3=>this.handleSubmenuKeyDown(e3))}update(){var e2=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e2,this.addChild(e2),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){var e2,t2=new Tr(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title&&(e2=l("li",{className:"vjs-menu-title",textContent:m(this.options_.title),tabIndex:-1}),e2=new g(this.player_,{el:e2}),t2.addItem(e2)),this.items=this.createItems(),this.items)for(let e3=0;e3<this.items.length;e3++)t2.addItem(this.items[e3]);return t2}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}setIcon(e2){super.setIcon(e2,this.menuButton_.el_)}buildWrapperCSSClass(){let e2="vjs-menu-button";return!0===this.options_.inline?e2+="-inline":e2+="-popup",`vjs-menu-button ${e2} ${s.prototype.buildCSSClass()} `+super.buildCSSClass()}buildCSSClass(){let e2="vjs-menu-button";return!0===this.options_.inline?e2+="-inline":e2+="-popup",`vjs-menu-button ${e2} `+super.buildCSSClass()}controlText(e2,t2=this.menuButton_.el()){return this.menuButton_.controlText(e2,t2)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(e2){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(e2){this.removeClass("vjs-hover"),c(document,"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(e2){"Escape"===e2.key||"Tab"===e2.key?(this.buttonPressed_&&this.unpressButton(),"Tab"===!e2.key&&(e2.preventDefault(),this.menuButton_.focus())):"Up"!==e2.key&&("Down"!==e2.key||this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled)||this.buttonPressed_||(e2.preventDefault(),this.pressButton())}handleMenuKeyUp(e2){"Escape"!==e2.key&&"Tab"!==e2.key||this.removeClass("vjs-hover")}handleSubmenuKeyPress(e2){this.handleSubmenuKeyDown(e2)}handleSubmenuKeyDown(e2){"Escape"!==e2.key&&"Tab"!==e2.key||(this.buttonPressed_&&this.unpressButton(),"Tab"===!e2.key&&(e2.preventDefault(),this.menuButton_.focus()))}pressButton(){this.enabled_&&(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),u&&ke()||this.menu.focus())}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}}g.registerComponent("MenuButton",Sr);class wr extends Sr{constructor(e2,t2){let i2=t2.tracks;if(super(e2,t2),this.items.length<=1&&this.hide(),i2){let e3=p(this,this.update);i2.addEventListener("removetrack",e3),i2.addEventListener("addtrack",e3),i2.addEventListener("labelchange",e3),this.player_.on("ready",e3),this.player_.on("dispose",function(){i2.removeEventListener("removetrack",e3),i2.removeEventListener("addtrack",e3),i2.removeEventListener("labelchange",e3)})}}}g.registerComponent("TrackButton",wr);class Er extends Us{constructor(e2,t2){super(e2,t2),this.selectable=t2.selectable,this.isSelected_=t2.selected||!1,this.multiSelectable=t2.multiSelectable,this.selected(this.isSelected_),this.selectable?this.multiSelectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitemradio"):this.el_.setAttribute("role","menuitem")}createEl(e2,t2,i2){return this.nonIconControl=!0,t2=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},t2),i2),i2=l("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),this.player_.options_.experimentalSvgIcons?t2.appendChild(i2):t2.replaceChild(i2,t2.querySelector(".vjs-icon-placeholder")),t2}handleKeyDown(e2){["Tab","Escape","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"].includes(e2.key)||super.handleKeyDown(e2)}handleClick(e2){this.selected(!0)}selected(e2){this.selectable&&(e2?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}}g.registerComponent("MenuItem",Er);class Cr extends Er{constructor(e2,t2){var i2=t2.track;let s2=e2.textTracks(),r2=(t2.label=i2.label||i2.language||"Unknown",t2.selected="showing"===i2.mode,super(e2,t2),this.track=i2,this.kinds=(t2.kinds||[t2.kind||this.track.kind]).filter(Boolean),(...e3)=>{this.handleTracksChange.apply(this,e3)}),n2=(...e3)=>{this.handleSelectedLanguageChange.apply(this,e3)};if(e2.on(["loadstart","texttrackchange"],r2),s2.addEventListener("change",r2),s2.addEventListener("selectedlanguagechange",n2),this.on("dispose",function(){e2.off(["loadstart","texttrackchange"],r2),s2.removeEventListener("change",r2),s2.removeEventListener("selectedlanguagechange",n2)}),void 0===s2.onchange){let e3;this.on(["tap","click"],function(){if("object"!=typeof window.Event)try{e3=new window.Event("change")}catch(e4){}e3||(e3=document.createEvent("Event")).initEvent("change",!0,!0),s2.dispatchEvent(e3)})}this.handleTracksChange()}handleClick(e2){var t2=this.track,i2=this.player_.textTracks();if(super.handleClick(e2),i2)for(let e3=0;e3<i2.length;e3++){var s2=i2[e3];-1!==this.kinds.indexOf(s2.kind)&&(s2===t2?"showing"!==s2.mode&&(s2.mode="showing"):"disabled"!==s2.mode&&(s2.mode="disabled"))}}handleTracksChange(e2){var t2="showing"===this.track.mode;t2!==this.isSelected_&&this.selected(t2)}handleSelectedLanguageChange(e2){var t2;"showing"!==this.track.mode||(t2=this.player_.cache_.selectedLanguage)&&t2.enabled&&t2.language===this.track.language&&t2.kind!==this.track.kind||(this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind})}dispose(){this.track=null,super.dispose()}}g.registerComponent("TextTrackMenuItem",Cr);class kr extends Cr{constructor(e2,t2){t2.track={player:e2,kind:t2.kind,kinds:t2.kinds,default:!1,mode:"disabled"},t2.kinds||(t2.kinds=[t2.kind]),t2.track.label=t2.label||t2.kinds.join(" and ")+" off",t2.selectable=!0,t2.multiSelectable=!1,super(e2,t2)}handleTracksChange(e2){var i2=this.player().textTracks();let s2=!0;for(let e3=0,t2=i2.length;e3<t2;e3++){var r2=i2[e3];if(-1<this.options_.kinds.indexOf(r2.kind)&&"showing"===r2.mode){s2=!1;break}}s2!==this.isSelected_&&this.selected(s2)}handleSelectedLanguageChange(e2){var i2=this.player().textTracks();let s2=!0;for(let e3=0,t2=i2.length;e3<t2;e3++){var r2=i2[e3];if(-1<["captions","descriptions","subtitles"].indexOf(r2.kind)&&"showing"===r2.mode){s2=!1;break}}s2&&(this.player_.cache_.selectedLanguage={enabled:!1})}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label),super.handleLanguagechange()}}g.registerComponent("OffTextTrackMenuItem",kr);class Ir extends wr{constructor(e2,t2={}){t2.tracks=e2.textTracks(),super(e2,t2)}createItems(t2=[],i2=Cr){let e2;this.label_&&(e2=this.label_+" off"),t2.push(new kr(this.player_,{kinds:this.kinds_,kind:this.kind_,label:e2})),this.hideThreshold_+=1;var s2=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let e3=0;e3<s2.length;e3++){var r2,n2=s2[e3];-1<this.kinds_.indexOf(n2.kind)&&((r2=new i2(this.player_,{track:n2,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1})).addClass(`vjs-${n2.kind}-menu-item`),t2.push(r2))}return t2}}g.registerComponent("TextTrackButton",Ir);class xr extends Er{constructor(e2,t2){var i2=t2.track,s2=t2.cue,r2=e2.currentTime();t2.selectable=!0,t2.multiSelectable=!1,t2.label=s2.text,t2.selected=s2.startTime<=r2&&r2<s2.endTime,super(e2,t2),this.track=i2,this.cue=s2}handleClick(e2){super.handleClick(),this.player_.currentTime(this.cue.startTime)}}g.registerComponent("ChaptersTrackMenuItem",xr);class Ar extends Ir{constructor(e2,t2,i2){super(e2,t2,i2),this.setIcon("chapters"),this.selectCurrentItem_=()=>{this.items.forEach(e3=>{e3.selected(this.track_.activeCues[0]===e3.cue)})}}buildCSSClass(){return"vjs-chapters-button "+super.buildCSSClass()}buildWrapperCSSClass(){return"vjs-chapters-button "+super.buildWrapperCSSClass()}update(e2){e2&&e2.track&&"chapters"!==e2.track.kind||((e2=this.findChaptersTrack())!==this.track_?(this.setTrack(e2),super.update()):(!this.items||e2&&e2.cues&&e2.cues.length!==this.items.length)&&super.update())}setTrack(e2){var t2;this.track_!==e2&&(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_&&((t2=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_))&&t2.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null),this.track_=e2,this.track_)&&(this.track_.mode="hidden",(t2=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_))&&t2.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_))}findChaptersTrack(){var t2=this.player_.textTracks()||[];for(let e2=t2.length-1;0<=e2;e2--){var i2=t2[e2];if(i2.kind===this.kind_)return i2}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(m(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){var i2=[];if(this.track_){var s2=this.track_.cues;if(s2)for(let e2=0,t2=s2.length;e2<t2;e2++){var r2=s2[e2];r2=new xr(this.player_,{track:this.track_,cue:r2});i2.push(r2)}}return i2}}Ar.prototype.kind_="chapters",Ar.prototype.controlText_="Chapters",g.registerComponent("ChaptersButton",Ar);class Dr extends Ir{constructor(e2,t2,i2){super(e2,t2,i2),this.setIcon("audio-description");let s2=e2.textTracks(),r2=p(this,this.handleTracksChange);s2.addEventListener("change",r2),this.on("dispose",function(){s2.removeEventListener("change",r2)})}handleTracksChange(e2){var i2=this.player().textTracks();let s2=!1;for(let e3=0,t2=i2.length;e3<t2;e3++){var r2=i2[e3];if(r2.kind!==this.kind_&&"showing"===r2.mode){s2=!0;break}}s2?this.disable():this.enable()}buildCSSClass(){return"vjs-descriptions-button "+super.buildCSSClass()}buildWrapperCSSClass(){return"vjs-descriptions-button "+super.buildWrapperCSSClass()}}Dr.prototype.kind_="descriptions",Dr.prototype.controlText_="Descriptions",g.registerComponent("DescriptionsButton",Dr);class Pr extends Ir{constructor(e2,t2,i2){super(e2,t2,i2),this.setIcon("subtitles")}buildCSSClass(){return"vjs-subtitles-button "+super.buildCSSClass()}buildWrapperCSSClass(){return"vjs-subtitles-button "+super.buildWrapperCSSClass()}}Pr.prototype.kind_="subtitles",Pr.prototype.controlText_="Subtitles",g.registerComponent("SubtitlesButton",Pr);class Lr extends Cr{constructor(e2,t2){t2.track={player:e2,kind:t2.kind,label:t2.kind+" settings",selectable:!1,default:!1,mode:"disabled"},t2.selectable=!1,t2.name="CaptionSettingsMenuItem",super(e2,t2),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+t2.kind+" settings dialog")}handleClick(e2){this.player().getChild("textTrackSettings").open()}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.kind+" settings"),super.handleLanguagechange()}}g.registerComponent("CaptionSettingsMenuItem",Lr);class Or extends Ir{constructor(e2,t2,i2){super(e2,t2,i2),this.setIcon("captions")}buildCSSClass(){return"vjs-captions-button "+super.buildCSSClass()}buildWrapperCSSClass(){return"vjs-captions-button "+super.buildWrapperCSSClass()}createItems(){var e2=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e2.push(new Lr(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(e2)}}Or.prototype.kind_="captions",Or.prototype.controlText_="Captions",g.registerComponent("CaptionsButton",Or);class Rr extends Cr{createEl(e2,t2,i2){return t2=(e2=super.createEl(e2,t2,i2)).querySelector(".vjs-menu-item-text"),"captions"===this.options_.track.kind&&(this.player_.options_.experimentalSvgIcons?this.setIcon("captions",e2):t2.appendChild(l("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),t2.appendChild(l("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),e2}}g.registerComponent("SubsCapsMenuItem",Rr);class Nr extends Ir{constructor(e2,t2={}){super(e2,t2),this.label_="subtitles",this.setIcon("subtitles"),-1<["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)&&(this.label_="captions",this.setIcon("captions")),this.menuButton_.controlText(m(this.label_))}buildCSSClass(){return"vjs-subs-caps-button "+super.buildCSSClass()}buildWrapperCSSClass(){return"vjs-subs-caps-button "+super.buildWrapperCSSClass()}createItems(){let e2=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e2.push(new Lr(this.player_,{kind:this.label_})),this.hideThreshold_+=1),super.createItems(e2,Rr)}}Nr.prototype.kinds_=["captions","subtitles"],Nr.prototype.controlText_="Subtitles",g.registerComponent("SubsCapsButton",Nr);class Mr extends Er{constructor(e2,t2){var i2=t2.track;let s2=e2.audioTracks(),r2=(t2.label=i2.label||i2.language||"Unknown",t2.selected=i2.enabled,super(e2,t2),this.track=i2,this.addClass(`vjs-${i2.kind}-menu-item`),(...e3)=>{this.handleTracksChange.apply(this,e3)});s2.addEventListener("change",r2),this.on("dispose",()=>{s2.removeEventListener("change",r2)})}createEl(e2,t2,i2){return t2=(e2=super.createEl(e2,t2,i2)).querySelector(".vjs-menu-item-text"),0<=["main-desc","descriptions"].indexOf(this.options_.track.kind)&&(t2.appendChild(l("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),t2.appendChild(l("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),e2}handleClick(e2){if(super.handleClick(e2),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){var t2=this.player_.audioTracks();for(let e3=0;e3<t2.length;e3++){var i2=t2[e3];i2!==this.track&&(i2.enabled=i2===this.track)}}}handleTracksChange(e2){this.selected(this.track.enabled)}}g.registerComponent("AudioTrackMenuItem",Mr);class Ur extends wr{constructor(e2,t2={}){t2.tracks=e2.audioTracks(),super(e2,t2),this.setIcon("audio")}buildCSSClass(){return"vjs-audio-button "+super.buildCSSClass()}buildWrapperCSSClass(){return"vjs-audio-button "+super.buildWrapperCSSClass()}createItems(t2=[]){this.hideThreshold_=1;var i2=this.player_.audioTracks();for(let e2=0;e2<i2.length;e2++){var s2=i2[e2];t2.push(new Mr(this.player_,{track:s2,selectable:!0,multiSelectable:!1}))}return t2}}Ur.prototype.controlText_="Audio Track",g.registerComponent("AudioTrackButton",Ur);class Br extends Er{constructor(e2,t2){var i2=t2.rate,s2=parseFloat(i2,10);t2.label=i2,t2.selected=s2===e2.playbackRate(),t2.selectable=!0,t2.multiSelectable=!1,super(e2,t2),this.label=i2,this.rate=s2,this.on(e2,"ratechange",e3=>this.update(e3))}handleClick(e2){super.handleClick(),this.player().playbackRate(this.rate)}update(e2){this.selected(this.player().playbackRate()===this.rate)}}Br.prototype.contentElType="button",g.registerComponent("PlaybackRateMenuItem",Br);class Fr extends Sr{constructor(e2,t2){super(e2,t2),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(e2,"loadstart",e3=>this.updateVisibility(e3)),this.on(e2,"ratechange",e3=>this.updateLabel(e3)),this.on(e2,"playbackrateschange",e3=>this.handlePlaybackRateschange(e3))}createEl(){var e2=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=l("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e2.appendChild(this.labelEl_),e2}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return"vjs-playback-rate "+super.buildCSSClass()}buildWrapperCSSClass(){return"vjs-playback-rate "+super.buildWrapperCSSClass()}createItems(){var t2=this.playbackRates(),i2=[];for(let e2=t2.length-1;0<=e2;e2--)i2.push(new Br(this.player(),{rate:t2[e2]+"x"}));return i2}handlePlaybackRateschange(e2){this.update()}playbackRates(){var e2=this.player();return e2.playbackRates&&e2.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&0<this.playbackRates().length}updateVisibility(e2){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(e2){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}}Fr.prototype.controlText_="Playback Rate",g.registerComponent("PlaybackRateMenuButton",Fr);class qr extends g{buildCSSClass(){return"vjs-spacer "+super.buildCSSClass()}createEl(e2="div",t2={},i2={}){return t2.className||(t2.className=this.buildCSSClass()),super.createEl(e2,t2,i2)}}g.registerComponent("Spacer",qr);g.registerComponent("CustomControlSpacer",class jr extends qr{buildCSSClass(){return"vjs-custom-control-spacer "+super.buildCSSClass()}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:" "})}});class Vr extends g{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}}Vr.prototype.options_={children:["playToggle","skipBackward","skipForward","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","pictureInPictureToggle","fullscreenToggle"]},g.registerComponent("ControlBar",Vr);class Hr extends ii{constructor(e2,t2){super(e2,t2),this.on(e2,"error",e3=>{this.open(e3)})}buildCSSClass(){return"vjs-error-display "+super.buildCSSClass()}content(){var e2=this.player().error();return e2?this.localize(e2.message):""}}Hr.prototype.options_=Object.assign({},ii.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),g.registerComponent("ErrorDisplay",Hr);class zr extends g{constructor(e2,t2={}){super(e2,t2),this.el_.setAttribute("aria-labelledby",this.selectLabelledbyIds)}createEl(){return this.selectLabelledbyIds=[this.options_.legendId,this.options_.labelId].join(" ").trim(),l("select",{id:this.options_.id},{},this.options_.SelectOptions.map(e2=>{var t2=(this.options_.labelId||"vjs-track-option-"+lt++)+"-"+e2[1].replace(/\W+/g,"");return(e2=l("option",{id:t2,value:this.localize(e2[0]),textContent:this.localize(e2[1])})).setAttribute("aria-labelledby",this.selectLabelledbyIds+" "+t2),e2}))}}g.registerComponent("TextTrackSelect",zr);class $r extends g{constructor(t2,e2={}){super(t2,e2);var i2;e2=l("legend",{textContent:this.localize(this.options_.legendText),id:this.options_.legendId}),this.el().appendChild(e2),e2=this.options_.selects;for(i2 of e2){var s2=this.options_.selectConfigs[i2],r2=s2.className,n2=s2.id.replace("%s",this.options_.id_);let e3=null;var a2="vjs_select_"+lt++;r2=("colors"===this.options_.type&&(e3=l("span",{className:r2}),(r2=l("label",{id:n2,className:"vjs-label",textContent:this.localize(s2.label)})).setAttribute("for",a2),e3.appendChild(r2)),new zr(t2,{SelectOptions:s2.options,legendId:this.options_.legendId,id:a2,labelId:n2}));this.addChild(r2),"colors"===this.options_.type&&(e3.appendChild(r2.el()),this.el().appendChild(e3))}}createEl(){return l("fieldset",{className:this.options_.className})}}g.registerComponent("TextTrackFieldset",$r);class Wr extends g{constructor(e2,t2={}){super(e2,t2);t2=this.options_.textTrackComponentid;var i2=new $r(e2,{id_:t2,legendId:"captions-text-legend-"+t2,legendText:this.localize("Text"),className:"vjs-fg vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(i2),i2=new $r(e2,{id_:t2,legendId:"captions-background-"+t2,legendText:this.localize("Text Background"),className:"vjs-bg vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"colors"}),this.addChild(i2),i2=new $r(e2,{id_:t2,legendId:"captions-window-"+t2,legendText:this.localize("Caption Area Background"),className:"vjs-window vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(i2)}createEl(){return l("div",{className:"vjs-track-settings-colors"})}}g.registerComponent("TextTrackSettingsColors",Wr);class Gr extends g{constructor(e2,t2={}){super(e2,t2);t2=this.options_.textTrackComponentid;var i2=new $r(e2,{id_:t2,legendId:"captions-font-size-"+t2,legendText:"Font Size",className:"vjs-font-percent vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(i2),i2=new $r(e2,{id_:t2,legendId:"captions-edge-style-"+t2,legendText:this.localize("Text Edge Style"),className:"vjs-edge-style vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"font"}),this.addChild(i2),i2=new $r(e2,{id_:t2,legendId:"captions-font-family-"+t2,legendText:this.localize("Font Family"),className:"vjs-font-family vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(i2)}createEl(){return l("div",{className:"vjs-track-settings-font"})}}g.registerComponent("TextTrackSettingsFont",Gr);class Xr extends g{constructor(e2,t2={}){super(e2,t2),(t2=new s(e2,{controlText:this.localize("restore all settings to the default values"),className:"vjs-default-button"})).el().classList.remove("vjs-control","vjs-button"),t2.el().textContent=this.localize("Reset"),this.addChild(t2),t2=this.localize("Done"),(e2=new s(e2,{controlText:t2,className:"vjs-done-button"})).el().classList.remove("vjs-control","vjs-button"),e2.el().textContent=t2,this.addChild(e2)}createEl(){return l("div",{className:"vjs-track-settings-controls"})}}g.registerComponent("TrackSettingsControls",Xr);let Kr="vjs-text-track-settings";var Jr=["#F00","Red"],Zr=["#FFF","White"];let rn={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[e=["#000","Black"],Zr,Jr,Qr=["#0F0","Green"],xi=["#00F","Blue"],n=["#FF0","Yellow"],r=["#F0F","Magenta"],Yr=["#0FF","Cyan"]],className:"vjs-bg-color"},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Opacity",options:[en=["1","Opaque"],tn=["0.5","Semi-Transparent"],sn=["0","Transparent"]],className:"vjs-bg-opacity vjs-opacity"},color:{selector:".vjs-text-color > select",id:"captions-foreground-color-%s",label:"Color",options:[Zr,e,Jr,Qr,xi,n,r,Yr],className:"vjs-text-color"},edgeStyle:{selector:".vjs-edge-style > select",id:"",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Drop shadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:e2=>"1.00"===e2?null:Number(e2)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[en,tn],className:"vjs-text-opacity vjs-opacity"},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color",className:"vjs-window-color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Opacity",options:[sn,tn,en],className:"vjs-window-opacity vjs-opacity"}};function nn(e2,t2){if((e2=t2?t2(e2):e2)&&"none"!==e2)return e2}rn.windowColor.options=rn.backgroundColor.options;g.registerComponent("TextTrackSettings",class an extends ii{constructor(e2,t2){t2.temporary=!1,super(e2,t2),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.renderModalComponents(e2),this.endDialog=l("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),void 0===t2.persistTextTrackSettings&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.bindFunctionsToSelectsAndButtons(),this.options_.persistTextTrackSettings&&this.restoreSettings()}renderModalComponents(e2){var t2=new Wr(e2,{textTrackComponentid:this.id_,selectConfigs:rn,fieldSets:[["color","textOpacity"],["backgroundColor","backgroundOpacity"],["windowColor","windowOpacity"]]});this.addChild(t2),t2=new Gr(e2,{textTrackComponentid:this.id_,selectConfigs:rn,fieldSets:[["fontPercent"],["edgeStyle"],["fontFamily"]]}),this.addChild(t2),t2=new Xr(e2);this.addChild(t2)}bindFunctionsToSelectsAndButtons(){this.on(this.$(".vjs-done-button"),["click","tap"],()=>{this.saveSettings(),this.close()}),this.on(this.$(".vjs-default-button"),["click","tap"],()=>{this.setDefaults(),this.updateDisplay()}),X(rn,e2=>{this.on(this.$(e2.selector),"change",this.updateDisplay)})}dispose(){this.endDialog=null,super.dispose()}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return K(rn,(e2,t2,i2)=>{s2=this.$(t2.selector),t2=t2.parser;var s2=nn(s2.options[s2.options.selectedIndex].value,t2);return void 0!==s2&&(e2[i2]=s2),e2},{})}setValues(n2){X(rn,(e2,t2)=>{var i2=this.$(e2.selector),s2=n2[t2],r2=e2.parser;if(s2)for(let e3=0;e3<i2.options.length;e3++)if(nn(i2.options[e3].value,r2)===s2){i2.selectedIndex=e3;break}})}setDefaults(){X(rn,e2=>{var t2=e2.hasOwnProperty("default")?e2.default:0;this.$(e2.selector).selectedIndex=t2})}restoreSettings(){let e2;try{e2=JSON.parse(window.localStorage.getItem(Kr))}catch(e3){o.warn(e3)}e2&&this.setValues(e2)}saveSettings(){if(this.options_.persistTextTrackSettings){var e2=this.getValues();try{Object.keys(e2).length?window.localStorage.setItem(Kr,JSON.stringify(e2)):window.localStorage.removeItem(Kr)}catch(e3){o.warn(e3)}}}updateDisplay(){var e2=this.player_.getChild("textTrackDisplay");e2&&e2.updateDisplay()}handleLanguagechange(){this.fill(),this.renderModalComponents(this.player_),this.bindFunctionsToSelectsAndButtons()}});g.registerComponent("ResizeManager",class on extends g{constructor(e2,t2){let i2=t2.ResizeObserver||window.ResizeObserver;super(e2,d({createEl:!(i2=null!==t2.ResizeObserver&&i2),reportTouchActivity:!1},t2)),this.ResizeObserver=t2.ResizeObserver||window.ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=bt(()=>{this.resizeHandler()},100,!1,this),i2?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(e2.el())):(this.loadListener_=()=>{if(this.el_&&this.el_.contentWindow){let e3=this.debouncedHandler_,t3=this.unloadListener_=function(){c(this,"resize",e3),c(this,"unload",t3),t3=null};mt(this.el_.contentWindow,"unload",t3),mt(this.el_.contentWindow,"resize",e3)}},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}});let ln={trackingThreshold:20,liveTolerance:15};g.registerComponent("LiveTracker",class dn extends g{constructor(e2,t2){super(e2,d(ln,t2,{createEl:!1})),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=e3=>this.handlePlay(e3),this.handleFirstTimeupdate_=e3=>this.handleFirstTimeupdate(e3),this.handleSeeked_=e3=>this.handleSeeked(e3),this.seekToLiveEdge_=e3=>this.seekToLiveEdge(e3),this.reset_(),this.on(this.player_,"durationchange",e3=>this.handleDurationchange(e3)),this.on(this.player_,"canplay",()=>this.toggleTracking())}trackLive_(){if((t2=this.player_.seekable())&&t2.length){var t2=Number(window.performance.now().toFixed(4)),i2=-1===this.lastTime_?0:(t2-this.lastTime_)/1e3;t2=(this.lastTime_=t2,this.pastSeekEnd_=this.pastSeekEnd()+i2,this.liveCurrentTime()),i2=this.player_.currentTime();let e2=this.player_.paused()||this.seekedBehindLive_||Math.abs(t2-i2)>this.options_.liveTolerance;(e2=!(!this.timeupdateSeen_||t2===1/0)&&e2)!==this.behindLiveEdge_&&(this.behindLiveEdge_=e2,this.trigger("liveedgechange"))}}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,30),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){var e2=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&2<e2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){var e2=this.player_.seekable(),t2=[];let i2=e2?e2.length:0;for(;i2--;)t2.push(e2.end(i2));return t2.length?t2.sort()[t2.length-1]:1/0}seekableStart(){var e2=this.player_.seekable(),t2=[];let i2=e2?e2.length:0;for(;i2--;)t2.push(e2.start(i2));return t2.length?t2.sort()[0]:0}liveWindow(){var e2=this.liveCurrentTime();return e2===1/0?0:e2-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){var e2=this.seekableEnd();return-1!==this.lastSeekEnd_&&e2!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e2,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return"number"==typeof this.trackingInterval_}seekToLiveEdge(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}});g.registerComponent("TitleBar",class hn extends g{constructor(e2,t2){super(e2,t2),this.on("statechanged",e3=>this.updateDom_()),this.updateDom_()}createEl(){return this.els={title:l("div",{className:"vjs-title-bar-title",id:"vjs-title-bar-title-"+lt++}),description:l("div",{className:"vjs-title-bar-description",id:"vjs-title-bar-description-"+lt++})},l("div",{className:"vjs-title-bar"},{},J(this.els))}updateDom_(){var e2=this.player_.tech_;let s2=e2&&e2.el_,r2={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach(e3=>{var t2=this.state[e3],i2=this.els[e3];e3=r2[e3];$e(i2),t2&&xe(i2,t2),s2&&(s2.removeAttribute(e3),t2)&&s2.setAttribute(e3,i2.id)}),this.state.title||this.state.description?this.show():this.hide()}update(e2){this.setState(e2)}dispose(){var e2;(e2=(e2=this.player_.tech_)&&e2.el_)&&(e2.removeAttribute("aria-labelledby"),e2.removeAttribute("aria-describedby")),super.dispose(),this.els=null}});let un={initialDisplay:4e3,position:[],takeFocus:!1};function pn(s2){let r2=s2.el();if(!r2.resetSourceWatch_){let t2={},e2=_n(s2),i2=t3=>(...e3)=>(e3=t3.apply(r2,e3),gn(s2),e3);["append","appendChild","insertAdjacentHTML"].forEach(e3=>{r2[e3]&&(t2[e3]=r2[e3],r2[e3]=i2(t2[e3]))}),Object.defineProperty(r2,"innerHTML",d(e2,{set:i2(e2.set)})),r2.resetSourceWatch_=()=>{r2.resetSourceWatch_=null,Object.keys(t2).forEach(e3=>{r2[e3]=t2[e3]}),Object.defineProperty(r2,"innerHTML",e2)},s2.one("sourceset",r2.resetSourceWatch_)}}g.registerComponent("TransientButton",class cn extends s{constructor(e2,t2){super(e2,t2=d(un,t2)),this.controlText(t2.controlText),this.hide(),this.on(this.player_,["useractive","userinactive"],e3=>{this.removeClass("force-display")})}buildCSSClass(){return"vjs-transient-button focus-visible "+this.options_.position.map(e2=>"vjs-"+e2).join(" ")}createEl(){var e2=l("button",{},{type:"button",class:this.buildCSSClass()},l("span"));return this.controlTextEl_=e2.querySelector("span"),e2}show(){super.show(),this.addClass("force-display"),this.options_.takeFocus&&this.el().focus({preventScroll:!0}),this.forceDisplayTimeout=this.player_.setTimeout(()=>{this.removeClass("force-display")},this.options_.initialDisplay)}hide(){this.removeClass("force-display"),super.hide()}dispose(){this.player_.clearTimeout(this.forceDisplayTimeout),super.dispose()}});let gn=t2=>{var e2=t2.el();if(e2.hasAttribute("src"))t2.triggerSourceset(e2.src);else{var i2=t2.$$("source"),s2=[];let e3="";if(!i2.length)return!1;for(let e4=0;e4<i2.length;e4++){var r2=i2[e4].src;r2&&-1===s2.indexOf(r2)&&s2.push(r2)}if(!s2.length)return!1;1===s2.length&&(e3=s2[0]),t2.triggerSourceset(e3)}return!0},fn=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(e2){for(var t2=document.createElement(this.nodeName.toLowerCase()),i2=(t2.innerHTML=e2,document.createDocumentFragment());t2.childNodes.length;)i2.appendChild(t2.childNodes[0]);return this.innerText="",window.Element.prototype.appendChild.call(this,i2),this.innerHTML}}),yn=(t2,i2)=>{let s2={};for(let e2=0;e2<t2.length&&!((s2=Object.getOwnPropertyDescriptor(t2[e2],i2))&&s2.set&&s2.get);e2++);return s2.enumerable=!0,s2.configurable=!0,s2},_n=e2=>yn([e2.el(),window.HTMLMediaElement.prototype,window.Element.prototype,fn],"innerHTML"),vn=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?fi(window.Element.prototype.getAttribute.call(this,"src")):""},set(e2){return window.Element.prototype.setAttribute.call(this,"src",e2),e2}});class b extends v{constructor(e2,t2){super(e2,t2),t2=e2.source;let i2=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&"VIDEO"===this.el_.tagName,t2&&(this.el_.currentSrc!==t2.src||e2.tag&&3===e2.tag.initNetworkState_)?this.setSource(t2):this.handleLateInit_(this.el_),e2.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){var s2=this.el_.childNodes;let e3=s2.length;for(var r2=[];e3--;){var n2=s2[e3];"track"===n2.nodeName.toLowerCase()&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(n2),this.remoteTextTracks().addTrack(n2.track),this.textTracks().addTrack(n2.track),i2||this.el_.hasAttribute("crossorigin")||!yi(n2.src)||(i2=!0)):r2.push(n2))}for(let e4=0;e4<r2.length;e4++)this.el_.removeChild(r2[e4])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&i2&&o.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),this.restoreMetadataTracksInIOSNativePlayer_(),(ve||ge)&&!0===e2.nativeControlsForTouch&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),b.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){!function mn(n2){if(n2.featuresSourceset){let r2=n2.el();if(!r2.resetSourceset_){let t2=yn([n2.el(),window.HTMLMediaElement.prototype,vn],"src"),i2=r2.setAttribute,s2=r2.load;Object.defineProperty(r2,"src",d(t2,{set:e3=>(e3=t2.set.call(r2,e3),n2.triggerSourceset(r2.src),e3)})),r2.setAttribute=(e3,t3)=>(t3=i2.call(r2,e3,t3),/src/i.test(e3)&&n2.triggerSourceset(r2.src),t3),r2.load=()=>{var e3=s2.call(r2);return gn(n2)||(n2.triggerSourceset(""),pn(n2)),e3},r2.currentSrc?n2.triggerSourceset(r2.currentSrc):gn(n2)||pn(n2),r2.resetSourceset_=()=>{r2.resetSourceset_=null,r2.load=s2,r2.setAttribute=i2,Object.defineProperty(r2,"src",t2),r2.resetSourceWatch_&&r2.resetSourceWatch_()}}}}(this)}restoreMetadataTracksInIOSNativePlayer_(){let s2,i2=this.textTracks(),e2=()=>{s2=[];for(let e3=0;e3<i2.length;e3++){var t2=i2[e3];"metadata"===t2.kind&&s2.push({track:t2,storedMode:t2.mode})}},r2=(e2(),i2.addEventListener("change",e2),this.on("dispose",()=>i2.removeEventListener("change",e2)),()=>{for(let e3=0;e3<s2.length;e3++){var t2=s2[e3];"disabled"===t2.track.mode&&t2.track.mode!==t2.storedMode&&(t2.track.mode=t2.storedMode)}i2.removeEventListener("change",r2)});this.on("webkitbeginfullscreen",()=>{i2.removeEventListener("change",e2),i2.removeEventListener("change",r2),i2.addEventListener("change",r2)}),this.on("webkitendfullscreen",()=>{i2.removeEventListener("change",e2),i2.addEventListener("change",e2),i2.removeEventListener("change",r2)})}overrideNative_(e2,i2){if(i2===this[`featuresNative${e2}Tracks`]){let t2=e2.toLowerCase();this[t2+"TracksListeners_"]&&Object.keys(this[t2+"TracksListeners_"]).forEach(e3=>{this.el()[t2+"Tracks"].removeEventListener(e3,this[t2+"TracksListeners_"][e3])}),this[`featuresNative${e2}Tracks`]=!i2,this[t2+"TracksListeners_"]=null,this.proxyNativeTracksForType_(t2)}}overrideNativeAudioTracks(e2){this.overrideNative_("Audio",e2)}overrideNativeVideoTracks(e2){this.overrideNative_("Video",e2)}proxyNativeTracksForType_(i2){var s2=Hi[i2];let r2=this.el()[s2.getterName],n2=this[s2.getterName]();if(this[`featuresNative${s2.capitalName}Tracks`]&&r2&&r2.addEventListener){let e2={change:e3=>{var t3={type:"change",target:n2,currentTarget:n2,srcElement:n2};n2.trigger(t3),"text"===i2&&this[zi.remoteText.getterName]().trigger(t3)},addtrack(e3){n2.addTrack(e3.track)},removetrack(e3){n2.removeTrack(e3.track)}},t2=function(){var e3=[];for(let i3=0;i3<n2.length;i3++){let t3=!1;for(let e4=0;e4<r2.length;e4++)if(r2[e4]===n2[i3]){t3=!0;break}t3||e3.push(n2[i3])}for(;e3.length;)n2.removeTrack(e3.shift())};this[s2.getterName+"Listeners_"]=e2,Object.keys(e2).forEach(t3=>{let i3=e2[t3];r2.addEventListener(t3,i3),this.on("dispose",e3=>r2.removeEventListener(t3,i3))}),this.on("loadstart",t2),this.on("dispose",e3=>this.off("loadstart",t2))}}proxyNativeTracks_(){Hi.names.forEach(e2=>{this.proxyNativeTracksForType_(e2)})}createEl(){let t2=this.options_.tag;t2&&(this.options_.playerElIngest||this.movingMediaElementInDOM)||(t2?(e2=t2.cloneNode(!0),t2.parentNode&&t2.parentNode.insertBefore(e2,t2),b.disposeMediaElement(t2),t2=e2):(t2=document.createElement("video"),e2=d({},this.options_.tag&&Ne(this.options_.tag)),ve&&!0===this.options_.nativeControlsForTouch||delete e2.controls,Re(t2,Object.assign(e2,{id:this.options_.techId,class:"vjs-tech"}))),t2.playerId=this.options_.playerId),void 0!==this.options_.preload&&Ue(t2,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(t2.disablePictureInPicture=this.options_.disablePictureInPicture);var e2,i2=["loop","muted","playsinline","autoplay"];for(let e3=0;e3<i2.length;e3++){var s2=i2[e3],r2=this.options_[s2];void 0!==r2&&(r2?Ue(t2,s2,s2):Be(t2,s2),t2[s2]=r2)}return t2}handleLateInit_(t2){if(0!==t2.networkState&&3!==t2.networkState)if(0===t2.readyState){let e2=!1,t3=function(){e2=!0},i2=(this.on("loadstart",t3),function(){e2||this.trigger("loadstart")});this.on("loadedmetadata",i2),this.ready(function(){this.off("loadstart",t3),this.off("loadedmetadata",i2),e2||this.trigger("loadstart")})}else{let e2=["loadstart"];e2.push("loadedmetadata"),2<=t2.readyState&&e2.push("loadeddata"),3<=t2.readyState&&e2.push("canplay"),4<=t2.readyState&&e2.push("canplaythrough"),this.ready(function(){e2.forEach(function(e3){this.trigger(e3)},this)})}}setScrubbing(e2){this.isScrubbing_=e2}scrubbing(){return this.isScrubbing_}setCurrentTime(e2){try{this.isScrubbing_&&this.el_.fastSeek&&Te?this.el_.fastSeek(e2):this.el_.currentTime=e2}catch(e3){o(e3,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&se&&le&&0===this.el_.currentTime){let e2=()=>{0<this.el_.currentTime&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",e2))};return this.on("timeupdate",e2),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if("webkitDisplayingFullscreen"in this.el_){let e2=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},t2=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",e2),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",t2),this.on("dispose",()=>{this.off("webkitbeginfullscreen",t2),this.off("webkitendfullscreen",e2)})}}supportsFullScreen(){return"function"==typeof this.el_.webkitEnterFullScreen}enterFullScreen(){let e2=this.el_;if(e2.paused&&e2.networkState<=e2.HAVE_METADATA)Kt(this.el_.play()),this.setTimeout(function(){e2.pause();try{e2.webkitEnterFullScreen()}catch(e3){this.trigger("fullscreenerror",e3)}},0);else try{e2.webkitEnterFullScreen()}catch(e3){this.trigger("fullscreenerror",e3)}}exitFullScreen(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(e2){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e2):super.requestVideoFrameCallback(e2)}cancelVideoFrameCallback(e2){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e2):super.cancelVideoFrameCallback(e2)}src(e2){if(void 0===e2)return this.el_.src;this.setSrc(e2)}addSourceElement(e2,t2){return e2?(e2={src:e2},t2&&(e2.type=t2),t2=l("source",{},e2),this.el_.appendChild(t2),!0):(o.error("Invalid source URL."),!1)}removeSourceElement(e2){if(e2){var t2;for(t2 of this.el_.querySelectorAll("source"))if(t2.src===e2)return this.el_.removeChild(t2),!0;o.warn("No matching source element found with src: "+e2)}else o.error("Source URL is required to remove the source element.");return!1}reset(){b.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(e2){this.el_.controls=!!e2}addTextTrack(e2,t2,i2){return this.featuresNativeTextTracks?this.el_.addTextTrack(e2,t2,i2):super.addTextTrack(e2,t2,i2)}createRemoteTextTrack(e2){var t2;return this.featuresNativeTextTracks?(t2=document.createElement("track"),e2.kind&&(t2.kind=e2.kind),e2.label&&(t2.label=e2.label),(e2.language||e2.srclang)&&(t2.srclang=e2.language||e2.srclang),e2.default&&(t2.default=e2.default),e2.id&&(t2.id=e2.id),e2.src&&(t2.src=e2.src),t2):super.createRemoteTextTrack(e2)}addRemoteTextTrack(e2,t2){return e2=super.addRemoteTextTrack(e2,t2),this.featuresNativeTextTracks&&this.el().appendChild(e2),e2}removeRemoteTextTrack(t2){if(super.removeRemoteTextTrack(t2),this.featuresNativeTextTracks){var i2=this.$$("track");let e2=i2.length;for(;e2--;)t2!==i2[e2]&&t2!==i2[e2].track||this.el().removeChild(i2[e2])}}getVideoPlaybackQuality(){var e2;return"function"==typeof this.el().getVideoPlaybackQuality?this.el().getVideoPlaybackQuality():(e2={},void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(e2.droppedVideoFrames=this.el().webkitDroppedFrameCount,e2.totalVideoFrames=this.el().webkitDecodedFrameCount),window.performance&&(e2.creationTime=window.performance.now()),e2)}}Z(b,"TEST_VID",function(){var e2,t2;if(Ee())return e2=document.createElement("video"),(t2=document.createElement("track")).kind="captions",t2.srclang="en",t2.label="English",e2.appendChild(t2),e2}),b.isSupported=function(){try{b.TEST_VID.volume=.5}catch(e2){return!1}return!(!b.TEST_VID||!b.TEST_VID.canPlayType)},b.canPlayType=function(e2){return b.TEST_VID.canPlayType(e2)},b.canPlaySource=function(e2,t2){return b.canPlayType(e2.type)},b.canControlVolume=function(){try{let e2=b.TEST_VID.volume;b.TEST_VID.volume=e2/2+.1;var t2=e2!==b.TEST_VID.volume;return t2&&u?(window.setTimeout(()=>{b&&b.prototype&&(b.prototype.featuresVolumeControl=e2!==b.TEST_VID.volume)}),!1):t2}catch(e2){return!1}},b.canMuteVolume=function(){try{var e2=b.TEST_VID.muted;return b.TEST_VID.muted=!e2,b.TEST_VID.muted?Ue(b.TEST_VID,"muted","muted"):Be(b.TEST_VID,"muted"),e2!==b.TEST_VID.muted}catch(e3){return!1}},b.canControlPlaybackRate=function(){if(se&&le&&he<58)return!1;try{var e2=b.TEST_VID.playbackRate;return b.TEST_VID.playbackRate=e2/2+.1,e2!==b.TEST_VID.playbackRate}catch(e3){return!1}},b.canOverrideAttributes=function(){try{var e2=()=>{};Object.defineProperty(document.createElement("video"),"src",{get:e2,set:e2}),Object.defineProperty(document.createElement("audio"),"src",{get:e2,set:e2}),Object.defineProperty(document.createElement("video"),"innerHTML",{get:e2,set:e2}),Object.defineProperty(document.createElement("audio"),"innerHTML",{get:e2,set:e2})}catch(e3){return!1}return!0},b.supportsNativeTextTracks=function(){return Te||u&&le},b.supportsNativeVideoTracks=function(){return!(!b.TEST_VID||!b.TEST_VID.videoTracks)},b.supportsNativeAudioTracks=function(){return!(!b.TEST_VID||!b.TEST_VID.audioTracks)},b.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function([e2,t2]){Z(b.prototype,e2,()=>b[t2](),!0)}),b.prototype.featuresVolumeControl=b.canControlVolume(),b.prototype.movingMediaElementInDOM=!u,b.prototype.featuresFullscreenResize=!0,b.prototype.featuresProgressEvents=!0,b.prototype.featuresTimeupdateEvents=!0,b.prototype.featuresVideoFrameCallback=!(!b.TEST_VID||!b.TEST_VID.requestVideoFrameCallback),b.disposeMediaElement=function(e2){if(e2){for(e2.parentNode&&e2.parentNode.removeChild(e2);e2.hasChildNodes();)e2.removeChild(e2.firstChild);if(e2.removeAttribute("src"),"function"==typeof e2.load)try{e2.load()}catch(e3){}}},b.resetMediaElement=function(t2){if(t2){var i2=t2.querySelectorAll("source");let e2=i2.length;for(;e2--;)t2.removeChild(i2[e2]);if(t2.removeAttribute("src"),"function"==typeof t2.load)try{t2.load()}catch(e3){}}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(e2){b.prototype[e2]=function(){return this.el_[e2]||this.el_.hasAttribute(e2)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(t2){b.prototype["set"+m(t2)]=function(e2){(this.el_[t2]=e2)?this.el_.setAttribute(t2,t2):this.el_.removeAttribute(t2)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(e2){b.prototype[e2]=function(){return this.el_[e2]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(t2){b.prototype["set"+m(t2)]=function(e2){this.el_[t2]=e2}}),["pause","load","play"].forEach(function(e2){b.prototype[e2]=function(){return this.el_[e2]()}}),v.withSourceHandlers(b),b.nativeSourceHandler={},b.nativeSourceHandler.canPlayType=function(e2){try{return b.TEST_VID.canPlayType(e2)}catch(e3){return""}},b.nativeSourceHandler.canHandleSource=function(e2,t2){return e2.type?b.nativeSourceHandler.canPlayType(e2.type):e2.src?(e2=_i(e2.src),b.nativeSourceHandler.canPlayType("video/"+e2)):""},b.nativeSourceHandler.handleSource=function(e2,t2,i2){t2.setSrc(e2.src)},b.nativeSourceHandler.dispose=function(){},b.registerSourceHandler(b.nativeSourceHandler),v.registerTech("Html5",b);let bn=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Tn={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Sn=["tiny","xsmall","small","medium","large","xlarge","huge"],wn={},En=(Sn.forEach(e2=>{var t2="x"===e2.charAt(0)?"x-"+e2.substring(1):e2;wn[e2]="vjs-layout-"+t2}),{tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0});class T extends g{constructor(e2,i2,t2){if(e2.id=e2.id||i2.id||"vjs_video_"+lt++,(i2=Object.assign(T.getTagSettings(e2),i2)).initChildren=!1,i2.createEl=!1,i2.evented=!1,i2.reportTouchActivity=!1,i2.language||(s2=e2.closest("[lang]"))&&(i2.language=s2.getAttribute("lang")),super(null,i2,t2),this.boundDocumentFullscreenChange_=e3=>this.documentFullscreenChange_(e3),this.boundFullWindowOnEscKey_=e3=>this.fullWindowOnEscKey(e3),this.boundUpdateStyleEl_=e3=>this.updateStyleEl_(e3),this.boundApplyInitTime_=e3=>this.applyInitTime_(e3),this.boundUpdateCurrentBreakpoint_=e3=>this.updateCurrentBreakpoint_(e3),this.boundHandleTechClick_=e3=>this.handleTechClick_(e3),this.boundHandleTechDoubleClick_=e3=>this.handleTechDoubleClick_(e3),this.boundHandleTechTouchStart_=e3=>this.handleTechTouchStart_(e3),this.boundHandleTechTouchMove_=e3=>this.handleTechTouchMove_(e3),this.boundHandleTechTouchEnd_=e3=>this.handleTechTouchEnd_(e3),this.boundHandleTechTap_=e3=>this.handleTechTap_(e3),this.boundUpdatePlayerHeightOnAudioOnlyMode_=e3=>this.updatePlayerHeightOnAudioOnlyMode_(e3),this.isFullscreen_=!1,this.log=W(this.id_),this.fsApi_=q,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={controlBarHeight:null,playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=e2,this.tagAttributes=e2&&Ne(e2),this.language(this.options_.language),i2.languages){let t3={};Object.getOwnPropertyNames(i2.languages).forEach(function(e3){t3[e3.toLowerCase()]=i2.languages[e3]}),this.languages_=t3}else this.languages_=T.prototype.options_.languages;this.resetCache_(),this.poster_=i2.poster||"",this.controls_=!!i2.controls,e2.controls=!1,e2.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],e2.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),i2.plugins&&Object.keys(i2.plugins).forEach(e3=>{if("function"!=typeof this[e3])throw new Error(`plugin "${e3}" does not exist`)}),this.scrubbing_=!1,this.el_=this.createEl(),Ot(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(mt(document,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);var s2=d(this.options_);i2.plugins&&Object.keys(i2.plugins).forEach(e3=>{this[e3](i2.plugins[e3])}),i2.debug&&this.debug(!0),this.options_.playerOptions=s2,this.middleware_=[],this.playbackRates(i2.playbackRates),i2.experimentalSvgIcons&&((t2=(new window.DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg">\n  <defs>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-play">\n      <path d="M16 10v28l22-14z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-pause">\n      <path d="M12 38h8V10h-8v28zm16-28v28h8V10h-8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-audio">\n      <path d="M24 2C14.06 2 6 10.06 6 20v14c0 3.31 2.69 6 6 6h6V24h-8v-4c0-7.73 6.27-14 14-14s14 6.27 14 14v4h-8v16h6c3.31 0 6-2.69 6-6V20c0-9.94-8.06-18-18-18z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-captions">\n      <path d="M38 8H10c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM22 22h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2zm14 0h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-subtitles">\n      <path d="M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM8 24h8v4H8v-4zm20 12H8v-4h20v4zm12 0h-8v-4h8v4zm0-8H20v-4h20v4z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-enter">\n      <path d="M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4H10v10zm24 14h-6v4h10V28h-4v6zm-6-24v4h6v6h4V10H28z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-exit">\n      <path d="M10 32h6v6h4V28H10v4zm6-16h-6v4h10V10h-4v6zm12 22h4v-6h6v-4H28v10zm4-22v-6h-4v10h10v-4h-6z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-play-circle">\n      <path d="M20 33l12-9-12-9v18zm4-29C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-mute">\n      <path d="M33 24c0-3.53-2.04-6.58-5-8.05v4.42l4.91 4.91c.06-.42.09-.85.09-1.28zm5 0c0 1.88-.41 3.65-1.08 5.28l3.03 3.03C41.25 29.82 42 27 42 24c0-8.56-5.99-15.72-14-17.54v4.13c5.78 1.72 10 7.07 10 13.41zM8.55 6L6 8.55 15.45 18H6v12h8l10 10V26.55l8.51 8.51c-1.34 1.03-2.85 1.86-4.51 2.36v4.13a17.94 17.94 0 0 0 7.37-3.62L39.45 42 42 39.45l-18-18L8.55 6zM24 8l-4.18 4.18L24 16.36V8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-low">\n      <path d="M14 18v12h8l10 10V8L22 18h-8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-medium">\n      <path d="M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zm-27-6v12h8l10 10V8L18 18h-8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-high">\n      <path d="M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-spinner">\n      <path d="M18.8 21l9.53-16.51C26.94 4.18 25.49 4 24 4c-4.8 0-9.19 1.69-12.64 4.51l7.33 12.69.11-.2zm24.28-3c-1.84-5.85-6.3-10.52-11.99-12.68L23.77 18h19.31zm.52 2H28.62l.58 1 9.53 16.5C41.99 33.94 44 29.21 44 24c0-1.37-.14-2.71-.4-4zm-26.53 4l-7.8-13.5C6.01 14.06 4 18.79 4 24c0 1.37.14 2.71.4 4h14.98l-2.31-4zM4.92 30c1.84 5.85 6.3 10.52 11.99 12.68L24.23 30H4.92zm22.54 0l-7.8 13.51c1.4.31 2.85.49 4.34.49 4.8 0 9.19-1.69 12.64-4.51L29.31 26.8 27.46 30z"></path>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-hd">\n      <path d="M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-chapters">\n      <path d="M6 26h4v-4H6v4zm0 8h4v-4H6v4zm0-16h4v-4H6v4zm8 8h28v-4H14v4zm0 8h28v-4H14v4zm0-20v4h28v-4H14z"></path>\n    </symbol>\n    <symbol viewBox="0 0 40 40" id="vjs-icon-downloading">\n      <path d="M18.208 36.875q-3.208-.292-5.979-1.729-2.771-1.438-4.812-3.729-2.042-2.292-3.188-5.229-1.146-2.938-1.146-6.23 0-6.583 4.334-11.416 4.333-4.834 10.833-5.5v3.166q-5.167.75-8.583 4.646Q6.25 14.75 6.25 19.958q0 5.209 3.396 9.104 3.396 3.896 8.562 4.646zM20 28.417L11.542 20l2.083-2.083 4.917 4.916v-11.25h2.916v11.25l4.875-4.916L28.417 20zm1.792 8.458v-3.167q1.833-.25 3.541-.958 1.709-.708 3.167-1.875l2.333 2.292q-1.958 1.583-4.25 2.541-2.291.959-4.791 1.167zm6.791-27.792q-1.541-1.125-3.25-1.854-1.708-.729-3.541-1.021V3.042q2.5.25 4.77 1.208 2.271.958 4.271 2.5zm4.584 21.584l-2.25-2.25q1.166-1.5 1.854-3.209.687-1.708.937-3.541h3.209q-.292 2.5-1.229 4.791-.938 2.292-2.521 4.209zm.541-12.417q-.291-1.833-.958-3.562-.667-1.73-1.833-3.188l2.375-2.208q1.541 1.916 2.458 4.208.917 2.292 1.167 4.75z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download">\n      <path d="M10.8 40.55q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h26.35v-7.7h3.4v7.7q0 1.4-1 2.4t-2.4 1zM24 32.1L13.9 22.05l2.45-2.45 5.95 5.95V7.15h3.4v18.4l5.95-5.95 2.45 2.45z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-done">\n      <path d="M9.8 40.5v-3.45h28.4v3.45zm9.2-9.05L7.4 19.85l2.45-2.35L19 26.65l19.2-19.2 2.4 2.4z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-off">\n      <path d="M4.9 4.75L43.25 43.1 41 45.3l-4.75-4.75q-.05.05-.075.025-.025-.025-.075-.025H10.8q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h22.05l-7-7-1.85 1.8L13.9 21.9l1.85-1.85L2.7 7zm26.75 14.7l2.45 2.45-3.75 3.8-2.45-2.5zM25.7 7.15V21.1l-3.4-3.45V7.15z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-share">\n      <path d="M36 32.17c-1.52 0-2.89.59-3.93 1.54L17.82 25.4c.11-.45.18-.92.18-1.4s-.07-.95-.18-1.4l14.1-8.23c1.07 1 2.5 1.62 4.08 1.62 3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6c0 .48.07.95.18 1.4l-14.1 8.23c-1.07-1-2.5-1.62-4.08-1.62-3.31 0-6 2.69-6 6s2.69 6 6 6c1.58 0 3.01-.62 4.08-1.62l14.25 8.31c-.1.42-.16.86-.16 1.31A5.83 5.83 0 1 0 36 32.17z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-cog">\n      <path d="M38.86 25.95c.08-.64.14-1.29.14-1.95s-.06-1.31-.14-1.95l4.23-3.31c.38-.3.49-.84.24-1.28l-4-6.93c-.25-.43-.77-.61-1.22-.43l-4.98 2.01c-1.03-.79-2.16-1.46-3.38-1.97L29 4.84c-.09-.47-.5-.84-1-.84h-8c-.5 0-.91.37-.99.84l-.75 5.3a14.8 14.8 0 0 0-3.38 1.97L9.9 10.1a1 1 0 0 0-1.22.43l-4 6.93c-.25.43-.14.97.24 1.28l4.22 3.31C9.06 22.69 9 23.34 9 24s.06 1.31.14 1.95l-4.22 3.31c-.38.3-.49.84-.24 1.28l4 6.93c.25.43.77.61 1.22.43l4.98-2.01c1.03.79 2.16 1.46 3.38 1.97l.75 5.3c.08.47.49.84.99.84h8c.5 0 .91-.37.99-.84l.75-5.3a14.8 14.8 0 0 0 3.38-1.97l4.98 2.01a1 1 0 0 0 1.22-.43l4-6.93c.25-.43.14-.97-.24-1.28l-4.22-3.31zM24 31c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-square">\n      <path d="M36 8H12c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h24c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm0 28H12V12h24v24z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-circle">\n      <circle cx="24" cy="24" r="20"></circle>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-outline">\n      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-inner-circle">\n      <path d="M24 4C12.97 4 4 12.97 4 24s8.97 20 20 20 20-8.97 20-20S35.03 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16zm6-16c0 3.31-2.69 6-6 6s-6-2.69-6-6 2.69-6 6-6 6 2.69 6 6z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-cancel">\n      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm10 27.17L31.17 34 24 26.83 16.83 34 14 31.17 21.17 24 14 16.83 16.83 14 24 21.17 31.17 14 34 16.83 26.83 24 34 31.17z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-replay">\n      <path d="M24 10V2L14 12l10 10v-8c6.63 0 12 5.37 12 12s-5.37 12-12 12-12-5.37-12-12H8c0 8.84 7.16 16 16 16s16-7.16 16-16-7.16-16-16-16z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-repeat">\n      <path d="M14 14h20v6l8-8-8-8v6H10v12h4v-8zm20 20H14v-6l-8 8 8 8v-6h24V26h-4v8z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-5">\n      <path d="M17.689 98l-8.697 8.696 8.697 8.697 2.486-2.485-4.32-4.319h1.302c4.93 0 9.071 1.722 12.424 5.165 3.352 3.443 5.029 7.638 5.029 12.584h3.55c0-2.958-.553-5.73-1.658-8.313-1.104-2.583-2.622-4.841-4.555-6.774-1.932-1.932-4.19-3.45-6.773-4.555-2.584-1.104-5.355-1.657-8.313-1.657H15.5l4.615-4.615zm-8.08 21.659v13.861h11.357v5.008H9.609V143h12.7c.834 0 1.55-.298 2.146-.894.596-.597.895-1.31.895-2.145v-7.781c0-.835-.299-1.55-.895-2.147a2.929 2.929 0 0 0-2.147-.894h-8.227v-5.096H25.35v-4.384z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-10">\n      <path d="M42.315 125.63c0-4.997-1.694-9.235-5.08-12.713-3.388-3.479-7.571-5.218-12.552-5.218h-1.315l4.363 4.363-2.51 2.51-8.787-8.786L25.221 97l2.45 2.45-4.662 4.663h1.375c2.988 0 5.788.557 8.397 1.673 2.61 1.116 4.892 2.65 6.844 4.602 1.953 1.953 3.487 4.234 4.602 6.844 1.116 2.61 1.674 5.41 1.674 8.398zM8.183 142v-19.657H3.176V117.8h9.643V142zm13.63 0c-1.156 0-2.127-.393-2.912-1.178-.778-.778-1.168-1.746-1.168-2.902v-16.04c0-1.156.393-2.127 1.178-2.912.779-.779 1.746-1.168 2.902-1.168h7.696c1.156 0 2.126.392 2.911 1.177.779.78 1.168 1.747 1.168 2.903v16.04c0 1.156-.392 2.127-1.177 2.912-.779.779-1.746 1.168-2.902 1.168zm.556-4.636h6.583v-15.02H22.37z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-30">\n      <path d="M26.047 97l-8.733 8.732 8.733 8.733 2.496-2.494-4.336-4.338h1.307c4.95 0 9.108 1.73 12.474 5.187 3.367 3.458 5.051 7.668 5.051 12.635h3.565c0-2.97-.556-5.751-1.665-8.346-1.109-2.594-2.633-4.862-4.574-6.802-1.94-1.941-4.208-3.466-6.803-4.575-2.594-1.109-5.375-1.664-8.345-1.664H23.85l4.634-4.634zM2.555 117.531v4.688h10.297v5.25H5.873v4.687h6.979v5.156H2.555V142H13.36c1.061 0 1.95-.395 2.668-1.186.718-.79 1.076-1.772 1.076-2.94v-16.218c0-1.168-.358-2.149-1.076-2.94-.717-.79-1.607-1.185-2.668-1.185zm22.482.14c-1.149 0-2.11.39-2.885 1.165-.78.78-1.172 1.744-1.172 2.893v15.943c0 1.149.388 2.11 1.163 2.885.78.78 1.745 1.172 2.894 1.172h7.649c1.148 0 2.11-.388 2.884-1.163.78-.78 1.17-1.745 1.17-2.894v-15.943c0-1.15-.386-2.111-1.16-2.885-.78-.78-1.746-1.172-2.894-1.172zm.553 4.518h6.545v14.93H25.59z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-5">\n      <path d="M29.508 97l-2.431 2.43 4.625 4.625h-1.364c-2.965 0-5.742.554-8.332 1.66-2.589 1.107-4.851 2.629-6.788 4.566-1.937 1.937-3.458 4.2-4.565 6.788-1.107 2.59-1.66 5.367-1.66 8.331h3.557c0-4.957 1.68-9.16 5.04-12.611 3.36-3.45 7.51-5.177 12.451-5.177h1.304l-4.326 4.33 2.49 2.49 8.715-8.716zm-9.783 21.61v13.89h11.382v5.018H19.725V142h12.727a2.93 2.93 0 0 0 2.15-.896 2.93 2.93 0 0 0 .896-2.15v-7.798c0-.837-.299-1.554-.896-2.152a2.93 2.93 0 0 0-2.15-.896h-8.245V123h11.29v-4.392z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-10">\n      <path d="M23.119 97l-2.386 2.383 4.538 4.538h-1.339c-2.908 0-5.633.543-8.173 1.63-2.54 1.085-4.76 2.577-6.66 4.478-1.9 1.9-3.392 4.12-4.478 6.66-1.085 2.54-1.629 5.264-1.629 8.172h3.49c0-4.863 1.648-8.986 4.944-12.372 3.297-3.385 7.368-5.078 12.216-5.078h1.279l-4.245 4.247 2.443 2.442 8.55-8.55zm-9.52 21.45v4.42h4.871V142h4.513v-23.55zm18.136 0c-1.125 0-2.066.377-2.824 1.135-.764.764-1.148 1.709-1.148 2.834v15.612c0 1.124.38 2.066 1.139 2.824.764.764 1.708 1.145 2.833 1.145h7.489c1.125 0 2.066-.378 2.824-1.136.764-.764 1.145-1.709 1.145-2.833v-15.612c0-1.125-.378-2.067-1.136-2.825-.764-.764-1.708-1.145-2.833-1.145zm.54 4.42h6.408v14.617h-6.407z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-30">\n      <path d="M25.549 97l-2.437 2.434 4.634 4.635H26.38c-2.97 0-5.753.555-8.347 1.664-2.594 1.109-4.861 2.633-6.802 4.574-1.94 1.94-3.465 4.207-4.574 6.802-1.109 2.594-1.664 5.377-1.664 8.347h3.565c0-4.967 1.683-9.178 5.05-12.636 3.366-3.458 7.525-5.187 12.475-5.187h1.307l-4.335 4.338 2.495 2.494 8.732-8.732zm-11.553 20.53v4.689h10.297v5.249h-6.978v4.688h6.978v5.156H13.996V142h10.808c1.06 0 1.948-.395 2.666-1.186.718-.79 1.077-1.771 1.077-2.94v-16.217c0-1.169-.36-2.15-1.077-2.94-.718-.79-1.605-1.186-2.666-1.186zm21.174.168c-1.149 0-2.11.389-2.884 1.163-.78.78-1.172 1.745-1.172 2.894v15.942c0 1.15.388 2.11 1.162 2.885.78.78 1.745 1.17 2.894 1.17h7.649c1.149 0 2.11-.386 2.885-1.16.78-.78 1.17-1.746 1.17-2.895v-15.942c0-1.15-.387-2.11-1.161-2.885-.78-.78-1.745-1.172-2.894-1.172zm.552 4.516h6.542v14.931h-6.542z"></path>\n    </symbol>\n    <symbol viewBox="0 0 512 512" id="vjs-icon-audio-description">\n      <g fill-rule="evenodd"><path d="M227.29 381.351V162.993c50.38-1.017 89.108-3.028 117.631 17.126 27.374 19.342 48.734 56.965 44.89 105.325-4.067 51.155-41.335 94.139-89.776 98.475-24.085 2.155-71.972 0-71.972 0s-.84-1.352-.773-2.568m48.755-54.804c31.43 1.26 53.208-16.633 56.495-45.386 4.403-38.51-21.188-63.552-58.041-60.796v103.612c-.036 1.466.575 2.22 1.546 2.57"></path><path d="M383.78 381.328c13.336 3.71 17.387-11.06 23.215-21.408 12.722-22.571 22.294-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.226 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M425.154 381.328c13.336 3.71 17.384-11.061 23.215-21.408 12.721-22.571 22.291-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.511c-.586 3.874 2.226 7.315 3.866 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M466.26 381.328c13.337 3.71 17.385-11.061 23.216-21.408 12.722-22.571 22.292-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.225 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894M4.477 383.005H72.58l18.573-28.484 64.169-.135s.065 19.413.065 28.62h48.756V160.307h-58.816c-5.653 9.537-140.85 222.697-140.85 222.697zm152.667-145.282v71.158l-40.453-.27 40.453-70.888z"></path></g>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-next-item">\n      <path d="M12 36l17-12-17-12v24zm20-24v24h4V12h-4z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-previous-item">\n      <path d="M12 12h4v24h-4zm7 12l17 12V12z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-shuffle">\n      <path d="M21.17 18.34L10.83 8 8 10.83l10.34 10.34 2.83-2.83zM29 8l4.09 4.09L8 37.17 10.83 40l25.09-25.09L40 19V8H29zm.66 18.83l-2.83 2.83 6.26 6.26L29 40h11V29l-4.09 4.09-6.25-6.26z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-cast">\n      <path d="M42 6H6c-2.21 0-4 1.79-4 4v6h4v-6h36v28H28v4h14c2.21 0 4-1.79 4-4V10c0-2.21-1.79-4-4-4zM2 36v6h6c0-3.31-2.69-6-6-6zm0-8v4c5.52 0 10 4.48 10 10h4c0-7.73-6.27-14-14-14zm0-8v4c9.94 0 18 8.06 18 18h4c0-12.15-9.85-22-22-22z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-picture-in-picture-enter">\n      <path d="M38 22H22v11.99h16V22zm8 16V9.96C46 7.76 44.2 6 42 6H6C3.8 6 2 7.76 2 9.96V38c0 2.2 1.8 4 4 4h36c2.2 0 4-1.8 4-4zm-4 .04H6V9.94h36v28.1z"></path>\n    </symbol>\n    <symbol viewBox="0 0 22 18" id="vjs-icon-picture-in-picture-exit">\n      <path d="M18 4H4v10h14V4zm4 12V1.98C22 .88 21.1 0 20 0H2C.9 0 0 .88 0 1.98V16c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H2V1.97h18v14.05z"></path>\n      <path fill="none" d="M-1-3h24v24H-1z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-facebook">\n      <path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759H734V905H479V609h255V391q0-186 104-288.5T1115 0q147 0 228 12z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-linkedin">\n      <path d="M477 625v991H147V625h330zm21-306q1 73-50.5 122T312 490h-2q-82 0-132-49t-50-122q0-74 51.5-122.5T314 148t133 48.5T498 319zm1166 729v568h-329v-530q0-105-40.5-164.5T1168 862q-63 0-105.5 34.5T999 982q-11 30-11 81v553H659q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5T1285 602q171 0 275 113.5t104 332.5z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1200 1227" id="vjs-icon-twitter">\n      <path d="M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z"/>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-tumblr">\n      <path d="M1328 1329l80 237q-23 35-111 66t-177 32q-104 2-190.5-26T787 1564t-95-106-55.5-120-16.5-118V676H452V461q72-26 129-69.5t91-90 58-102 34-99T779 12q1-5 4.5-8.5T791 0h244v424h333v252h-334v518q0 30 6.5 56t22.5 52.5 49.5 41.5 81.5 14q78-2 134-29z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-pinterest">\n      <path d="M1664 896q0 209-103 385.5T1281.5 1561 896 1664q-111 0-218-32 59-93 78-164 9-34 54-211 20 39 73 67.5t114 28.5q121 0 216-68.5t147-188.5 52-270q0-114-59.5-214T1180 449t-255-63q-105 0-196 29t-154.5 77-109 110.5-67 129.5T377 866q0 104 40 183t117 111q30 12 38-20 2-7 8-31t8-30q6-23-11-43-51-61-51-151 0-151 104.5-259.5T904 517q151 0 235.5 82t84.5 213q0 170-68.5 289T980 1220q-61 0-98-43.5T859 1072q8-35 26.5-93.5t30-103T927 800q0-50-27-83t-77-33q-62 0-105 57t-43 142q0 73 25 122l-99 418q-17 70-13 177-206-91-333-281T128 896q0-209 103-385.5T510.5 231 896 128t385.5 103T1561 510.5 1664 896z"></path>\n    </symbol>\n  </defs>\n</svg>',"image/svg+xml")).querySelector("parsererror")?(o.warn("Failed to load SVG Icons. Falling back to Font Icons."),this.options_.experimentalSvgIcons=null):((s2=t2.documentElement).style.display="none",this.el_.appendChild(s2),this.addClass("vjs-svg-icons-enabled"))),this.initChildren(),this.isAudio("audio"===e2.nodeName.toLowerCase()),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),i2.spatialNavigation&&i2.spatialNavigation.enabled&&(this.spatialNavigation=new Ns(this),this.addClass("vjs-spatial-navigation-enabled")),ve&&this.addClass("vjs-touch-enabled"),u||this.addClass("vjs-workinghover"),T.players[this.id_]=this,t2=M.split(".")[0];this.addClass("vjs-v"+t2),this.userActive(!0),this.reportUserActivity(),this.one("play",e3=>this.listenForUserActivity_(e3)),this.on("keydown",e3=>this.handleKeyDown(e3)),this.on("languagechange",e3=>this.handleLanguagechange(e3)),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)})}dispose(){this.trigger("dispose"),this.off("dispose"),c(document,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),c(document,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),T.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),Ts.hasOwnProperty(this.id())&&delete Ts[this.id()],a.names.forEach(e3=>{(e3=this[a[e3].getterName]())&&e3.off&&e3.off()}),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let i2,t2=this.tag,e2=this.playerElIngest_=t2.parentNode&&t2.parentNode.hasAttribute&&t2.parentNode.hasAttribute("data-vjs-player"),s2="video-js"===this.tag.tagName.toLowerCase(),r2=(e2?i2=this.el_=t2.parentNode:s2||(i2=this.el_=super.createEl("div")),Ne(t2));if(s2){for(i2=this.el_=t2,t2=this.tag=document.createElement("video");i2.children.length;)t2.appendChild(i2.firstChild);De(i2,"video-js")||Pe(i2,"video-js"),i2.appendChild(t2),e2=this.playerElIngest_=i2,Object.keys(i2).forEach(e3=>{try{t2[e3]=i2[e3]}catch(e4){}})}t2.setAttribute("tabindex","-1"),r2.tabindex="-1",le&&pe&&(t2.setAttribute("role","application"),r2.role="application"),t2.removeAttribute("width"),t2.removeAttribute("height"),"width"in r2&&delete r2.width,"height"in r2&&delete r2.height,Object.getOwnPropertyNames(r2).forEach(function(e3){s2&&"class"===e3||i2.setAttribute(e3,r2[e3]),s2&&t2.setAttribute(e3,r2[e3])}),t2.playerId=t2.id,t2.id+="_html5_api",t2.className="vjs-tech",(t2.player=i2.player=this).addClass("vjs-paused");var n2,a2=["IS_SMART_TV","IS_TIZEN","IS_WEBOS","IS_ANDROID","IS_IPAD","IS_IPHONE","IS_CHROMECAST_RECEIVER"].filter(e3=>Se[e3]).map(e3=>"vjs-device-"+e3.substring(3).toLowerCase().replace(/\_/g,"-")),o2=(this.addClass(...a2),!0!==window.VIDEOJS_NO_DYNAMIC_STYLE&&(this.styleEl_=at("vjs-styles-dimensions"),a2=Ye(".vjs-styles-defaults"),(n2=Ye("head")).insertBefore(this.styleEl_,a2?a2.nextSibling:n2.firstChild)),this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin),t2.getElementsByTagName("a"));for(let e3=0;e3<o2.length;e3++){var l2=o2.item(e3);Pe(l2,"vjs-hidden"),l2.setAttribute("hidden","hidden")}return t2.initNetworkState_=t2.networkState,t2.parentNode&&!e2&&t2.parentNode.insertBefore(i2,t2),Ae(t2,i2),this.children_.unshift(t2),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=i2}crossOrigin(e2){if(void 0===e2)return this.techGet_("crossOrigin");null!==e2&&"anonymous"!==e2&&"use-credentials"!==e2?o.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e2}"`):(this.techCall_("setCrossOrigin",e2),this.posterImage&&this.posterImage.crossOrigin(e2))}width(e2){return this.dimension("width",e2)}height(e2){return this.dimension("height",e2)}dimension(e2,t2){var i2,s2=e2+"_";if(void 0===t2)return this[s2]||0;""===t2||"auto"===t2?(this[s2]=void 0,this.updateStyleEl_()):(i2=parseFloat(t2),isNaN(i2)?o.error(`Improper value "${t2}" supplied for for `+e2):(this[s2]=i2,this.updateStyleEl_()))}fluid(e2){if(void 0===e2)return!!this.fluid_;var t2;this.fluid_=!!e2,Ct(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e2?(this.addClass("vjs-fluid"),this.fill(!1),t2=()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)},Ct(e2=this)?t2():(e2.eventedCallbacks||(e2.eventedCallbacks=[]),e2.eventedCallbacks.push(t2))):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(e2){if(void 0===e2)return!!this.fill_;this.fill_=!!e2,e2?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(e2){if(void 0===e2)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e2))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e2,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(!0===window.VIDEOJS_NO_DYNAMIC_STYLE){let e2="number"==typeof this.width_?this.width_:this.options_.width,t2="number"==typeof this.height_?this.height_:this.options_.height;var r2=this.tech_&&this.tech_.el();r2&&(0<=e2&&(r2.width=e2),0<=t2)&&(r2.height=t2)}else{let e2,t2,i2,s2;r2=(r2=(i2=void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"))[1]/r2[0],e2=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/r2:this.videoWidth()||300,t2=void 0!==this.height_?this.height_:e2*r2,s2=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(s2),ot(this.styleEl_,`\n    .${s2} {\n      width: ${e2}px;\n      height: ${t2}px;\n    }\n\n    .${s2}.vjs-fluid:not(.vjs-audio-only-mode) {\n      padding-top: ${100*r2}%;\n    }\n  `)}}loadTech_(e2,t2){this.tech_&&this.unloadTech_();var i2=m(e2),s2=e2.charAt(0).toLowerCase()+e2.slice(1);"Html5"!==i2&&this.tag&&(v.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=i2,this.isReady_=!1;let r2=this.autoplay(),n2={source:t2,autoplay:r2=!("string"==typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&r2,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+`_${s2}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};if(a.names.forEach(e3=>{e3=a[e3],n2[e3.getterName]=this[e3.privateName]}),Object.assign(n2,this.options_[i2]),Object.assign(n2,this.options_[s2]),Object.assign(n2,this.options_[e2.toLowerCase()]),this.tag&&(n2.tag=this.tag),t2&&t2.src===this.cache_.src&&0<this.cache_.currentTime&&(n2.startTime=this.cache_.currentTime),!(s2=v.getTech(e2)))throw new Error(`No Tech named '${i2}' exists! '${i2}' should be registered using videojs.registerTech()'`);this.tech_=new s2(n2),this.tech_.ready(p(this,this.handleTechReady_),!0),function(e2,i2){e2.forEach(function(e3){let t2=i2.addRemoteTextTrack(e3).track;!e3.src&&e3.cues&&e3.cues.forEach(e4=>t2.addCue(e4))}),i2.textTracks()}(this.textTracksJson_||[],this.tech_),bn.forEach(t3=>{this.on(this.tech_,t3,e3=>this[`handleTech${m(t3)}_`](e3))}),Object.keys(Tn).forEach(t3=>{this.on(this.tech_,t3,e3=>{0===this.tech_.playbackRate()&&this.tech_.seeking()?this.queuedCallbacks_.push({callback:this[`handleTech${Tn[t3]}_`].bind(this),event:e3}):this[`handleTech${Tn[t3]}_`](e3)})}),this.on(this.tech_,"loadstart",e3=>this.handleTechLoadStart_(e3)),this.on(this.tech_,"sourceset",e3=>this.handleTechSourceset_(e3)),this.on(this.tech_,"waiting",e3=>this.handleTechWaiting_(e3)),this.on(this.tech_,"ended",e3=>this.handleTechEnded_(e3)),this.on(this.tech_,"seeking",e3=>this.handleTechSeeking_(e3)),this.on(this.tech_,"play",e3=>this.handleTechPlay_(e3)),this.on(this.tech_,"pause",e3=>this.handleTechPause_(e3)),this.on(this.tech_,"durationchange",e3=>this.handleTechDurationChange_(e3)),this.on(this.tech_,"fullscreenchange",(e3,t3)=>this.handleTechFullscreenChange_(e3,t3)),this.on(this.tech_,"fullscreenerror",(e3,t3)=>this.handleTechFullscreenError_(e3,t3)),this.on(this.tech_,"enterpictureinpicture",e3=>this.handleTechEnterPictureInPicture_(e3)),this.on(this.tech_,"leavepictureinpicture",e3=>this.handleTechLeavePictureInPicture_(e3)),this.on(this.tech_,"error",e3=>this.handleTechError_(e3)),this.on(this.tech_,"posterchange",e3=>this.handleTechPosterChange_(e3)),this.on(this.tech_,"textdata",e3=>this.handleTechTextData_(e3)),this.on(this.tech_,"ratechange",e3=>this.handleTechRateChange_(e3)),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===i2&&this.tag||Ae(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){a.names.forEach(e2=>{this[(e2=a[e2]).privateName]=this[e2.getterName]()}),this.textTracksJson_=function(e2){var t2=e2.$$("track");let i2=Array.prototype.map.call(t2,e3=>e3.track);return Array.prototype.map.call(t2,function(e3){var t3=Yt(e3.track);return e3.src&&(t3.src=e3.src),t3}).concat(Array.prototype.filter.call(e2.textTracks(),function(e3){return-1===i2.indexOf(e3)}).map(Yt))}(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(e2){return void 0===e2&&o.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_}version(){return{"video.js":M}}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()&&this.hasStarted(!1),this.trigger("loadstart"),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(t2){if(this.tech_&&"string"==typeof t2){var i2=()=>{let e3=this.muted(),t3=(this.muted(!0),()=>{this.muted(e3)});this.playTerminatedQueue_.push(t3);var i3=this.play();if(Xt(i3))return i3.catch(e4=>{throw t3(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(e4||""))})};let e2;if("any"!==t2||this.muted()?e2="muted"!==t2||this.muted()?this.play():i2():Xt(e2=this.play())&&(e2=e2.catch(i2)),Xt(e2))return e2.then(()=>{this.trigger({type:"autoplay-success",autoplay:t2})}).catch(()=>{this.trigger({type:"autoplay-failure",autoplay:t2})})}}updateSourceCaches_(e2=""){let t2=e2,i2="";"string"!=typeof t2&&(t2=e2.src,i2=e2.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t2&&!i2&&(i2=((e3,t3)=>{if(!t3)return"";if(e3.cache_.source.src===t3&&e3.cache_.source.type)return e3.cache_.source.type;var i3=e3.cache_.sources.filter(e4=>e4.src===t3);if(i3.length)return i3[0].type;var s3=e3.$$("source");for(let e4=0;e4<s3.length;e4++){var r3=s3[e4];if(r3.type&&r3.src&&r3.src===t3)return r3.type}return Ls(t3)})(this,t2)),this.cache_.source=d({},e2,{src:t2,type:i2});e2=this.cache_.sources.filter(e3=>e3.src&&e3.src===t2);var s2=[],r2=this.$$("source"),n2=[];for(let e3=0;e3<r2.length;e3++){var a2=Ne(r2[e3]);s2.push(a2),a2.src&&a2.src===t2&&n2.push(a2.src)}n2.length&&!e2.length?this.cache_.sources=s2:e2.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t2}handleTechSourceset_(t2){if(!this.changingSrc_){let e2=e3=>this.updateSourceCaches_(e3);var i2=this.currentSource().src,s2=t2.src;(e2=!i2||/^blob:/.test(i2)||!/^blob:/.test(s2)||this.lastSource_&&(this.lastSource_.tech===s2||this.lastSource_.player===i2)?e2:()=>{})(s2),t2.src||this.tech_.any(["sourceset","loadstart"],e3=>{"sourceset"!==e3.type&&(e3=this.techGet_("currentSrc"),this.lastSource_.tech=e3,this.updateSourceCaches_(e3))})}this.lastSource_={player:this.currentSource().src,tech:t2.src},this.trigger({src:t2.src,type:"sourceset"})}hasStarted(e2){if(void 0===e2)return this.hasStarted_;e2!==this.hasStarted_&&(this.hasStarted_=e2,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){0<this.tech_.playbackRate()&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(e2=>e2.callback(e2.event)),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");let e2=this.currentTime(),t2=()=>{e2!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",t2))};this.on("timeupdate",t2)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(e2){!this.controls_||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.click&&!1===this.options_.userActions.click||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.click?this.options_.userActions.click.call(this,e2):this.paused()?Kt(this.play()):this.pause())}handleTechDoubleClick_(t2){!this.controls_||Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),e2=>e2.contains(t2.target))||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,t2):this.isInPictureInPicture()&&!document.pictureInPictureElement?this.exitPictureInPicture():this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(e2){e2.cancelable&&e2.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(t2){if(!(t2=t2.target.player)||t2===this){t2=this.el();let e2=document[this.fsApi_.fullscreenElement]===t2;!e2&&t2.matches&&(e2=t2.matches(":"+this.fsApi_.fullscreen)),this.isFullscreen(e2)}}handleTechFullscreenChange_(e2,t2){t2&&(t2.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",()=>{this.removeClass("vjs-ios-native-fs")})),this.isFullscreen(t2.isFullscreen))}handleTechFullscreenError_(e2,t2){this.trigger("fullscreenerror",t2)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(e2){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(e2){this.isInPictureInPicture(!1)}handleTechError_(){var e2=this.tech_.error();e2&&this.error(e2)}handleTechTextData_(){let e2=1<arguments.length?arguments[1]:null;this.trigger("textdata",e2)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(t2,i2){this.ready(function(){if(t2 in ks)return e2=this.middleware_,this.tech_[t2](e2.reduce(xs(t2),i2));if(t2 in Is)return Es(this.middleware_,this.tech_,t2,i2);var e2;try{this.tech_&&this.tech_[t2](i2)}catch(e3){throw o(e3),e3}},!0)}techGet_(t2){if(this.tech_&&this.tech_.isReady_){if(t2 in Cs)return e2=this.middleware_,i2=this.tech_,e2.reduceRight(xs(t2),i2[t2]());if(t2 in Is)return Es(this.middleware_,this.tech_,t2);var e2,i2;try{return this.tech_[t2]()}catch(e3){throw void 0===this.tech_[t2]?o(`Video.js: ${t2} method not defined for ${this.techName_} playback technology.`,e3):"TypeError"===e3.name?(o(`Video.js: ${t2} unavailable on ${this.techName_} playback technology element.`,e3),this.tech_.isReady_=!1):o(e3),e3}}}play(){return new Promise(e2=>{this.play_(e2)})}play_(e2=Kt){this.playCallbacks_.push(e2);e2=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));var t2,i2=Boolean(Te||u);this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),this.isReady_&&e2?(t2=this.techGet_("play"),i2&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),null===t2?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(t2)):(this.waitToPlay_=e3=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!e2&&i2&&this.load())}runPlayTerminatedQueue_(){var e2=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e2.forEach(function(e3){e3()})}runPlayCallbacks_(t2){var e2=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],e2.forEach(function(e3){e3(t2)})}pause(){this.techCall_("pause")}paused(){return!1!==this.techGet_("paused")}played(){return this.techGet_("played")||jt(0,0)}scrubbing(e2){if(void 0===e2)return this.scrubbing_;this.scrubbing_=!!e2,this.techCall_("setScrubbing",this.scrubbing_),e2?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(e2){if(void 0===e2)return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime;e2<0&&(e2=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",e2),this.cache_.initTime=0,isFinite(e2)&&(this.cache_.currentTime=Number(e2))):(this.cache_.initTime=e2,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_))}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(e2){if(void 0===e2)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e2=(e2=parseFloat(e2))<0?1/0:e2)!==this.cache_.duration&&((this.cache_.duration=e2)===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e2)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let e2=this.techGet_("buffered");return e2&&e2.length?e2:jt(0,0)}seekable(){let e2=this.techGet_("seekable");return e2&&e2.length?e2:jt(0,0)}seeking(){return this.techGet_("seeking")}ended(){return this.techGet_("ended")}networkState(){return this.techGet_("networkState")}readyState(){return this.techGet_("readyState")}bufferedPercent(){return Gt(this.buffered(),this.duration())}bufferedEnd(){var e2=this.buffered(),t2=this.duration();let i2=e2.end(e2.length-1);return i2>t2?t2:i2}volume(e2){let t2;if(void 0===e2)return t2=parseFloat(this.techGet_("volume")),isNaN(t2)?1:t2;t2=Math.max(0,Math.min(1,e2)),this.cache_.volume=t2,this.techCall_("setVolume",t2),0<t2&&this.lastVolume_(t2)}muted(e2){if(void 0===e2)return this.techGet_("muted")||!1;this.techCall_("setMuted",e2)}defaultMuted(e2){return void 0!==e2&&this.techCall_("setDefaultMuted",e2),this.techGet_("defaultMuted")||!1}lastVolume_(e2){if(void 0===e2||0===e2)return this.cache_.lastVolume;this.cache_.lastVolume=e2}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(e2){var t2;if(void 0===e2)return this.isFullscreen_;t2=this.isFullscreen_,this.isFullscreen_=Boolean(e2),this.isFullscreen_!==t2&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_()}requestFullscreen(a2){this.isInPictureInPicture()&&this.exitPictureInPicture();let o2=this;return new Promise((e2,i2)=>{function s2(){o2.off("fullscreenerror",r2),o2.off("fullscreenchange",t2)}function t2(){s2(),e2()}function r2(e3,t3){s2(),i2(t3)}o2.one("fullscreenchange",t2),o2.one("fullscreenerror",r2);var n2=o2.requestFullscreenHelper_(a2);n2&&(n2.then(s2,s2),n2.then(e2,i2))})}requestFullscreenHelper_(e2){let t2;if(this.fsApi_.prefixed||(t2=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==e2&&(t2=e2)),this.fsApi_.requestFullscreen)return(e2=this.el_[this.fsApi_.requestFullscreen](t2))&&e2.then(()=>this.isFullscreen(!0),()=>this.isFullscreen(!1)),e2;this.tech_.supportsFullScreen()&&1==!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){let a2=this;return new Promise((e2,i2)=>{function s2(){a2.off("fullscreenerror",r2),a2.off("fullscreenchange",t2)}function t2(){s2(),e2()}function r2(e3,t3){s2(),i2(t3)}a2.one("fullscreenchange",t2),a2.one("fullscreenerror",r2);var n2=a2.exitFullscreenHelper_();n2&&(n2.then(s2,s2),n2.then(e2,i2))})}exitFullscreenHelper_(){var e2;if(this.fsApi_.requestFullscreen)return(e2=document[this.fsApi_.exitFullscreen]())&&Kt(e2.then(()=>this.isFullscreen(!1))),e2;this.tech_.supportsFullScreen()&&1==!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=document.documentElement.style.overflow,mt(document,"keydown",this.boundFullWindowOnEscKey_),document.documentElement.style.overflow="hidden",Pe(document.body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(e2){"Escape"===e2.key&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,c(document,"keydown",this.boundFullWindowOnEscKey_),document.documentElement.style.overflow=this.docOrigOverflow,Le(document.body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(e2){if(void 0===e2)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e2),this.options_.disablePictureInPicture=e2,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(e2){if(void 0===e2)return!!this.isInPictureInPicture_;this.isInPictureInPicture_=!!e2,this.togglePictureInPictureClass_()}requestPictureInPicture(){if(this.options_.enableDocumentPictureInPicture&&window.documentPictureInPicture){let t2=document.createElement(this.el().tagName);return t2.classList=this.el().classList,t2.classList.add("vjs-pip-container"),this.posterImage&&t2.appendChild(this.posterImage.el().cloneNode(!0)),this.titleBar&&t2.appendChild(this.titleBar.el().cloneNode(!0)),t2.appendChild(l("p",{className:"vjs-pip-text"},{},this.localize("Playing in picture-in-picture"))),window.documentPictureInPicture.requestWindow({width:this.videoWidth(),height:this.videoHeight()}).then(e2=>(Ze(e2),this.el_.parentNode.insertBefore(t2,this.el_),e2.document.body.appendChild(this.el_),e2.document.body.classList.add("vjs-pip-window"),this.player_.isInPictureInPicture(!0),this.player_.trigger({type:"enterpictureinpicture",pipWindow:e2}),e2.addEventListener("pagehide",e3=>{e3=e3.target.querySelector(".video-js"),t2.parentNode.replaceChild(e3,t2),this.player_.isInPictureInPicture(!1),this.player_.trigger("leavepictureinpicture")}),e2))}return"pictureInPictureEnabled"in document&&!1===this.disablePictureInPicture()?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}exitPictureInPicture(){return window.documentPictureInPicture&&window.documentPictureInPicture.window?(window.documentPictureInPicture.window.close(),Promise.resolve()):"pictureInPictureEnabled"in document?document.exitPictureInPicture():void 0}handleKeyDown(e2){var t2,i2,s2=this.options_.userActions;s2&&s2.hotkeys&&(i2=(t2=this.el_.ownerDocument.activeElement).tagName.toLowerCase(),t2.isContentEditable||("input"===i2?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(t2.type):-1!==["textarea"].indexOf(i2))||("function"==typeof s2.hotkeys?s2.hotkeys.call(this,e2):this.handleHotkeys(e2)))}handleHotkeys(t2){var{fullscreenKey:e2=e3=>"f"===t2.key.toLowerCase(),muteKey:i2=e3=>"m"===t2.key.toLowerCase(),playPauseKey:s2=e3=>"k"===t2.key.toLowerCase()||" "===t2.key.toLowerCase()}=this.options_.userActions?this.options_.userActions.hotkeys:{};e2.call(this,t2)?(t2.preventDefault(),t2.stopPropagation(),e2=g.getComponent("FullscreenToggle"),!1!==document[this.fsApi_.fullscreenEnabled]&&e2.prototype.handleClick.call(this,t2)):i2.call(this,t2)?(t2.preventDefault(),t2.stopPropagation(),g.getComponent("MuteToggle").prototype.handleClick.call(this,t2)):s2.call(this,t2)&&(t2.preventDefault(),t2.stopPropagation(),g.getComponent("PlayToggle").prototype.handleClick.call(this,t2))}canPlayType(s2){var r2;for(let t2=0,i2=this.options_.techOrder;t2<i2.length;t2++){var n2=i2[t2];let e2=v.getTech(n2);if(e2=e2||g.getComponent(n2)){if(e2.isSupported()&&(r2=e2.canPlayType(s2)))return r2}else o.error(`The "${n2}" tech is undefined. Skipped browser support check for that tech.`)}return""}selectSource(e2){function t2(e3,i3,s3){let r3;return e3.some(t3=>i3.some(e4=>{if(r3=s3(t3,e4))return!0})),r3}var i2=this.options_.techOrder.map(e3=>[e3,v.getTech(e3)]).filter(([e3,t3])=>t3?t3.isSupported():(o.error(`The "${e3}" tech is undefined. Skipped browser support check for that tech.`),!1));let s2;var r2,n2=([e3,t3],i3)=>{if(t3.canPlaySource(i3,this.options_[e3.toLowerCase()]))return{source:i3,tech:e3}};return(s2=this.options_.sourceOrder?t2(e2,i2,(r2=n2,(e3,t3)=>r2(t3,e3))):t2(i2,e2,n2))||!1}handleSrc_(e2,s2){if(void 0===e2)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();let r2=Ds(e2);if(r2.length){if(this.changingSrc_=!0,s2||(this.cache_.sources=r2),this.updateSourceCaches_(r2[0]),ws(this,r2[0],(e3,t2)=>{var i2;if(this.middleware_=t2,s2||(this.cache_.sources=r2),this.updateSourceCaches_(e3),this.src_(e3))return 1<r2.length?this.handleSrc_(r2.slice(1)):(this.changingSrc_=!1,this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),void this.triggerReady());i2=this.tech_,t2.forEach(e4=>e4.setTech&&e4.setTech(i2))}),1<r2.length){let e3=()=>{this.error(null),this.handleSrc_(r2.slice(1),!0)},t2=()=>{this.off("error",e3)};this.one("error",e3),this.one("playing",t2),this.resetRetryOnError_=()=>{this.off("error",e3),this.off("playing",t2)}}}else this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0)}src(e2){return this.handleSrc_(e2,!1)}src_(e2){var t2=this.selectSource([e2]);return!t2||(Ut(t2.tech,this.techName_)?this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e2):this.techCall_("src",e2.src),this.changingSrc_=!1},!0):(this.changingSrc_=!0,this.loadTech_(t2.tech,t2.source),this.tech_.ready(()=>{this.changingSrc_=!1})),!1)}addSourceElement(e2,t2){return!!this.tech_&&this.tech_.addSourceElement(e2,t2)}removeSourceElement(e2){return!!this.tech_&&this.tech_.removeSourceElement(e2)}load(){this.tech_&&this.tech_.vhs?this.src(this.currentSource()):this.techCall_("load")}reset(){this.paused()?this.doReset_():Kt(this.play().then(()=>this.doReset_()))}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),this.error(null),this.titleBar&&this.titleBar.update({title:void 0,description:void 0}),Ct(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);var{currentTimeDisplay:e2,durationDisplay:t2,progressControl:i2,remainingTimeDisplay:s2}=this.controlBar||{},i2=(i2||{}).seekBar;e2&&e2.updateContent(),t2&&t2.updateContent(),s2&&s2.updateContent(),i2&&(i2.update(),i2.loadProgressBar)&&i2.loadProgressBar.update()}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){var e2=this.currentSource(),t2=[];return 0!==Object.keys(e2).length&&t2.push(e2),this.cache_.sources||t2}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(e2){if(void 0===e2)return this.techGet_("preload");this.techCall_("setPreload",e2),this.options_.preload=e2}autoplay(e2){if(void 0===e2)return this.options_.autoplay||!1;let t2;"string"==typeof e2&&/(any|play|muted)/.test(e2)||!0===e2&&this.options_.normalizeAutoplay?(this.options_.autoplay=e2,this.manualAutoplay_("string"==typeof e2?e2:"play"),t2=!1):this.options_.autoplay=!!e2,t2=void 0===t2?this.options_.autoplay:t2,this.tech_&&this.techCall_("setAutoplay",t2)}playsinline(e2){return void 0!==e2&&(this.techCall_("setPlaysinline",e2),this.options_.playsinline=e2),this.techGet_("playsinline")}loop(e2){if(void 0===e2)return this.techGet_("loop");this.techCall_("setLoop",e2),this.options_.loop=e2}poster(e2){if(void 0===e2)return this.poster_;(e2=e2||"")!==this.poster_&&(this.poster_=e2,this.techCall_("setPoster",e2),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){var e2;(!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster&&(e2=this.tech_.poster()||"")!==this.poster_&&(this.poster_=e2,this.isPosterFromTech_=!0,this.trigger("posterchange"))}controls(e2){if(void 0===e2)return!!this.controls_;this.controls_!==(e2=!!e2)&&(this.controls_=e2,this.usingNativeControls()&&this.techCall_("setControls",e2),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(e2){if(void 0===e2)return!!this.usingNativeControls_;this.usingNativeControls_!==(e2=!!e2)&&(this.usingNativeControls_=e2,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(t2){if(void 0===t2)return this.error_||null;if(B("beforeerror").forEach(e2=>{Y(e2=e2(this,t2))&&!Array.isArray(e2)||"string"==typeof e2||"number"==typeof e2||null===e2?t2=e2:this.log.error("please return a value that MediaError expects in beforeerror hooks")}),this.options_.suppressNotSupportedError&&t2&&4===t2.code){let e2=function(){this.error(t2)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],e2),this.one("loadstart",function(){this.off(["click","touchstart"],e2)})}else null===t2?(this.error_=null,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close()):(this.error_=new i(t2),this.addClass("vjs-error"),o.error(`(CODE:${this.error_.code} ${i.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),B("error").forEach(e2=>e2(this,this.error_)))}reportUserActivity(e2){this.userActivity_=!0}userActive(e2){if(void 0===e2)return this.userActive_;(e2=!!e2)!==this.userActive_&&(this.userActive_=e2,this.userActive_?(this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive")):(this.tech_&&this.tech_.one("mousemove",function(e3){e3.stopPropagation(),e3.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")))}listenForUserActivity_(){let t2,i2,s2,r2=p(this,this.reportUserActivity);function e2(e3){r2(),this.clearInterval(t2)}this.on("mousedown",function(){r2(),this.clearInterval(t2),t2=this.setInterval(r2,250)}),this.on("mousemove",function(e3){e3.screenX===i2&&e3.screenY===s2||(i2=e3.screenX,s2=e3.screenY,r2())}),this.on("mouseup",e2),this.on("mouseleave",e2);var n2=this.getChild("controlBar");let a2;!n2||u||se||(n2.on("mouseenter",function(e3){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),n2.on("mouseleave",function(e3){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",r2),this.on("keyup",r2),this.setInterval(function(){var e3;this.userActivity_&&(this.userActivity_=!1,this.userActive(!0),this.clearTimeout(a2),(e3=this.options_.inactivityTimeout)<=0||(a2=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},e3)))},250)}playbackRate(e2){if(void 0===e2)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e2)}defaultPlaybackRate(e2){return void 0!==e2?this.techCall_("setDefaultPlaybackRate",e2):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(e2){if(void 0===e2)return!!this.isAudio_;this.isAudio_=!!e2}updatePlayerHeightOnAudioOnlyMode_(){var e2=this.getChild("ControlBar");e2&&this.audioOnlyCache_.controlBarHeight!==e2.currentHeight()&&(this.audioOnlyCache_.controlBarHeight=e2.currentHeight(),this.height(this.audioOnlyCache_.controlBarHeight))}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");var e2=this.children();let t2=this.getChild("ControlBar");var i2=t2&&t2.currentHeight();e2.forEach(e3=>{e3!==t2&&e3.el_&&!e3.hasClass("vjs-hidden")&&(e3.hide(),this.audioOnlyCache_.hiddenChildren.push(e3))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.audioOnlyCache_.controlBarHeight=i2,this.on("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.height(i2),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.off("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.audioOnlyCache_.hiddenChildren.forEach(e2=>e2.show()),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(e2){return"boolean"!=typeof e2||e2===this.audioOnlyMode_?this.audioOnlyMode_:(this.audioOnlyMode_=e2)?(e2=[],this.isInPictureInPicture()&&e2.push(this.exitPictureInPicture()),this.isFullscreen()&&e2.push(this.exitFullscreen()),this.audioPosterMode()&&e2.push(this.audioPosterMode(!1)),Promise.all(e2).then(()=>this.enableAudioOnlyUI_())):Promise.resolve().then(()=>this.disableAudioOnlyUI_())}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(e2){return"boolean"!=typeof e2||e2===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=e2)?(this.audioOnlyMode()?this.audioOnlyMode(!1):Promise.resolve()).then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.disablePosterModeUI_()})}addTextTrack(e2,t2,i2){if(this.tech_)return this.tech_.addTextTrack(e2,t2,i2)}addRemoteTextTrack(e2,t2){if(this.tech_)return this.tech_.addRemoteTextTrack(e2,t2)}removeRemoteTextTrack(e2={}){let t2=e2.track;if(t2=t2||e2,this.tech_)return this.tech_.removeRemoteTextTrack(t2)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(e2){if(void 0===e2)return this.language_;this.language_!==String(e2).toLowerCase()&&(this.language_=String(e2).toLowerCase(),Ct(this))&&this.trigger("languagechange")}languages(){return d(T.prototype.options_.languages,this.languages_)}toJSON(){var t2=d(this.options_),i2=t2.tracks;t2.tracks=[];for(let e2=0;e2<i2.length;e2++){var s2=i2[e2];(s2=d(s2)).player=void 0,t2.tracks[e2]=s2}return t2}createModal(e2,t2){(t2=t2||{}).content=e2||"";let i2=new ii(this,t2);return this.addChild(i2),i2.on("dispose",()=>{this.removeChild(i2)}),i2.open(),i2}updateCurrentBreakpoint_(){if(this.responsive()){var t2=this.currentBreakpoint(),i2=this.currentWidth();for(let e2=0;e2<Sn.length;e2++){var s2=Sn[e2];if(i2<=this.breakpoints_[s2]){if(t2===s2)return;t2&&this.removeClass(wn[t2]),this.addClass(wn[s2]),this.breakpoint_=s2;break}}}}removeCurrentBreakpoint_(){var e2=this.currentBreakpointClass();this.breakpoint_="",e2&&this.removeClass(e2)}breakpoints(e2){return void 0!==e2&&(this.breakpoint_="",this.breakpoints_=Object.assign({},En,e2),this.updateCurrentBreakpoint_()),Object.assign(this.breakpoints_)}responsive(e2){return void 0===e2?this.responsive_:(e2=Boolean(e2))!==this.responsive_?((this.responsive_=e2)?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e2):void 0}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return wn[this.breakpoint_]||""}loadMedia(e2,t2){var i2,s2,r2,n2,a2,o2,l2;e2&&"object"==typeof e2&&(i2=this.crossOrigin(),({artist:e2,artwork:s2,description:r2,poster:n2,src:a2,textTracks:o2,title:l2}=(this.reset(),this.cache_.media=d(e2),this.cache_.media)),!s2&&n2&&(this.cache_.media.artwork=[{src:n2,type:Ls(n2)}]),i2&&this.crossOrigin(i2),a2&&this.src(a2),n2&&this.poster(n2),Array.isArray(o2)&&o2.forEach(e3=>this.addRemoteTextTrack(e3,!1)),this.titleBar&&this.titleBar.update({title:l2,description:r2||e2||""}),this.ready(t2))}getMedia(){var e2,t2;return this.cache_.media?d(this.cache_.media):(e2=this.poster(),t2={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),e3=>({kind:e3.kind,label:e3.label,language:e3.language,src:e3.src}))},e2&&(t2.poster=e2,t2.artwork=[{src:t2.poster,type:Ls(t2.poster)}]),t2)}static getTagSettings(e2){var i2={sources:[],tracks:[]},t2=Ne(e2),s2=t2["data-setup"];if(De(e2,"vjs-fill")&&(t2.fill=!0),De(e2,"vjs-fluid")&&(t2.fluid=!0),null!==s2)try{Object.assign(t2,JSON.parse(s2||"{}"))}catch(e3){o.error("data-setup",e3)}if(Object.assign(i2,t2),e2.hasChildNodes()){var r2=e2.childNodes;for(let e3=0,t3=r2.length;e3<t3;e3++){var n2=r2[e3],a2=n2.nodeName.toLowerCase();"source"===a2?i2.sources.push(Ne(n2)):"track"===a2&&i2.tracks.push(Ne(n2))}}return i2}debug(e2){if(void 0===e2)return this.debugEnabled_;e2?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(e2){if(void 0===e2)return this.cache_.playbackRates;Array.isArray(e2)&&e2.every(e3=>"number"==typeof e3)&&(this.cache_.playbackRates=e2,this.trigger("playbackrateschange"))}}T.prototype.videoTracks=()=>{},T.prototype.audioTracks=()=>{},T.prototype.textTracks=()=>{},T.prototype.remoteTextTracks=()=>{},T.prototype.remoteTextTrackEls=()=>{},a.names.forEach(function(e2){let t2=a[e2];T.prototype[t2.getterName]=function(){return this.tech_?this.tech_[t2.getterName]():(this[t2.privateName]=this[t2.privateName]||new t2.ListClass,this[t2.privateName])}}),T.prototype.crossorigin=T.prototype.crossOrigin,T.players={},Zr=window.navigator,T.prototype.options_={techOrder:v.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Zr&&(Zr.languages&&Zr.languages[0]||Zr.userLanguage||Zr.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1,spatialNavigation:{enabled:!1,horizontalSeek:!1},enableSmoothSeeking:!1,disableSeekWhileScrubbingOnMobile:!1,disableSeekWhileScrubbingOnSTV:!1},bn.forEach(function(e2){T.prototype[`handleTech${m(e2)}_`]=function(){return this.trigger(e2)}}),g.registerComponent("Player",T);let kn="plugin",In="activePlugins_",xn={},An=e2=>xn.hasOwnProperty(e2),Dn=e2=>An(e2)?xn[e2]:void 0,Pn=(e2,t2)=>{e2[In]=e2[In]||{},e2[In][t2]=!0},Ln=(e2,t2,i2)=>{i2=(i2?"before":"")+"pluginsetup",e2.trigger(i2,t2),e2.trigger(i2+":"+t2.name,t2)},On=(i2,s2)=>(s2.prototype.name=i2,function(...e2){Ln(this,{name:i2,plugin:s2,instance:null},!0);let t2=new s2(this,...e2);return this[i2]=()=>t2,Ln(this,t2.getEventHash()),t2});class Rn{constructor(e2){if(this.constructor===Rn)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e2,this.log||(this.log=this.player.log.createLogger(this.name)),Ot(this),delete this.trigger,Nt(this,this.constructor.defaultState),Pn(e2,this.name),this.dispose=this.dispose.bind(this),e2.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(e2={}){return e2.name=this.name,e2.plugin=this.constructor,e2.instance=this,e2}trigger(e2,t2={}){return gt(this.eventBusEl_,e2,this.getEventHash(t2))}handleStateChanged(e2){}dispose(){var{name:e2,player:t2}=this;this.trigger("dispose"),this.off(),t2.off("dispose",this.dispose),t2[In][e2]=!1,this.player=this.state=null,t2[e2]=On(e2,xn[e2])}static isBasic(e2){return"function"==typeof(e2="string"==typeof e2?Dn(e2):e2)&&!Rn.prototype.isPrototypeOf(e2.prototype)}static registerPlugin(e2,t2){if("string"!=typeof e2)throw new Error(`Illegal plugin name, "${e2}", must be a string, was ${typeof e2}.`);if(An(e2))o.warn(`A plugin named "${e2}" already exists. You may want to avoid re-registering plugins!`);else if(T.prototype.hasOwnProperty(e2))throw new Error(`Illegal plugin name, "${e2}", cannot share a name with an existing player method!`);if("function"!=typeof t2)throw new Error(`Illegal plugin for "${e2}", must be a function, was ${typeof t2}.`);return xn[e2]=t2,e2!==kn&&(Rn.isBasic(t2)?T.prototype[e2]=function Cn(t2,i2){function s2(){Ln(this,{name:t2,plugin:i2,instance:null},!0);var e2=i2.apply(this,arguments);return Pn(this,t2),Ln(this,{name:t2,plugin:i2,instance:e2}),e2}return Object.keys(i2).forEach(function(e2){s2[e2]=i2[e2]}),s2}(e2,t2):T.prototype[e2]=On(e2,t2)),t2}static deregisterPlugin(e2){if(e2===kn)throw new Error("Cannot de-register base plugin.");An(e2)&&(delete xn[e2],delete T.prototype[e2])}static getPlugins(e2=Object.keys(xn)){let i2;return e2.forEach(e3=>{var t2=Dn(e3);t2&&((i2=i2||{})[e3]=t2)}),i2}static getPluginVersion(e2){return(e2=Dn(e2))&&e2.VERSION||""}}function Nn(e2,i2,s2,r2){{var n2=i2+` is deprecated and will be removed in ${e2}.0; please use ${s2} instead.`,a2=r2;let t2=!1;return function(...e3){return t2||o.warn(n2),t2=!0,a2.apply(this,e3)}}}Rn.getPlugin=Dn,Rn.BASE_PLUGIN_NAME=kn,Rn.registerPlugin(kn,Rn),T.prototype.usingPlugin=function(e2){return!!this[In]&&!0===this[In][e2]},T.prototype.hasPlugin=function(e2){return!!An(e2)};let Mn=e2=>0===e2.indexOf("#")?e2.slice(1):e2;function E(e2,i2,s2){let r2=E.getPlayer(e2);if(r2)i2&&o.warn(`Player "${e2}" is already initialised. Options will not be applied.`),s2&&r2.ready(s2);else{let t2="string"==typeof e2?Ye("#"+Mn(e2)):e2;if(!Ce(t2))throw new TypeError("The element or ID supplied is not valid. (videojs)");e2="getRootNode"in t2&&t2.getRootNode()instanceof window.ShadowRoot?t2.getRootNode():t2.ownerDocument.body,t2.ownerDocument.defaultView&&e2.contains(t2)||o.warn("The element supplied is not included in the DOM"),!0===(i2=i2||{}).restoreEl&&(i2.restoreEl=(t2.parentNode&&t2.parentNode.hasAttribute&&t2.parentNode.hasAttribute("data-vjs-player")?t2.parentNode:t2).cloneNode(!0)),B("beforesetup").forEach(e3=>{!Y(e3=e3(t2,d(i2)))||Array.isArray(e3)?o.error("please return an object in beforesetup hooks"):i2=d(i2,e3)}),e2=g.getComponent("Player"),r2=new e2(t2,i2,s2),B("setup").forEach(e3=>e3(r2))}return r2}E.hooks_=U,E.hooks=B,E.hook=function(e2,t2){B(e2,t2)},E.hookOnce=function(s2,e2){B(s2,[].concat(e2).map(t2=>{let i2=(...e3)=>(F(s2,i2),t2(...e3));return i2}))},E.removeHook=F,!0!==window.VIDEOJS_NO_DYNAMIC_STYLE&&Ee()&&!(e=Ye(".vjs-styles-defaults"))&&(e=at("vjs-styles-defaults"),(Jr=Ye("head"))&&Jr.insertBefore(e,Jr.firstChild),ot(e,"\n    .video-js {\n      width: 300px;\n      height: 150px;\n    }\n\n    .vjs-fluid:not(.vjs-audio-only-mode) {\n      padding-top: 56.25%\n    }\n  ")),rt(1,E),E.VERSION=M,E.options=T.prototype.options_,E.getPlayers=()=>T.players,E.getPlayer=e2=>{var t2=T.players;let i2;if("string"==typeof e2){var s2,r2;if(r2=t2[s2=Mn(e2)])return r2;i2=Ye("#"+s2)}else i2=e2;if(Ce(i2)){var{player:r2,playerId:s2}=i2;if(r2||t2[s2])return r2||t2[s2]}},E.getAllPlayers=()=>Object.keys(T.players).map(e2=>T.players[e2]).filter(Boolean),E.players=T.players,E.getComponent=g.getComponent,E.registerComponent=(e2,t2)=>(v.isTech(t2)&&o.warn(`The ${e2} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),g.registerComponent.call(g,e2,t2)),E.getTech=v.getTech,E.registerTech=v.registerTech,E.use=function(e2,t2){bs[e2]=bs[e2]||[],bs[e2].push(t2)},Object.defineProperty(E,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(E.middleware,"TERMINATOR",{value:Ss,writeable:!1,enumerable:!0}),E.browser=Se,E.obj=ee,E.mergeOptions=Nn(9,"videojs.mergeOptions","videojs.obj.merge",d),E.defineLazyProperty=Nn(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",Z),E.bind=Nn(9,"videojs.bind","native Function.prototype.bind",p),E.registerPlugin=Rn.registerPlugin,E.deregisterPlugin=Rn.deregisterPlugin,E.plugin=(e2,t2)=>(o.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Rn.registerPlugin(e2,t2)),E.getPlugins=Rn.getPlugins,E.getPlugin=Rn.getPlugin,E.getPluginVersion=Rn.getPluginVersion,E.addLanguage=function(e2,t2){return e2=(""+e2).toLowerCase(),E.options.languages=d(E.options.languages,{[e2]:t2}),E.options.languages[e2]},E.log=o,E.createLogger=W,E.time=t,E.createTimeRange=Nn(9,"videojs.createTimeRange","videojs.time.createTimeRanges",jt),E.createTimeRanges=Nn(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",jt),E.formatTime=Nn(9,"videojs.formatTime","videojs.time.formatTime",Wt),E.setFormatTime=Nn(9,"videojs.setFormatTime","videojs.time.setFormatTime",zt),E.resetFormatTime=Nn(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",$t),E.parseUrl=Nn(9,"videojs.parseUrl","videojs.url.parseUrl",gi),E.isCrossOrigin=Nn(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",yi),E.EventTarget=wt,E.any=yt,E.on=mt,E.one=ft,E.off=c,E.trigger=gt,E.xhr=Pi,E.TrackList=si,E.TextTrack=Fi,E.TextTrackList=li,E.AudioTrack=qi,E.AudioTrackList=ni,E.VideoTrack=ji,E.VideoTrackList=oi,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(e2=>{E[e2]=function(){return o.warn(`videojs.${e2}() is deprecated; use videojs.dom.${e2}() instead`),et[e2].apply(null,arguments)}}),E.computedStyle=Nn(9,"videojs.computedStyle","videojs.dom.computedStyle",Je),E.dom=et,E.fn=Tt,E.num=$i,E.str=Bt,E.url=vi,E.Error={NetworkBadStatus:"networkbadstatus",NetworkRequestFailed:"networkrequestfailed",NetworkRequestAborted:"networkrequestaborted",NetworkRequestTimeout:"networkrequesttimeout",NetworkBodyParserFailed:"networkbodyparserfailed",StreamingHlsPlaylistParserError:"streaminghlsplaylistparsererror",StreamingDashManifestParserError:"streamingdashmanifestparsererror",StreamingContentSteeringParserError:"streamingcontentsteeringparsererror",StreamingVttParserError:"streamingvttparsererror",StreamingFailedToSelectNextSegment:"streamingfailedtoselectnextsegment",StreamingFailedToDecryptSegment:"streamingfailedtodecryptsegment",StreamingFailedToTransmuxSegment:"streamingfailedtotransmuxsegment",StreamingFailedToAppendSegment:"streamingfailedtoappendsegment",StreamingCodecsChangeError:"streamingcodecschangeerror"},Ti(function(e2,t2){e2.exports=function(e3){var i2=function t3(e4){return e4&&"object"==typeof e4&&"default"in e4?e4:{default:e4}}(e3);class s2{constructor(e4){let t4=this;return t4.id=e4.id,t4.label=t4.id,t4.width=e4.width,t4.height=e4.height,t4.bitrate=e4.bandwidth,t4.frameRate=e4.frameRate,t4.enabled_=e4.enabled,Object.defineProperty(t4,"enabled",{get:()=>t4.enabled_(),set(e5){t4.enabled_(e5)}}),t4}}class n2 extends i2.default.EventTarget{constructor(){super();let e4=this;return e4.levels_=[],e4.selectedIndex_=-1,Object.defineProperty(e4,"selectedIndex",{get:()=>e4.selectedIndex_}),Object.defineProperty(e4,"length",{get:()=>e4.levels_.length}),e4[Symbol.iterator]=()=>e4.levels_.values(),e4}addQualityLevel(e4){let t4=this.getQualityLevelById(e4.id);if(t4)return t4;const i3=this.levels_.length;return t4=new s2(e4),""+i3 in this||Object.defineProperty(this,i3,{get(){return this.levels_[i3]}}),this.levels_.push(t4),this.trigger({qualityLevel:t4,type:"addqualitylevel"}),t4}removeQualityLevel(i3){let s3=null;for(let e4=0,t4=this.length;e4<t4;e4++)if(this[e4]===i3){s3=this.levels_.splice(e4,1)[0],this.selectedIndex_===e4?this.selectedIndex_=-1:this.selectedIndex_>e4&&this.selectedIndex_--;break}return s3&&this.trigger({qualityLevel:i3,type:"removequalitylevel"}),s3}getQualityLevelById(i3){for(let e4=0,t4=this.length;e4<t4;e4++){const s3=this[e4];if(s3.id===i3)return s3}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}}n2.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const l2 in n2.prototype.allowedEvents_)n2.prototype["on"+l2]=null;const o2=function(e4){return function(e4){const i3=e4.qualityLevels,s3=new n2,r3=function(){s3.dispose(),e4.qualityLevels=i3,e4.off("dispose",r3)};return e4.on("dispose",r3),e4.qualityLevels=()=>s3,e4.qualityLevels.VERSION="4.1.0",s3}(this,i2.default.obj.merge({},e4))};return i2.default.registerPlugin("qualityLevels",o2),o2.VERSION="4.1.0",o2}(E)});var Bn="https://example.com",Fn=function(e2,t2){if(/^[a-z]+:/i.test(t2))return t2;/^data:/.test(e2)&&(e2=window.location&&window.location.href||"");var i2=/^\/\//.test(e2),s2=!window.location&&!/\/\//i.test(e2);e2=new window.URL(e2,window.location||Bn),t2=new URL(t2,e2);return s2?t2.href.slice(19):i2?t2.href.slice(t2.protocol.length):t2.href},Qr=function(){function e2(){this.listeners={}}var t2=e2.prototype;return t2.on=function(e3,t3){this.listeners[e3]||(this.listeners[e3]=[]),this.listeners[e3].push(t3)},t2.off=function(e3,t3){return!!this.listeners[e3]&&(t3=this.listeners[e3].indexOf(t3),this.listeners[e3]=this.listeners[e3].slice(0),this.listeners[e3].splice(t3,1),-1<t3)},t2.trigger=function(e3){var t3=this.listeners[e3];if(t3)if(2===arguments.length)for(var i2=t3.length,s2=0;s2<i2;++s2)t3[s2].call(this,arguments[1]);else for(var r2=Array.prototype.slice.call(arguments,1),n2=t3.length,a2=0;a2<n2;++a2)t3[a2].apply(this,r2)},t2.dispose=function(){this.listeners={}},t2.pipe=function(t3){this.on("data",function(e3){t3.push(e3)})},e2}();function qn(e2){for(var t2=function Un(e2){return window.atob?window.atob(e2):Buffer.from(e2,"base64").toString("binary")}(e2),i2=new Uint8Array(t2.length),s2=0;s2<t2.length;s2++)i2[s2]=t2.charCodeAt(s2);return i2}class jn extends Qr{constructor(){super(),this.buffer=""}push(e2){let t2;for(this.buffer+=e2,t2=this.buffer.indexOf("\n");-1<t2;t2=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t2)),this.buffer=this.buffer.substring(t2+1)}}function Vn(e2){var t2={};return(e2=/([0-9.]*)?@?([0-9.]*)?/.exec(e2||""))[1]&&(t2.length=parseInt(e2[1],10)),e2[2]&&(t2.offset=parseInt(e2[2],10)),t2}function Hn(t2){var i2={};if(t2){var s2,r2=t2.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))'));let e2=r2.length;for(;e2--;)""!==r2[e2]&&((s2=/([^=]*)=(.*)/.exec(r2[e2]).slice(1))[0]=s2[0].replace(/^\s+|\s+$/g,""),s2[1]=s2[1].replace(/^\s+|\s+$/g,""),s2[1]=s2[1].replace(/^['"](.*)['"]$/g,"$1"),i2[s2[0]]=s2[1])}return i2}let zn=String.fromCharCode(9),$n=e2=>{var t2={};return(e2=e2.split("x"))[0]&&(t2.width=parseInt(e2[0],10)),e2[1]&&(t2.height=parseInt(e2[1],10)),t2};class Wn extends Qr{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(i2){let a2,o2;0!==(i2=i2.trim()).length&&("#"!==i2[0]?this.trigger("data",{type:"uri",uri:i2}):this.tagMappers.reduce((e2,t2)=>(t2=t2(i2))===i2?e2:e2.concat([t2]),[i2]).forEach(t2=>{for(let e3=0;e3<this.customParsers.length;e3++)if(this.customParsers[e3].call(this,t2))return;var e2;if(0!==t2.indexOf("#EXT"))this.trigger("data",{type:"comment",text:t2.slice(1)});else if(t2=t2.replace("\r",""),a2=/^#EXTM3U/.exec(t2))this.trigger("data",{type:"tag",tagType:"m3u"});else if(a2=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(t2))o2={type:"tag",tagType:"inf"},a2[1]&&(o2.duration=parseFloat(a2[1])),a2[2]&&(o2.title=a2[2]),this.trigger("data",o2);else if(a2=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(t2))o2={type:"tag",tagType:"targetduration"},a2[1]&&(o2.duration=parseInt(a2[1],10)),this.trigger("data",o2);else if(a2=/^#EXT-X-VERSION:([0-9.]*)?/.exec(t2))o2={type:"tag",tagType:"version"},a2[1]&&(o2.version=parseInt(a2[1],10)),this.trigger("data",o2);else if(a2=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(t2))o2={type:"tag",tagType:"media-sequence"},a2[1]&&(o2.number=parseInt(a2[1],10)),this.trigger("data",o2);else if(a2=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(t2))o2={type:"tag",tagType:"discontinuity-sequence"},a2[1]&&(o2.number=parseInt(a2[1],10)),this.trigger("data",o2);else if(a2=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(t2))o2={type:"tag",tagType:"playlist-type"},a2[1]&&(o2.playlistType=a2[1]),this.trigger("data",o2);else if(a2=/^#EXT-X-BYTERANGE:(.*)?$/.exec(t2))o2=f(Vn(a2[1]),{type:"tag",tagType:"byterange"}),this.trigger("data",o2);else if(a2=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(t2))o2={type:"tag",tagType:"allow-cache"},a2[1]&&(o2.allowed=!/NO/.test(a2[1])),this.trigger("data",o2);else if(a2=/^#EXT-X-MAP:(.*)$/.exec(t2))o2={type:"tag",tagType:"map"},a2[1]&&((e2=Hn(a2[1])).URI&&(o2.uri=e2.URI),e2.BYTERANGE)&&(o2.byterange=Vn(e2.BYTERANGE)),this.trigger("data",o2);else if(a2=/^#EXT-X-STREAM-INF:(.*)$/.exec(t2))o2={type:"tag",tagType:"stream-inf"},a2[1]&&(o2.attributes=Hn(a2[1]),o2.attributes.RESOLUTION&&(o2.attributes.RESOLUTION=$n(o2.attributes.RESOLUTION)),o2.attributes.BANDWIDTH&&(o2.attributes.BANDWIDTH=parseInt(o2.attributes.BANDWIDTH,10)),o2.attributes["FRAME-RATE"]&&(o2.attributes["FRAME-RATE"]=parseFloat(o2.attributes["FRAME-RATE"])),o2.attributes["PROGRAM-ID"])&&(o2.attributes["PROGRAM-ID"]=parseInt(o2.attributes["PROGRAM-ID"],10)),this.trigger("data",o2);else if(a2=/^#EXT-X-MEDIA:(.*)$/.exec(t2))o2={type:"tag",tagType:"media"},a2[1]&&(o2.attributes=Hn(a2[1])),this.trigger("data",o2);else if(a2=/^#EXT-X-ENDLIST/.exec(t2))this.trigger("data",{type:"tag",tagType:"endlist"});else if(a2=/^#EXT-X-DISCONTINUITY/.exec(t2))this.trigger("data",{type:"tag",tagType:"discontinuity"});else if(a2=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(t2))o2={type:"tag",tagType:"program-date-time"},a2[1]&&(o2.dateTimeString=a2[1],o2.dateTimeObject=new Date(a2[1])),this.trigger("data",o2);else if(a2=/^#EXT-X-KEY:(.*)$/.exec(t2))o2={type:"tag",tagType:"key"},a2[1]&&(o2.attributes=Hn(a2[1]),o2.attributes.IV)&&("0x"===o2.attributes.IV.substring(0,2).toLowerCase()&&(o2.attributes.IV=o2.attributes.IV.substring(2)),o2.attributes.IV=o2.attributes.IV.match(/.{8}/g),o2.attributes.IV[0]=parseInt(o2.attributes.IV[0],16),o2.attributes.IV[1]=parseInt(o2.attributes.IV[1],16),o2.attributes.IV[2]=parseInt(o2.attributes.IV[2],16),o2.attributes.IV[3]=parseInt(o2.attributes.IV[3],16),o2.attributes.IV=new Uint32Array(o2.attributes.IV)),this.trigger("data",o2);else if(a2=/^#EXT-X-START:(.*)$/.exec(t2))o2={type:"tag",tagType:"start"},a2[1]&&(o2.attributes=Hn(a2[1]),o2.attributes["TIME-OFFSET"]=parseFloat(o2.attributes["TIME-OFFSET"]),o2.attributes.PRECISE=/YES/.test(o2.attributes.PRECISE)),this.trigger("data",o2);else if(a2=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(t2))o2={type:"tag",tagType:"cue-out-cont"},a2[1]?o2.data=a2[1]:o2.data="",this.trigger("data",o2);else if(a2=/^#EXT-X-CUE-OUT:(.*)?$/.exec(t2))o2={type:"tag",tagType:"cue-out"},a2[1]?o2.data=a2[1]:o2.data="",this.trigger("data",o2);else if(a2=/^#EXT-X-CUE-IN:?(.*)?$/.exec(t2))o2={type:"tag",tagType:"cue-in"},a2[1]?o2.data=a2[1]:o2.data="",this.trigger("data",o2);else if((a2=/^#EXT-X-SKIP:(.*)$/.exec(t2))&&a2[1])(o2={type:"tag",tagType:"skip"}).attributes=Hn(a2[1]),o2.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(o2.attributes["SKIPPED-SEGMENTS"]=parseInt(o2.attributes["SKIPPED-SEGMENTS"],10)),o2.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(o2.attributes["RECENTLY-REMOVED-DATERANGES"]=o2.attributes["RECENTLY-REMOVED-DATERANGES"].split(zn)),this.trigger("data",o2);else if((a2=/^#EXT-X-PART:(.*)$/.exec(t2))&&a2[1])(o2={type:"tag",tagType:"part"}).attributes=Hn(a2[1]),["DURATION"].forEach(function(e3){o2.attributes.hasOwnProperty(e3)&&(o2.attributes[e3]=parseFloat(o2.attributes[e3]))}),["INDEPENDENT","GAP"].forEach(function(e3){o2.attributes.hasOwnProperty(e3)&&(o2.attributes[e3]=/YES/.test(o2.attributes[e3]))}),o2.attributes.hasOwnProperty("BYTERANGE")&&(o2.attributes.byterange=Vn(o2.attributes.BYTERANGE)),this.trigger("data",o2);else if((a2=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(t2))&&a2[1])(o2={type:"tag",tagType:"server-control"}).attributes=Hn(a2[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(e3){o2.attributes.hasOwnProperty(e3)&&(o2.attributes[e3]=parseFloat(o2.attributes[e3]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(e3){o2.attributes.hasOwnProperty(e3)&&(o2.attributes[e3]=/YES/.test(o2.attributes[e3]))}),this.trigger("data",o2);else if((a2=/^#EXT-X-PART-INF:(.*)$/.exec(t2))&&a2[1])(o2={type:"tag",tagType:"part-inf"}).attributes=Hn(a2[1]),["PART-TARGET"].forEach(function(e3){o2.attributes.hasOwnProperty(e3)&&(o2.attributes[e3]=parseFloat(o2.attributes[e3]))}),this.trigger("data",o2);else if((a2=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(t2))&&a2[1])(o2={type:"tag",tagType:"preload-hint"}).attributes=Hn(a2[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(e3){var t3;o2.attributes.hasOwnProperty(e3)&&(o2.attributes[e3]=parseInt(o2.attributes[e3],10),t3="BYTERANGE-LENGTH"===e3?"length":"offset",o2.attributes.byterange=o2.attributes.byterange||{},o2.attributes.byterange[t3]=o2.attributes[e3],delete o2.attributes[e3])}),this.trigger("data",o2);else if((a2=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(t2))&&a2[1])(o2={type:"tag",tagType:"rendition-report"}).attributes=Hn(a2[1]),["LAST-MSN","LAST-PART"].forEach(function(e3){o2.attributes.hasOwnProperty(e3)&&(o2.attributes[e3]=parseInt(o2.attributes[e3],10))}),this.trigger("data",o2);else if((a2=/^#EXT-X-DATERANGE:(.*)$/.exec(t2))&&a2[1]){(o2={type:"tag",tagType:"daterange"}).attributes=Hn(a2[1]),["ID","CLASS"].forEach(function(e3){o2.attributes.hasOwnProperty(e3)&&(o2.attributes[e3]=String(o2.attributes[e3]))}),["START-DATE","END-DATE"].forEach(function(e3){o2.attributes.hasOwnProperty(e3)&&(o2.attributes[e3]=new Date(o2.attributes[e3]))}),["DURATION","PLANNED-DURATION"].forEach(function(e3){o2.attributes.hasOwnProperty(e3)&&(o2.attributes[e3]=parseFloat(o2.attributes[e3]))}),["END-ON-NEXT"].forEach(function(e3){o2.attributes.hasOwnProperty(e3)&&(o2.attributes[e3]=/YES/i.test(o2.attributes[e3]))}),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach(function(e3){o2.attributes.hasOwnProperty(e3)&&(o2.attributes[e3]=o2.attributes[e3].toString(16))});var i3,s2,r2,n2=/^X-([A-Z]+-)+[A-Z]+$/;for(i3 in o2.attributes)n2.test(i3)&&(s2=/[0-9A-Fa-f]{6}/g.test(o2.attributes[i3]),r2=/^\d+(\.\d+)?$/.test(o2.attributes[i3]),o2.attributes[i3]=s2?o2.attributes[i3].toString(16):(r2?parseFloat:String)(o2.attributes[i3]));this.trigger("data",o2)}else(a2=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(t2))?this.trigger("data",{type:"tag",tagType:"independent-segments"}):(a2=/^#EXT-X-I-FRAMES-ONLY/.exec(t2))?this.trigger("data",{type:"tag",tagType:"i-frames-only"}):(a2=/^#EXT-X-CONTENT-STEERING:(.*)$/.exec(t2))?((o2={type:"tag",tagType:"content-steering"}).attributes=Hn(a2[1]),this.trigger("data",o2)):(a2=/^#EXT-X-I-FRAME-STREAM-INF:(.*)$/.exec(t2))?((o2={type:"tag",tagType:"i-frame-playlist"}).attributes=Hn(a2[1]),o2.attributes.URI&&(o2.uri=o2.attributes.URI),o2.attributes.BANDWIDTH&&(o2.attributes.BANDWIDTH=parseInt(o2.attributes.BANDWIDTH,10)),o2.attributes.RESOLUTION&&(o2.attributes.RESOLUTION=$n(o2.attributes.RESOLUTION)),o2.attributes["AVERAGE-BANDWIDTH"]&&(o2.attributes["AVERAGE-BANDWIDTH"]=parseInt(o2.attributes["AVERAGE-BANDWIDTH"],10)),o2.attributes["FRAME-RATE"]&&(o2.attributes["FRAME-RATE"]=parseFloat(o2.attributes["FRAME-RATE"])),this.trigger("data",o2)):(a2=/^#EXT-X-DEFINE:(.*)$/.exec(t2))?((o2={type:"tag",tagType:"define"}).attributes=Hn(a2[1]),this.trigger("data",o2)):this.trigger("data",{type:"tag",data:t2.slice(4)})}))}addParser({expression:t2,customType:i2,dataParser:s2,segment:r2}){"function"!=typeof s2&&(s2=e2=>e2),this.customParsers.push(e2=>{if(t2.exec(e2))return this.trigger("data",{type:"custom",data:s2(e2),customType:i2,segment:r2}),!0})}addTagMapper({expression:t2,map:i2}){this.tagMappers.push(e2=>t2.test(e2)?i2(e2):e2)}}function Gn(t2){let i2={};return Object.keys(t2).forEach(function(e2){i2[e2.toLowerCase().replace(/-(\w)/g,e3=>e3[1].toUpperCase())]=t2[e2]}),i2}function Xn(e2){var t2,i2,s2,r2,n2,{serverControl:e2,targetDuration:a2,partTargetDuration:o2}=e2;e2&&(t2="#EXT-X-SERVER-CONTROL",i2="holdBack",s2="partHoldBack",r2=a2&&3*a2,n2=o2&&2*o2,a2&&!e2.hasOwnProperty(i2)&&(e2[i2]=r2,this.trigger("info",{message:t2+` defaulting HOLD-BACK to targetDuration * 3 (${r2}).`})),r2&&e2[i2]<r2&&(this.trigger("warn",{message:t2+` clamping HOLD-BACK (${e2[i2]}) to targetDuration * 3 (${r2})`}),e2[i2]=r2),o2&&!e2.hasOwnProperty(s2)&&(e2[s2]=3*o2,this.trigger("info",{message:t2+` defaulting PART-HOLD-BACK to partTargetDuration * 3 (${e2[s2]}).`})),o2)&&e2[s2]<n2&&(this.trigger("warn",{message:t2+` clamping PART-HOLD-BACK (${e2[s2]}) to partTargetDuration * 2 (${n2}).`}),e2[s2]=n2)}class Kn extends Qr{constructor(e2={}){super(),this.lineStream=new jn,this.parseStream=new Wn,this.lineStream.pipe(this.parseStream),this.mainDefinitions=e2.mainDefinitions||{},this.params=new URL(e2.uri,"https://a.com").searchParams,this.lastProgramDateTime=null;let l2,d2,r2=this,a2=[],o2={},h2=!1,u2={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},c2=0,p2=(this.manifest={allowCache:!0,discontinuityStarts:[],dateRanges:[],iFramePlaylists:[],segments:[]},0),m2=0,g2={};this.on("end",()=>{o2.uri||!o2.parts&&!o2.preloadHints||(!o2.map&&l2&&(o2.map=l2),!o2.key&&d2&&(o2.key=d2),o2.timeline||"number"!=typeof c2||(o2.timeline=c2),this.manifest.preloadSegment=o2)}),this.parseStream.on("data",function(n2){let t2,i2;if(r2.manifest.definitions)for(var e3 in r2.manifest.definitions)if(n2.uri&&(n2.uri=n2.uri.replace(`{$${e3}}`,r2.manifest.definitions[e3])),n2.attributes)for(var s2 in n2.attributes)"string"==typeof n2.attributes[s2]&&(n2.attributes[s2]=n2.attributes[s2].replace(`{$${e3}}`,r2.manifest.definitions[e3]));({tag(){({version(){n2.version&&(this.manifest.version=n2.version)},"allow-cache"(){this.manifest.allowCache=n2.allowed,"allowed"in n2||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){var e4={};"length"in n2&&((o2.byterange=e4).length=n2.length,"offset"in n2||(n2.offset=p2)),"offset"in n2&&((o2.byterange=e4).offset=n2.offset),p2=e4.offset+e4.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),n2.title&&(o2.title=n2.title),0<n2.duration&&(o2.duration=n2.duration),0===n2.duration&&(o2.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=a2},key(){if(n2.attributes)if("NONE"===n2.attributes.METHOD)d2=null;else if(n2.attributes.URI)if("com.apple.streamingkeydelivery"===n2.attributes.KEYFORMAT)this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:n2.attributes};else if("com.microsoft.playready"===n2.attributes.KEYFORMAT)this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:n2.attributes.URI};else{if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===n2.attributes.KEYFORMAT)return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(n2.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===n2.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==n2.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):n2.attributes.KEYID&&"0x"===n2.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:n2.attributes.KEYFORMAT,keyId:n2.attributes.KEYID.substring(2)},pssh:qn(n2.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}));n2.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),d2={method:n2.attributes.METHOD||"AES-128",uri:n2.attributes.URI},void 0!==n2.attributes.IV&&(d2.iv=n2.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence"(){isFinite(n2.number)?this.manifest.mediaSequence=n2.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+n2.number})},"discontinuity-sequence"(){isFinite(n2.number)?(this.manifest.discontinuitySequence=n2.number,c2=n2.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+n2.number})},"playlist-type"(){/VOD|EVENT/.test(n2.playlistType)?this.manifest.playlistType=n2.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+n2.playlist})},map(){l2={},n2.uri&&(l2.uri=n2.uri),n2.byterange&&(l2.byterange=n2.byterange),d2&&(l2.key=d2)},"stream-inf"(){this.manifest.playlists=a2,this.manifest.mediaGroups=this.manifest.mediaGroups||u2,n2.attributes?(o2.attributes||(o2.attributes={}),f(o2.attributes,n2.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media(){var e4;this.manifest.mediaGroups=this.manifest.mediaGroups||u2,n2.attributes&&n2.attributes.TYPE&&n2.attributes["GROUP-ID"]&&n2.attributes.NAME?((e4=this.manifest.mediaGroups[n2.attributes.TYPE])[n2.attributes["GROUP-ID"]]=e4[n2.attributes["GROUP-ID"]]||{},t2=e4[n2.attributes["GROUP-ID"]],(i2={default:/yes/i.test(n2.attributes.DEFAULT)}).default?i2.autoselect=!0:i2.autoselect=/yes/i.test(n2.attributes.AUTOSELECT),n2.attributes.LANGUAGE&&(i2.language=n2.attributes.LANGUAGE),n2.attributes.URI&&(i2.uri=n2.attributes.URI),n2.attributes["INSTREAM-ID"]&&(i2.instreamId=n2.attributes["INSTREAM-ID"]),n2.attributes.CHARACTERISTICS&&(i2.characteristics=n2.attributes.CHARACTERISTICS),n2.attributes.FORCED&&(i2.forced=/yes/i.test(n2.attributes.FORCED)),t2[n2.attributes.NAME]=i2):this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity(){c2+=1,o2.discontinuity=!0,this.manifest.discontinuityStarts.push(a2.length)},"program-date-time"(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=n2.dateTimeString,this.manifest.dateTimeObject=n2.dateTimeObject),o2.dateTimeString=n2.dateTimeString,o2.dateTimeObject=n2.dateTimeObject;var e4=this.lastProgramDateTime;this.lastProgramDateTime=new Date(n2.dateTimeString).getTime(),null===e4&&this.manifest.segments.reduceRight((e5,t3)=>(t3.programDateTime=e5-1e3*t3.duration,t3.programDateTime),this.lastProgramDateTime)},targetduration(){!isFinite(n2.duration)||n2.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+n2.duration}):(this.manifest.targetDuration=n2.duration,Xn.call(this,this.manifest))},start(){!n2.attributes||isNaN(n2.attributes["TIME-OFFSET"])?this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"}):this.manifest.start={timeOffset:n2.attributes["TIME-OFFSET"],precise:n2.attributes.PRECISE}},"cue-out"(){o2.cueOut=n2.data},"cue-out-cont"(){o2.cueOutCont=n2.data},"cue-in"(){o2.cueIn=n2.data},skip(){this.manifest.skip=Gn(n2.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",n2.attributes,["SKIPPED-SEGMENTS"])},part(){h2=!0;var e4=this.manifest.segments.length,t3=Gn(n2.attributes);o2.parts=o2.parts||[],o2.parts.push(t3),t3.byterange&&(t3.byterange.hasOwnProperty("offset")||(t3.byterange.offset=m2),m2=t3.byterange.offset+t3.byterange.length),t3=o2.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${t3} for segment #`+e4,n2.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((e5,t4)=>{e5.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${t4} lacks required attribute(s): LAST-PART`})})},"server-control"(){var e4=this.manifest.serverControl=Gn(n2.attributes);e4.hasOwnProperty("canBlockReload")||(e4.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),Xn.call(this,this.manifest),e4.canSkipDateranges&&!e4.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){var t3=this.manifest.segments.length,i3=Gn(n2.attributes),e4=i3.type&&"PART"===i3.type,s3=(o2.preloadHints=o2.preloadHints||[],o2.preloadHints.push(i3),!i3.byterange||i3.byterange.hasOwnProperty("offset")||(i3.byterange.offset=e4?m2:0,e4&&(m2=i3.byterange.offset+i3.byterange.length)),o2.preloadHints.length-1);if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${s3} for segment #`+t3,n2.attributes,["TYPE","URI"]),i3.type)for(let e5=0;e5<o2.preloadHints.length-1;e5++){var r3=o2.preloadHints[e5];r3.type&&r3.type===i3.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${s3} for segment #${t3} has the same TYPE ${i3.type} as preload hint #`+e5})}},"rendition-report"(){var e4=Gn(n2.attributes),t3=(e4=(this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(e4),this.manifest.renditionReports.length-1),["LAST-MSN","URI"]);h2&&t3.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+e4,n2.attributes,t3)},"part-inf"(){this.manifest.partInf=Gn(n2.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",n2.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),Xn.call(this,this.manifest)},daterange(){this.manifest.dateRanges.push(Gn(n2.attributes));var e4=this.manifest.dateRanges.length-1;this.warnOnMissingAttributes_("#EXT-X-DATERANGE #"+e4,n2.attributes,["ID","START-DATE"]);let t3=this.manifest.dateRanges[e4];t3.endDate&&t3.startDate&&new Date(t3.endDate)<new Date(t3.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),t3.duration&&t3.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),t3.plannedDuration&&t3.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});var i3=!!t3.endOnNext;if(i3&&!t3.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),i3&&(t3.duration||t3.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),t3.duration&&t3.endDate&&(i3=t3.startDate.getTime()+1e3*t3.duration,this.manifest.dateRanges[e4].endDate=new Date(i3)),g2[t3.id]){for(var s3 in g2[t3.id])if(t3[s3]&&JSON.stringify(g2[t3.id][s3])!==JSON.stringify(t3[s3])){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes values"});break}e4=this.manifest.dateRanges.findIndex(e5=>e5.id===t3.id),this.manifest.dateRanges[e4]=f(this.manifest.dateRanges[e4],t3),g2[t3.id]=f(g2[t3.id],t3),this.manifest.dateRanges.pop()}else g2[t3.id]=t3},"independent-segments"(){this.manifest.independentSegments=!0},"i-frames-only"(){this.manifest.iFramesOnly=!0,this.requiredCompatibilityversion(this.manifest.version,4)},"content-steering"(){this.manifest.contentSteering=Gn(n2.attributes),this.warnOnMissingAttributes_("#EXT-X-CONTENT-STEERING",n2.attributes,["SERVER-URI"])},define(){this.manifest.definitions=this.manifest.definitions||{};var e4,t3=(e5,t4)=>{e5 in this.manifest.definitions?this.trigger("error",{message:"EXT-X-DEFINE: Duplicate name "+e5}):this.manifest.definitions[e5]=t4};return"QUERYPARAM"in n2.attributes?"NAME"in n2.attributes||"IMPORT"in n2.attributes?void this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"}):(e4=this.params.get(n2.attributes.QUERYPARAM))?void t3(n2.attributes.QUERYPARAM,decodeURIComponent(e4)):void this.trigger("error",{message:"EXT-X-DEFINE: No query param "+n2.attributes.QUERYPARAM}):"NAME"in n2.attributes?"IMPORT"in n2.attributes?void this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"}):"VALUE"in n2.attributes&&"string"==typeof n2.attributes.VALUE?void t3(n2.attributes.NAME,n2.attributes.VALUE):void this.trigger("error",{message:"EXT-X-DEFINE: No value for "+n2.attributes.NAME}):"IMPORT"in n2.attributes?this.mainDefinitions[n2.attributes.IMPORT]?void t3(n2.attributes.IMPORT,this.mainDefinitions[n2.attributes.IMPORT]):void this.trigger("error",{message:`EXT-X-DEFINE: No value ${n2.attributes.IMPORT} to import, or IMPORT used on main playlist`}):void this.trigger("error",{message:"EXT-X-DEFINE: No attribute"})},"i-frame-playlist"(){this.manifest.iFramePlaylists.push({attributes:n2.attributes,uri:n2.uri,timeline:c2}),this.warnOnMissingAttributes_("#EXT-X-I-FRAME-STREAM-INF",n2.attributes,["BANDWIDTH","URI"])}}[n2.tagType]||function(){}).call(r2)},uri(){o2.uri=n2.uri,a2.push(o2),!this.manifest.targetDuration||"duration"in o2||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),o2.duration=this.manifest.targetDuration),d2&&(o2.key=d2),o2.timeline=c2,l2&&(o2.map=l2),m2=0,null!==this.lastProgramDateTime&&(o2.programDateTime=this.lastProgramDateTime,this.lastProgramDateTime+=1e3*o2.duration),o2={}},comment(){},custom(){n2.segment?(o2.custom=o2.custom||{},o2.custom[n2.customType]=n2.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[n2.customType]=n2.data)}})[n2.type].call(r2)})}requiredCompatibilityversion(e2,t2){(e2<t2||!e2)&&this.trigger("warn",{message:"manifest must be at least version "+t2})}warnOnMissingAttributes_(e2,t2,i2){let s2=[];i2.forEach(function(e3){t2.hasOwnProperty(e3)||s2.push(e3)}),s2.length&&this.trigger("warn",{message:e2+" lacks required attribute(s): "+s2.join(", ")})}push(e2){this.lineStream.push(e2)}end(){this.lineStream.push("\n"),this.manifest.dateRanges.length&&null===this.lastProgramDateTime&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),this.lastProgramDateTime=null,this.trigger("end")}addParser(e2){this.parseStream.addParser(e2)}addTagMapper(e2){this.parseStream.addTagMapper(e2)}}function Yn(e2){return ia.audio.test((e2=void 0===e2?"":e2).trim().toLowerCase())}function Jn(e2,t2){return void 0===e2&&(e2=""),void 0===t2&&(t2=!1),window.MediaSource&&window.MediaSource.isTypeSupported&&window.MediaSource.isTypeSupported(oa(e2))||t2&&window.ManagedMediaSource&&window.ManagedMediaSource.isTypeSupported&&window.ManagedMediaSource.isTypeSupported(oa(e2))||!1}function Zn(e2){return(e2=void 0===e2?"":e2).toLowerCase().split(",").every(function(e3){e3=e3.trim();for(var t2=0;t2<ra.length;t2++){var i2=ra[t2];if(ia["muxer"+i2].test(e3))return!0}return!1})}function ea(e2){return da.test(e2)?"hls":ha.test(e2)?"dash":"application/vnd.videojs.vhs+json"===e2?"vhs-json":null}var ia={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},sa=["video","audio","text"],ra=["Video","Audio","Text"],na=function(e2){return e2&&e2.replace(/avc1\.(\d+)\.(\d+)/i,function(e3,t2,i2){return"avc1."+("00"+Number(t2).toString(16)).slice(-2)+"00"+("00"+Number(i2).toString(16)).slice(-2)})},aa=function(e2){e2=(e2=void 0===e2?"":e2).split(",");var n2=[];return e2.forEach(function(s2){var r2;s2=s2.trim(),sa.forEach(function(e3){var t2,i2=ia[e3].exec(s2.toLowerCase());!i2||i2.length<=1||(r2=e3,i2=s2.substring(0,i2[1].length),t2=s2.replace(i2,""),n2.push({type:i2,details:t2,mediaType:e3}))}),r2||n2.push({type:s2,details:"",mediaType:"unknown"})}),n2},oa=function(e2){var t2,i2,s2;if(e2&&"string"==typeof e2)return i2="video",1===(t2=e2.toLowerCase().split(",").map(function(e3){return na(e3.trim())})).length&&Yn(t2[0])?i2="audio":1===t2.length&&function Qn(e2){return ia.text.test((e2=void 0===e2?"":e2).trim().toLowerCase())}(t2[0])&&(i2="application"),s2="mp4",t2.every(function(e3){return ia.mp4.test(e3)})?s2="mp4":t2.every(function(e3){return ia.webm.test(e3)})?s2="webm":t2.every(function(e3){return ia.ogg.test(e3)})&&(s2="ogg"),i2+"/"+s2+';codecs="'+e2+'"'},la="mp4a.40.2",da=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,ha=/^application\/dash\+xml/i,pa=function(e2){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(e2):e2&&e2.buffer instanceof ArrayBuffer},S=function(e2){return e2 instanceof Uint8Array?e2:(Array.isArray(e2)||function ta(e2){return pa(e2)}(e2)||e2 instanceof ArrayBuffer||(e2="number"!=typeof e2||"number"==typeof e2&&e2!=e2?0:[e2]),new Uint8Array(e2&&e2.buffer||e2,e2&&e2.byteOffset||0,e2&&e2.byteLength||0))},w=window.BigInt||Number,ma=[w("0x1"),w("0x100"),w("0x10000"),w("0x1000000"),w("0x100000000"),w("0x10000000000"),w("0x1000000000000"),w("0x100000000000000"),w("0x10000000000000000")],ga=(xi=new Uint16Array([65484]),(xi=new Uint8Array(xi.buffer,xi.byteOffset,xi.byteLength))[0],function(s2,e2){var t2=void 0!==(t2=(e2=void 0===e2?{}:e2).signed)&&t2,r2=void 0!==(e2=e2.le)&&e2;s2=S(s2),e2=r2?"reduce":"reduceRight",e2=(s2[e2]||Array.prototype[e2]).call(s2,function(e3,t3,i2){return i2=r2?i2:Math.abs(i2+1-s2.length),e3+w(t3)*ma[i2]},w(0));return t2&&(t2=ma[s2.length]/w(2)-w(1))<(e2=w(e2))&&(e2=(e2=e2-t2-t2)-w(2)),Number(e2)}),fa=function(e2,t2){for(var i2=void 0!==(t2=(void 0===t2?{}:t2).le)&&t2,s2=function(e2){return Math.ceil(function(e2){return e2.toString(2).length}(e2)/8)}(e2=w(e2="bigint"!=typeof e2&&"number"!=typeof e2||"number"==typeof e2&&e2!=e2?0:e2)),r2=new Uint8Array(new ArrayBuffer(s2)),n2=0;n2<s2;n2++){var a2=i2?n2:Math.abs(n2+1-r2.length);r2[a2]=Number(e2/ma[n2]&w(255)),e2<0&&(r2[a2]=Math.abs(~r2[a2]),r2[a2]-=0===n2?1:2)}return r2},ya=function(e2,t2){if("string"!=typeof(e2="string"!=typeof e2&&e2&&"function"==typeof e2.toString?e2.toString():e2))return new Uint8Array;t2||(e2=unescape(encodeURIComponent(e2)));for(var i2=new Uint8Array(e2.length),s2=0;s2<e2.length;s2++)i2[s2]=e2.charCodeAt(s2);return i2},C=function(i2,e2,t2){var s2,r2=void 0===(s2=(t2=void 0===t2?{}:t2).offset)?0:s2,n2=void 0===(s2=t2.mask)?[]:s2;i2=S(i2),t2=(e2=S(e2)).every||Array.prototype.every;return e2.length&&i2.length-r2>=e2.length&&t2.call(e2,function(e3,t3){return e3===(n2[t3]?n2[t3]&i2[r2+t3]:i2[r2+t3])})};function va(e2,t2){return(t2=void 0===t2?Object:t2)&&"function"==typeof t2.freeze?t2.freeze(e2):e2}var ba=va({HTML:"text/html",isHTML:function(e2){return e2===ba.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),Ta=va({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(e2){return e2===Ta.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"}),Sa={assign:function(e2,t2){if(null===e2||"object"!=typeof e2)throw new TypeError("target is not an object");for(var i2 in t2)Object.prototype.hasOwnProperty.call(t2,i2)&&(e2[i2]=t2[i2]);return e2},find:function(e2,t2,i2){if(void 0===i2&&(i2=Array.prototype),e2&&"function"==typeof i2.find)return i2.find.call(e2,t2);for(var s2=0;s2<e2.length;s2++)if(Object.prototype.hasOwnProperty.call(e2,s2)){var r2=e2[s2];if(t2.call(void 0,r2,s2,e2))return r2}},freeze:va,MIME_TYPE:ba,NAMESPACE:Ta},wa=Sa.find,Ea=Sa.NAMESPACE;function Ca(e2){return""!==e2}function ka(e2,t2){return e2.hasOwnProperty(t2)||(e2[t2]=!0),e2}function Ia(e2){return e2?(e2=e2?e2.split(/[\t\n\f\r ]+/).filter(Ca):[],Object.keys(e2.reduce(ka,{}))):[]}function xa(e2,t2){for(var i2 in e2)Object.prototype.hasOwnProperty.call(e2,i2)&&(t2[i2]=e2[i2])}function Aa(e2,t2){var i2=e2.prototype;function s2(){}i2 instanceof t2||(s2.prototype=t2.prototype,xa(i2,s2=new s2),e2.prototype=i2=s2),i2.constructor!=e2&&(i2.constructor=e2)}var n,r=((n={}).ELEMENT_NODE=1,n.ATTRIBUTE_NODE=2,n.TEXT_NODE=3,n.CDATA_SECTION_NODE=4,n.ENTITY_REFERENCE_NODE=5,n.ENTITY_NODE=6,n.PROCESSING_INSTRUCTION_NODE=7,n.COMMENT_NODE=8,n.DOCUMENT_NODE=9,n.DOCUMENT_TYPE_NODE=10,n.DOCUMENT_FRAGMENT_NODE=11,n.NOTATION_NODE=12,{}),k={},Da=(r.INDEX_SIZE_ERR=(k[1]="Index size error",1),r.DOMSTRING_SIZE_ERR=(k[2]="DOMString size error",2),r.HIERARCHY_REQUEST_ERR=(k[3]="Hierarchy request error",3)),Pa=(r.WRONG_DOCUMENT_ERR=(k[4]="Wrong document",4),r.INVALID_CHARACTER_ERR=(k[5]="Invalid character",5),r.NO_DATA_ALLOWED_ERR=(k[6]="No data allowed",6),r.NO_MODIFICATION_ALLOWED_ERR=(k[7]="No modification allowed",7),r.NOT_FOUND_ERR=(k[8]="Not found",8));function I(e2,t2){var i2;return t2 instanceof Error?i2=t2:(i2=this,Error.call(this,k[e2]),this.message=k[e2],Error.captureStackTrace&&Error.captureStackTrace(this,I)),i2.code=e2,t2&&(this.message=this.message+": "+t2),i2}function La(){}function Oa(e2,t2){this._node=e2,this._refresh=t2,Ra(this)}function Ra(e2){var t2=e2._node._inc||e2._node.ownerDocument._inc;if(e2._inc!==t2){var i2=e2._refresh(e2._node);if(vo(e2,"length",i2.length),!e2.$$length||i2.length<e2.$$length)for(var s2=i2.length;s2 in e2;s2++)Object.prototype.hasOwnProperty.call(e2,s2)&&delete e2[s2];xa(i2,e2),e2._inc=t2}}function Na(){}function Ma(e2,t2){for(var i2=e2.length;i2--;)if(e2[i2]===t2)return i2}function Ua(e2,t2,i2,s2){s2?t2[Ma(t2,s2)]=i2:t2[t2.length++]=i2,e2&&(t2=(i2.ownerElement=e2).ownerDocument)&&(s2&&Ha(t2,e2,s2),s2=e2,e2=i2,(i2=t2)&&i2._inc++,e2.namespaceURI===Ea.XMLNS)&&(s2._nsMap[e2.prefix?e2.localName:""]=e2.value)}function Ba(e2,t2,i2){var s2=Ma(t2,i2);if(!(0<=s2))throw new I(Pa,new Error(e2.tagName+"@"+i2));for(var r2,n2=t2.length-1;s2<n2;)t2[s2]=t2[++s2];t2.length=n2,e2&&(r2=e2.ownerDocument)&&(Ha(r2,e2,i2),i2.ownerElement=null)}function Fa(){}function x(){}function qa(e2){return("<"==e2?"&lt;":">"==e2&&"&gt;")||("&"==e2?"&amp;":'"'==e2&&"&quot;")||"&#"+e2.charCodeAt()+";"}function ja(e2,t2){if(t2(e2))return 1;if(e2=e2.firstChild)do{if(ja(e2,t2))return 1}while(e2=e2.nextSibling)}function Va(){this.ownerDocument=this}function Ha(e2,t2,i2){e2&&e2._inc++,i2.namespaceURI===Ea.XMLNS&&delete t2._nsMap[i2.prefix?i2.localName:""]}function za(e2,t2,i2){if(e2&&e2._inc){e2._inc++;var s2=t2.childNodes;if(i2)s2[s2.length++]=i2;else{for(var r2=t2.firstChild,n2=0;r2;)r2=(s2[n2++]=r2).nextSibling;s2.length=n2,delete s2[s2.length]}}}function $a(e2,t2){var i2=t2.previousSibling,s2=t2.nextSibling;return i2?i2.nextSibling=s2:e2.firstChild=s2,s2?s2.previousSibling=i2:e2.lastChild=i2,t2.parentNode=null,t2.previousSibling=null,t2.nextSibling=null,za(e2.ownerDocument,e2),t2}function Wa(e2){return e2&&e2.nodeType===x.DOCUMENT_TYPE_NODE}function Ga(e2){return e2&&e2.nodeType===x.ELEMENT_NODE}function Xa(e2){return e2&&e2.nodeType===x.TEXT_NODE}function Ka(e2,t2){var i2;e2=e2.childNodes||[];if(!wa(e2,Ga)&&!Wa(t2))return i2=wa(e2,Wa),!(t2&&i2&&e2.indexOf(i2)>e2.indexOf(t2))}function Ya(e2,t2){var i2;e2=e2.childNodes||[];if(!wa(e2,function(e3){return Ga(e3)&&e3!==t2}))return i2=wa(e2,Wa),!(t2&&i2&&e2.indexOf(i2)>e2.indexOf(t2))}function Ja(e2,t2,i2){var s2=e2.childNodes||[],r2=t2.childNodes||[];if(t2.nodeType===x.DOCUMENT_FRAGMENT_NODE){var n2=r2.filter(Ga);if(1<n2.length||wa(r2,Xa))throw new I(Da,"More than one element or text in fragment");if(1===n2.length&&!Ka(e2,i2))throw new I(Da,"Element in fragment can not be inserted before doctype")}if(Ga(t2)&&!Ka(e2,i2))throw new I(Da,"Only one element can be added and only after doctype");if(Wa(t2)){if(wa(s2,Wa))throw new I(Da,"Only one doctype is allowed");if(r2=wa(s2,Ga),i2&&s2.indexOf(r2)<s2.indexOf(i2))throw new I(Da,"Doctype can only be inserted before an element");if(!i2&&r2)throw new I(Da,"Doctype can not be appended since element is present")}}function Za(e2,t2,i2){var s2=e2.childNodes||[],r2=t2.childNodes||[];if(t2.nodeType===x.DOCUMENT_FRAGMENT_NODE){var n2=r2.filter(Ga);if(1<n2.length||wa(r2,Xa))throw new I(Da,"More than one element or text in fragment");if(1===n2.length&&!Ya(e2,i2))throw new I(Da,"Element in fragment can not be inserted before doctype")}if(Ga(t2)&&!Ya(e2,i2))throw new I(Da,"Only one element can be added and only after doctype");if(Wa(t2)){if(wa(s2,function(e3){return Wa(e3)&&e3!==i2}))throw new I(Da,"Only one doctype is allowed");if(r2=wa(s2,Ga),i2&&s2.indexOf(r2)<s2.indexOf(i2))throw new I(Da,"Doctype can only be inserted before an element")}}function eo(e2,t2,i2,s2){if(function Qa(e2,t2,i2){if(!(s2=e2)||s2.nodeType!==x.DOCUMENT_NODE&&s2.nodeType!==x.DOCUMENT_FRAGMENT_NODE&&s2.nodeType!==x.ELEMENT_NODE)throw new I(Da,"Unexpected parent node type "+e2.nodeType);var s2;if(i2&&i2.parentNode!==e2)throw new I(Pa,"child not in parent");if(!(s2=t2)||!(Ga(s2)||Xa(s2)||Wa(s2)||s2.nodeType===x.DOCUMENT_FRAGMENT_NODE||s2.nodeType===x.COMMENT_NODE||s2.nodeType===x.PROCESSING_INSTRUCTION_NODE)||Wa(t2)&&e2.nodeType!==x.DOCUMENT_NODE)throw new I(Da,"Unexpected node type "+t2.nodeType+" for parent node type "+e2.nodeType)}(e2,t2,i2),e2.nodeType===x.DOCUMENT_NODE&&(s2||Ja)(e2,t2,i2),(s2=t2.parentNode)&&s2.removeChild(t2),11===t2.nodeType){var r2=t2.firstChild;if(null==r2)return t2;var n2=t2.lastChild}else r2=n2=t2;for(s2=i2?i2.previousSibling:e2.lastChild,r2.previousSibling=s2,n2.nextSibling=i2,s2?s2.nextSibling=r2:e2.firstChild=r2,null==i2?e2.lastChild=n2:i2.previousSibling=n2;r2.parentNode=e2,r2!==n2&&(r2=r2.nextSibling););return za(e2.ownerDocument||e2,e2),11==t2.nodeType&&(t2.firstChild=t2.lastChild=null),t2}function to(){this._nsMap={}}function io(){}function so(){}function ro(){}function no(){}function ao(){}function oo(){}function lo(){}function ho(){}function uo(){}function co(){}function po(){}function mo(){}function go(e2,t2){var i2,s2=[],r2=9==this.nodeType&&this.documentElement||this,n2=r2.prefix,a2=r2.namespaceURI;return _o(this,s2,e2,t2,i2=a2&&null==n2&&null==r2.lookupPrefix(a2)?[{namespace:a2,prefix:null}]:i2),s2.join("")}function fo(e2,t2,i2){var s2=e2.prefix||"",r2=e2.namespaceURI;if(r2&&("xml"!==s2||r2!==Ea.XML)&&r2!==Ea.XMLNS){for(var n2=i2.length;n2--;){var a2=i2[n2];if(a2.prefix===s2)return a2.namespace!==r2}return 1}}function yo(e2,t2,i2){e2.push(" ",t2,'="',i2.replace(/[<>&"\t\n\r]/g,qa),'"')}function _o(e2,t2,i2,s2,r2){if(r2=r2||[],s2){if(!(e2=s2(e2)))return;if("string"==typeof e2)return void t2.push(e2)}switch(e2.nodeType){case 1:var n2=e2.attributes,a2=n2.length,o2=e2.firstChild,l2=e2.tagName,d2=l2;if(!(i2=Ea.isHTML(e2.namespaceURI)||i2)&&!e2.prefix&&e2.namespaceURI){for(var h2,u2=0;u2<n2.length;u2++)if("xmlns"===n2.item(u2).name){h2=n2.item(u2).value;break}if(!h2)for(var c2=r2.length-1;0<=c2;c2--)if(""===(p2=r2[c2]).prefix&&p2.namespace===e2.namespaceURI){h2=p2.namespace;break}if(h2!==e2.namespaceURI){var p2;for(c2=r2.length-1;0<=c2;c2--)if((p2=r2[c2]).namespace===e2.namespaceURI){p2.prefix&&(d2=p2.prefix+":"+l2);break}}}t2.push("<",d2);for(var m2=0;m2<a2;m2++)"xmlns"==(g2=n2.item(m2)).prefix?r2.push({prefix:g2.localName,namespace:g2.value}):"xmlns"==g2.nodeName&&r2.push({prefix:"",namespace:g2.value});var g2,f2,y2;for(m2=0;m2<a2;m2++)fo(g2=n2.item(m2),0,r2)&&(yo(t2,(f2=g2.prefix||"")?"xmlns:"+f2:"xmlns",y2=g2.namespaceURI),r2.push({prefix:f2,namespace:y2})),_o(g2,t2,i2,s2,r2);if(l2===d2&&fo(e2,0,r2)&&(yo(t2,(f2=e2.prefix||"")?"xmlns:"+f2:"xmlns",y2=e2.namespaceURI),r2.push({prefix:f2,namespace:y2})),o2||i2&&!/^(?:meta|link|img|br|hr|input)$/i.test(l2)){if(t2.push(">"),i2&&/^script$/i.test(l2))for(;o2;)o2.data?t2.push(o2.data):_o(o2,t2,i2,s2,r2.slice()),o2=o2.nextSibling;else for(;o2;)_o(o2,t2,i2,s2,r2.slice()),o2=o2.nextSibling;t2.push("</",d2,">")}else t2.push("/>");return;case 9:case 11:for(o2=e2.firstChild;o2;)_o(o2,t2,i2,s2,r2.slice()),o2=o2.nextSibling;return;case 2:return yo(t2,e2.name,e2.value);case 3:return t2.push(e2.data.replace(/[<&>]/g,qa));case 4:return t2.push("<![CDATA[",e2.data,"]]>");case 8:return t2.push("\x3c!--",e2.data,"--\x3e");case 10:var _2=e2.publicId,v2=e2.systemId;return t2.push("<!DOCTYPE ",e2.name),void(_2?(t2.push(" PUBLIC ",_2),v2&&"."!=v2&&t2.push(" ",v2),t2.push(">")):v2&&"."!=v2?t2.push(" SYSTEM ",v2,">"):((_2=e2.internalSubset)&&t2.push(" [",_2,"]"),t2.push(">")));case 7:return t2.push("<?",e2.target," ",e2.data,"?>");case 5:return t2.push("&",e2.nodeName,";");default:t2.push("??",e2.nodeName)}}function vo(e2,t2,i2){e2[t2]=i2}r.NOT_SUPPORTED_ERR=(k[9]="Not supported",9),r.INUSE_ATTRIBUTE_ERR=(k[10]="Attribute in use",10),r.INVALID_STATE_ERR=(k[11]="Invalid state",11),r.SYNTAX_ERR=(k[12]="Syntax error",12),r.INVALID_MODIFICATION_ERR=(k[13]="Invalid modification",13),r.NAMESPACE_ERR=(k[14]="Invalid namespace",14),r.INVALID_ACCESS_ERR=(k[15]="Invalid access",15),I.prototype=Error.prototype,xa(r,I),La.prototype={length:0,item:function(e2){return 0<=e2&&e2<this.length?this[e2]:null},toString:function(e2,t2){for(var i2=[],s2=0;s2<this.length;s2++)_o(this[s2],i2,e2,t2);return i2.join("")},filter:function(e2){return Array.prototype.filter.call(this,e2)},indexOf:function(e2){return Array.prototype.indexOf.call(this,e2)}},Oa.prototype.item=function(e2){return Ra(this),this[e2]||null},Aa(Oa,La),Na.prototype={length:0,item:La.prototype.item,getNamedItem:function(e2){for(var t2=this.length;t2--;){var i2=this[t2];if(i2.nodeName==e2)return i2}},setNamedItem:function(e2){var t2=e2.ownerElement;if(t2&&t2!=this._ownerElement)throw new I(10);return t2=this.getNamedItem(e2.nodeName),Ua(this._ownerElement,this,e2,t2),t2},setNamedItemNS:function(e2){var t2=e2.ownerElement;if(t2&&t2!=this._ownerElement)throw new I(10);return t2=this.getNamedItemNS(e2.namespaceURI,e2.localName),Ua(this._ownerElement,this,e2,t2),t2},removeNamedItem:function(e2){return e2=this.getNamedItem(e2),Ba(this._ownerElement,this,e2),e2},removeNamedItemNS:function(e2,t2){return e2=this.getNamedItemNS(e2,t2),Ba(this._ownerElement,this,e2),e2},getNamedItemNS:function(e2,t2){for(var i2=this.length;i2--;){var s2=this[i2];if(s2.localName==t2&&s2.namespaceURI==e2)return s2}return null}},Fa.prototype={hasFeature:function(e2,t2){return!0},createDocument:function(e2,t2,i2){var s2=new Va;return s2.implementation=this,s2.childNodes=new La,s2.doctype=i2||null,i2&&s2.appendChild(i2),t2&&(i2=s2.createElementNS(e2,t2),s2.appendChild(i2)),s2},createDocumentType:function(e2,t2,i2){var s2=new oo;return s2.name=e2,s2.nodeName=e2,s2.publicId=t2||"",s2.systemId=i2||"",s2}},x.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e2,t2){return eo(this,e2,t2)},replaceChild:function(e2,t2){eo(this,e2,t2,Za),t2&&this.removeChild(t2)},removeChild:function(e2){return $a(this,e2)},appendChild:function(e2){return this.insertBefore(e2,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e2){return function e3(t2,i2,s2){var r2=new i2.constructor;for(var n2 in i2){var a2;Object.prototype.hasOwnProperty.call(i2,n2)&&"object"!=typeof(a2=i2[n2])&&a2!=r2[n2]&&(r2[n2]=a2)}switch(i2.childNodes&&(r2.childNodes=new La),r2.ownerDocument=t2,r2.nodeType){case 1:var o2=i2.attributes,l2=r2.attributes=new Na,d2=o2.length;l2._ownerElement=r2;for(var h2=0;h2<d2;h2++)r2.setAttributeNode(e3(t2,o2.item(h2),!0));break;case 2:s2=!0}if(s2)for(var u2=i2.firstChild;u2;)r2.appendChild(e3(t2,u2,s2)),u2=u2.nextSibling;return r2}(this.ownerDocument||this,this,e2)},normalize:function(){for(var e2=this.firstChild;e2;){var t2=e2.nextSibling;t2&&3==t2.nodeType&&3==e2.nodeType?(this.removeChild(t2),e2.appendData(t2.data)):(e2.normalize(),e2=t2)}},isSupported:function(e2,t2){return this.ownerDocument.implementation.hasFeature(e2,t2)},hasAttributes:function(){return 0<this.attributes.length},lookupPrefix:function(e2){for(var t2=this;t2;){var i2=t2._nsMap;if(i2)for(var s2 in i2)if(Object.prototype.hasOwnProperty.call(i2,s2)&&i2[s2]===e2)return s2;t2=2==t2.nodeType?t2.ownerDocument:t2.parentNode}return null},lookupNamespaceURI:function(e2){for(var t2=this;t2;){var i2=t2._nsMap;if(i2&&Object.prototype.hasOwnProperty.call(i2,e2))return i2[e2];t2=2==t2.nodeType?t2.ownerDocument:t2.parentNode}return null},isDefaultNamespace:function(e2){return null==this.lookupPrefix(e2)}},xa(n,x),xa(n,x.prototype),Va.prototype={nodeName:"#document",nodeType:9,doctype:null,documentElement:null,_inc:1,insertBefore:function(e2,t2){if(11==e2.nodeType)for(var i2=e2.firstChild;i2;){var s2=i2.nextSibling;this.insertBefore(i2,t2),i2=s2}else eo(this,e2,t2),null===(e2.ownerDocument=this).documentElement&&1===e2.nodeType&&(this.documentElement=e2);return e2},removeChild:function(e2){return this.documentElement==e2&&(this.documentElement=null),$a(this,e2)},replaceChild:function(e2,t2){eo(this,e2,t2,Za),e2.ownerDocument=this,t2&&this.removeChild(t2),Ga(e2)&&(this.documentElement=e2)},importNode:function(e2,t2){return function e3(t3,i2,s2){var r2;switch(i2.nodeType){case 1:(r2=i2.cloneNode(!1)).ownerDocument=t3;case 11:break;case 2:s2=!0}if((r2=r2||i2.cloneNode(!1)).ownerDocument=t3,r2.parentNode=null,s2)for(var n2=i2.firstChild;n2;)r2.appendChild(e3(t3,n2,s2)),n2=n2.nextSibling;return r2}(this,e2,t2)},getElementById:function(t2){var i2=null;return ja(this.documentElement,function(e2){if(1==e2.nodeType&&e2.getAttribute("id")==t2)return i2=e2,!0}),i2},getElementsByClassName:function(a2){var o2=Ia(a2);return new Oa(this,function(r2){var n2=[];return 0<o2.length&&ja(r2.documentElement,function(e2){var t2,i2,s2;e2!==r2&&1===e2.nodeType&&(t2=e2.getAttribute("class"))&&((i2=a2===t2)||(t2=Ia(t2),i2=o2.every((s2=t2,function(e3){return s2&&-1!==s2.indexOf(e3)}))),i2)&&n2.push(e2)}),n2})},createElement:function(e2){var t2=new to;return t2.ownerDocument=this,t2.nodeName=e2,t2.tagName=e2,t2.localName=e2,t2.childNodes=new La,(t2.attributes=new Na)._ownerElement=t2},createDocumentFragment:function(){var e2=new co;return e2.ownerDocument=this,e2.childNodes=new La,e2},createTextNode:function(e2){var t2=new ro;return t2.ownerDocument=this,t2.appendData(e2),t2},createComment:function(e2){var t2=new no;return t2.ownerDocument=this,t2.appendData(e2),t2},createCDATASection:function(e2){var t2=new ao;return t2.ownerDocument=this,t2.appendData(e2),t2},createProcessingInstruction:function(e2,t2){var i2=new po;return i2.ownerDocument=this,i2.tagName=i2.nodeName=i2.target=e2,i2.nodeValue=i2.data=t2,i2},createAttribute:function(e2){var t2=new io;return t2.ownerDocument=this,t2.name=e2,t2.nodeName=e2,t2.localName=e2,t2.specified=!0,t2},createEntityReference:function(e2){var t2=new uo;return t2.ownerDocument=this,t2.nodeName=e2,t2},createElementNS:function(e2,t2){var i2=new to,s2=t2.split(":"),r2=i2.attributes=new Na;return i2.childNodes=new La,i2.ownerDocument=this,i2.nodeName=t2,i2.tagName=t2,i2.namespaceURI=e2,2==s2.length?(i2.prefix=s2[0],i2.localName=s2[1]):i2.localName=t2,r2._ownerElement=i2},createAttributeNS:function(e2,t2){var i2=new io,s2=t2.split(":");return i2.ownerDocument=this,i2.nodeName=t2,i2.name=t2,i2.namespaceURI=e2,i2.specified=!0,2==s2.length?(i2.prefix=s2[0],i2.localName=s2[1]):i2.localName=t2,i2}},Aa(Va,x),Va.prototype.getElementsByTagName=(to.prototype={nodeType:1,hasAttribute:function(e2){return null!=this.getAttributeNode(e2)},getAttribute:function(e2){return(e2=this.getAttributeNode(e2))&&e2.value||""},getAttributeNode:function(e2){return this.attributes.getNamedItem(e2)},setAttribute:function(e2,t2){(e2=this.ownerDocument.createAttribute(e2)).value=e2.nodeValue=""+t2,this.setAttributeNode(e2)},removeAttribute:function(e2){(e2=this.getAttributeNode(e2))&&this.removeAttributeNode(e2)},appendChild:function(e2){return 11===e2.nodeType?this.insertBefore(e2,null):(t2=this,e2.parentNode&&e2.parentNode.removeChild(e2),e2.parentNode=t2,e2.previousSibling=t2.lastChild,e2.nextSibling=null,e2.previousSibling?e2.previousSibling.nextSibling=e2:t2.firstChild=e2,t2.lastChild=e2,za(t2.ownerDocument,t2,e2),e2);var t2},setAttributeNode:function(e2){return this.attributes.setNamedItem(e2)},setAttributeNodeNS:function(e2){return this.attributes.setNamedItemNS(e2)},removeAttributeNode:function(e2){return this.attributes.removeNamedItem(e2.nodeName)},removeAttributeNS:function(e2,t2){(e2=this.getAttributeNodeNS(e2,t2))&&this.removeAttributeNode(e2)},hasAttributeNS:function(e2,t2){return null!=this.getAttributeNodeNS(e2,t2)},getAttributeNS:function(e2,t2){return(e2=this.getAttributeNodeNS(e2,t2))&&e2.value||""},setAttributeNS:function(e2,t2,i2){(e2=this.ownerDocument.createAttributeNS(e2,t2)).value=e2.nodeValue=""+i2,this.setAttributeNode(e2)},getAttributeNodeNS:function(e2,t2){return this.attributes.getNamedItemNS(e2,t2)},getElementsByTagName:function(s2){return new Oa(this,function(t2){var i2=[];return ja(t2,function(e2){e2===t2||1!=e2.nodeType||"*"!==s2&&e2.tagName!=s2||i2.push(e2)}),i2})},getElementsByTagNameNS:function(s2,r2){return new Oa(this,function(t2){var i2=[];return ja(t2,function(e2){e2===t2||1!==e2.nodeType||"*"!==s2&&e2.namespaceURI!==s2||"*"!==r2&&e2.localName!=r2||i2.push(e2)}),i2})}}).getElementsByTagName,Va.prototype.getElementsByTagNameNS=to.prototype.getElementsByTagNameNS,Aa(to,x),io.prototype.nodeType=2,Aa(io,x),so.prototype={data:"",substringData:function(e2,t2){return this.data.substring(e2,e2+t2)},appendData:function(e2){e2=this.data+e2,this.nodeValue=this.data=e2,this.length=e2.length},insertData:function(e2,t2){this.replaceData(e2,0,t2)},appendChild:function(e2){throw new Error(k[Da])},deleteData:function(e2,t2){this.replaceData(e2,t2,"")},replaceData:function(e2,t2,i2){var s2=this.data.substring(0,e2);e2=this.data.substring(e2+t2);this.nodeValue=this.data=i2=s2+i2+e2,this.length=i2.length}},Aa(so,x),ro.prototype={nodeName:"#text",nodeType:3,splitText:function(e2){var t2=(i2=this.data).substring(e2),i2=i2.substring(0,e2);this.data=this.nodeValue=i2,this.length=i2.length,e2=this.ownerDocument.createTextNode(t2);return this.parentNode&&this.parentNode.insertBefore(e2,this.nextSibling),e2}},Aa(ro,so),no.prototype={nodeName:"#comment",nodeType:8},Aa(no,so),ao.prototype={nodeName:"#cdata-section",nodeType:4},Aa(ao,so),oo.prototype.nodeType=10,Aa(oo,x),lo.prototype.nodeType=12,Aa(lo,x),ho.prototype.nodeType=6,Aa(ho,x),uo.prototype.nodeType=5,Aa(uo,x),co.prototype.nodeName="#document-fragment",co.prototype.nodeType=11,Aa(co,x),po.prototype.nodeType=7,Aa(po,x),mo.prototype.serializeToString=function(e2,t2,i2){return go.call(e2,t2,i2)},x.prototype.toString=go;try{Object.defineProperty&&(Object.defineProperty(Oa.prototype,"length",{get:function(){return Ra(this),this.$$length}}),Object.defineProperty(x.prototype,"textContent",{get:function(){return function e2(t2){switch(t2.nodeType){case 1:case 11:var i2=[];for(t2=t2.firstChild;t2;)7!==t2.nodeType&&8!==t2.nodeType&&i2.push(e2(t2)),t2=t2.nextSibling;return i2.join("");default:return t2.nodeValue}}(this)},set:function(e2){switch(this.nodeType){case 1:case 11:for(;this.firstChild;)this.removeChild(this.firstChild);(e2||String(e2))&&this.appendChild(this.ownerDocument.createTextNode(e2));break;default:this.data=e2,this.value=e2,this.nodeValue=e2}}}),vo=function(e2,t2,i2){e2["$$"+t2]=i2})}catch(e2){}var Yr={DocumentType:oo,DOMException:I,DOMImplementation:Fa,Element:to,Node:x,NodeList:La,XMLSerializer:mo},bo=Ti(function(e2,t2){var i2=Sa.freeze;t2.XML_ENTITIES=i2({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t2.HTML_ENTITIES=i2({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:" ",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:" ",ange:"",angle:" ",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:" ",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:" ",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:" ",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:" ",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:" ",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:" ",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:" ",maltese:" ",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:" ",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:" ",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:" ",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:"\n",nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:" ",NonBreakingSpace:" ",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:" ",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:" ",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:" ",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:" ",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:" ",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:" ",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:" ",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:" ",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:" ",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:" ",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:" ",spadesuit:" ",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"\t",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:" ",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:" ",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),t2.entityMap=t2.HTML_ENTITIES}),To=(bo.XML_ENTITIES,Sa.NAMESPACE),sn=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,tn=new RegExp("[\\-\\.0-9"+sn.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),So=new RegExp("^"+sn.source+tn.source+"*(?::"+sn.source+tn.source+"*)?$");function Po(e2,t2){this.message=e2,this.locator=t2,Error.captureStackTrace&&Error.captureStackTrace(this,Po)}function Lo(){}function Oo(e2,t2){return t2.lineNumber=e2.lineNumber,t2.columnNumber=e2.columnNumber,t2}function Ro(e2,t2,i2){for(var s2=e2.tagName,r2=null,n2=e2.length;n2--;){var a2=e2[n2],o2=a2.qName,l2=a2.value;o2=0<(h2=o2.indexOf(":"))?(d2=a2.prefix=o2.slice(0,h2),u2=o2.slice(h2+1),"xmlns"===d2&&u2):(d2=null,"xmlns"===(u2=o2)&&"");a2.localName=u2,!1!==o2&&(null==r2&&(r2={},No(i2,i2={})),i2[o2]=r2[o2]=l2,a2.uri=To.XMLNS,t2.startPrefixMapping(o2,l2))}var d2;for(n2=e2.length;n2--;)(d2=(a2=e2[n2]).prefix)&&("xml"===d2&&(a2.uri=To.XML),"xmlns"!==d2)&&(a2.uri=i2[d2||""]);var h2,u2=0<(h2=s2.indexOf(":"))?(d2=e2.prefix=s2.slice(0,h2),e2.localName=s2.slice(h2+1)):(d2=null,e2.localName=s2),c2=e2.uri=i2[d2||""];if(t2.startElement(c2,u2,s2,e2),!e2.closed)return e2.currentNSMap=i2,e2.localNSMap=r2,1;if(t2.endElement(c2,u2,s2),r2)for(d2 in r2)Object.prototype.hasOwnProperty.call(r2,d2)&&t2.endPrefixMapping(d2)}function No(e2,t2){for(var i2 in e2)Object.prototype.hasOwnProperty.call(e2,i2)&&(t2[i2]=e2[i2])}function Mo(){this.attributeNames={}}(Po.prototype=new Error).name=Po.name,Lo.prototype={parse:function(e2,t2,i2){var s2=this.domBuilder;s2.startDocument(),No(t2,t2={}),function(i3,e3,s3,r2,n2){function a2(e4){var t4=e4.slice(1,-1);return Object.hasOwnProperty.call(s3,t4)?s3[t4]:"#"===t4.charAt(0)?65535<(t4=parseInt(t4.substr(1).replace("x","0x")))?(t4-=65536,String.fromCharCode(55296+(t4>>10),56320+(1023&t4))):String.fromCharCode(t4):(n2.error("entity not found:"+e4),e4)}function t3(e4){var t4;m2<e4&&(t4=i3.substring(m2,e4).replace(/&#?\w+;/g,a2),u2&&o2(m2),r2.characters(t4,0,e4-m2),m2=e4)}function o2(e4,t4){for(;d2<=e4&&(t4=h2.exec(i3));)l2=t4.index,d2=l2+t4[0].length,u2.lineNumber++;u2.columnNumber=e4-l2+1}for(var l2=0,d2=0,h2=/.*(?:\r\n?|\n)|.*$/g,u2=r2.locator,c2=[{currentNSMap:e3}],p2={},m2=0;;){try{var g2,f2,y2=i3.indexOf("<",m2);if(y2<0)return i3.substr(m2).match(/^\s*$/)||(f2=(g2=r2.doc).createTextNode(i3.substr(m2)),g2.appendChild(f2),r2.currentElement=f2);switch(m2<y2&&t3(y2),i3.charAt(y2+1)){case"/":var _2=i3.indexOf(">",y2+3),v2=i3.substring(y2+2,_2).replace(/[ \t\n\r]+$/g,""),b2=c2.pop(),T2=(_2<0?(v2=i3.substring(y2+2).replace(/[\s<].*/,""),n2.error("end tag name: "+v2+" is not complete:"+b2.tagName),_2=y2+1+v2.length):v2.match(/\s</)&&(v2=v2.replace(/[\s<].*/,""),n2.error("end tag name: "+v2+" maybe not complete"),_2=y2+1+v2.length),b2.localNSMap),S2=b2.tagName==v2;if(S2||b2.tagName&&b2.tagName.toLowerCase()==v2.toLowerCase()){if(r2.endElement(b2.uri,b2.localName,v2),T2)for(var w2 in T2)Object.prototype.hasOwnProperty.call(T2,w2)&&r2.endPrefixMapping(w2);S2||n2.fatalError("end tag name: "+v2+" is not match the current start tagName:"+b2.tagName)}else c2.push(b2);_2++;break;case"?":u2&&o2(y2),_2=function(e4,t4,i4){var s4=e4.indexOf("?>",t4);return s4&&(e4=e4.substring(t4,s4).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/))?(e4[0].length,i4.processingInstruction(e4[1],e4[2]),s4+2):-1}(i3,y2,r2);break;case"!":u2&&o2(y2),_2=function(e4,t4,i4,s4){if("-"===e4.charAt(t4+2))return"-"===e4.charAt(t4+3)?t4<(n3=e4.indexOf("--\x3e",t4+4))?(i4.comment(e4,t4+4,n3-t4-4),n3+3):(s4.error("Unclosed comment"),-1):-1;if("CDATA["==e4.substr(t4+3,6))return n3=e4.indexOf("]]>",t4+9),i4.startCDATA(),i4.characters(e4,t4+9,n3-t4-9),i4.endCDATA(),n3+3;var r3,n3=(s4=function(e5,t5){var i5,s5=[],r4=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(r4.lastIndex=t5,r4.exec(e5);i5=r4.exec(e5);)if(s5.push(i5),i5[1])return s5}(e4,t4)).length;return 1<n3&&/!doctype/i.test(s4[0][0])?(e4=s4[1][0],r3=t4=!1,3<n3&&(/^public$/i.test(s4[2][0])?(t4=s4[3][0],r3=4<n3&&s4[4][0]):/^system$/i.test(s4[2][0])&&(r3=s4[3][0])),s4=s4[n3-1],i4.startDTD(e4,t4,r3),i4.endDTD(),s4.index+s4[0].length):-1}(i3,y2,r2,n2);break;default:u2&&o2(y2);var E2=new Mo,C2=c2[c2.length-1].currentNSMap,k2=(_2=function(e4,t4,s4,i4,r3,n3){function a3(e5,t5,i5){s4.attributeNames.hasOwnProperty(e5)&&n3.fatalError("Attribute "+e5+" redefined"),s4.addValue(e5,t5.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,r3),i5)}for(var o3,l3=++t4,d3=0;;){var h3=e4.charAt(l3);switch(h3){case"=":if(1===d3)o3=e4.slice(t4,l3);else if(2!==d3)throw new Error("attribute equal must after attrName");d3=3;break;case"'":case'"':if(3===d3||1===d3){if(1===d3&&(n3.warning('attribute value must after "="'),o3=e4.slice(t4,l3)),t4=l3+1,!(0<(l3=e4.indexOf(h3,t4))))throw new Error("attribute value no end '"+h3+"' match");a3(o3,u3=e4.slice(t4,l3),t4-1)}else{if(4!=d3)throw new Error('attribute value must after "="');a3(o3,u3=e4.slice(t4,l3),t4),n3.warning('attribute "'+o3+'" missed start quot('+h3+")!!"),t4=l3+1}d3=5;break;case"/":switch(d3){case 0:s4.setTagName(e4.slice(t4,l3));case 5:case 6:case 7:d3=7,s4.closed=!0;case 4:case 1:break;case 2:s4.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return n3.error("unexpected end of input"),0==d3&&s4.setTagName(e4.slice(t4,l3)),l3;case">":switch(d3){case 0:s4.setTagName(e4.slice(t4,l3));case 5:case 6:case 7:break;case 4:case 1:"/"===(u3=e4.slice(t4,l3)).slice(-1)&&(s4.closed=!0,u3=u3.slice(0,-1));case 2:2===d3&&(u3=o3),4==d3?(n3.warning('attribute "'+u3+'" missed quot(")!'),a3(o3,u3,t4)):(To.isHTML(i4[""])&&u3.match(/^(?:disabled|checked|selected)$/i)||n3.warning('attribute "'+u3+'" missed value!! "'+u3+'" instead!!'),a3(u3,u3,t4));break;case 3:throw new Error("attribute value missed!!")}return l3;case"":h3=" ";default:if(h3<=" ")switch(d3){case 0:s4.setTagName(e4.slice(t4,l3)),d3=6;break;case 1:o3=e4.slice(t4,l3),d3=2;break;case 4:var u3=e4.slice(t4,l3);n3.warning('attribute "'+u3+'" missed quot(")!!'),a3(o3,u3,t4);case 5:d3=6}else switch(d3){case 2:s4.tagName,To.isHTML(i4[""])&&o3.match(/^(?:disabled|checked|selected)$/i)||n3.warning('attribute "'+o3+'" missed value!! "'+o3+'" instead2!!'),a3(o3,o3,t4),t4=l3,d3=1;break;case 5:n3.warning('attribute space is required"'+o3+'"!!');case 6:d3=1,t4=l3;break;case 3:d3=4,t4=l3;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}l3++}}(i3,y2,E2,C2,a2,n2),E2.length);if(!E2.closed&&function(e4,t4,i4,s4){var r3=s4[i4];return null==r3&&((r3=e4.lastIndexOf("</"+i4+">"))<t4&&(r3=e4.lastIndexOf("</"+i4)),s4[i4]=r3),r3<t4}(i3,_2,E2.tagName,p2)&&(E2.closed=!0,s3.nbsp||n2.warning("unclosed xml attribute")),u2&&k2){for(var I2=Oo(u2,{}),x2=0;x2<k2;x2++){var A2=E2[x2];o2(A2.offset),A2.locator=Oo(u2,{})}r2.locator=I2,Ro(E2,r2,C2)&&c2.push(E2),r2.locator=u2}else Ro(E2,r2,C2)&&c2.push(E2);To.isHTML(E2.uri)&&!E2.closed?_2=function(e4,t4,i4,s4,r3){if(/^(?:script|textarea)$/i.test(i4)){var n3=e4.indexOf("</"+i4+">",t4);e4=e4.substring(t4+1,n3);if(/[&<]/.test(e4))return/^script$/i.test(i4)||(e4=e4.replace(/&#?\w+;/g,s4)),r3.characters(e4,0,e4.length),n3}return t4+1}(i3,_2,E2.tagName,a2,r2):_2++}}catch(e4){if(e4 instanceof Po)throw e4;n2.error("element parse error: "+e4),_2=-1}m2<_2?m2=_2:t3(Math.max(y2,m2)+1)}}(e2,t2,i2,s2,this.errorHandler),s2.endDocument()}},Mo.prototype={setTagName:function(e2){if(!So.test(e2))throw new Error("invalid tagName:"+e2);this.tagName=e2},addValue:function(e2,t2,i2){if(!So.test(e2))throw new Error("invalid attribute:"+e2);this.attributeNames[e2]=this.length,this[this.length++]={qName:e2,value:t2,offset:i2}},length:0,getLocalName:function(e2){return this[e2].localName},getLocator:function(e2){return this[e2].locator},getQName:function(e2){return this[e2].qName},getURI:function(e2){return this[e2].uri},getValue:function(e2){return this[e2].value}};var en={XMLReader:Lo,ParseError:Po},Uo=Yr.DOMImplementation,Bo=Sa.NAMESPACE,Fo=en.ParseError,qo=en.XMLReader;function jo(e2){return e2.replace(/\r[\n\u0085]/g,"\n").replace(/[\r\u0085\u2028]/g,"\n")}function Vo(e2){this.options=e2||{locator:{}}}function Ho(){this.cdata=!1}function zo(e2,t2){t2.lineNumber=e2.lineNumber,t2.columnNumber=e2.columnNumber}function Wo(e2,t2,i2){return"string"==typeof e2?e2.substr(t2,i2):e2.length>=t2+i2||t2?new java.lang.String(e2,t2,i2)+"":e2}function Go(e2,t2){(e2.currentElement||e2.doc).appendChild(t2)}Vo.prototype.parseFromString=function(e2,t2){var i2=this.options,s2=new qo,r2=i2.domBuilder||new Ho,n2=i2.errorHandler,a2=i2.locator,o2=i2.xmlns||{},l2=(t2=/\/x?html?$/.test(t2))?bo.HTML_ENTITIES:bo.XML_ENTITIES;a2&&r2.setDocumentLocator(a2),s2.errorHandler=function(s3,e3,r3){if(!s3){if(e3 instanceof Ho)return e3;s3=e3}var n3={},a3=s3 instanceof Function;function t3(t4){var i3=s3[t4];!i3&&a3&&(i3=2==s3.length?function(e4){s3(t4,e4)}:s3),n3[t4]=i3?function(e4){i3("[xmldom "+t4+"]\t"+e4+function $o(e2){if(e2)return"\n@"+(e2.systemId||"")+"#[line:"+e2.lineNumber+",col:"+e2.columnNumber+"]"}(r3))}:function(){}}return r3=r3||{},t3("warning"),t3("error"),t3("fatalError"),n3}(n2,r2,a2),s2.domBuilder=i2.domBuilder||r2,t2&&(o2[""]=Bo.HTML),o2.xml=o2.xml||Bo.XML,n2=i2.normalizeLineEndings||jo;return e2&&"string"==typeof e2?s2.parse(n2(e2),o2,l2):s2.errorHandler.error("invalid doc source"),r2.doc},Ho.prototype={startDocument:function(){this.doc=(new Uo).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e2,t2,i2,s2){var r2=this.doc,n2=r2.createElementNS(e2,i2||t2),a2=s2.length;Go(this,n2),this.currentElement=n2,this.locator&&zo(this.locator,n2);for(var o2=0;o2<a2;o2++){e2=s2.getURI(o2);var l2=s2.getValue(o2),d2=(i2=s2.getQName(o2),r2.createAttributeNS(e2,i2));this.locator&&zo(s2.getLocator(o2),d2),d2.value=d2.nodeValue=l2,n2.setAttributeNode(d2)}},endElement:function(e2,t2,i2){var s2=this.currentElement;s2.tagName,this.currentElement=s2.parentNode},startPrefixMapping:function(e2,t2){},endPrefixMapping:function(e2){},processingInstruction:function(e2,t2){e2=this.doc.createProcessingInstruction(e2,t2),this.locator&&zo(this.locator,e2),Go(this,e2)},ignorableWhitespace:function(e2,t2,i2){},characters:function(e2,t2,i2){var s2;(e2=Wo.apply(this,arguments))&&(s2=this.cdata?this.doc.createCDATASection(e2):this.doc.createTextNode(e2),this.currentElement?this.currentElement.appendChild(s2):/^\s*$/.test(e2)&&this.doc.appendChild(s2),this.locator)&&zo(this.locator,s2)},skippedEntity:function(e2){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e2){(this.locator=e2)&&(e2.lineNumber=0)},comment:function(e2,t2,i2){e2=Wo.apply(this,arguments),e2=this.doc.createComment(e2),this.locator&&zo(this.locator,e2),Go(this,e2)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e2,t2,i2){var s2=this.doc.implementation;s2&&s2.createDocumentType&&(s2=s2.createDocumentType(e2,t2,i2),this.locator&&zo(this.locator,s2),Go(this,s2),this.doc.doctype=s2)},warning:function(e2){},error:function(e2){},fatalError:function(e2){throw new Fo(e2,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(e2){Ho.prototype[e2]=function(){return null}});var Xo={__DOMHandler:Ho,normalizeLineEndings:jo,DOMParser:Vo}.DOMParser;let Ko=e2=>!!e2&&"object"==typeof e2,A=(...e2)=>e2.reduce((t2,i2)=>("object"==typeof i2&&Object.keys(i2).forEach(e3=>{Array.isArray(t2[e3])&&Array.isArray(i2[e3])?t2[e3]=t2[e3].concat(i2[e3]):Ko(t2[e3])&&Ko(i2[e3])?t2[e3]=A(t2[e3],i2[e3]):t2[e3]=i2[e3]}),t2),{}),Yo=t2=>Object.keys(t2).map(e2=>t2[e2]),Jo=e2=>e2.reduce((e3,t2)=>e3.concat(t2),[]),Zo=t2=>{if(!t2.length)return[];var i2=[];for(let e2=0;e2<t2.length;e2++)i2.push(t2[e2]);return i2};var il_INVALID_NUMBER_OF_PERIOD="INVALID_NUMBER_OF_PERIOD",il_DASH_EMPTY_MANIFEST="DASH_EMPTY_MANIFEST",il_DASH_INVALID_XML="DASH_INVALID_XML",il_NO_BASE_URL="NO_BASE_URL",il_SEGMENT_TIME_UNSPECIFIED="SEGMENT_TIME_UNSPECIFIED",il_UNSUPPORTED_UTC_TIMING_SCHEME="UNSUPPORTED_UTC_TIMING_SCHEME";let sl=({baseUrl:s2="",source:r2="",range:n2="",indexRange:a2=""})=>{if(s2={uri:r2,resolvedUri:Fn(s2||"",r2)},n2||a2){r2=(n2||a2).split("-");let i2,e2=window.BigInt?window.BigInt(r2[0]):parseInt(r2[0],10),t2=window.BigInt?window.BigInt(r2[1]):parseInt(r2[1],10);e2<Number.MAX_SAFE_INTEGER&&"bigint"==typeof e2&&(e2=Number(e2)),t2<Number.MAX_SAFE_INTEGER&&"bigint"==typeof t2&&(t2=Number(t2)),"bigint"==typeof(i2="bigint"==typeof t2||"bigint"==typeof e2?window.BigInt(t2)-window.BigInt(e2)+window.BigInt(1):t2-e2+1)&&i2<Number.MAX_SAFE_INTEGER&&(i2=Number(i2)),s2.byterange={length:i2,offset:e2}}return s2},nl=e2=>(e2&&"number"!=typeof e2&&(e2=parseInt(e2,10)),isNaN(e2)?null:e2),al={static(e2){var{duration:t2,timescale:i2=1,sourceDuration:s2,periodDuration:r2}=e2,t2=t2/i2;return"number"==typeof(e2=nl(e2.endNumber))?{start:0,end:e2}:"number"==typeof r2?{start:0,end:r2/t2}:{start:0,end:s2/t2}},dynamic(e2){var{NOW:t2,clientOffset:i2,availabilityStartTime:s2,timescale:r2=1,duration:n2,periodStart:a2=0,minimumUpdatePeriod:o2=0,timeShiftBufferDepth:l2=1/0}=e2,t2=(e2=nl(e2.endNumber),(t2+i2)/1e3),i2=s2+a2,s2=Math.ceil((t2+o2-i2)*r2/n2),a2=Math.floor((t2-i2-l2)*r2/n2),o2=Math.floor((t2-i2)*r2/n2);return{start:Math.max(0,a2),end:"number"==typeof e2?e2:Math.min(s2,o2)}}},ll=e2=>{var{type:t2,duration:i2,timescale:s2=1,periodDuration:r2,sourceDuration:n2}=e2,{start:a2,end:o2}=al[t2](e2),a2=((t2,i2)=>{var s2=[];for(let e2=t2;e2<i2;e2++)s2.push(e2);return s2})(a2,o2).map((n2=>e2=>{var{duration:t2,timescale:i2=1,periodStart:s2,startNumber:r2=1}=n2;return{number:r2+e2,duration:t2/i2,timeline:s2,time:e2*t2}})(e2));return"static"===t2&&(a2[o2=a2.length-1].duration=("number"==typeof r2?r2:n2)-i2/s2*o2),a2},dl=e2=>{var{baseUrl:t2,initialization:i2={},sourceDuration:s2,indexRange:r2="",periodStart:n2,presentationTime:a2,number:o2=0,duration:l2}=e2;if(t2)return i2=sl({baseUrl:t2,source:i2.sourceURL,range:i2.range}),(t2=sl({baseUrl:t2,source:t2,indexRange:r2})).map=i2,l2?(r2=ll(e2)).length&&(t2.duration=r2[0].duration,t2.timeline=r2[0].timeline):s2&&(t2.duration=s2,t2.timeline=n2),t2.presentationTime=a2||n2,t2.number=o2,[t2];throw new Error(il_NO_BASE_URL)},hl=(e2,i2,s2)=>{var r2=e2.sidx.map||null,n2=e2.sidx.duration,a2=e2.timeline||0,t2=(t2=e2.sidx.byterange).offset+t2.length,o2=i2.timescale,l2=i2.references.filter(e3=>1!==e3.referenceType),d2=[],h2=e2.endList?"static":"dynamic",u2=e2.sidx.timeline;let m2,c2=u2,p2=e2.mediaSequence||0;m2="bigint"==typeof i2.firstOffset?window.BigInt(t2)+i2.firstOffset:t2+i2.firstOffset;for(let t3=0;t3<l2.length;t3++){var f2=(g2=i2.references[t3]).referencedSize,g2=g2.subsegmentDuration;let e3;e3="bigint"==typeof m2?m2+window.BigInt(f2)-window.BigInt(1):m2+f2-1;var y2=dl(y2={baseUrl:s2,timescale:o2,timeline:a2,periodStart:u2,presentationTime:c2,number:p2,duration:g2,sourceDuration:n2,indexRange:y2=m2+"-"+e3,type:h2})[0];r2&&(y2.map=r2),d2.push(y2),m2+="bigint"==typeof m2?window.BigInt(f2):f2,c2+=g2/o2,p2++}return e2.segments=d2,e2},ul=["AUDIO","SUBTITLES"],cl=1/60,pl=e2=>((e2,i2)=>Yo(e2.reduce((t2,e3)=>(e3.forEach(e4=>{t2[i2(e4)]=e4}),t2),{})))(e2,({timeline:e3})=>e3).sort((e3,t2)=>e3.timeline>t2.timeline?1:-1),gl=e2=>{let r2=[];return function(r2,e2,n2){e2.forEach(function(e3){for(var t2 in r2.mediaGroups[e3])for(var i2 in r2.mediaGroups[e3][t2]){var s2=r2.mediaGroups[e3][t2][i2];n2(s2,e3,t2,i2)}})}(e2,ul,(e3,t2,i2,s2)=>{r2=r2.concat(e3.playlists||[])}),r2},fl=({playlist:i2,mediaSequence:e2})=>{i2.mediaSequence=e2,i2.segments.forEach((e3,t2)=>{e3.number=i2.mediaSequence+t2})},_l=({oldManifest:e2,newManifest:t2})=>{var i2=e2.playlists.concat(gl(e2)),s2=t2.playlists.concat(gl(t2));return t2.timelineStarts=pl([e2.timelineStarts,t2.timelineStarts]),(({oldPlaylists:t2,newPlaylists:e2,timelineStarts:r2})=>{e2.forEach(i2=>{i2.discontinuitySequence=r2.findIndex(function({timeline:e4}){return e4===i2.timeline});var e3=((t2,i2)=>{for(let e2=0;e2<t2.length;e2++)if(t2[e2].attributes.NAME===i2)return t2[e2];return null})(t2,i2.attributes.NAME);if(e3&&!i2.sidx){let t3=i2.segments[0];var s2=e3.segments.findIndex(function(e4){return Math.abs(e4.presentationTime-t3.presentationTime)<cl});-1===s2?(fl({playlist:i2,mediaSequence:e3.mediaSequence+e3.segments.length}),i2.segments[0].discontinuity=!0,i2.discontinuityStarts.unshift(0),(!e3.segments.length&&i2.timeline>e3.timeline||e3.segments.length&&i2.timeline>e3.segments[e3.segments.length-1].timeline)&&i2.discontinuitySequence--):(e3.segments[s2].discontinuity&&!t3.discontinuity&&(t3.discontinuity=!0,i2.discontinuityStarts.unshift(0),i2.discontinuitySequence--),fl({playlist:i2,mediaSequence:e3.segments[s2].number}))}})})({oldPlaylists:i2,newPlaylists:s2,timelineStarts:t2.timelineStarts}),t2},vl=e2=>e2&&e2.uri+"-"+(e2=>{let t2;return t2="bigint"==typeof e2.offset||"bigint"==typeof e2.length?window.BigInt(e2.offset)+window.BigInt(e2.length)-window.BigInt(1):e2.offset+e2.length-1,e2.offset+"-"+t2})(e2.byterange),bl=e2=>{e2=e2.reduce(function(e3,t3){return e3[t3.attributes.baseUrl]||(e3[t3.attributes.baseUrl]=[]),e3[t3.attributes.baseUrl].push(t3),e3},{});let t2=[];return Object.values(e2).forEach(e3=>{e3=Yo(e3.reduce((e4,t3)=>{var i2=t3.attributes.id+(t3.attributes.lang||"");return e4[i2]?(t3.segments&&(t3.segments[0]&&(t3.segments[0].discontinuity=!0),e4[i2].segments.push(...t3.segments)),t3.attributes.contentProtection&&(e4[i2].attributes.contentProtection=t3.attributes.contentProtection)):(e4[i2]=t3,e4[i2].attributes.timelineStarts=[]),e4[i2].attributes.timelineStarts.push({start:t3.attributes.periodStart,timeline:t3.attributes.periodStart}),e4},{})),t2=t2.concat(e3)}),t2.map(e3=>(e3.discontinuityStarts=((e2,s2)=>e2.reduce((e3,t2,i2)=>(t2[s2]&&e3.push(i2),e3),[]))(e3.segments||[],"discontinuity"),e3))},Tl=(e2,t2)=>{var i2=vl(e2.sidx);return(t2=i2&&t2[i2]&&t2[i2].sidx)&&hl(e2,t2,e2.sidx.resolvedUri),e2},Sl=(e2,t2={})=>{if(Object.keys(t2).length)for(var i2 in e2)e2[i2]=Tl(e2[i2],t2);return e2},xl=({attributes:e2,segments:t2,sidx:i2,discontinuityStarts:s2})=>(s2={attributes:{NAME:e2.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:e2.width,height:e2.height},CODECS:e2.codecs,BANDWIDTH:e2.bandwidth,"PROGRAM-ID":1},uri:"",endList:"static"===e2.type,timeline:e2.periodStart,resolvedUri:e2.baseUrl||"",targetDuration:e2.duration,discontinuityStarts:s2,timelineStarts:e2.timelineStarts,segments:t2},e2.frameRate&&(s2.attributes["FRAME-RATE"]=e2.frameRate),e2.contentProtection&&(s2.contentProtection=e2.contentProtection),e2.serviceLocation&&(s2.attributes.serviceLocation=e2.serviceLocation),i2&&(s2.sidx=i2),s2),Al=({attributes:e2})=>"video/mp4"===e2.mimeType||"video/webm"===e2.mimeType||"video"===e2.contentType,Dl=({attributes:e2})=>"audio/mp4"===e2.mimeType||"audio/webm"===e2.mimeType||"audio"===e2.contentType,Pl=({attributes:e2})=>"text/vtt"===e2.mimeType||"text"===e2.contentType,Ol=i2=>i2?Object.keys(i2).reduce((e2,t2)=>(t2=i2[t2],e2.concat(t2.playlists)),[]):[],Rl=({dashPlaylists:e2,locations:t2,contentSteering:i2,sidxMapping:s2={},previousManifest:r2,eventStream:n2})=>{var a2,o2,l2,d2,h2,u2,c2;return e2.length?(({sourceDuration:d2,type:u2,suggestedPresentationDelay:c2,minimumUpdatePeriod:h2}=e2[0].attributes),a2=bl(e2.filter(Al)).map(xl),o2=bl(e2.filter(Dl)),l2=bl(e2.filter(Pl)),e2=e2.map(e3=>e3.attributes.captionServices).filter(Boolean),d2={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:"",duration:d2,playlists:Sl(a2,s2)},0<=h2&&(d2.minimumUpdatePeriod=1e3*h2),t2&&(d2.locations=t2),i2&&(d2.contentSteering=i2),"dynamic"===u2&&(d2.suggestedPresentationDelay=c2),n2&&0<n2.length&&(d2.eventStream=n2),h2=0===d2.playlists.length,t2=o2.length?((e2,n2={},a2=!1)=>{let o2;return e2=e2.reduce((e3,t2)=>{var i2=t2.attributes.role&&t2.attributes.role.value||"",s2=t2.attributes.lang||"";let r2=t2.attributes.label||"main";return e3[r2=s2&&!t2.attributes.label?t2.attributes.lang+(i2?` (${i2})`:""):r2]||(e3[r2]={language:s2,autoselect:!0,default:"main"===i2,playlists:[],uri:""}),s2=Tl((({attributes:e2,segments:t2,sidx:i2,mediaSequence:s2,discontinuitySequence:r2,discontinuityStarts:n2},a2)=>(r2={attributes:{NAME:e2.id,BANDWIDTH:e2.bandwidth,CODECS:e2.codecs,"PROGRAM-ID":1},uri:"",endList:"static"===e2.type,timeline:e2.periodStart,resolvedUri:e2.baseUrl||"",targetDuration:e2.duration,discontinuitySequence:r2,discontinuityStarts:n2,timelineStarts:e2.timelineStarts,mediaSequence:s2,segments:t2},e2.contentProtection&&(r2.contentProtection=e2.contentProtection),e2.serviceLocation&&(r2.attributes.serviceLocation=e2.serviceLocation),i2&&(r2.sidx=i2),a2&&(r2.attributes.AUDIO="audio",r2.attributes.SUBTITLES="subs"),r2))(t2,a2),n2),e3[r2].playlists.push(s2),void 0===o2&&"main"===i2&&((o2=t2).default=!0),e3},{}),o2||(e2[Object.keys(e2)[0]].default=!0),e2})(o2,s2,h2):null,i2=l2.length?((e2,r2={})=>e2.reduce((e3,t2)=>{var i2=t2.attributes.label||t2.attributes.lang||"text",s2=t2.attributes.lang||"und";return e3[i2]||(e3[i2]={language:s2,default:!1,autoselect:!1,playlists:[],uri:""}),e3[i2].playlists.push(Tl((({attributes:e2,segments:t2,mediaSequence:i2,discontinuityStarts:s2,discontinuitySequence:r2})=>{void 0===t2&&(t2=[{uri:e2.baseUrl,timeline:e2.periodStart,resolvedUri:e2.baseUrl||"",duration:e2.sourceDuration,number:0}],e2.duration=e2.sourceDuration);var n2={NAME:e2.id,BANDWIDTH:e2.bandwidth,"PROGRAM-ID":1};return e2.codecs&&(n2.CODECS=e2.codecs),n2={attributes:n2,uri:"",endList:"static"===e2.type,timeline:e2.periodStart,resolvedUri:e2.baseUrl||"",targetDuration:e2.duration,timelineStarts:e2.timelineStarts,discontinuityStarts:s2,discontinuitySequence:r2,mediaSequence:i2,segments:t2},e2.serviceLocation&&(n2.attributes.serviceLocation=e2.serviceLocation),n2})(t2),r2)),e3},{}))(l2,s2):null,c2=(u2=a2.concat(Ol(t2),Ol(i2))).map(({timelineStarts:e3})=>e3),d2.timelineStarts=pl(c2),((e2,i2)=>{e2.forEach(t2=>{t2.mediaSequence=0,t2.discontinuitySequence=i2.findIndex(function({timeline:e3}){return e3===t2.timeline}),t2.segments&&t2.segments.forEach((e3,t3)=>{e3.number=t3})})})(u2,d2.timelineStarts),t2&&(d2.mediaGroups.AUDIO.audio=t2),i2&&(d2.mediaGroups.SUBTITLES.subs=i2),e2.length&&(d2.mediaGroups["CLOSED-CAPTIONS"].cc=(e2=>e2.reduce((s2,e3)=>(e3&&e3.forEach(e4=>{var{channel:t2,language:i2}=e4;s2[i2]={autoselect:!1,default:!1,instreamId:t2,language:i2},e4.hasOwnProperty("aspectRatio")&&(s2[i2].aspectRatio=e4.aspectRatio),e4.hasOwnProperty("easyReader")&&(s2[i2].easyReader=e4.easyReader),e4.hasOwnProperty("3D")&&(s2[i2]["3D"]=e4["3D"])}),s2),{}))(e2)),r2?_l({oldManifest:r2,newManifest:d2}):d2):{}},Nl=(e2,t2,i2)=>{var{NOW:e2,clientOffset:s2,availabilityStartTime:r2,timescale:n2=1,periodStart:a2=0,minimumUpdatePeriod:o2=0}=e2;return Math.ceil((((e2+s2)/1e3+o2-(r2+a2))*n2-t2)/i2)},Ml=(s2,r2)=>{var{type:n2,minimumUpdatePeriod:a2=0,media:o2="",sourceDuration:l2,timescale:d2=1,startNumber:h2=1,periodStart:u2}=s2,c2=[];let p2=-1;for(let i2=0;i2<r2.length;i2++){var g2=(m2=r2[i2]).d,f2=m2.r||0,m2=m2.t||0;let e2;p2<0&&(p2=m2),m2&&m2>p2&&(p2=m2),e2=f2<0?(m2=i2+1)===r2.length?"dynamic"===n2&&0<a2&&0<o2.indexOf("$Number$")?Nl(s2,p2,g2):(l2*d2-p2)/g2:(r2[m2].t-p2)/g2:f2+1;var y2=h2+c2.length+e2;let t2=h2+c2.length;for(;t2<y2;)c2.push({number:t2,duration:g2/d2,time:p2,timeline:u2}),p2+=g2,t2++}return c2},Ul=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Fl=(e2,t2)=>{return e2.replace(Ul,(r2=t2,(e2,t2,i2,s2)=>"$$"===e2?"$":void 0===r2[t2]?e2:(e2=""+r2[t2],"RepresentationID"===t2||(s2=i2?parseInt(s2,10):1)<=e2.length?e2:new Array(s2-e2.length+1).join("0")+e2)));var r2},jl=(s2,e2)=>{let r2={RepresentationID:s2.id,Bandwidth:s2.bandwidth||0};var{initialization:t2={sourceURL:"",range:""}}=s2;let n2=sl({baseUrl:s2.baseUrl,source:Fl(t2.sourceURL,r2),range:t2.range});return((e2,t2)=>e2.duration||t2?e2.duration?ll(e2):Ml(e2,t2):[{number:e2.startNumber||1,duration:e2.sourceDuration,time:0,timeline:e2.periodStart}])(s2,e2).map(e3=>{r2.Number=e3.number,r2.Time=e3.time;var t3=Fl(s2.media||"",r2),i2=s2.timescale||1;i2=s2.periodStart+(e3.time-(s2.presentationTimeOffset||0))/i2;return{uri:t3,timeline:e3.timeline,duration:e3.duration,resolvedUri:Fn(s2.baseUrl||"",t3),map:n2,number:e3.number,presentationTime:i2}})},Hl=(r2,e2)=>{let{duration:t2,segmentUrls:i2=[],periodStart:n2}=r2;if(!t2&&!e2||t2&&e2)throw new Error(il_SEGMENT_TIME_UNSPECIFIED);let s2,a2=i2.map(e3=>((e2,t2)=>{var{baseUrl:e2,initialization:i2={}}=e2,i2=sl({baseUrl:e2,source:i2.sourceURL,range:i2.range});return(e2=sl({baseUrl:e2,source:t2.media,range:t2.mediaRange})).map=i2,e2})(r2,e3));return t2&&(s2=ll(r2)),(s2=e2?Ml(r2,e2):s2).map((e3,t3)=>{var i3,s3;if(a2[t3])return t3=a2[t3],i3=r2.timescale||1,s3=r2.presentationTimeOffset||0,t3.timeline=e3.timeline,t3.duration=e3.duration,t3.number=e3.number,t3.presentationTime=n2+(e3.time-s3)/i3,t3}).filter(e3=>e3)},zl=({attributes:e2,segmentInfo:t2})=>{let i2,s2;t2.template?(s2=jl,i2=A(e2,t2.template)):t2.base?(s2=dl,i2=A(e2,t2.base)):t2.list&&(s2=Hl,i2=A(e2,t2.list));var r2,n2,a2;e2={attributes:e2};return s2&&(r2=s2(i2,t2.segmentTimeline),i2.duration?(({duration:n2,timescale:a2=1}=i2),i2.duration=n2/a2):r2.length?i2.duration=r2.reduce((e3,t3)=>Math.max(e3,Math.ceil(t3.duration)),0):i2.duration=0,e2.attributes=i2,e2.segments=r2,t2.base)&&i2.indexRange&&(e2.sidx=r2[0],e2.segments=[]),e2},D=(e2,t2)=>Zo(e2.childNodes).filter(({tagName:e3})=>e3===t2),Wl=e2=>e2.textContent.trim(),Gl=e2=>{var t2,i2,s2,r2,n2;return(e2=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e2))?([e2,t2,i2,s2,r2,n2]=e2.slice(1),31536e3*parseFloat(e2||0)+2592e3*parseFloat(t2||0)+86400*parseFloat(i2||0)+3600*parseFloat(s2||0)+60*parseFloat(r2||0)+parseFloat(n2||0)):0},Xl={mediaPresentationDuration:e2=>Gl(e2),availabilityStartTime:e2=>(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e2)&&(e2+="Z"),Date.parse(e2)/1e3),minimumUpdatePeriod:e2=>Gl(e2),suggestedPresentationDelay:e2=>Gl(e2),type:e2=>e2,timeShiftBufferDepth:e2=>Gl(e2),start:e2=>Gl(e2),width:e2=>parseInt(e2,10),height:e2=>parseInt(e2,10),bandwidth:e2=>parseInt(e2,10),frameRate:e2=>parseFloat(e2.split("/").reduce((e3,t2)=>e3/t2)),startNumber:e2=>parseInt(e2,10),timescale:e2=>parseInt(e2,10),presentationTimeOffset:e2=>parseInt(e2,10),duration(e2){var t2=parseInt(e2,10);return isNaN(t2)?Gl(e2):t2},d:e2=>parseInt(e2,10),t:e2=>parseInt(e2,10),r:e2=>parseInt(e2,10),presentationTime:e2=>parseInt(e2,10),DEFAULT:e2=>e2},P=e2=>e2&&e2.attributes?Zo(e2.attributes).reduce((e3,t2)=>{var i2=Xl[t2.name]||Xl.DEFAULT;return e3[t2.name]=i2(t2.value),e3},{}):{},Kl={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime","urn:mpeg:dash:mp4protection:2011":"mp4protection"},Yl=(e2,t2)=>t2.length?Jo(e2.map(function(s2){return t2.map(function(e3){var t3=Wl(e3),i2=Fn(s2.baseUrl,t3);e3=A(P(e3),{baseUrl:i2});return i2!==t3&&!e3.serviceLocation&&s2.serviceLocation&&(e3.serviceLocation=s2.serviceLocation),e3})})):e2,Ql=e2=>{var t2=D(e2,"SegmentTemplate")[0],i2=D(e2,"SegmentList")[0],s2=i2&&D(i2,"SegmentURL").map(e3=>A({tag:"SegmentURL"},P(e3))),r2=(e2=D(e2,"SegmentBase")[0],(r2=i2||t2)&&D(r2,"SegmentTimeline")[0]),n2=(n2=i2||e2||t2)&&D(n2,"Initialization")[0];(t2=t2&&P(t2))&&n2?t2.initialization=n2&&P(n2):t2&&t2.initialization&&(t2.initialization={sourceURL:t2.initialization});let a2={template:t2,segmentTimeline:r2&&D(r2,"S").map(e3=>P(e3)),list:i2&&A(P(i2),{segmentUrls:s2,initialization:P(n2)}),base:e2&&A(P(e2),{initialization:P(n2)})};return Object.keys(a2).forEach(e3=>{a2[e3]||delete a2[e3]}),a2},td=o2=>Jo(D(o2.node,"EventStream").map(e2=>{let n2=P(e2),a2=n2.schemeIdUri;return D(e2,"Event").map(e3=>{var t2=P(e3),i2=t2.presentationTime||0,s2=n2.timescale||1,r2=t2.duration||0;i2=i2/s2+o2.attributes.start;return{schemeIdUri:a2,value:n2.value,id:t2.id,start:i2,end:i2+r2/s2,messageData:Wl(e3)||t2.messageData,contentEncoding:n2.contentEncoding,presentationTimeOffset:n2.presentationTimeOffset||0}})})),id=(n2,a2,o2)=>e2=>{var t2=P(e2),i2=Yl(a2,D(e2,"BaseURL")),s2=D(e2,"Role")[0];s2={role:P(s2)};let r2=A(n2,t2,s2);return t2=D(e2,"Accessibility")[0],s2=(e2=>"urn:scte:dash:cc:cea-608:2015"===e2.schemeIdUri?("string"!=typeof e2.value?[]:e2.value.split(";")).map(e3=>{let t2,i2;return i2=e3,/^CC\d=/.test(e3)?[t2,i2]=e3.split("="):/^CC\d$/.test(e3)&&(t2=e3),{channel:t2,language:i2}}):"urn:scte:dash:cc:cea-708:2015"===e2.schemeIdUri?("string"!=typeof e2.value?[]:e2.value.split(";")).map(e3=>{let i2={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};var t2,s2;return/=/.test(e3)?([t2,s2=""]=e3.split("="),i2.channel=t2,i2.language=e3,s2.split(",").forEach(e4=>{var[e4,t3]=e4.split(":");"lang"===e4?i2.language=t3:"er"===e4?i2.easyReader=Number(t3):"war"===e4?i2.aspectRatio=Number(t3):"3D"===e4&&(i2["3D"]=Number(t3))})):i2.language=e3,i2.channel&&(i2.channel="SERVICE"+i2.channel),i2}):void 0)(P(t2)),s2&&(r2=A(r2,{captionServices:s2})),(t2=D(e2,"Label")[0])&&t2.childNodes.length&&(s2=t2.childNodes[0].nodeValue.trim(),r2=A(r2,{label:s2})),t2=(e2=>e2.reduce((e3,t2)=>{var i2=P(t2),s2=(i2.schemeIdUri&&(i2.schemeIdUri=i2.schemeIdUri.toLowerCase()),Kl[i2.schemeIdUri]);return s2&&(e3[s2]={attributes:i2},i2=D(t2,"cenc:pssh")[0])&&(t2=Wl(i2),e3[s2].pssh=t2&&qn(t2)),e3},{}))(D(e2,"ContentProtection")),Object.keys(t2).length&&(r2=A(r2,{contentProtection:t2})),s2=Ql(e2),t2=D(e2,"Representation"),e2=A(o2,s2),Jo(t2.map(((r2,n2,a2)=>e2=>{var t2=D(e2,"BaseURL");t2=Yl(n2,t2);let i2=A(r2,P(e2)),s2=Ql(e2);return t2.map(e3=>({segmentInfo:A(a2,s2),attributes:A(i2,e3)}))})(r2,i2,e2)))},sd=(n2,a2)=>(e2,t2)=>{var i2=Yl(a2,D(e2.node,"BaseURL")),s2=A(n2,{periodStart:e2.attributes.start}),r2=("number"==typeof e2.attributes.duration&&(s2.periodDuration=e2.attributes.duration),D(e2.node,"AdaptationSet"));e2=Ql(e2.node);return Jo(r2.map(id(s2,i2,e2)))},rd=(e2,t2)=>(1<e2.length&&t2({type:"warn",message:"The MPD manifest should contain no more than one ContentSteering tag"}),e2.length?((t2=A({serverURL:Wl(e2[0])},P(e2[0]))).queryBeforeStart="true"===t2.queryBeforeStart,t2):null),od=e2=>{if(""===e2)throw new Error(il_DASH_EMPTY_MANIFEST);var t2,i2=new Xo;let s2;try{s2=(t2=i2.parseFromString(e2,"application/xml"))&&"MPD"===t2.documentElement.tagName?t2.documentElement:null}catch(e3){}if(!s2||s2&&0<s2.getElementsByTagName("parsererror").length)throw new Error(il_DASH_INVALID_XML);return s2};function dd(e2,t2){var i2,s2,r2;return void 0===t2&&(t2=0),(e2=S(e2)).length-t2<10||!C(e2,fd,{offset:t2})?t2:dd(e2,t2+=(void 0===(s2=t2)&&(s2=0),r2=(i2=S(i2=e2))[s2+5],i2=i2[s2+6]<<21|i2[s2+7]<<14|i2[s2+8]<<7|i2[s2+9],(16&r2)>>4?20+i2:10+i2))}function hd(e2,t2,i2){var s2;return i2>=t2.length?t2.length:(s2=wd(t2,i2,!1),C(e2.bytes,s2.bytes)?i2:hd(e2,t2,i2+(e2=wd(t2,i2+s2.length)).length+e2.value+s2.length))}function ud(e2,t2){i2=t2,t2=Array.isArray(i2)?i2.map(function(e3){return Ed(e3)}):[Ed(i2)],e2=S(e2);var i2,s2=[];if(t2.length)for(var r2=0;r2<e2.length;){var n2=wd(e2,r2,!1),a2=wd(e2,r2+n2.length),o2=r2+n2.length+a2.length,l2=(127===a2.value&&(a2.value=hd(n2,e2,o2),a2.value!==e2.length)&&(a2.value-=o2),o2+a2.value>e2.length?e2.length:o2+a2.value);o2=e2.subarray(o2,l2);C(t2[0],n2.bytes)&&(1===t2.length?s2.push(o2):s2=s2.concat(ud(o2,t2.slice(1)))),r2+=n2.length+a2.length+o2.length}return s2}function cd(e2,t2,i2,s2){void 0===s2&&(s2=1/0),e2=S(e2),i2=[].concat(i2);for(var r2,n2=0,a2=0;n2<e2.length&&(a2<s2||r2);){var o2=void 0;if(C(e2.subarray(n2),Cd)?o2=4:C(e2.subarray(n2),kd)&&(o2=3),o2){if(a2++,r2)return xd(e2.subarray(r2,n2));var l2=void 0;"h264"===t2?l2=31&e2[n2+o2]:"h265"===t2&&(l2=e2[n2+o2]>>1&63),-1!==i2.indexOf(l2)&&(r2=n2+o2),n2+=o2+("h264"===t2?1:2)}else n2++}return e2.subarray(0,0)}var pd=Math.pow(2,32),md=function(e2){var t2;return(e2=new DataView(e2.buffer,e2.byteOffset,e2.byteLength)).getBigUint64?(t2=e2.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(t2):t2:e2.getUint32(0)*pd+e2.getUint32(4)},fd=S([73,68,51]),yd=function(e2){return"string"==typeof e2?ya(e2):e2},vd=function e2(t2,i2,s2){void 0===s2&&(s2=!1),i2=function(e2){return Array.isArray(e2)?e2.map(function(e3){return yd(e3)}):[yd(e2)]}(i2),t2=S(t2);var r2=[];if(i2.length)for(var n2=0;n2<t2.length;){var a2=(t2[n2]<<24|t2[n2+1]<<16|t2[n2+2]<<8|t2[n2+3])>>>0,o2=t2.subarray(n2+4,n2+8);if(0==a2)break;if((a2=n2+a2)>t2.length){if(s2)break;a2=t2.length}var l2=t2.subarray(n2+8,a2);C(o2,i2[0])&&(1===i2.length?r2.push(l2):r2.push.apply(r2,e2(l2,i2.slice(1),s2))),n2=a2}return r2},bd={EBML:S([26,69,223,163]),DocType:S([66,130]),Segment:S([24,83,128,103]),SegmentInfo:S([21,73,169,102]),Tracks:S([22,84,174,107]),Track:S([174]),TrackNumber:S([215]),DefaultDuration:S([35,227,131]),TrackEntry:S([174]),TrackType:S([131]),FlagDefault:S([136]),CodecID:S([134]),CodecPrivate:S([99,162]),VideoTrack:S([224]),AudioTrack:S([225]),Cluster:S([31,67,182,117]),Timestamp:S([231]),TimestampScale:S([42,215,177]),BlockGroup:S([160]),BlockDuration:S([155]),Block:S([161]),SimpleBlock:S([163])},Td=[128,64,32,16,8,4,2,1],wd=function(e2,t2,i2,s2){void 0===i2&&(i2=!0),void 0===s2&&(s2=!1);var r2=function(e2){for(var t2=1,i2=0;i2<Td.length&&!(e2&Td[i2]);i2++)t2++;return t2}(e2[t2]),n2=e2.subarray(t2,t2+r2);return i2&&((n2=Array.prototype.slice.call(e2,t2,t2+r2))[0]^=Td[r2-1]),{length:r2,value:ga(n2,{signed:s2}),bytes:n2}},Ed=function e2(t2){return"string"==typeof t2?t2.match(/.{1,2}/g).map(e2):"number"==typeof t2?fa(t2):t2},Cd=S([0,0,0,1]),kd=S([0,0,1]),Id=S([0,0,3]),xd=function(e2){for(var t2=[],i2=1;i2<e2.length-2;)C(e2.subarray(i2,i2+3),Id)&&(t2.push(i2+2),i2++),i2++;if(0===t2.length)return e2;var s2=e2.length-t2.length,r2=new Uint8Array(s2),n2=0;for(i2=0;i2<s2;n2++,i2++)n2===t2[0]&&(n2++,t2.shift()),r2[i2]=e2[n2];return r2},Ad={webm:S([119,101,98,109]),matroska:S([109,97,116,114,111,115,107,97]),flac:S([102,76,97,67]),ogg:S([79,103,103,83]),ac3:S([11,119]),riff:S([82,73,70,70]),avi:S([65,86,73]),wav:S([87,65,86,69]),"3gp":S([102,116,121,112,51,103]),mp4:S([102,116,121,112]),fmp4:S([115,116,121,112]),mov:S([102,116,121,112,113,116]),moov:S([109,111,111,118]),moof:S([109,111,111,102])},Dd={aac:function(e2){var t2=dd(e2);return C(e2,[255,16],{offset:t2,mask:[255,22]})},mp3:function(e2){var t2=dd(e2);return C(e2,[255,2],{offset:t2,mask:[255,6]})},webm:function(e2){return e2=ud(e2,[bd.EBML,bd.DocType])[0],C(e2,Ad.webm)},mkv:function(e2){return e2=ud(e2,[bd.EBML,bd.DocType])[0],C(e2,Ad.matroska)},mp4:function(e2){return!Dd["3gp"](e2)&&!Dd.mov(e2)&&(!!(C(e2,Ad.mp4,{offset:4})||C(e2,Ad.fmp4,{offset:4})||C(e2,Ad.moof,{offset:4})||C(e2,Ad.moov,{offset:4}))||void 0)},mov:function(e2){return C(e2,Ad.mov,{offset:4})},"3gp":function(e2){return C(e2,Ad["3gp"],{offset:4})},ac3:function(e2){var t2=dd(e2);return C(e2,Ad.ac3,{offset:t2})},ts:function(e2){if(e2.length<189&&1<=e2.length)return 71===e2[0];for(var t2=0;t2+188<e2.length&&t2<188;){if(71===e2[t2]&&71===e2[t2+188])return!0;t2+=1}return!1},flac:function(e2){var t2=dd(e2);return C(e2,Ad.flac,{offset:t2})},ogg:function(e2){return C(e2,Ad.ogg)},avi:function(e2){return C(e2,Ad.riff)&&C(e2,Ad.avi,{offset:8})},wav:function(e2){return C(e2,Ad.riff)&&C(e2,Ad.wav,{offset:8})},h264:function(e2){return cd(e2,"h264",7,3).length},h265:function(e2){return cd(e2,"h265",[32,33],3).length}},Pd=Object.keys(Dd).filter(function(e2){return"ts"!==e2&&"h264"!==e2&&"h265"!==e2}).concat(["ts","h264","h265"]),Ld=(Pd.forEach(function(e2){var t2=Dd[e2];Dd[e2]=function(e3){return t2(S(e3))}}),Dd),Od=function(e2){e2=S(e2);for(var t2=0;t2<Pd.length;t2++){var i2=Pd[t2];if(Ld[i2](e2))return i2}return""},Nd=9e4;let Md=Fn,Ud=(e2,t2)=>t2&&t2.responseURL&&e2!==t2.responseURL?t2.responseURL:e2,Bd=e2=>E.log.debug?E.log.debug.bind(E,"VHS:",e2+" >"):function(){};function L(...e2){var t2=E.obj||E;return(t2.merge||t2.mergeOptions).apply(t2,e2)}function O(...e2){var t2=E.time||E;return(t2.createTimeRanges||t2.createTimeRanges).apply(t2,e2)}function Fd(e2,i2){return Gd(e2,function(e3,t2){return e3-Wd<=i2&&t2+Wd>=i2})}function qd(e2,t2){return Gd(e2,function(e3){return e3-$d>=t2})}function jd(e2){if(e2&&e2.length&&e2.end)return e2.end(e2.length-1)}function Vd(t2,i2){let s2=0;if(t2&&t2.length)for(let e2=0;e2<t2.length;e2++){var r2=t2.start(e2),n2=t2.end(e2);n2<i2||(s2+=r2<i2&&i2<=n2?n2-i2:n2-r2)}return s2}function Hd({defaultDuration:t2,durationList:i2,startIndex:s2,endIndex:r2}){let n2=0;if(r2<s2&&([s2,r2]=[r2,s2]),s2<0){for(let e2=s2;e2<Math.min(0,r2);e2++)n2+=t2;s2=0}for(let e2=s2;e2<r2;e2++)n2+=i2[e2].duration;return n2}function zd(e2,t2,i2,s2){if(!e2||!e2.segments)return null;if(e2.endList)return rh(e2);if(null===t2)return null;t2=t2||0;let r2=sh(e2,e2.mediaSequence+e2.segments.length,t2);return i2&&(r2-=s2="number"==typeof s2?s2:eh(null,e2)),Math.max(0,r2)}let $d=1/30,Wd=3*$d,Gd=function(e2,t2){var i2=[];let s2;if(e2&&e2.length)for(s2=0;s2<e2.length;s2++)t2(e2.start(s2),e2.end(s2))&&i2.push([e2.start(s2),e2.end(s2)]);return O(i2)},Xd=t2=>{var i2=[];if(!t2||!t2.length)return"";for(let e2=0;e2<t2.length;e2++)i2.push(t2.start(e2)+" => "+t2.end(e2));return i2.join(", ")},Kd=t2=>{var i2=[];for(let e2=0;e2<t2.length;e2++)i2.push({start:t2.start(e2),end:t2.end(e2)});return i2},Yd=(t2,e2)=>{if(!e2.preload)return e2.duration;let i2=0;return(e2.parts||[]).forEach(function(e3){i2+=e3.duration}),(e2.preloadHints||[]).forEach(function(e3){"PART"===e3.type&&(i2+=t2.partTargetDuration)}),i2},Qd=e2=>(e2.segments||[]).reduce((i2,s2,r2)=>(s2.parts?s2.parts.forEach(function(e3,t2){i2.push({duration:e3.duration,segmentIndex:r2,partIndex:t2,part:e3,segment:s2})}):i2.push({duration:s2.duration,segmentIndex:r2,partIndex:null,segment:s2,part:null}),i2),[]),Jd=e2=>(e2=e2.segments&&e2.segments.length&&e2.segments[e2.segments.length-1])&&e2.parts||[],Zd=({preloadSegment:e2})=>{var t2;if(e2)return({parts:e2,preloadHints:t2}=e2),(t2||[]).reduce((e3,t3)=>e3+("PART"===t3.type?1:0),0)+(e2&&e2.length?e2.length:0)},eh=(e2,t2)=>t2.endList?0:e2&&e2.suggestedPresentationDelay?e2.suggestedPresentationDelay:(e2=0<Jd(t2).length)&&t2.serverControl&&t2.serverControl.partHoldBack?t2.serverControl.partHoldBack:e2&&t2.partTargetDuration?3*t2.partTargetDuration:t2.serverControl&&t2.serverControl.holdBack?t2.serverControl.holdBack:t2.targetDuration?3*t2.targetDuration:0,sh=function(e2,t2,i2){var s2;return(t2=void 0===t2?e2.mediaSequence+e2.segments.length:t2)<e2.mediaSequence?0:(s2=function(e2,t2){let i2=0,s2=t2-e2.mediaSequence,r2=e2.segments[s2];if(r2){if(void 0!==r2.start)return{result:r2.start,precise:!0};if(void 0!==r2.end)return{result:r2.end-r2.duration,precise:!0}}for(;s2--;){if(void 0!==(r2=e2.segments[s2]).end)return{result:i2+r2.end,precise:!0};if(i2+=Yd(e2,r2),void 0!==r2.start)return{result:i2+r2.start,precise:!0}}return{result:i2,precise:!1}}(e2,t2)).precise?s2.result:(e2=function(e2,t2){let i2=0;var s2;let r2=t2-e2.mediaSequence;for(;r2<e2.segments.length;r2++){if(void 0!==(s2=e2.segments[r2]).start)return{result:s2.start-i2,precise:!0};if(i2+=Yd(e2,s2),void 0!==s2.end)return{result:s2.end-i2,precise:!0}}return{result:-1,precise:!1}}(e2,t2)).precise?e2.result:s2.result+i2},rh=function(e2,t2,i2){if(!e2)return 0;if("number"!=typeof i2&&(i2=0),void 0===t2){if(e2.totalDuration)return e2.totalDuration;if(!e2.endList)return window.Infinity}return sh(e2,t2,i2)};function nh(e2){return e2.excludeUntil&&e2.excludeUntil>Date.now()}function ah(e2){return e2.excludeUntil&&e2.excludeUntil===1/0}function oh(e2){var t2=nh(e2);return!e2.disabled&&!t2}function lh(e2,t2){return t2.attributes&&t2.attributes[e2]}function dh(e2,t2){var i2,s2=e2&&e2.mediaGroups&&e2.mediaGroups.AUDIO||{};let r2=!1;for(i2 in s2){for(var n2 in s2[i2])if(r2=t2(s2[i2][n2]))break;if(r2)break}return!!r2}let hh=(e2,t2)=>{if(1===e2.playlists.length)return!0;let i2=t2.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e2.playlists.filter(e3=>!!oh(e3)&&(e3.attributes.BANDWIDTH||0)<i2).length},uh=(e2,t2)=>!(!e2&&!t2||!e2&&t2||e2&&!t2||e2!==t2&&(!e2.id||!t2.id||e2.id!==t2.id)&&(!e2.resolvedUri||!t2.resolvedUri||e2.resolvedUri!==t2.resolvedUri)&&(!e2.uri||!t2.uri||e2.uri!==t2.uri)),ch=i2=>{if(!i2||!i2.playlists||!i2.playlists.length)return dh(i2,e2=>e2.playlists&&e2.playlists.length||e2.uri);for(let e2=0;e2<i2.playlists.length;e2++){let t2=i2.playlists[e2];var s2=t2.attributes&&t2.attributes.CODECS;if(!(s2&&s2.split(",").every(e3=>Yn(e3))||(s2=dh(i2,e3=>uh(t2,e3)))))return!1}return!0};var ph={liveEdgeDelay:eh,duration:rh,seekable:function(e2,t2,i2){var s2=t2||0;let r2=zd(e2,t2,!0,i2);return null===r2?O():O(s2,r2=r2<s2?s2:r2)},getMediaInfoForTime:function({playlist:t2,currentTime:i2,startingSegmentIndex:s2,startingPartIndex:r2,startTime:n2,exactManifestTimings:a2}){let o2=i2-n2;var l2=Qd(t2);let d2=0;for(let e2=0;e2<l2.length;e2++){var h2=l2[e2];if(s2===h2.segmentIndex&&("number"!=typeof r2||"number"!=typeof h2.partIndex||r2===h2.partIndex)){d2=e2;break}}if(o2<0){if(0<d2)for(let e2=d2-1;0<=e2;e2--){var u2=l2[e2];if(o2+=u2.duration,a2){if(o2<0)continue}else if(o2+$d<=0)continue;return{partIndex:u2.partIndex,segmentIndex:u2.segmentIndex,startTime:n2-Hd({defaultDuration:t2.targetDuration,durationList:l2,startIndex:d2,endIndex:e2})}}return{partIndex:l2[0]&&l2[0].partIndex||null,segmentIndex:l2[0]&&l2[0].segmentIndex||0,startTime:i2}}if(d2<0){for(let e2=d2;e2<0;e2++)if((o2-=t2.targetDuration)<0)return{partIndex:l2[0]&&l2[0].partIndex||null,segmentIndex:l2[0]&&l2[0].segmentIndex||0,startTime:i2};d2=0}for(let e2=d2;e2<l2.length;e2++){var c2=l2[e2],p2=(p2=(o2-=c2.duration,c2.duration>$d))&&0<=o2+$d;if(!(0===o2)&&!p2||e2===l2.length-1){if(a2){if(0<o2)continue}else if(0<=o2-$d)continue;return{partIndex:c2.partIndex,segmentIndex:c2.segmentIndex,startTime:n2+Hd({defaultDuration:t2.targetDuration,durationList:l2,startIndex:d2,endIndex:e2})}}}return{segmentIndex:l2[l2.length-1].segmentIndex,partIndex:l2[l2.length-1].partIndex,startTime:i2}},isEnabled:oh,isDisabled:function(e2){return e2.disabled},isExcluded:nh,isIncompatible:ah,playlistEnd:zd,isAes:function(t2){for(let e2=0;e2<t2.segments.length;e2++)if(t2.segments[e2].key)return!0;return!1},hasAttribute:lh,estimateSegmentRequestTime:function(e2,t2,i2,s2=0){return lh("BANDWIDTH",i2)?(e2*i2.attributes.BANDWIDTH-8*s2)/t2:NaN},isLowestEnabledRendition:hh,isAudioOnly:ch,playlistMatch:uh,segmentDurationWithParts:Yd};let mh=E.log,gh=(e2,t2)=>e2+"-"+t2,fh=(e2,t2,i2)=>`placeholder-uri-${e2}-${t2}-`+i2,yh=(r2,n2)=>{r2.mediaGroups&&["AUDIO","SUBTITLES"].forEach(e2=>{if(r2.mediaGroups[e2])for(var t2 in r2.mediaGroups[e2])for(var i2 in r2.mediaGroups[e2][t2]){var s2=r2.mediaGroups[e2][t2][i2];n2(s2,e2,t2,i2)}})},_h=({playlist:e2,uri:t2,id:i2})=>{e2.id=i2,e2.playlistErrors_=0,t2&&(e2.uri=t2),e2.attributes=e2.attributes||{}},vh=(o2,e2,l2=fh)=>{o2.uri=e2;for(let e3=0;e3<o2.playlists.length;e3++){var t2;o2.playlists[e3].uri||(t2="placeholder-uri-"+e3,o2.playlists[e3].uri=t2)}let i2=ch(o2);var s2;yh(o2,(e3,r2,n2,a2)=>{if(!e3.playlists||!e3.playlists.length){if(i2&&"AUDIO"===r2&&!e3.uri)for(let e4=0;e4<o2.playlists.length;e4++){var t3=o2.playlists[e4];if(t3.attributes&&t3.attributes.AUDIO&&t3.attributes.AUDIO===n2)return}e3.playlists=[f({},e3)]}e3.playlists.forEach(function(e4,t4){var i3=l2(r2,n2,a2,e4),s3=gh(t4,i3);e4.uri?e4.resolvedUri=e4.resolvedUri||Md(o2.uri,e4.uri):(e4.uri=0===t4?i3:s3,e4.resolvedUri=e4.uri),e4.id=e4.id||s3,e4.attributes=e4.attributes||{},o2.playlists[e4.id]=e4,o2.playlists[e4.uri]=e4})}),(e3=>{let t3=e3.playlists.length;for(;t3--;){var i3=e3.playlists[t3];_h({playlist:i3,id:gh(t3,i3.uri)}),i3.resolvedUri=Md(e3.uri,i3.uri),e3.playlists[i3.id]=i3,(e3.playlists[i3.uri]=i3).attributes.BANDWIDTH||mh.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}})(o2),yh(s2=o2,e3=>{e3.uri&&(e3.resolvedUri=Md(s2.uri,e3.uri))})};class bh{constructor(){this.offset_=null,this.pendingDateRanges_=new Map,this.processedDateRanges_=new Map}setOffset(e2=[]){null===this.offset_&&e2.length&&([e2]=e2,void 0!==e2.programDateTime)&&(this.offset_=e2.programDateTime/1e3)}setPendingDateRanges(e2=[]){var t2;e2.length&&([t2]=e2,t2=t2.startDate.getTime(),this.trimProcessedDateRanges_(t2),this.pendingDateRanges_=e2.reduce((e3,t3)=>(e3.set(t3.id,t3),e3),new Map))}processDateRange(e2){this.pendingDateRanges_.delete(e2.id),this.processedDateRanges_.set(e2.id,e2)}getDateRangesToProcess(){if(null===this.offset_)return[];let i2={},s2=[];for(var e2 of(this.pendingDateRanges_.forEach((e3,t3)=>{this.processedDateRanges_.has(t3)||(e3.startTime=e3.startDate.getTime()/1e3-this.offset_,e3.processDateRange=()=>this.processDateRange(e3),s2.push(e3),e3.class&&(i2[e3.class]?(t3=i2[e3.class].push(e3),e3.classListIndex=t3-1):(i2[e3.class]=[e3],e3.classListIndex=0)))}),s2)){var t2=i2[e2.class]||[];e2.endDate?e2.endTime=e2.endDate.getTime()/1e3-this.offset_:e2.endOnNext&&t2[e2.classListIndex+1]?e2.endTime=t2[e2.classListIndex+1].startTime:e2.duration?e2.endTime=e2.startTime+e2.duration:e2.plannedDuration?e2.endTime=e2.startTime+e2.plannedDuration:e2.endTime=e2.startTime}return s2}trimProcessedDateRanges_(i2){new Map(this.processedDateRanges_).forEach((e2,t2)=>{e2.startDate.getTime()<i2&&this.processedDateRanges_.delete(t2)})}}function Th(e2){if((e2=e2.attributes||{}).CODECS)return aa(e2.CODECS)}function Sh(e2){let t2=0;return e2.audio&&t2++,e2.video&&t2++,t2}function wh(e2,t2){var i2=t2.attributes||{},s2=Ih(Th(t2)||[]);return!kh(e2,t2)||s2.audio||((e3,t3)=>{if(!kh(e3,t3))return!0;t3=t3.attributes||{};var i3,s3=e3.mediaGroups.AUDIO[t3.AUDIO];for(i3 in s3)if(!s3[i3].uri&&!s3[i3].playlists)return!0;return!1})(e2,t2)||(t2=Ih(function(e3,t3){if(e3.mediaGroups.AUDIO&&t3){var i3=e3.mediaGroups.AUDIO[t3];if(i3)for(var s3 in i3)if((s3=i3[s3]).default&&s3.playlists)return aa(s3.playlists[0].attributes.CODECS)}return null}(e2,i2.AUDIO)||[])).audio&&(s2.audio=t2.audio),s2}let Eh=({requestType:e2,request:t2,error:i2,parseFailure:s2})=>{var r2=t2.status<200||299<t2.status,n2=400<=t2.status&&t2.status<=499;e2={uri:t2.uri,requestType:e2},r2=r2&&!n2||s2;return i2&&n2?(e2.error=f({},i2),e2.errorType=E.Error.NetworkRequestFailed):t2.aborted?e2.errorType=E.Error.NetworkRequestAborted:t2.timedout?e2.erroType=E.Error.NetworkRequestTimeout:r2&&(n2=s2?E.Error.NetworkBodyParserFailed:E.Error.NetworkBadStatus,e2.errorType=n2,e2.status=t2.status,e2.headers=t2.headers),e2},Ch=Bd("CodecUtils"),kh=(e2,t2)=>(t2=t2.attributes||{},e2&&e2.mediaGroups&&e2.mediaGroups.AUDIO&&t2.AUDIO&&e2.mediaGroups.AUDIO[t2.AUDIO]),Ih=function(e2){let s2={};return e2.forEach(({mediaType:e3,type:t2,details:i2})=>{s2[e3]=s2[e3]||[],s2[e3].push(na(""+t2+i2))}),Object.keys(s2).forEach(function(e3){1<s2[e3].length?(Ch(`multiple ${e3} codecs found as attributes: ${s2[e3].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),s2[e3]=null):s2[e3]=s2[e3][0]}),s2};function xh(e2){var t2=e2.segments||[],i2=e2.preloadSegment;if(i2&&i2.parts&&i2.parts.length){if(i2.preloadHints)for(let e3=0;e3<i2.preloadHints.length;e3++)if("MAP"===i2.preloadHints[e3].type)return t2;i2.duration=e2.targetDuration,i2.preload=!0,t2.push(i2)}return t2}Zr=E.EventTarget;let Ah=(t2,i2)=>{if(!t2)return i2;var s2=L(t2,i2);if(t2.preloadHints&&!i2.preloadHints&&delete s2.preloadHints,t2.parts&&!i2.parts)delete s2.parts;else if(t2.parts&&i2.parts)for(let e2=0;e2<i2.parts.length;e2++)t2.parts&&t2.parts[e2]&&(s2.parts[e2]=L(t2.parts[e2],i2.parts[e2]));return!t2.skipped&&i2.skipped&&(s2.skipped=!1),t2.preload&&!i2.preload&&(s2.preload=!1),s2},Dh=(e2,t2)=>{!e2.resolvedUri&&e2.uri&&(e2.resolvedUri=Md(t2,e2.uri)),e2.key&&!e2.key.resolvedUri&&(e2.key.resolvedUri=Md(t2,e2.key.uri)),e2.map&&!e2.map.resolvedUri&&(e2.map.resolvedUri=Md(t2,e2.map.uri)),e2.map&&e2.map.key&&!e2.map.key.resolvedUri&&(e2.map.key.resolvedUri=Md(t2,e2.map.key.uri)),e2.parts&&e2.parts.length&&e2.parts.forEach(e3=>{e3.resolvedUri||(e3.resolvedUri=Md(t2,e3.uri))}),e2.preloadHints&&e2.preloadHints.length&&e2.preloadHints.forEach(e3=>{e3.resolvedUri||(e3.resolvedUri=Md(t2,e3.uri))})},Ph=(e2,t2)=>e2===t2||e2.segments&&t2.segments&&e2.segments.length===t2.segments.length&&e2.endList===t2.endList&&e2.mediaSequence===t2.mediaSequence&&e2.preloadSegment===t2.preloadSegment,Lh=(e2,r2,t2=Ph)=>{var i2=L(e2,{}),s2=i2.playlists[r2.id];if(!s2)return null;if(t2(s2,r2))return null;r2.segments=xh(r2);let n2=L(s2,r2);if(n2.preloadSegment&&!r2.preloadSegment&&delete n2.preloadSegment,s2.segments){if(r2.skip){r2.segments=r2.segments||[];for(let e3=0;e3<r2.skip.skippedSegments;e3++)r2.segments.unshift({skipped:!0})}n2.segments=((e3,t3,i3)=>{var s3=e3.slice(),r3=t3.slice(),n3=(i3=i3||0,[]);let a2;for(let e4=0;e4<r3.length;e4++){var o2=s3[e4+i3],l2=r3[e4];o2?(a2=o2.map||a2,n3.push(Ah(o2,l2))):(a2&&!l2.map&&(l2.map=a2),n3.push(l2))}return n3})(s2.segments,r2.segments,r2.mediaSequence-s2.mediaSequence)}n2.segments.forEach(e3=>{Dh(e3,n2.resolvedUri)});for(let e3=0;e3<i2.playlists.length;e3++)i2.playlists[e3].id===r2.id&&(i2.playlists[e3]=n2);return i2.playlists[r2.id]=n2,i2.playlists[r2.uri]=n2,yh(e2,(t3,e3,i3,s3)=>{if(t3.playlists)for(let e4=0;e4<t3.playlists.length;e4++)r2.id===t3.playlists[e4].id&&(t3.playlists[e4]=n2)}),i2},Oh=(e2,t2)=>{var i2,s2=(s2=(i2=(i2=e2.segments||[])[i2.length-1])&&i2.parts&&i2.parts[i2.parts.length-1])&&s2.duration||i2&&i2.duration;return t2&&s2?1e3*s2:500*(e2.partTargetDuration||e2.targetDuration||10)},Rh=(e2,t2,i2)=>{if(e2){let r2=[];return e2.forEach(e3=>{var t3,i3,s2;e3.attributes&&(({BANDWIDTH:t3,RESOLUTION:i3,CODECS:s2}=e3.attributes),r2.push({id:e3.id,bandwidth:t3,resolution:i3,codecs:s2}))}),{type:t2,isLive:i2,renditions:r2}}};class Nh extends Zr{constructor(e2,t2,i2={}){if(super(),!e2)throw new Error("A non-empty playlist URL or object is required");this.logger_=Bd("PlaylistLoader");var{withCredentials:s2=!1}=i2;this.src=e2,this.vhs_=t2,this.withCredentials=s2,this.addDateRangesToTextTrack_=i2.addDateRangesToTextTrack,e2=t2.options_;this.customTagParsers=e2&&e2.customTagParsers||[],this.customTagMappers=e2&&e2.customTagMappers||[],this.llhls=e2&&e2.llhls,this.dateRangesStorage_=new bh,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_),this.on("loadedplaylist",this.handleLoadedPlaylist_.bind(this))}handleLoadedPlaylist_(){var e2=this.media();e2&&(this.dateRangesStorage_.setOffset(e2.segments),this.dateRangesStorage_.setPendingDateRanges(e2.dateRanges),(e2=this.dateRangesStorage_.getDateRangesToProcess()).length)&&this.addDateRangesToTextTrack_&&this.addDateRangesToTextTrack_(e2)}handleMediaupdatetimeout_(){if("HAVE_METADATA"===this.state){var t2=this.media();let e2=Md(this.main.uri,t2.uri);this.llhls&&(e2=((e3,t3)=>{if(!t3.endList&&t3.serverControl){let i2={};if(t3.serverControl.canBlockReload){var s2,r2=t3.preloadSegment;let e4=t3.mediaSequence+t3.segments.length;r2&&(r2=r2.parts||[],-1<(s2=Zd(t3)-1)&&s2!=r2.length-1&&(i2._HLS_part=s2),-1<s2||r2.length)&&e4--,i2._HLS_msn=e4}if(t3.serverControl&&t3.serverControl.canSkipUntil&&(i2._HLS_skip=t3.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(i2).length){let t4=new window.URL(e3);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(e4){i2.hasOwnProperty(e4)&&t4.searchParams.set(e4,i2[e4])}),e3=t4.toString()}}return e3})(e2,t2)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:e2,withCredentials:this.withCredentials,requestType:"hls-playlist"},(e3,t3)=>{if(this.request)return e3?this.playlistRequestError(this.request,this.media(),"HAVE_METADATA"):void this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})})}}playlistRequestError(e2,t2,i2){var{uri:t2,id:s2}=t2;this.request=null,i2&&(this.state=i2),this.error={playlist:this.main.playlists[s2],status:e2.status,message:`HLS playlist request error at URL: ${t2}.`,responseText:e2.responseText,code:500<=e2.status?4:2,metadata:Eh({requestType:e2.requestType,request:e2,error:e2.error})},this.trigger("error")}parseManifest_({url:t2,manifestString:e2}){try{var i2=(({onwarn:t3,oninfo:e3,manifestString:i3,customTagParsers:s2=[],customTagMappers:r2=[],llhls:n2})=>{let a2=new Kn,o2=(t3&&a2.on("warn",t3),e3&&a2.on("info",e3),s2.forEach(e4=>a2.addParser(e4)),r2.forEach(e4=>a2.addTagMapper(e4)),a2.push(i3),a2.end(),a2.manifest);if(n2||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(e4){o2.hasOwnProperty(e4)&&delete o2[e4]}),o2.segments&&o2.segments.forEach(function(t4){["parts","preloadHints"].forEach(function(e4){t4.hasOwnProperty(e4)&&delete t4[e4]})})),!o2.targetDuration){let e4=10;o2.segments&&o2.segments.length&&(e4=o2.segments.reduce((e5,t4)=>Math.max(e5,t4.duration),0)),t3&&t3({message:"manifest has no targetDuration defaulting to "+e4}),o2.targetDuration=e4}return(e3=Jd(o2)).length&&!o2.partTargetDuration&&(s2=e3.reduce((e4,t4)=>Math.max(e4,t4.duration),0),t3&&(t3({message:"manifest has no partTargetDuration defaulting to "+s2}),mh.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),o2.partTargetDuration=s2),o2})({onwarn:({message:e3})=>this.logger_(`m3u8-parser warn for ${t2}: `+e3),oninfo:({message:e3})=>this.logger_(`m3u8-parser info for ${t2}: `+e3),manifestString:e2,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls});return i2.playlists&&i2.playlists.length&&this.excludeAudioOnlyVariants(i2.playlists),i2}catch(e3){this.error=e3,this.error.metadata={errorType:E.Error.StreamingHlsPlaylistParserError,error:e3}}}excludeAudioOnlyVariants(e2){let t2=e3=>{var{width:t3,height:i2}=(e3.attributes||{}).RESOLUTION||{};return!(!t3||!i2)||(t3=Th(e3)||[],i2=Ih(t3),Boolean(i2.video))};e2.some(t2)&&e2.forEach(e3=>{t2(e3)||(e3.excludeUntil=1/0)})}haveMetadata({playlistString:e2,playlistObject:t2,url:i2,id:s2}){this.request=null,this.state="HAVE_METADATA";var r2={playlistInfo:{type:"media",uri:i2}};(t2=(this.trigger({type:"playlistparsestart",metadata:r2}),t2||this.parseManifest_({url:i2,manifestString:e2}))).lastRequest=Date.now(),_h({playlist:t2,uri:i2,id:s2}),e2=Lh(this.main,t2);this.targetDuration=t2.partTargetDuration||t2.targetDuration,this.pendingMedia_=null,e2?(this.main=e2,this.media_=this.main.playlists[s2]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(Oh(this.media(),!!e2)),r2.parsedPlaylist=Rh(this.main.playlists,r2.playlistInfo.type,!this.media_.endList),this.trigger({type:"playlistparsecomplete",metadata:r2}),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),window.clearTimeout(this.mediaUpdateTimeout),window.clearTimeout(this.finalRenditionTimeout),this.dateRangesStorage_=new bh,this.off()}stopRequest(){var e2;this.request&&(e2=this.request,this.request=null,e2.onreadystatechange=null,e2.abort())}media(r2,e2){if(!r2)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof r2){if(!this.main.playlists[r2])throw new Error("Unknown playlist URI: "+r2);r2=this.main.playlists[r2]}if(window.clearTimeout(this.finalRenditionTimeout),e2)e2=(r2.partTargetDuration||r2.targetDuration)/2*1e3||5e3,this.finalRenditionTimeout=window.setTimeout(this.media.bind(this,r2,!1),e2);else{let s2=this.state;e2=!this.media_||r2.id!==this.media_.id;var t2=this.main.playlists[r2.id];if(t2&&t2.endList||r2.endList&&r2.segments.length)this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=r2,e2&&(this.trigger("mediachanging"),"HAVE_MAIN_MANIFEST"===s2?this.trigger("loadedmetadata"):this.trigger("mediachange"));else if(this.updateMediaUpdateTimeout_(Oh(r2,!0)),e2){if(this.state="SWITCHING_MEDIA",this.request){if(r2.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging");let i2={playlistInfo:{type:"media",uri:(this.pendingMedia_=r2).uri}};this.trigger({type:"playlistrequeststart",metadata:i2}),this.request=this.vhs_.xhr({uri:r2.resolvedUri,withCredentials:this.withCredentials,requestType:"hls-playlist"},(e3,t3)=>{if(this.request){if(r2.lastRequest=Date.now(),r2.resolvedUri=Ud(r2.resolvedUri,t3),e3)return this.playlistRequestError(this.request,r2,s2);this.trigger({type:"playlistrequestcomplete",metadata:i2}),this.haveMetadata({playlistString:t3.responseText,url:r2.uri,id:r2.id}),"HAVE_MAIN_MANIFEST"===s2?this.trigger("loadedmetadata"):this.trigger("mediachange")}})}}}pause(){this.mediaUpdateTimeout&&(window.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}load(e2){this.mediaUpdateTimeout&&(window.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var t2=this.media();e2?(e2=t2?(t2.partTargetDuration||t2.targetDuration)/2*1e3:5e3,this.mediaUpdateTimeout=window.setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},e2)):this.started?t2&&!t2.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}updateMediaUpdateTimeout_(e2){this.mediaUpdateTimeout&&(window.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=window.setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(e2)},e2))}start(){if(this.started=!0,"object"==typeof this.src)this.src.uri||(this.src.uri=window.location.href),this.src.resolvedUri=this.src.uri,setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);else{let i2={playlistInfo:{type:"multivariant",uri:this.src}};this.trigger({type:"playlistrequeststart",metadata:i2}),this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials,requestType:"hls-playlist"},(e2,t2)=>{if(this.request){if(this.request=null,e2)return this.error={status:t2.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:t2.responseText,code:2,metadata:Eh({requestType:t2.requestType,request:t2,error:e2})},"HAVE_NOTHING"===this.state&&(this.started=!1),this.trigger("error");this.trigger({type:"playlistrequestcomplete",metadata:i2}),this.src=Ud(this.src,t2),this.trigger({type:"playlistparsestart",metadata:i2}),e2=this.parseManifest_({manifestString:t2.responseText,url:this.src}),i2.parsedPlaylist=Rh(e2.playlists,i2.playlistInfo.type,!1),this.trigger({type:"playlistparsecomplete",metadata:i2}),this.setupInitialPlaylist(e2)}})}}srcUri(){return"string"==typeof this.src?this.src:this.src.uri}setupInitialPlaylist(e2){var t2,i2,s2,r2;this.state="HAVE_MAIN_MANIFEST",e2.playlists?(this.main=e2,vh(this.main,this.srcUri()),e2.playlists.forEach(t3=>{t3.segments=xh(t3),t3.segments.forEach(e3=>{Dh(e3,t3.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.main.playlists[0])):(t2=this.srcUri()||window.location.href,this.main=(s2=gh(0,i2=t2),(r2={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:window.location.href,resolvedUri:window.location.href,playlists:[{uri:i2,id:s2,resolvedUri:i2,attributes:{}}]}).playlists[s2]=r2.playlists[0],r2.playlists[i2]=r2.playlists[0],r2),this.haveMetadata({playlistObject:e2,url:t2,id:this.main.playlists[0].id}),this.trigger("loadedmetadata"))}updateOrDeleteClone(e2,t2){var i2=this.main,s2=e2.ID;let r2=i2.playlists.length;for(;r2--;){var n2,a2,o2,l2,d2,h2=i2.playlists[r2];h2.attributes["PATHWAY-ID"]===s2&&(n2=h2.resolvedUri,a2=h2.id,t2?(o2=this.createCloneURI_(h2.resolvedUri,e2),l2=gh(s2,o2),d2=this.createCloneAttributes_(s2,h2.attributes),h2=this.createClonePlaylist_(h2,l2,e2,d2),i2.playlists[r2]=h2,i2.playlists[l2]=h2,i2.playlists[o2]=h2):i2.playlists.splice(r2,1),delete i2.playlists[a2],delete i2.playlists[n2])}this.updateOrDeleteCloneMedia(e2,t2)}updateOrDeleteCloneMedia(e2,t2){let s2=this.main,r2=e2.ID;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e3=>{if(s2.mediaGroups[e3]&&s2.mediaGroups[e3][r2])for(var t3 in s2.mediaGroups[e3])if(t3===r2){for(var i2 in s2.mediaGroups[e3][t3])s2.mediaGroups[e3][t3][i2].playlists.forEach((e4,t4)=>{var i3=(e4=s2.playlists[e4.id]).id;e4=e4.resolvedUri;delete s2.playlists[i3],delete s2.playlists[e4]});delete s2.mediaGroups[e3][t3]}}),t2&&this.createClonedMediaGroups_(e2)}addClonePathway(e2,t2={}){var i2=this.main,s2=i2.playlists.length,r2=this.createCloneURI_(t2.resolvedUri,e2),n2=gh(e2.ID,r2),a2=this.createCloneAttributes_(e2.ID,t2.attributes);t2=this.createClonePlaylist_(t2,n2,e2,a2);i2.playlists[s2]=t2,i2.playlists[n2]=t2,i2.playlists[r2]=t2,this.createClonedMediaGroups_(e2)}createClonedMediaGroups_(l2){let d2=l2.ID,s2=l2["BASE-ID"],h2=this.main;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(o2=>{if(h2.mediaGroups[o2]&&!h2.mediaGroups[o2][d2])for(var e2 in h2.mediaGroups[o2])if(e2===s2){h2.mediaGroups[o2][d2]={};for(let a2 in h2.mediaGroups[o2][e2]){var t2=h2.mediaGroups[o2][e2][a2];h2.mediaGroups[o2][d2][a2]=f({},t2);let n2=h2.mediaGroups[o2][d2][a2];var i2=this.createCloneURI_(t2.resolvedUri,l2);n2.resolvedUri=i2,n2.uri=i2,n2.playlists=[],t2.playlists.forEach((e3,t3)=>{var i3,s3=h2.playlists[e3.id],r2=fh(o2,d2,a2);r2=gh(d2,r2);s3&&!h2.playlists[r2]&&(i3=(s3=this.createClonePlaylist_(s3,r2,l2)).resolvedUri,h2.playlists[r2]=s3,h2.playlists[i3]=s3),n2.playlists[t3]=this.createClonePlaylist_(e3,r2,l2)})}}})}createClonePlaylist_(e2,t2,i2,s2){return i2={resolvedUri:i2=this.createCloneURI_(e2.resolvedUri,i2),uri:i2,id:t2},e2.segments&&(i2.segments=[]),s2&&(i2.attributes=s2),L(e2,i2)}createCloneURI_(e2,t2){var i2,s2=new URL(e2),r2=(s2.hostname=t2["URI-REPLACEMENT"].HOST,t2["URI-REPLACEMENT"].PARAMS);for(i2 of Object.keys(r2))s2.searchParams.set(i2,r2[i2]);return s2.href}createCloneAttributes_(t2,i2){let s2={"PATHWAY-ID":t2};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e2=>{i2[e2]&&(s2[e2]=t2)}),s2}getKeyIdSet(e2){if(e2.contentProtection){var t2,i2=new Set;for(t2 in e2.contentProtection){var s2=e2.contentProtection[t2].attributes.keyId;s2&&i2.add(s2.toLowerCase())}return i2}}}function Mh(e2,t2,i2,s2){var r2="arraybuffer"===e2.responseType?e2.response:e2.responseText;!t2&&r2&&(e2.responseTime=Date.now(),e2.roundTripTime=e2.responseTime-e2.requestTime,e2.bytesReceived=r2.byteLength||r2.length,e2.bandwidth||(e2.bandwidth=Math.floor(e2.bytesReceived/e2.roundTripTime*8*1e3))),i2.headers&&(e2.responseHeaders=i2.headers),t2&&"ETIMEDOUT"===t2.code&&(e2.timedout=!0),s2(t2=t2||e2.aborted||200===i2.statusCode||206===i2.statusCode||0===i2.statusCode?t2:new Error("XHR Failed with a response of: "+(e2&&(r2||e2.responseText))),e2)}function Uh(){function d2(e2,a2){e2=L({timeout:45e3},e2);var t2=d2.beforeRequest||E.Vhs.xhr.beforeRequest,i2=d2._requestCallbackSet||E.Vhs.xhr._requestCallbackSet||new Set;let o2=d2._responseCallbackSet||E.Vhs.xhr._responseCallbackSet;t2&&"function"==typeof t2&&(E.log.warn("beforeRequest is deprecated, use onRequest instead."),i2.add(t2));var s2=(!0===E.Vhs.xhr.original?E:E.Vhs).xhr,r2=((e3,i3)=>{if(e3&&e3.size){let t3=i3;return e3.forEach(e4=>{t3=e4(t3)}),t3}})(i2,e2);i2.delete(t2);let l2=s2(r2||e2,function(e3,t3){var i3,s3,r3,n3;return s3=l2,r3=e3,n3=t3,(i3=o2)&&i3.size&&i3.forEach(e4=>{e4(s3,r3,n3)}),Mh(l2,e3,t3,a2)}),n2=l2.abort;return l2.abort=function(){return l2.aborted=!0,n2.apply(l2,arguments)},l2.uri=e2.uri,l2.requestType=e2.requestType,l2.requestTime=Date.now(),l2}return d2.original=!0,d2}function Bh(e2){var e3,t2={};return e2.byterange&&(t2.Range="bytes="+(e3=e2.byterange).offset+"-"+("bigint"==typeof e3.offset||"bigint"==typeof e3.length?window.BigInt(e3.offset)+window.BigInt(e3.length)-window.BigInt(1):e3.offset+e3.length-1)),t2}function Fh(e2,t2){return e2=e2.toString(16),"00".substring(0,2-e2.length)+e2+(t2%2?" ":"")}function qh(e2){return 32<=e2&&e2<126?String.fromCharCode(e2):"."}function jh(e2){var t2=e2.byterange||{length:1/0,offset:0};return[t2.length,t2.offset,e2.resolvedUri].join(",")}function Vh(e2){return e2.resolvedUri}let Hh=function(i2){let s2={};return Object.keys(i2).forEach(e2=>{var t2=i2[e2];pa(t2)?s2[e2]={bytes:t2.buffer,byteOffset:t2.byteOffset,byteLength:t2.byteLength}:s2[e2]=t2}),s2},zh=e2=>{var s2=Array.prototype.slice.call(e2);let r2="";for(let e3=0;e3<s2.length/16;e3++)r2+=s2.slice(16*e3,16*e3+16).map(Fh).join("")+" "+s2.slice(16*e3,16*e3+16).map(qh).join("")+"\n";return r2};Jr=Object.freeze({__proto__:null,createTransferableMessage:Hh,initSegmentId:jh,segmentKeyId:Vh,hexDump:zh,tagDump:({bytes:e2})=>zh(e2),textRanges:e2=>{let i2,t2="";for(i2=0;i2<e2.length;i2++)t2+=(r2=i2,(s2=e2).start(r2)+"-"+s2.end(r2)+" ");var s2,r2;return t2}});let Xh=({programTime:e2,playlist:t2,retryCount:i2=2,seekTo:s2,pauseAfterSeek:r2=!0,tech:n2,callback:a2})=>{var o2,l2,d2;if(a2)return void 0!==e2&&t2&&s2?t2.endList||n2.hasStarted_?(t3=>{if(!t3.segments||0===t3.segments.length)return!1;for(let e3=0;e3<t3.segments.length;e3++)if(!t3.segments[e3].dateTimeObject)return!1;return!0})(t2)?(d2=((e3,t3)=>{let i3;try{i3=new Date(e3)}catch(e4){return null}if(!t3||!t3.segments||0===t3.segments.length)return null;let s3=t3.segments[0];if(i3<new Date(s3.dateTimeObject))return null;for(let e4=0;e4<t3.segments.length-1;e4++){if(s3=t3.segments[e4],i3<new Date(t3.segments[e4+1].dateTimeObject))break}var n3=(e3=t3.segments[t3.segments.length-1]).dateTimeObject,a3=e3.videoTimingInfo?(e2=>e2.transmuxedPresentationEnd-e2.transmuxedPresentationStart-e2.transmuxerPrependedSeconds)(e3.videoTimingInfo):e3.duration+.25*e3.duration;return i3>(a3=new Date(n3.getTime()+1e3*a3))?null:{segment:s3=i3>new Date(n3)?e3:s3,estimatedStart:s3.videoTimingInfo?s3.videoTimingInfo.transmuxedPresentationStart:ph.duration(t3,t3.mediaSequence+t3.segments.indexOf(s3)),type:s3.videoTimingInfo?"accurate":"estimate"}})(e2,t2))?(l2=((e3,t3)=>{let i3,s3;try{i3=new Date(e3),s3=new Date(t3)}catch(e4){}return e3=i3.getTime(),(s3.getTime()-e3)/1e3})((o2=d2.segment).dateTimeObject,e2),"estimate"===d2.type?0===i2?a2({message:e2+" is not buffered yet. Try again"}):(s2(d2.estimatedStart+l2),void n2.one("seeked",()=>{Xh({programTime:e2,playlist:t2,retryCount:i2-1,seekTo:s2,pauseAfterSeek:r2,tech:n2,callback:a2})})):(d2=o2.start+l2,n2.one("seeked",()=>a2(null,n2.currentTime())),r2&&n2.pause(),void s2(d2))):a2({message:e2+" was not found in the stream"}):a2({message:"programDateTime tags must be provided in the manifest "+t2.resolvedUri}):a2({message:"player must be playing a live stream to start buffering"}):a2({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});throw new Error("seekToProgramTime: callback must be provided")};function Qh(t2,i2){if(!Ph(t2,i2))return!1;if(t2.sidx&&i2.sidx&&(t2.sidx.offset!==i2.sidx.offset||t2.sidx.length!==i2.sidx.length))return!1;if(!t2.sidx&&i2.sidx||t2.sidx&&!i2.sidx)return!1;if(t2.segments&&!i2.segments||!t2.segments&&i2.segments)return!1;if(t2.segments||i2.segments)for(let e2=0;e2<t2.segments.length;e2++){var s2=t2.segments[e2],r2=i2.segments[e2];if(s2.uri!==r2.uri)return!1;if(s2.byterange||r2.byterange){if(s2=s2.byterange,r2=r2.byterange,s2&&!r2||!s2&&r2)return!1;if(s2.offset!==r2.offset||s2.length!==r2.length)return!1}}return!0}e=E.EventTarget;let Jh=(e2,t2,i2,s2)=>`placeholder-uri-${e2}-${t2}-`+(s2.attributes.NAME||i2),Zh=({mainXml:e2,srcUrl:t2,clientOffset:i2,sidxMapping:s2,previousManifest:r2})=>(i2={manifestUri:t2,clientOffset:i2,sidxMapping:s2,previousManifest:r2},e2=((e2,t2={})=>{var{manifestUri:t2="",NOW:i2=Date.now(),clientOffset:s2=0,eventHandler:r2=function(){}}=t2,n2=D(e2,"Period");if(!n2.length)throw new Error(il_INVALID_NUMBER_OF_PERIOD);var a2=D(e2,"Location");let o2=P(e2);t2=Yl([{baseUrl:t2}],D(e2,"BaseURL")),e2=D(e2,"ContentSteering"),o2.type=o2.type||"static",o2.sourceDuration=o2.mediaPresentationDuration||0,o2.NOW=i2,o2.clientOffset=s2,a2.length&&(o2.locations=a2.map(Wl));let l2=[];return n2.forEach((e3,t3)=>{var i3=P(e3);t3=l2[t3-1],i3.start=(({attributes:e2,priorPeriodAttributes:t2,mpdType:i2})=>"number"==typeof e2.start?e2.start:t2&&"number"==typeof t2.start&&"number"==typeof t2.duration?t2.start+t2.duration:t2||"static"!==i2?null:0)({attributes:i3,priorPeriodAttributes:t3?t3.attributes:null,mpdType:o2.type}),l2.push({node:e3,attributes:i3})}),{locations:o2.locations,contentSteeringInfo:rd(e2,r2),representationInfo:Jo(l2.map(sd(o2,t2))),eventStream:Jo(l2.map(td))}})(od(e2),i2),s2=(e2=>e2.map(zl))(e2.representationInfo),r2=Rl({dashPlaylists:s2,locations:e2.locations,contentSteering:e2.contentSteeringInfo,sidxMapping:i2.sidxMapping,previousManifest:i2.previousManifest,eventStream:e2.eventStream}),vh(r2,t2,Jh),r2),tu=(e2,t2)=>(Boolean(!e2.map&&!t2.map)||Boolean(e2.map&&t2.map&&e2.map.byterange.offset===t2.map.byterange.offset&&e2.map.byterange.length===t2.map.byterange.length))&&e2.uri===t2.uri&&e2.byterange.offset===t2.byterange.offset&&e2.byterange.length===t2.byterange.length,iu=(e2,t2)=>{var i2,s2={};for(i2 in e2){var r2=e2[i2].sidx;if(r2){var n2=vl(r2);if(!t2[n2])break;var a2=t2[n2].sidxInfo;tu(a2,r2)&&(s2[n2]=t2[n2])}}return s2};class su extends e{constructor(e2,t2,i2={},s2){super(),this.isPaused_=!0,this.mainPlaylistLoader_=s2||this,s2||(this.isMain_=!0);var{withCredentials:s2=!1}=i2;if(this.vhs_=t2,this.withCredentials=s2,this.addMetadataToTextTrack=i2.addMetadataToTextTrack,!e2)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=Bd("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=e2,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=e2}get isPaused(){return this.isPaused_}requestErrored_(e2,t2,i2){return!this.request||(this.request=null,e2?(this.error="object"!=typeof e2||e2 instanceof Error?{status:t2.status,message:"DASH request error at URL: "+t2.uri,response:t2.response,code:2,metadata:e2.metadata}:e2,i2&&(this.state=i2),this.trigger("error"),!0):void 0)}addSidxSegments_(l2,r2,n2){let d2=l2.sidx&&vl(l2.sidx);if(l2.sidx&&d2&&!this.mainPlaylistLoader_.sidxMapping_[d2]){let a2=Ud(l2.sidx.resolvedUri),o2=(t2,i2)=>{if(!this.requestErrored_(t2,i2,r2)){t2=this.mainPlaylistLoader_.sidxMapping_;var s2=i2.requestType;let e2;try{e2=function(e2){var t2=new DataView(e2.buffer,e2.byteOffset,e2.byteLength),i2={version:e2[0],flags:new Uint8Array(e2.subarray(1,4)),references:[],referenceId:t2.getUint32(4),timescale:t2.getUint32(8)},s2=12,r2=(0===i2.version?(i2.earliestPresentationTime=t2.getUint32(s2),i2.firstOffset=t2.getUint32(s2+4),s2+=8):(i2.earliestPresentationTime=md(e2.subarray(s2)),i2.firstOffset=md(e2.subarray(s2+8)),s2+=16),t2.getUint16(s2+=2));for(s2+=2;0<r2;s2+=12,r2--)i2.references.push({referenceType:(128&e2[s2])>>>7,referencedSize:2147483647&t2.getUint32(s2),subsegmentDuration:t2.getUint32(s2+4),startsWithSap:!!(128&e2[s2+8]),sapType:(112&e2[s2+8])>>>4,sapDeltaTime:268435455&t2.getUint32(s2+8)});return i2}(S(i2.response).subarray(8))}catch(e3){return e3.metadata=Eh({requestType:s2,request:i2,parseFailure:!0}),void this.requestErrored_(e3,i2,r2)}return t2[d2]={sidxInfo:l2.sidx,sidx:e2},hl(l2,e2,l2.sidx.resolvedUri),n2(!0)}};this.request=((e2,t2,r2,s2)=>{function n2(e3,t3,i3,s3){return t3.abort(),l2=!0,r2(e3,t3,i3,s3)}function i2(e3,t3){var i3;if(!l2)return e3?(e3.metadata=Eh({requestType:s2,request:t3,error:e3}),n2(e3,t3,"",a2)):(i3=t3.responseText.substring(a2&&a2.byteLength||0,t3.responseText.length),a2=function(){for(var e4,t4,i4,s3=arguments.length,r3=new Array(s3),n3=0;n3<s3;n3++)r3[n3]=arguments[n3];return(r3=r3.filter(function(e5){return e5&&(e5.byteLength||e5.length)&&"string"!=typeof e5})).length<=1?S(r3[0]):(e4=r3.reduce(function(e5,t5,i5){return e5+(t5.byteLength||t5.length)},0),t4=new Uint8Array(e4),i4=0,r3.forEach(function(e5){e5=S(e5),t4.set(e5,i4),i4+=e5.byteLength}),t4)}(a2,ya(i3,!0)),o2=o2||dd(a2),a2.length<10||o2&&a2.length<o2+2||"ts"===(i3=Od(a2))&&a2.length<188||!i3&&a2.length<376?((e2,t2)=>{if(4===e2.readyState)return t2()})(t3,()=>n2(e3,t3,"",a2)):n2(null,t3,i3,a2))}let o2,a2=[],l2=!1,d2=t2({uri:e2,beforeSend(e3){e3.overrideMimeType("text/plain; charset=x-user-defined"),e3.addEventListener("progress",function({}){return Mh(e3,null,{statusCode:e3.status},i2)})}},function(e3,t3){return Mh(d2,e3,t3,i2)});return d2})(a2,this.vhs_.xhr,(e2,t2,i2,s2)=>{var r3,n3;return e2?o2(e2,t2):i2&&"mp4"===i2?(({offset:r3,length:n3}=l2.sidx.byterange),s2.length>=n3+r3?o2(e2,{response:s2.subarray(r3,r3+n3),status:t2.status,uri:t2.uri}):void(this.request=this.vhs_.xhr({uri:a2,responseType:"arraybuffer",requestType:"dash-sidx",headers:Bh({byterange:l2.sidx.byterange})},o2))):(e2=i2||"unknown",o2({status:t2.status,message:`Unsupported ${e2} container type for sidx segment at URL: `+a2,response:"",playlist:l2,internal:!0,playlistExclusionDuration:1/0,code:2},t2))},"dash-sidx")}else window.clearTimeout(this.mediaRequest_),this.mediaRequest_=window.setTimeout(()=>n2(!1),0)}dispose(){this.isPaused_=!0,this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},window.clearTimeout(this.minimumUpdatePeriodTimeout_),window.clearTimeout(this.mediaRequest_),window.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){var e2;this.request&&(e2=this.request,this.request=null,e2.onreadystatechange=null,e2.abort())}media(t2){if(!t2)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);let i2=this.state;if("string"==typeof t2){if(!this.mainPlaylistLoader_.main.playlists[t2])throw new Error("Unknown playlist URI: "+t2);t2=this.mainPlaylistLoader_.main.playlists[t2]}var e2=!this.media_||t2.id!==this.media_.id;e2&&this.loadedPlaylists_[t2.id]&&this.loadedPlaylists_[t2.id].endList?(this.state="HAVE_METADATA",this.media_=t2,e2&&(this.trigger("mediachanging"),this.trigger("mediachange"))):e2&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(t2,i2,e3=>{this.haveMetadata({startingState:i2,playlist:t2})}))}haveMetadata({startingState:e2,playlist:t2}){this.state="HAVE_METADATA",this.loadedPlaylists_[t2.id]=t2,window.clearTimeout(this.mediaRequest_),this.mediaRequest_=null,this.refreshMedia_(t2.id),"HAVE_MAIN_MANIFEST"===e2?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.isPaused_=!0,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),window.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(window.clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)}load(e2){this.isPaused_=!1,window.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var t2=this.media();e2?(e2=t2?t2.targetDuration/2*1e3:5e3,this.mediaUpdateTimeout=window.setTimeout(()=>this.load(),e2)):this.started?t2&&!t2.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()}start(){this.started=!0,this.isMain_?this.requestMain_((e2,t2)=>{this.haveMain_(),this.hasPendingRequest()||this.media_||this.media(this.mainPlaylistLoader_.main.playlists[0])}):(window.clearTimeout(this.mediaRequest_),this.mediaRequest_=window.setTimeout(()=>this.haveMain_(),0))}requestMain_(s2){let r2={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestrequeststart",metadata:r2}),this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials,requestType:"dash-manifest"},(e2,t2)=>{var i2;if(e2&&(i2=t2.requestType,e2.metadata=Eh({requestType:i2,request:t2,error:e2})),this.requestErrored_(e2,t2))"HAVE_NOTHING"===this.state&&(this.started=!1);else{this.trigger({type:"manifestrequestcomplete",metadata:r2});let e3=t2.responseText!==this.mainPlaylistLoader_.mainXml_;if(this.mainPlaylistLoader_.mainXml_=t2.responseText,t2.responseHeaders&&t2.responseHeaders.date?this.mainLoaded_=Date.parse(t2.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=Ud(this.mainPlaylistLoader_.srcUrl,t2),!e3)return s2(t2,e3);this.handleMain_(),this.syncClientServerClock_(()=>s2(t2,e3))}})}syncClientServerClock_(r2){let n2=(e2=this.mainPlaylistLoader_.mainXml_,(e3=>{if(!(e3=D(e3,"UTCTiming")[0]))return null;var t2=P(e3);switch(t2.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":t2.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":t2.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":t2.method="DIRECT",t2.value=Date.parse(t2.value);break;default:throw new Error(il_UNSUPPORTED_UTC_TIMING_SCHEME)}return t2})(od(e2)));var e2;return null===n2?(this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),r2()):"DIRECT"===n2.method?(this.mainPlaylistLoader_.clientOffset_=n2.value-Date.now(),r2()):void(this.request=this.vhs_.xhr({uri:Md(this.mainPlaylistLoader_.srcUrl,n2.value),method:n2.method,withCredentials:this.withCredentials,requestType:"dash-clock-sync"},(t2,i2)=>{if(this.request){var s2;if(t2)return s2=i2.requestType,this.error.metadata=Eh({requestType:s2,request:i2,error:t2}),this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),r2();let e2;e2="HEAD"===n2.method?i2.responseHeaders&&i2.responseHeaders.date?Date.parse(i2.responseHeaders.date):this.mainLoaded_:Date.parse(i2.responseText),this.mainPlaylistLoader_.clientOffset_=e2-Date.now(),r2()}}))}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){window.clearTimeout(this.mediaRequest_),this.mediaRequest_=null;var e2=this.mainPlaylistLoader_.main,i2={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};let s2;this.trigger({type:"manifestparsestart",metadata:i2});try{s2=Zh({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:e2})}catch(e3){this.error=e3,this.error.metadata={errorType:E.Error.StreamingDashManifestParserError,error:e3},this.trigger("error")}var r2;if(e2&&(s2=((e2,t2,i2)=>{let a2=!0,o2=L(e2,{duration:t2.duration,minimumUpdatePeriod:t2.minimumUpdatePeriod,timelineStarts:t2.timelineStarts});for(let e3=0;e3<t2.playlists.length;e3++){var s2=t2.playlists[e3],r2=(s2.sidx&&(r2=vl(s2.sidx),i2)&&i2[r2]&&i2[r2].sidx&&hl(s2,i2[r2].sidx,s2.sidx.resolvedUri),Lh(o2,s2,Qh));r2&&(o2=r2,a2=!1)}var n2,l2;return yh(t2,(e3,t3,i3,s3)=>{var r3,n3;e3.playlists&&e3.playlists.length&&(r3=e3.playlists[0].id,n3=Lh(o2,e3.playlists[0],Qh))&&(s3 in(o2=n3).mediaGroups[t3][i3]||(o2.mediaGroups[t3][i3][s3]=e3),o2.mediaGroups[t3][i3][s3].playlists[0]=o2.playlists[r3],a2=!1)}),l2=t2,yh(n2=o2,(e3,t3,i3,s3)=>{l2.mediaGroups[t3][i3]&&s3 in l2.mediaGroups[t3][i3]||delete n2.mediaGroups[t3][i3][s3]}),(a2=t2.minimumUpdatePeriod===e2.minimumUpdatePeriod&&a2)?null:o2})(e2,s2,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=s2||e2,(r2=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0])&&r2!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=r2),(!e2||s2&&s2.minimumUpdatePeriod!==e2.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),this.addEventStreamToMetadataTrack_(s2),s2){var{duration:r2,endList:e2}=s2;let t2=[];s2.playlists.forEach(e3=>{t2.push({id:e3.id,bandwidth:e3.attributes.BANDWIDTH,resolution:e3.attributes.RESOLUTION,codecs:e3.attributes.CODECS})}),r2={duration:r2,isLive:!e2,renditions:t2},i2.parsedManifest=r2,this.trigger({type:"manifestparsecomplete",metadata:i2})}return Boolean(s2)}updateMinimumUpdatePeriodTimeout_(){var e2=this.mainPlaylistLoader_;e2.createMupOnMedia_&&(e2.off("loadedmetadata",e2.createMupOnMedia_),e2.createMupOnMedia_=null),e2.minimumUpdatePeriodTimeout_&&(window.clearTimeout(e2.minimumUpdatePeriodTimeout_),e2.minimumUpdatePeriodTimeout_=null);let t2=e2.main&&e2.main.minimumUpdatePeriod;0===t2&&(e2.media()?t2=1e3*e2.media().targetDuration:(e2.createMupOnMedia_=e2.updateMinimumUpdatePeriodTimeout_,e2.one("loadedmetadata",e2.createMupOnMedia_))),"number"!=typeof t2||t2<=0?t2<0&&this.logger_(`found invalid minimumUpdatePeriod of ${t2}, not setting a timeout`):this.createMUPTimeout_(t2)}createMUPTimeout_(e2){let t2=this.mainPlaylistLoader_;t2.minimumUpdatePeriodTimeout_=window.setTimeout(()=>{t2.minimumUpdatePeriodTimeout_=null,t2.trigger("minimumUpdatePeriod"),t2.createMUPTimeout_(e2)},e2)}refreshXml_(){this.requestMain_((e2,t2)=>{t2&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=((e3,r2)=>{let n2=iu(e3.playlists,r2);return yh(e3,(e4,t3,i2,s2)=>{e4.playlists&&e4.playlists.length&&(e4=e4.playlists,n2=L(n2,iu(e4,r2)))}),n2})(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,e3=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(e2){if(!e2)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();var t2=this.mainPlaylistLoader_.main.playlists;let i2=!this.media_||this.media_!==t2[e2];if(i2?this.media_=t2[e2]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){let e3=()=>{this.media().endList||(this.mediaUpdateTimeout=window.setTimeout(()=>{this.trigger("mediaupdatetimeout"),e3()},Oh(this.media(),Boolean(i2))))};e3()}this.trigger("loadedplaylist")}addEventStreamToMetadataTrack_(e2){e2&&this.mainPlaylistLoader_.main.eventStream&&(e2=this.mainPlaylistLoader_.main.eventStream.map(e3=>({cueTime:e3.start,frames:[{data:e3.messageData}]})),this.addMetadataToTextTrack("EventStream",e2,this.mainPlaylistLoader_.main.duration))}getKeyIdSet(e2){if(e2.contentProtection){var t2,i2=new Set;for(t2 in e2.contentProtection){var s2=e2.contentProtection[t2].attributes["cenc:default_KID"];s2&&i2.add(s2.replace(/-/g,"").toLowerCase())}return i2}}}var R={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};function ru(e2){return e2.on=e2.addEventListener,e2.off=e2.removeEventListener,e2}function au(s2){return function(){let e2=function(t3){try{return URL.createObjectURL(new Blob([t3],{type:"application/javascript"}))}catch(e3){var i3=new BlobBuilder;return i3.append(t3),URL.createObjectURL(i3.getBlob())}}(s2);var t2=ru(new Worker(e2));t2.objURL=e2;let i2=t2.terminate;return t2.on=t2.addEventListener,t2.off=t2.removeEventListener,t2.terminate=function(){return URL.revokeObjectURL(e2),i2.call(this)},t2}}function ou(e2){return`var browserWorkerPolyFill = ${ru.toString()};\nbrowserWorkerPolyFill(self);\n`+e2}function lu(e2){return e2.toString().replace(/^function.+?{/,"").slice(0,-1)}var du=au(ou(lu(function(){function e2(){this.init=function(){var n3={};this.on=function(e3,t3){n3[e3]||(n3[e3]=[]),n3[e3]=n3[e3].concat(t3)},this.off=function(e3,t3){return!!n3[e3]&&(t3=n3[e3].indexOf(t3),n3[e3]=n3[e3].slice(),n3[e3].splice(t3,1),-1<t3)},this.trigger=function(e3){var t3,i3,s3,r3=n3[e3];if(r3)if(2===arguments.length)for(i3=r3.length,t3=0;t3<i3;++t3)r3[t3].call(this,arguments[1]);else{for(s3=[],t3=arguments.length,t3=1;t3<arguments.length;++t3)s3.push(arguments[t3]);for(i3=r3.length,t3=0;t3<i3;++t3)r3[t3].apply(this,s3)}},this.dispose=function(){n3={}}}}var l2,M2,U2,B2,F2,q2,j2,V2,H2,z2,$3,W2,G2,X2,K2,Y2,Q2,J2,Z2,ee2,d2,te2,ie2,se2,re2,ne2,ae2,oe2,le2,de2,he2,ue2,ce2,pe2,me2,ge2,fe2,ye2="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t2=(e2.prototype.pipe=function(t3){return this.on("data",function(e3){t3.push(e3)}),this.on("done",function(e3){t3.flush(e3)}),this.on("partialdone",function(e3){t3.partialFlush(e3)}),this.on("endedtimeline",function(e3){t3.endTimeline(e3)}),this.on("reset",function(e3){t3.reset(e3)}),t3},e2.prototype.push=function(e3){this.trigger("data",e3)},e2.prototype.flush=function(e3){this.trigger("done",e3)},e2.prototype.partialFlush=function(e3){this.trigger("partialdone",e3)},e2.prototype.endTimeline=function(e3){this.trigger("endedtimeline",e3)},e2.prototype.reset=function(e3){this.trigger("reset",e3)},e2),_e2=Math.pow(2,32),i2={getUint64:function(e3){var t3;return(e3=new DataView(e3.buffer,e3.byteOffset,e3.byteLength)).getBigUint64?(t3=e3.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(t3):t3:e3.getUint32(0)*_e2+e3.getUint32(4)},MAX_UINT32:_e2},ve2=i2.MAX_UINT32;if(d2={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(var s2 in d2)d2.hasOwnProperty(s2)&&(d2[s2]=[s2.charCodeAt(0),s2.charCodeAt(1),s2.charCodeAt(2),s2.charCodeAt(3)]);te2=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),se2=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),ie2=new Uint8Array([0,0,0,1]),Ie2=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),Ae2=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),re2={video:Ie2,audio:Ae2},oe2=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),ae2=new Uint8Array([0,0,0,0,0,0,0,0]),le2=new Uint8Array([0,0,0,0,0,0,0,0]),de2=le2,he2=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),ue2=le2,ne2=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}function be2(e3,t3){var i3=xe2();return i3.dataOffset=t3,i3.compositionTimeOffset=e3.pts-e3.dts,i3.duration=e3.duration,i3.size=4*e3.length,i3.size+=e3.byteLength,e3.keyFrame&&(i3.flags.dependsOn=2,i3.flags.isNonSyncSample=0),i3}function r2(e3){for(var t3=[];e3--;)t3.push(0);return t3}function n2(e3){e3=e3||{},n2.prototype.init.call(this),this.parse708captions_="boolean"!=typeof e3.parse708captions||e3.parse708captions,this.captionPackets_=[],this.ccStreams_=[new m2(0,0),new m2(0,1),new m2(1,0),new m2(1,1)],this.parse708captions_&&(this.cc708Stream_=new p2({captionServices:e3.captionServices})),this.reset(),this.ccStreams_.forEach(function(e4){e4.on("data",this.trigger.bind(this,"data")),e4.on("partialdone",this.trigger.bind(this,"partialdone")),e4.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))}function Te2(e3){return 32<=e3&&e3<=127||160<=e3&&e3<=255}function a2(e3){this.windowNum=e3,this.reset()}function Se2(e3,t3,i3){this.serviceNum=e3,this.text="",this.currentWindow=new a2(-1),this.windows=[],this.stream=i3,"string"==typeof t3&&this.createTextDecoder(t3)}function we2(e3){return null===e3?"":(e3=qe2[e3]||e3,String.fromCharCode(e3))}function o2(){for(var e3=[],t3=je2+1;t3--;)e3.push({text:"",indent:0,offset:0});return e3}function Ee2(e3,t3){var i3=1;for(t3<e3&&(i3=-1);Math.abs(t3-e3)>$e2;)e3+=i3*ze2;return e3}function Ce2(e3){var t3,i3;Ce2.prototype.init.call(this),this.type_=e3||"shared",this.push=function(e4){"metadata"===e4.type?this.trigger("data",e4):"shared"!==this.type_&&e4.type!==this.type_||(void 0===i3&&(i3=e4.dts),e4.dts=Ee2(e4.dts,i3),e4.pts=Ee2(e4.pts,i3),t3=e4.dts,this.trigger("data",e4))},this.flush=function(){i3=t3,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){t3=i3=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}}l2=function(e3){for(var t3,i3=[],s3=0,r3=1;r3<arguments.length;r3++)i3.push(arguments[r3]);for(r3=i3.length;r3--;)s3+=i3[r3].byteLength;for(t3=new Uint8Array(s3+8),new DataView(t3.buffer,t3.byteOffset,t3.byteLength).setUint32(0,t3.byteLength),t3.set(e3,4),r3=0,s3=8;r3<i3.length;r3++)t3.set(i3[r3],s3),s3+=i3[r3].byteLength;return t3},M2=function(){return l2(d2.dinf,l2(d2.dref,oe2))},U2=function(e3){return l2(d2.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e3.audioobjecttype<<3|e3.samplingfrequencyindex>>>1,e3.samplingfrequencyindex<<7|e3.channelcount<<3,6,1,2]))},X2=function(e3){return l2(d2.hdlr,re2[e3])},G2=function(e3){var t3=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e3.duration>>>24&255,e3.duration>>>16&255,e3.duration>>>8&255,255&e3.duration,85,196,0,0]);return e3.samplerate&&(t3[12]=e3.samplerate>>>24&255,t3[13]=e3.samplerate>>>16&255,t3[14]=e3.samplerate>>>8&255,t3[15]=255&e3.samplerate),l2(d2.mdhd,t3)},W2=function(e3){return l2(d2.mdia,G2(e3),X2(e3.type),q2(e3))},F2=function(e3){return l2(d2.mfhd,new Uint8Array([0,0,0,0,(4278190080&e3)>>24,(16711680&e3)>>16,(65280&e3)>>8,255&e3]))},q2=function(e3){return l2(d2.minf,"video"===e3.type?l2(d2.vmhd,ne2):l2(d2.smhd,ae2),M2(),Y2(e3))},V2=function(e3){for(var t3=e3.length,i3=[];t3--;)i3[t3]=Z2(e3[t3]);return l2.apply(null,[d2.mvex].concat(i3))},H2=function(e3){return e3=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e3)>>24,(16711680&e3)>>16,(65280&e3)>>8,255&e3,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]),l2(d2.mvhd,e3)},K2=function(e3){for(var t3,i3=e3.samples||[],s3=new Uint8Array(4+i3.length),r3=0;r3<i3.length;r3++)t3=i3[r3].flags,s3[r3+4]=t3.dependsOn<<4|t3.isDependedOn<<2|t3.hasRedundancy;return l2(d2.sdtp,s3)},Y2=function(e3){return l2(d2.stbl,Q2(e3),l2(d2.stts,ue2),l2(d2.stsc,de2),l2(d2.stsz,he2),l2(d2.stco,le2))},Q2=function(e3){return l2(d2.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),("video"===e3.type?ce2:pe2)(e3))},ce2=function(e3){for(var t3,i3,s3=e3.sps||[],r3=e3.pps||[],n3=[],a3=[],o3=0;o3<s3.length;o3++)n3.push((65280&s3[o3].byteLength)>>>8),n3.push(255&s3[o3].byteLength),n3=n3.concat(Array.prototype.slice.call(s3[o3]));for(o3=0;o3<r3.length;o3++)a3.push((65280&r3[o3].byteLength)>>>8),a3.push(255&r3[o3].byteLength),a3=a3.concat(Array.prototype.slice.call(r3[o3]));return t3=[d2.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e3.width)>>8,255&e3.width,(65280&e3.height)>>8,255&e3.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),l2(d2.avcC,new Uint8Array([1,e3.profileIdc,e3.profileCompatibility,e3.levelIdc,255].concat([s3.length],n3,[r3.length],a3))),l2(d2.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],e3.sarRatio&&(i3=e3.sarRatio[0],e3=e3.sarRatio[1],t3.push(l2(d2.pasp,new Uint8Array([(4278190080&i3)>>24,(16711680&i3)>>16,(65280&i3)>>8,255&i3,(4278190080&e3)>>24,(16711680&e3)>>16,(65280&e3)>>8,255&e3])))),l2.apply(null,t3)},pe2=function(e3){return l2(d2.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e3.channelcount)>>8,255&e3.channelcount,(65280&e3.samplesize)>>8,255&e3.samplesize,0,0,0,0,(65280&e3.samplerate)>>8,255&e3.samplerate,0,0]),U2(e3))},$3=function(e3){return e3=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e3.id)>>24,(16711680&e3.id)>>16,(65280&e3.id)>>8,255&e3.id,0,0,0,0,(4278190080&e3.duration)>>24,(16711680&e3.duration)>>16,(65280&e3.duration)>>8,255&e3.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e3.width)>>8,255&e3.width,0,0,(65280&e3.height)>>8,255&e3.height,0,0]),l2(d2.tkhd,e3)},J2=function(e3){var t3,i3=l2(d2.tfhd,new Uint8Array([0,0,0,58,(4278190080&e3.id)>>24,(16711680&e3.id)>>16,(65280&e3.id)>>8,255&e3.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),s3=Math.floor(e3.baseMediaDecodeTime/ve2),r3=Math.floor(e3.baseMediaDecodeTime%ve2);s3=l2(d2.tfdt,new Uint8Array([1,0,0,0,s3>>>24&255,s3>>>16&255,s3>>>8&255,255&s3,r3>>>24&255,r3>>>16&255,r3>>>8&255,255&r3]));return"audio"===e3.type?(t3=ee2(e3,92),l2(d2.traf,i3,s3,t3)):(r3=K2(e3),t3=ee2(e3,r3.length+92),l2(d2.traf,i3,s3,t3,r3))},z2=function(e3){return e3.duration=e3.duration||4294967295,l2(d2.trak,$3(e3),W2(e3))},Z2=function(e3){var t3=new Uint8Array([0,0,0,0,(4278190080&e3.id)>>24,(16711680&e3.id)>>16,(65280&e3.id)>>8,255&e3.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e3.type&&(t3[t3.length-1]=0),l2(d2.trex,t3)},me2=function(e3,t3){var i3=0,s3=0,r3=0,n3=0;return e3.length&&(void 0!==e3[0].duration&&(i3=1),void 0!==e3[0].size&&(s3=2),void 0!==e3[0].flags&&(r3=4),void 0!==e3[0].compositionTimeOffset)&&(n3=8),[0,0,i3|s3|r3|n3,1,(4278190080&e3.length)>>>24,(16711680&e3.length)>>>16,(65280&e3.length)>>>8,255&e3.length,(4278190080&t3)>>>24,(16711680&t3)>>>16,(65280&t3)>>>8,255&t3]},ge2=function(e3,t3){var i3,s3,r3,n3,a3=e3.samples||[];for(t3+=20+16*a3.length,e3=me2(a3,t3),(s3=new Uint8Array(e3.length+16*a3.length)).set(e3),i3=e3.length,n3=0;n3<a3.length;n3++)r3=a3[n3],s3[i3++]=(4278190080&r3.duration)>>>24,s3[i3++]=(16711680&r3.duration)>>>16,s3[i3++]=(65280&r3.duration)>>>8,s3[i3++]=255&r3.duration,s3[i3++]=(4278190080&r3.size)>>>24,s3[i3++]=(16711680&r3.size)>>>16,s3[i3++]=(65280&r3.size)>>>8,s3[i3++]=255&r3.size,s3[i3++]=r3.flags.isLeading<<2|r3.flags.dependsOn,s3[i3++]=r3.flags.isDependedOn<<6|r3.flags.hasRedundancy<<4|r3.flags.paddingValue<<1|r3.flags.isNonSyncSample,s3[i3++]=61440&r3.flags.degradationPriority,s3[i3++]=15&r3.flags.degradationPriority,s3[i3++]=(4278190080&r3.compositionTimeOffset)>>>24,s3[i3++]=(16711680&r3.compositionTimeOffset)>>>16,s3[i3++]=(65280&r3.compositionTimeOffset)>>>8,s3[i3++]=255&r3.compositionTimeOffset;return l2(d2.trun,s3)},fe2=function(e3,t3){var i3,s3,r3,n3,a3=e3.samples||[];for(t3+=20+8*a3.length,e3=me2(a3,t3),(i3=new Uint8Array(e3.length+8*a3.length)).set(e3),s3=e3.length,n3=0;n3<a3.length;n3++)r3=a3[n3],i3[s3++]=(4278190080&r3.duration)>>>24,i3[s3++]=(16711680&r3.duration)>>>16,i3[s3++]=(65280&r3.duration)>>>8,i3[s3++]=255&r3.duration,i3[s3++]=(4278190080&r3.size)>>>24,i3[s3++]=(16711680&r3.size)>>>16,i3[s3++]=(65280&r3.size)>>>8,i3[s3++]=255&r3.size;return l2(d2.trun,i3)},ee2=function(e3,t3){return("audio"===e3.type?fe2:ge2)(e3,t3)};var ke2,Re2,Ie2={ftyp:B2=function(){return l2(d2.ftyp,te2,ie2,te2,se2)},mdat:function(e3){return l2(d2.mdat,e3)},moof:function(e3,t3){for(var i3=[],s3=t3.length;s3--;)i3[s3]=J2(t3[s3]);return l2.apply(null,[d2.moof,F2(e3)].concat(i3))},moov:j2=function(e3){for(var t3=e3.length,i3=[];t3--;)i3[t3]=z2(e3[t3]);return l2.apply(null,[d2.moov,H2(4294967295)].concat(i3).concat(V2(e3)))},initSegment:function(e3){var t3=B2(),i3=(e3=j2(e3),new Uint8Array(t3.byteLength+e3.byteLength));return i3.set(t3),i3.set(e3,t3.byteLength),i3}},xe2=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},Ae2={groupNalsIntoFrames:function(e3){var t3,i3,s3=[],r3=[];for(r3.byteLength=0,r3.nalCount=0,t3=s3.byteLength=r3.duration=0;t3<e3.length;t3++)"access_unit_delimiter_rbsp"===(i3=e3[t3]).nalUnitType?(s3.length&&(s3.duration=i3.dts-s3.dts,r3.byteLength+=s3.byteLength,r3.nalCount+=s3.length,r3.duration+=s3.duration,r3.push(s3)),(s3=[i3]).byteLength=i3.data.byteLength,s3.pts=i3.pts,s3.dts=i3.dts):("slice_layer_without_partitioning_rbsp_idr"===i3.nalUnitType&&(s3.keyFrame=!0),s3.duration=i3.dts-s3.dts,s3.byteLength+=i3.data.byteLength,s3.push(i3));return r3.length&&(!s3.duration||s3.duration<=0)&&(s3.duration=r3[r3.length-1].duration),r3.byteLength+=s3.byteLength,r3.nalCount+=s3.length,r3.duration+=s3.duration,r3.push(s3),r3},groupFramesIntoGops:function(e3){var t3,i3,s3=[],r3=[];for(s3.byteLength=0,s3.nalCount=0,s3.duration=0,s3.pts=e3[0].pts,s3.dts=e3[0].dts,r3.byteLength=0,r3.nalCount=0,r3.duration=0,r3.pts=e3[0].pts,r3.dts=e3[0].dts,t3=0;t3<e3.length;t3++)(i3=e3[t3]).keyFrame?(s3.length&&(r3.push(s3),r3.byteLength+=s3.byteLength,r3.nalCount+=s3.nalCount,r3.duration+=s3.duration),(s3=[i3]).nalCount=i3.length,s3.byteLength=i3.byteLength,s3.pts=i3.pts,s3.dts=i3.dts,s3.duration=i3.duration):(s3.duration+=i3.duration,s3.nalCount+=i3.length,s3.byteLength+=i3.byteLength,s3.push(i3));return r3.length&&s3.duration<=0&&(s3.duration=r3[r3.length-1].duration),r3.byteLength+=s3.byteLength,r3.nalCount+=s3.nalCount,r3.duration+=s3.duration,r3.push(s3),r3},extendFirstKeyFrame:function(e3){var t3;return!e3[0][0].keyFrame&&1<e3.length&&(t3=e3.shift(),e3.byteLength-=t3.byteLength,e3.nalCount-=t3.nalCount,e3[0][0].dts=t3.dts,e3[0][0].pts=t3.pts,e3[0][0].duration+=t3.duration),e3},generateSampleTable:function(e3,t3){for(var i3,s3,r3,n3=t3||0,a3=[],o3=0;o3<e3.length;o3++)for(s3=e3[o3],i3=0;i3<s3.length;i3++)n3+=(r3=be2(r3=s3[i3],n3)).size,a3.push(r3);return a3},concatenateNalData:function(e3){for(var t3,i3,s3,r3,n3,a3=0,o3=e3.byteLength,l3=new Uint8Array(o3+4*e3.nalCount),d3=new DataView(l3.buffer),h3=0;h3<e3.length;h3++)for(s3=e3[h3],t3=0;t3<s3.length;t3++)for(r3=s3[t3],i3=0;i3<r3.length;i3++)n3=r3[i3],d3.setUint32(a3,n3.data.byteLength),l3.set(n3.data,a3+=4),a3+=n3.data.byteLength;return l3},generateSampleTableForFrame:function(e3,t3){var i3=[];e3=be2(e3,t3||0);return i3.push(e3),i3},concatenateNalDataForFrame:function(e3){for(var t3,i3=0,s3=e3.byteLength,r3=new Uint8Array(s3+4*e3.length),n3=new DataView(r3.buffer),a3=0;a3<e3.length;a3++)n3.setUint32(i3,(t3=e3[a3]).data.byteLength),r3.set(t3.data,i3+=4),i3+=t3.data.byteLength;return r3}},h2=[33,16,5,32,164,27],De2=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],Oe2=function(e3){return e3/9e4},u2={ONE_SECOND_IN_TS:9e4,secondsToVideoTs:Pe2=function(e3){return 9e4*e3},secondsToAudioTs:Le2=function(e3,t3){return e3*t3},videoTsToSeconds:Oe2,audioTsToSeconds:Re2=function(e3,t3){return e3/t3},audioTsToVideoTs:function(e3,t3){return e3/t3*9e4},videoTsToAudioTs:function(e3,t3){return e3/9e4*t3},metadataTsToSeconds:function(e3,t3,i3){return Oe2(i3?e3:e3-t3)}},Me2=u2,Pe2={prefixWithSilence:function(e3,t3,i3,s3){var r3,n3,a3,o3,l3,d3=0,h3=0;if(t3.length&&(n3=Me2.audioTsToVideoTs(e3.baseMediaDecodeTime,e3.samplerate),r3=Math.ceil(Me2.ONE_SECOND_IN_TS/(e3.samplerate/1024)),i3&&s3&&(n3-=Math.max(i3,s3),h3=(d3=Math.floor(n3/r3))*r3),!(d3<1||h3>Me2.ONE_SECOND_IN_TS/2))){for(a3=(a3=function(){var e3,i3;return ke2||(e3={96e3:[h2,[227,64],r2(154),[56]],88200:[h2,[231],r2(170),[56]],64e3:[h2,[248,192],r2(240),[56]],48e3:[h2,[255,192],r2(268),[55,148,128],r2(54),[112]],44100:[h2,[255,192],r2(268),[55,163,128],r2(84),[112]],32e3:[h2,[255,192],r2(268),[55,234],r2(226),[112]],24e3:[h2,[255,192],r2(268),[55,255,128],r2(268),[111,112],r2(126),[224]],16e3:[h2,[255,192],r2(268),[55,255,128],r2(268),[111,255],r2(269),[223,108],r2(195),[1,192]],12e3:[De2,r2(268),[3,127,248],r2(268),[6,255,240],r2(268),[13,255,224],r2(268),[27,253,128],r2(259),[56]],11025:[De2,r2(268),[3,127,248],r2(268),[6,255,240],r2(268),[13,255,224],r2(268),[27,255,192],r2(268),[55,175,128],r2(108),[112]],8e3:[De2,r2(268),[3,121,16],r2(47),[7]]},i3=e3,ke2=Object.keys(i3).reduce(function(e4,t3){return e4[t3]=new Uint8Array(i3[t3].reduce(function(e5,t4){return e5.concat(t4)},[])),e4},{})),ke2}()[e3.samplerate])||t3[0].data,o3=0;o3<d3;o3++)l3=t3[0],t3.splice(0,0,{data:a3,dts:l3.dts-r3,pts:l3.pts-r3});return e3.baseMediaDecodeTime-=Math.floor(Me2.videoTsToAudioTs(h3,e3.samplerate)),h3}},trimAdtsFramesByEarliestDts:function(e3,t3,i3){return t3.minSegmentDts>=i3?e3:(t3.minSegmentDts=1/0,e3.filter(function(e4){return e4.dts>=i3&&(t3.minSegmentDts=Math.min(t3.minSegmentDts,e4.dts),t3.minSegmentPts=t3.minSegmentDts,!0)}))},generateSampleTable:function(e3){for(var t3=[],i3=0;i3<e3.length;i3++)t3.push({size:e3[i3].data.byteLength,duration:1024});return t3},concatenateFrameData:function(e3){for(var t3,i3=0,s3=new Uint8Array(function(e4){for(var t4=0,i4=0;i4<e4.length;i4++)t4+=e4[i4].data.byteLength;return t4}(e3)),r3=0;r3<e3.length;r3++)s3.set((t3=e3[r3]).data,i3),i3+=t3.data.byteLength;return s3}},Ue2=u2.ONE_SECOND_IN_TS,Le2={clearDtsInfo:function(e3){delete e3.minSegmentDts,delete e3.maxSegmentDts,delete e3.minSegmentPts,delete e3.maxSegmentPts},calculateTrackBaseMediaDecodeTime:function(e3,t3){var i3=e3.minSegmentDts;return t3||(i3-=e3.timelineStartInfo.dts),t3=e3.timelineStartInfo.baseMediaDecodeTime,t3+=i3,t3=Math.max(0,t3),"audio"===e3.type&&(t3*=e3.samplerate/Ue2,t3=Math.floor(t3)),t3},collectDtsInfo:function(e3,t3){"number"==typeof t3.pts&&(void 0===e3.timelineStartInfo.pts&&(e3.timelineStartInfo.pts=t3.pts),e3.minSegmentPts=void 0===e3.minSegmentPts?t3.pts:Math.min(e3.minSegmentPts,t3.pts),e3.maxSegmentPts=void 0===e3.maxSegmentPts?t3.pts:Math.max(e3.maxSegmentPts,t3.pts)),"number"==typeof t3.dts&&(void 0===e3.timelineStartInfo.dts&&(e3.timelineStartInfo.dts=t3.dts),e3.minSegmentDts=void 0===e3.minSegmentDts?t3.dts:Math.min(e3.minSegmentDts,t3.dts),e3.maxSegmentDts=void 0===e3.maxSegmentDts?t3.dts:Math.max(e3.maxSegmentDts,t3.dts))}},c2=t2,Be2=Re2={parseSei:function(e3){for(var t3=0,i3={payloadType:-1,payloadSize:0},s3=0,r3=0;t3<e3.byteLength&&128!==e3[t3];){for(;255===e3[t3];)s3+=255,t3++;for(s3+=e3[t3++];255===e3[t3];)r3+=255,t3++;if(r3+=e3[t3++],!i3.payload&&4===s3){if("GA94"===String.fromCharCode(e3[t3+3],e3[t3+4],e3[t3+5],e3[t3+6])){i3.payloadType=s3,i3.payloadSize=r3,i3.payload=e3.subarray(t3,t3+r3);break}i3.payload=void 0}t3+=r3,r3=s3=0}return i3},parseUserData:function(e3){return 181!==e3.payload[0]||49!=(e3.payload[1]<<8|e3.payload[2])||"GA94"!==String.fromCharCode(e3.payload[3],e3.payload[4],e3.payload[5],e3.payload[6])||3!==e3.payload[7]?null:e3.payload.subarray(8,e3.payload.length-1)},parseCaptionPackets:function(e3,t3){var i3,s3,r3,n3,a3=[];if(64&t3[0])for(s3=31&t3[0],i3=0;i3<s3;i3++)n3={type:3&t3[2+(r3=3*i3)],pts:e3},4&t3[2+r3]&&(n3.ccData=t3[3+r3]<<8|t3[4+r3],a3.push(n3));return a3},discardEmulationPreventionBytes:function(e3){for(var t3=e3.byteLength,i3=[],s3=1;s3<t3-2;)0===e3[s3]&&0===e3[s3+1]&&3===e3[s3+2]?(i3.push(s3+2),s3+=2):s3++;if(0===i3.length)return e3;var r3=t3-i3.length,n3=new Uint8Array(r3),a3=0;for(s3=0;s3<r3;a3++,s3++)a3===i3[0]&&(a3++,i3.shift()),n3[s3]=e3[a3];return n3},USER_DATA_REGISTERED_ITU_T_T35:4},Fe2=((n2.prototype=new c2).push=function(e3){var t3;"sei_rbsp"===e3.nalUnitType&&(t3=Be2.parseSei(e3.escapedRBSP)).payload&&t3.payloadType===Be2.USER_DATA_REGISTERED_ITU_T_T35&&(t3=Be2.parseUserData(t3))&&(e3.dts<this.latestDts_?this.ignoreNextEqualDts_=!0:e3.dts===this.latestDts_&&this.ignoreNextEqualDts_?(this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1)):(t3=Be2.parseCaptionPackets(e3.pts,t3),this.captionPackets_=this.captionPackets_.concat(t3),this.latestDts_!==e3.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e3.dts))},n2.prototype.flushCCStreams=function(t3){this.ccStreams_.forEach(function(e3){return"flush"===t3?e3.flush():e3.partialFlush()},this)},n2.prototype.flushStream=function(e3){this.captionPackets_.length&&(this.captionPackets_.forEach(function(e4,t3){e4.presortIndex=t3}),this.captionPackets_.sort(function(e4,t3){return e4.pts===t3.pts?e4.presortIndex-t3.presortIndex:e4.pts-t3.pts}),this.captionPackets_.forEach(function(e4){e4.type<2?this.dispatchCea608Packet(e4):this.dispatchCea708Packet(e4)},this),this.captionPackets_.length=0),this.flushCCStreams(e3)},n2.prototype.flush=function(){return this.flushStream("flush")},n2.prototype.partialFlush=function(){return this.flushStream("partialFlush")},n2.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(e3){e3.reset()})},n2.prototype.dispatchCea608Packet=function(e3){this.setsTextOrXDSActive(e3)?this.activeCea608Channel_[e3.type]=null:this.setsChannel1Active(e3)?this.activeCea608Channel_[e3.type]=0:this.setsChannel2Active(e3)&&(this.activeCea608Channel_[e3.type]=1),null!==this.activeCea608Channel_[e3.type]&&this.ccStreams_[(e3.type<<1)+this.activeCea608Channel_[e3.type]].push(e3)},n2.prototype.setsChannel1Active=function(e3){return 4096==(30720&e3.ccData)},n2.prototype.setsChannel2Active=function(e3){return 6144==(30720&e3.ccData)},n2.prototype.setsTextOrXDSActive=function(e3){return 256==(28928&e3.ccData)||4138==(30974&e3.ccData)||6186==(30974&e3.ccData)},n2.prototype.dispatchCea708Packet=function(e3){this.parse708captions_&&this.cc708Stream_.push(e3)},{127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600}),p2=(a2.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},a2.prototype.getText=function(){return this.rows.join("\n")},a2.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},a2.prototype.newLine=function(e3){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(e3),0<this.rows.length&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},a2.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},a2.prototype.addText=function(e3){this.rows[this.rowIdx]+=e3},a2.prototype.backspace=function(){var e3;this.isEmpty()||(e3=this.rows[this.rowIdx],this.rows[this.rowIdx]=e3.substr(0,e3.length-1))},Se2.prototype.init=function(e3,t3){this.startPts=e3;for(var i3=0;i3<8;i3++)this.windows[i3]=new a2(i3),"function"==typeof t3&&(this.windows[i3].beforeRowOverflow=t3)},Se2.prototype.setCurrentWindow=function(e3){this.currentWindow=this.windows[e3]},Se2.prototype.createTextDecoder=function(t3){if("undefined"==typeof TextDecoder)this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(t3)}catch(e3){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+t3+" encoding. "+e3})}},function(e3){e3=e3||{},p2.prototype.init.call(this);var t3,i3=this,s3=e3.captionServices||{},r3={};Object.keys(s3).forEach(e4=>{t3=s3[e4],/^SERVICE/.test(e4)&&(r3[e4]=t3.encoding)}),this.serviceEncodings=r3,this.current708Packet=null,this.services={},this.push=function(e4){(3===e4.type||null===i3.current708Packet)&&i3.new708Packet(),i3.add708Bytes(e4)}}),qe2=(p2.prototype=new c2,p2.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},p2.prototype.add708Bytes=function(e3){var i3=(t3=e3.ccData)>>>8,t3=255&t3;this.current708Packet.ptsVals.push(e3.pts),this.current708Packet.data.push(i3),this.current708Packet.data.push(t3)},p2.prototype.push708Packet=function(){var e3,t3=this.current708Packet,i3=t3.data,s3=null,r3=0,n3=i3[r3++];for(t3.seq=n3>>6,t3.sizeCode=63&n3;r3<i3.length;r3++)e3=31&(n3=i3[r3++]),7==(s3=n3>>5)&&0<e3&&(s3=i3[r3++]),this.pushServiceBlock(s3,r3,e3),0<e3&&(r3+=e3-1)},p2.prototype.pushServiceBlock=function(e3,t3,i3){for(var s3,r3=t3,n3=this.current708Packet.data,a3=(a3=this.services[e3])||this.initService(e3,r3);r3<t3+i3&&r3<n3.length;r3++)Te2(s3=n3[r3])?r3=this.handleText(r3,a3):24===s3?r3=this.multiByteCharacter(r3,a3):16===s3?r3=this.extendedCommands(r3,a3):128<=s3&&s3<=135?r3=this.setCurrentWindow(r3,a3):152<=s3&&s3<=159?r3=this.defineWindow(r3,a3):136===s3?r3=this.clearWindows(r3,a3):140===s3?r3=this.deleteWindows(r3,a3):137===s3?r3=this.displayWindows(r3,a3):138===s3?r3=this.hideWindows(r3,a3):139===s3?r3=this.toggleWindows(r3,a3):151===s3?r3=this.setWindowAttributes(r3,a3):144===s3?r3=this.setPenAttributes(r3,a3):145===s3?r3=this.setPenColor(r3,a3):146===s3?r3=this.setPenLocation(r3,a3):143===s3?a3=this.reset(r3,a3):8===s3?a3.currentWindow.backspace():12===s3?a3.currentWindow.clearText():13===s3?a3.currentWindow.pendingNewLine=!0:14===s3?a3.currentWindow.clearText():141===s3&&r3++},p2.prototype.extendedCommands=function(e3,t3){return Te2(this.current708Packet.data[++e3])?this.handleText(e3,t3,{isExtended:!0}):e3},p2.prototype.getPts=function(e3){return this.current708Packet.ptsVals[Math.floor(e3/2)]},p2.prototype.initService=function(t3,e3){var i3,s3="SERVICE"+t3,r3=this;return s3 in this.serviceEncodings&&(i3=this.serviceEncodings[s3]),this.services[t3]=new Se2(t3,i3,r3),this.services[t3].init(this.getPts(e3),function(e4){r3.flushDisplayed(e4,r3.services[t3])}),this.services[t3]},p2.prototype.handleText=function(e3,t3,i3){var s3,r3=i3&&i3.isExtended,n3=(i3=i3&&i3.isMultiByte,this.current708Packet.data),a3=r3?4096:0,o3=n3[e3],l3=t3.currentWindow;return i3?(s3=[o3,n3[e3+1]],e3++):s3=[o3],i3=t3.textDecoder_&&!r3?t3.textDecoder_.decode(new Uint8Array(s3)):i3?(n3=s3.map(e4=>("0"+(255&e4).toString(16)).slice(-2)).join(""),String.fromCharCode(parseInt(n3,16))):(t3=Fe2[r3=a3|o3]||r3,4096&r3&&r3===t3?"":String.fromCharCode(t3)),l3.pendingNewLine&&!l3.isEmpty()&&l3.newLine(this.getPts(e3)),l3.pendingNewLine=!1,l3.addText(i3),e3},p2.prototype.multiByteCharacter=function(e3,t3){var i3=this.current708Packet.data;return Te2(i3[e3+1])&&Te2(i3[e3+2])?this.handleText(++e3,t3,{isMultiByte:!0}):e3},p2.prototype.setCurrentWindow=function(e3,t3){var i3=this.current708Packet.data[e3];return t3.setCurrentWindow(7&i3),e3},p2.prototype.defineWindow=function(e3,t3){var i3=this.current708Packet.data,s3=i3[e3];t3.setCurrentWindow(7&s3),t3=t3.currentWindow,s3=i3[++e3];return t3.visible=(32&s3)>>5,t3.rowLock=(16&s3)>>4,t3.columnLock=(8&s3)>>3,t3.priority=7&s3,s3=i3[++e3],t3.relativePositioning=(128&s3)>>7,t3.anchorVertical=127&s3,s3=i3[++e3],t3.anchorHorizontal=s3,s3=i3[++e3],t3.anchorPoint=(240&s3)>>4,t3.rowCount=15&s3,s3=i3[++e3],t3.columnCount=63&s3,s3=i3[++e3],t3.windowStyle=(56&s3)>>3,t3.penStyle=7&s3,t3.virtualRowCount=t3.rowCount+1,e3},p2.prototype.setWindowAttributes=function(e3,t3){var i3=this.current708Packet.data,s3=(t3=(i3[e3],t3.currentWindow.winAttr),i3[++e3]);return t3.fillOpacity=(192&s3)>>6,t3.fillRed=(48&s3)>>4,t3.fillGreen=(12&s3)>>2,t3.fillBlue=3&s3,s3=i3[++e3],t3.borderType=(192&s3)>>6,t3.borderRed=(48&s3)>>4,t3.borderGreen=(12&s3)>>2,t3.borderBlue=3&s3,s3=i3[++e3],t3.borderType+=(128&s3)>>5,t3.wordWrap=(64&s3)>>6,t3.printDirection=(48&s3)>>4,t3.scrollDirection=(12&s3)>>2,t3.justify=3&s3,s3=i3[++e3],t3.effectSpeed=(240&s3)>>4,t3.effectDirection=(12&s3)>>2,t3.displayEffect=3&s3,e3},p2.prototype.flushDisplayed=function(e3,t3){for(var i3=[],s3=0;s3<8;s3++)t3.windows[s3].visible&&!t3.windows[s3].isEmpty()&&i3.push(t3.windows[s3].getText());t3.endPts=e3,t3.text=i3.join("\n\n"),this.pushCaption(t3),t3.startPts=e3},p2.prototype.pushCaption=function(e3){""!==e3.text&&(this.trigger("data",{startPts:e3.startPts,endPts:e3.endPts,text:e3.text,stream:"cc708_"+e3.serviceNum}),e3.text="",e3.startPts=e3.endPts)},p2.prototype.displayWindows=function(e3,t3){var i3=this.current708Packet.data[++e3],s3=this.getPts(e3);this.flushDisplayed(s3,t3);for(var r3=0;r3<8;r3++)i3&1<<r3&&(t3.windows[r3].visible=1);return e3},p2.prototype.hideWindows=function(e3,t3){var i3=this.current708Packet.data[++e3],s3=this.getPts(e3);this.flushDisplayed(s3,t3);for(var r3=0;r3<8;r3++)i3&1<<r3&&(t3.windows[r3].visible=0);return e3},p2.prototype.toggleWindows=function(e3,t3){var i3=this.current708Packet.data[++e3],s3=this.getPts(e3);this.flushDisplayed(s3,t3);for(var r3=0;r3<8;r3++)i3&1<<r3&&(t3.windows[r3].visible^=1);return e3},p2.prototype.clearWindows=function(e3,t3){var i3=this.current708Packet.data[++e3],s3=this.getPts(e3);this.flushDisplayed(s3,t3);for(var r3=0;r3<8;r3++)i3&1<<r3&&t3.windows[r3].clearText();return e3},p2.prototype.deleteWindows=function(e3,t3){var i3=this.current708Packet.data[++e3],s3=this.getPts(e3);this.flushDisplayed(s3,t3);for(var r3=0;r3<8;r3++)i3&1<<r3&&t3.windows[r3].reset();return e3},p2.prototype.setPenAttributes=function(e3,t3){var i3=this.current708Packet.data,s3=(t3=(i3[e3],t3.currentWindow.penAttr),i3[++e3]);return t3.textTag=(240&s3)>>4,t3.offset=(12&s3)>>2,t3.penSize=3&s3,s3=i3[++e3],t3.italics=(128&s3)>>7,t3.underline=(64&s3)>>6,t3.edgeType=(56&s3)>>3,t3.fontStyle=7&s3,e3},p2.prototype.setPenColor=function(e3,t3){var i3=this.current708Packet.data,s3=(t3=(i3[e3],t3.currentWindow.penColor),i3[++e3]);return t3.fgOpacity=(192&s3)>>6,t3.fgRed=(48&s3)>>4,t3.fgGreen=(12&s3)>>2,t3.fgBlue=3&s3,s3=i3[++e3],t3.bgOpacity=(192&s3)>>6,t3.bgRed=(48&s3)>>4,t3.bgGreen=(12&s3)>>2,t3.bgBlue=3&s3,s3=i3[++e3],t3.edgeRed=(48&s3)>>4,t3.edgeGreen=(12&s3)>>2,t3.edgeBlue=3&s3,e3},p2.prototype.setPenLocation=function(e3,t3){var i3=this.current708Packet.data,s3=(i3[e3],t3.currentWindow.penLoc);return t3.currentWindow.pendingNewLine=!0,t3=i3[++e3],s3.row=15&t3,t3=i3[++e3],s3.column=63&t3,e3},p2.prototype.reset=function(e3,t3){var i3=this.getPts(e3);return this.flushDisplayed(i3,t3),this.initService(t3.serviceNum,e3)},{42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496}),je2=14,Ve2=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],m2=function(e3,t3){m2.prototype.init.call(this),this.field_=e3||0,this.dataChannel_=t3||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e4){var t4,i3,s3,r3,n3=32639&e4.ccData;n3===this.lastControlCode_?this.lastControlCode_=null:(4096==(61440&n3)?this.lastControlCode_=n3:n3!==this.PADDING_&&(this.lastControlCode_=null),t4=n3>>>8,i3=255&n3,n3!==this.PADDING_&&(n3===this.RESUME_CAPTION_LOADING_?this.mode_="popOn":n3===this.END_OF_CAPTION_?(this.mode_="popOn",this.clearFormatting(e4.pts),this.flushDisplayed(e4.pts),r3=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=r3,this.startPts_=e4.pts):n3===this.ROLL_UP_2_ROWS_?(this.rollUpRows_=2,this.setRollUp(e4.pts)):n3===this.ROLL_UP_3_ROWS_?(this.rollUpRows_=3,this.setRollUp(e4.pts)):n3===this.ROLL_UP_4_ROWS_?(this.rollUpRows_=4,this.setRollUp(e4.pts)):n3===this.CARRIAGE_RETURN_?(this.clearFormatting(e4.pts),this.flushDisplayed(e4.pts),this.shiftRowsUp_(),this.startPts_=e4.pts):n3===this.BACKSPACE_?"popOn"===this.mode_?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1):n3===this.ERASE_DISPLAYED_MEMORY_?(this.flushDisplayed(e4.pts),this.displayed_=o2()):n3===this.ERASE_NON_DISPLAYED_MEMORY_?this.nonDisplayed_=o2():n3===this.RESUME_DIRECT_CAPTIONING_?("paintOn"!==this.mode_&&(this.flushDisplayed(e4.pts),this.displayed_=o2()),this.mode_="paintOn",this.startPts_=e4.pts):this.isSpecialCharacter(t4,i3)?(s3=we2((t4=(3&t4)<<8)|i3),this[this.mode_](e4.pts,s3),this.column_++):this.isExtCharacter(t4,i3)?("popOn"===this.mode_?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1),s3=we2((t4=(3&t4)<<8)|i3),this[this.mode_](e4.pts,s3),this.column_++):this.isMidRowCode(t4,i3)?(this.clearFormatting(e4.pts),this[this.mode_](e4.pts," "),this.column_++,!(14&~i3)&&this.addFormatting(e4.pts,["i"]),!(1&~i3)&&this.addFormatting(e4.pts,["u"])):this.isOffsetControlCode(t4,i3)?(this.nonDisplayed_[this.row_].offset=r3=3&i3,this.column_+=r3):this.isPAC(t4,i3)?(r3=Ve2.indexOf(7968&n3),"rollUp"===this.mode_&&(r3-this.rollUpRows_+1<0&&(r3=this.rollUpRows_-1),this.setRollUp(e4.pts,r3)),r3!==this.row_&&0<=r3&&r3<=14&&(this.clearFormatting(e4.pts),this.row_=r3),1&i3&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e4.pts,["u"]),!(16&~n3)&&(this.column_=4*(r3=(14&n3)>>1),this.nonDisplayed_[this.row_].indent+=r3),this.isColorPAC(i3)&&!(14&~i3)&&this.addFormatting(e4.pts,["i"])):this.isNormalChar(t4)&&(0===i3&&(i3=null),s3=we2(t4),s3+=we2(i3),this[this.mode_](e4.pts,s3),this.column_+=s3.length)))}},He2=(c2=(m2.prototype=new c2,m2.prototype.flushDisplayed=function(e3){let i3=e4=>{this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+e4+"."})},s3=[];this.displayed_.forEach((e4,t3)=>{if(e4&&e4.text&&e4.text.length){try{e4.text=e4.text.trim()}catch(e5){i3(t3)}e4.text.length&&s3.push({text:e4.text,line:t3+1,position:10+Math.min(70,10*e4.indent)+2.5*e4.offset})}else null==e4&&i3(t3)}),s3.length&&this.trigger("data",{startPts:this.startPts_,endPts:e3,content:s3,stream:this.name_})},m2.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=o2(),this.nonDisplayed_=o2(),this.lastControlCode_=null,this.column_=0,this.row_=je2,this.rollUpRows_=2,this.formatting_=[]},m2.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},m2.prototype.isSpecialCharacter=function(e3,t3){return e3===this.EXT_&&48<=t3&&t3<=63},m2.prototype.isExtCharacter=function(e3,t3){return(e3===this.EXT_+1||e3===this.EXT_+2)&&32<=t3&&t3<=63},m2.prototype.isMidRowCode=function(e3,t3){return e3===this.EXT_&&32<=t3&&t3<=47},m2.prototype.isOffsetControlCode=function(e3,t3){return e3===this.OFFSET_&&33<=t3&&t3<=35},m2.prototype.isPAC=function(e3,t3){return e3>=this.BASE_&&e3<this.BASE_+8&&64<=t3&&t3<=127},m2.prototype.isColorPAC=function(e3){return 64<=e3&&e3<=79||96<=e3&&e3<=127},m2.prototype.isNormalChar=function(e3){return 32<=e3&&e3<=127},m2.prototype.setRollUp=function(e3,t3){if("rollUp"!==this.mode_&&(this.row_=je2,this.mode_="rollUp",this.flushDisplayed(e3),this.nonDisplayed_=o2(),this.displayed_=o2()),void 0!==t3&&t3!==this.row_)for(var i3=0;i3<this.rollUpRows_;i3++)this.displayed_[t3-i3]=this.displayed_[this.row_-i3],this.displayed_[this.row_-i3]={text:"",indent:0,offset:0};void 0===t3&&(t3=this.row_),this.topRow_=t3-this.rollUpRows_+1},m2.prototype.addFormatting=function(e3,t3){this.formatting_=this.formatting_.concat(t3),t3=t3.reduce(function(e4,t4){return e4+"<"+t4+">"},""),this[this.mode_](e3,t3)},m2.prototype.clearFormatting=function(e3){var t3;this.formatting_.length&&(t3=this.formatting_.reverse().reduce(function(e4,t4){return e4+"</"+t4+">"},""),this.formatting_=[],this[this.mode_](e3,t3))},m2.prototype.popOn=function(e3,t3){var i3=this.nonDisplayed_[this.row_].text;this.nonDisplayed_[this.row_].text=i3+=t3},m2.prototype.rollUp=function(e3,t3){var i3=this.displayed_[this.row_].text;this.displayed_[this.row_].text=i3+=t3},m2.prototype.shiftRowsUp_=function(){for(var e3=0;e3<this.topRow_;e3++)this.displayed_[e3]={text:"",indent:0,offset:0};for(e3=this.row_+1;e3<je2+1;e3++)this.displayed_[e3]={text:"",indent:0,offset:0};for(e3=this.topRow_;e3<this.row_;e3++)this.displayed_[e3]=this.displayed_[e3+1];this.displayed_[this.row_]={text:"",indent:0,offset:0}},m2.prototype.paintOn=function(e3,t3){var i3=this.displayed_[this.row_].text;this.displayed_[this.row_].text=i3+=t3},{CaptionStream:n2,Cea608Stream:m2,Cea708Stream:p2}),{H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21}),g2=t2,ze2=8589934592,$e2=4294967296;function We2(e3,t3,i3){for(var s3="",r3=t3;r3<i3;r3++)s3+="%"+("00"+e3[r3].toString(16)).slice(-2);return s3}function f2(e3,t3,i3){return decodeURIComponent(We2(e3,t3,i3))}function y2(e3,t3,i3){return unescape(We2(e3,t3,i3))}function _2(e3){return e3[0]<<21|e3[1]<<14|e3[2]<<7|e3[3]}Ce2.prototype=new g2;g2=Ce2;var Ge2,Xe2,Ke2,Ye2=Ee2,Qe2=(e3,t3,i3)=>{if(e3)for(var s3=i3;s3<e3.length;s3++)if(e3[s3]===t3)return s3;return-1},Ze2={APIC:function(e3){var t3,i3=1;3!==e3.data[0]||(t3=Qe2(e3.data,0,1))<0||(e3.mimeType=y2(e3.data,1,t3),e3.pictureType=e3.data[i3=t3+1],(t3=Qe2(e3.data,0,++i3))<0)||(e3.description=f2(e3.data,i3,t3),i3=t3+1,"--\x3e"===e3.mimeType?e3.url=y2(e3.data,i3,e3.data.length):e3.pictureData=e3.data.subarray(i3,e3.data.length))},"T*":function(e3){3===e3.data[0]&&(e3.value=f2(e3.data,1,e3.data.length).replace(/\0*$/,""),e3.values=e3.value.split("\0"))},TXXX:function(e3){var t3;3===e3.data[0]&&-1!==(t3=Qe2(e3.data,0,1))&&(e3.description=f2(e3.data,1,t3),e3.value=f2(e3.data,t3+1,e3.data.length).replace(/\0*$/,""),e3.data=e3.value)},"W*":function(e3){e3.url=y2(e3.data,0,e3.data.length).replace(/\0.*$/,"")},WXXX:function(e3){var t3;3===e3.data[0]&&-1!==(t3=Qe2(e3.data,0,1))&&(e3.description=f2(e3.data,1,t3),e3.url=y2(e3.data,t3+1,e3.data.length).replace(/\0.*$/,""))},PRIV:function(e3){for(var t3=0;t3<e3.data.length;t3++)if(0===e3.data[t3]){e3.owner=y2(e3.data,0,t3);break}e3.privateData=e3.data.subarray(t3+1),e3.data=e3.privateData}},et2={parseId3Frames:function(e3){var t3,i3=10,s3=0,r3=[];if(!(e3.length<10||e3[0]!=="I".charCodeAt(0)||e3[1]!=="D".charCodeAt(0)||e3[2]!=="3".charCodeAt(0))){s3=_2(e3.subarray(6,10)),s3+=10,64&e3[5]&&(i3=(i3+=4)+_2(e3.subarray(10,14)),s3-=_2(e3.subarray(16,20)));do{if((t3=_2(e3.subarray(i3+4,i3+8)))<1)break;var n3={id:String.fromCharCode(e3[i3],e3[i3+1],e3[i3+2],e3[i3+3]),data:e3.subarray(i3+10,i3+t3+10)}}while(n3.key=n3.id,Ze2[n3.id]?Ze2[n3.id](n3):"T"===n3.id[0]?Ze2["T*"](n3):"W"===n3.id[0]&&Ze2["W*"](n3),r3.push(n3),(i3=i3+10+t3)<s3);return r3}},parseSyncSafeInteger:_2,frameParsers:Ze2},v2=t2,tt2=He2,b2=et2,it2=function(e3){var t3,i3={descriptor:e3&&e3.descriptor},l3=0,d3=[],h3=0;if(it2.prototype.init.call(this),this.dispatchType=tt2.METADATA_STREAM_TYPE.toString(16),i3.descriptor)for(t3=0;t3<i3.descriptor.length;t3++)this.dispatchType+=("00"+i3.descriptor[t3].toString(16)).slice(-2);this.push=function(e4){var t4,i4,s3,r3,n3,a3,o3;if("timed-metadata"===e4.type)if(e4.dataAlignmentIndicator&&(h3=0,d3.length=0),0===d3.length&&(e4.data.length<10||e4.data[0]!=="I".charCodeAt(0)||e4.data[1]!=="D".charCodeAt(0)||e4.data[2]!=="3".charCodeAt(0)))this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});else if(d3.push(e4),h3+=e4.data.byteLength,1===d3.length&&(l3=b2.parseSyncSafeInteger(e4.data.subarray(6,10)),l3+=10),!(h3<l3)){for(t4={data:new Uint8Array(l3),frames:[],pts:d3[0].pts,dts:d3[0].dts},r3=0;r3<l3;)t4.data.set(d3[0].data.subarray(0,l3-r3),r3),r3+=d3[0].data.byteLength,h3-=d3[0].data.byteLength,d3.shift();i4=10,64&t4.data[5]&&(i4=(i4+=4)+b2.parseSyncSafeInteger(t4.data.subarray(10,14)),l3-=b2.parseSyncSafeInteger(t4.data.subarray(16,20)));do{if((s3=b2.parseSyncSafeInteger(t4.data.subarray(i4+4,i4+8)))<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}}while((o3={id:String.fromCharCode(t4.data[i4],t4.data[i4+1],t4.data[i4+2],t4.data[i4+3]),data:t4.data.subarray(i4+10,i4+s3+10)}).key=o3.id,b2.frameParsers[o3.id]?b2.frameParsers[o3.id](o3):"T"===o3.id[0]?b2.frameParsers["T*"](o3):"W"===o3.id[0]&&b2.frameParsers["W*"](o3),"com.apple.streaming.transportStreamTimestamp"===o3.owner&&(a3=(1&(n3=o3.data)[3])<<30|n3[4]<<22|n3[5]<<14|n3[6]<<6|n3[7]>>>2,o3.timeStamp=a3=(a3*=4)+(3&n3[7]),void 0===t4.pts&&void 0===t4.dts&&(t4.pts=o3.timeStamp,t4.dts=o3.timeStamp),this.trigger("timestamp",o3)),t4.frames.push(o3),(i4=i4+10+s3)<l3);this.trigger("data",t4)}}},st2=(v2=(it2.prototype=new v2,it2),t2),T2=c2,S2=He2,rt2=function(){var r3=new Uint8Array(188),n3=0;rt2.prototype.init.call(this),this.push=function(e3){var t3,i3=0,s3=188;for(n3?((t3=new Uint8Array(e3.byteLength+n3)).set(r3.subarray(0,n3)),t3.set(e3,n3),n3=0):t3=e3;s3<t3.byteLength;)71===t3[i3]&&71===t3[s3]?(this.trigger("data",t3.subarray(i3,s3)),i3+=188,s3+=188):(i3++,s3++);i3<t3.byteLength&&(r3.set(t3.subarray(i3),0),n3=t3.byteLength-i3)},this.flush=function(){188===n3&&71===r3[0]&&(this.trigger("data",r3),n3=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){n3=0,this.trigger("reset")}},nt2=(rt2.prototype=new st2,(Ge2=function(){var s3,r3,n3,a3;Ge2.prototype.init.call(this),(a3=this).packetsWaitingForPmt=[],this.programMapTable=void 0,s3=function(e3,t3){var i3=0;t3.payloadUnitStartIndicator&&(i3+=e3[i3]+1),("pat"===t3.type?r3:n3)(e3.subarray(i3),t3)},r3=function(e3,t3){t3.section_number=e3[7],t3.last_section_number=e3[8],a3.pmtPid=(31&e3[10])<<8|e3[11],t3.pmtPid=a3.pmtPid},n3=function(e3,t3){var i3,s4;if(1&e3[5]){for(a3.programMapTable={video:null,audio:null,"timed-metadata":{}},i3=3+((15&e3[1])<<8|e3[2])-4,s4=12+((15&e3[10])<<8|e3[11]);s4<i3;){var r4=e3[s4],n4=(31&e3[s4+1])<<8|e3[s4+2];r4===S2.H264_STREAM_TYPE&&null===a3.programMapTable.video?a3.programMapTable.video=n4:r4===S2.ADTS_STREAM_TYPE&&null===a3.programMapTable.audio?a3.programMapTable.audio=n4:r4===S2.METADATA_STREAM_TYPE&&(a3.programMapTable["timed-metadata"][n4]=r4),s4+=5+((15&e3[s4+3])<<8|e3[s4+4])}t3.programMapTable=a3.programMapTable}},this.push=function(e3){var t3={},i3=4;if(t3.payloadUnitStartIndicator=!!(64&e3[1]),t3.pid=31&e3[1],t3.pid<<=8,t3.pid|=e3[2],1<(48&e3[3])>>>4&&(i3+=e3[i3]+1),0===t3.pid)t3.type="pat",s3(e3.subarray(i3),t3),this.trigger("data",t3);else if(t3.pid===this.pmtPid)for(t3.type="pmt",s3(e3.subarray(i3),t3),this.trigger("data",t3);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([e3,i3,t3]):this.processPes_(e3,i3,t3)},this.processPes_=function(e3,t3,i3){i3.pid===this.programMapTable.video?i3.streamType=S2.H264_STREAM_TYPE:i3.pid===this.programMapTable.audio?i3.streamType=S2.ADTS_STREAM_TYPE:i3.streamType=this.programMapTable["timed-metadata"][i3.pid],i3.type="pes",i3.data=e3.subarray(t3),this.trigger("data",i3)}}).prototype=new st2,Ge2.STREAM_TYPES={h264:27,adts:15},(Xe2=function(){function s3(e3,t4,i3){var s4,r4=new Uint8Array(e3.size),n4={type:t4},a4=0,o4=0;if(e3.data.length&&!(e3.size<9)){for(n4.trackId=e3.data[0].pid,a4=0;a4<e3.data.length;a4++)s4=e3.data[a4],r4.set(s4.data,o4),o4+=s4.data.byteLength;d3(r4,n4),t4="video"===t4||n4.packetLength<=e3.size,(i3||t4)&&(e3.size=0,e3.data.length=0),t4&&l3.trigger("data",n4)}}var t3,l3=this,r3=!1,n3={data:[],size:0},a3={data:[],size:0},o3={data:[],size:0},d3=function(e3,t4){var i3=e3[0]<<16|e3[1]<<8|e3[2];t4.data=new Uint8Array,1==i3&&(t4.packetLength=6+(e3[4]<<8|e3[5]),t4.dataAlignmentIndicator=!!(4&e3[6]),192&(i3=e3[7])&&(t4.pts=(14&e3[9])<<27|(255&e3[10])<<20|(254&e3[11])<<12|(255&e3[12])<<5|(254&e3[13])>>>3,t4.pts*=4,t4.pts+=(6&e3[13])>>>1,t4.dts=t4.pts,64&i3)&&(t4.dts=(14&e3[14])<<27|(255&e3[15])<<20|(254&e3[16])<<12|(255&e3[17])<<5|(254&e3[18])>>>3,t4.dts*=4,t4.dts+=(6&e3[18])>>>1),t4.data=e3.subarray(9+e3[8]))};Xe2.prototype.init.call(this),this.push=function(i3){({pat:function(){},pes:function(){var e3,t4;switch(i3.streamType){case S2.H264_STREAM_TYPE:e3=n3,t4="video";break;case S2.ADTS_STREAM_TYPE:e3=a3,t4="audio";break;case S2.METADATA_STREAM_TYPE:e3=o3,t4="timed-metadata";break;default:return}i3.payloadUnitStartIndicator&&s3(e3,t4,!0),e3.data.push(i3),e3.size+=i3.data.byteLength},pmt:function(){var e3={type:"metadata",tracks:[]};null!==(t3=i3.programMapTable).video&&e3.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t3.video,codec:"avc",type:"video"}),null!==t3.audio&&e3.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t3.audio,codec:"adts",type:"audio"}),r3=!0,l3.trigger("data",e3)}})[i3.type]()},this.reset=function(){n3.size=0,n3.data.length=0,a3.size=0,a3.data.length=0,this.trigger("reset")},this.flushStreams_=function(){s3(n3,"video"),s3(a3,"audio"),s3(o3,"timed-metadata")},this.flush=function(){var e3;!r3&&t3&&(e3={type:"metadata",tracks:[]},null!==t3.video&&e3.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t3.video,codec:"avc",type:"video"}),null!==t3.audio&&e3.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t3.audio,codec:"adts",type:"audio"}),l3.trigger("data",e3)),r3=!1,this.flushStreams_(),this.trigger("done")}}).prototype=new st2,{PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:rt2,TransportParseStream:Ge2,ElementaryStream:Xe2,TimestampRolloverStream:g2,CaptionStream:T2.CaptionStream,Cea608Stream:T2.Cea608Stream,Cea708Stream:T2.Cea708Stream,MetadataStream:v2});for(Ke2 in S2)S2.hasOwnProperty(Ke2)&&(nt2[Ke2]=S2[Ke2]);st2=nt2,g2=t2;var at2,ot2,lt2=u2.ONE_SECOND_IN_TS,dt2=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],ht2=function(l3){var d3,h3=0;ht2.prototype.init.call(this),this.skipWarn_=function(e3,t3){this.trigger("log",{level:"warn",message:`adts skiping bytes ${e3} to ${t3} in frame ${h3} outside syncword`})},this.push=function(e3){var t3,i3,s3,r3,n3,a3,o3=0;if(l3||(h3=0),"audio"===e3.type){for(d3&&d3.length?(s3=d3,(d3=new Uint8Array(s3.byteLength+e3.data.byteLength)).set(s3),d3.set(e3.data,s3.byteLength)):d3=e3.data;o3+7<d3.length;)if(255!==d3[o3]||240!=(246&d3[o3+1]))"number"!=typeof a3&&(a3=o3),o3++;else{if("number"==typeof a3&&(this.skipWarn_(a3,o3),a3=null),i3=2*(1&~d3[o3+1]),t3=(3&d3[o3+3])<<11|d3[o3+4]<<3|(224&d3[o3+5])>>5,n3=(r3=1024*(1+(3&d3[o3+6])))*lt2/dt2[(60&d3[o3+2])>>>2],d3.byteLength-o3<t3)break;this.trigger("data",{pts:e3.pts+h3*n3,dts:e3.dts+h3*n3,sampleCount:r3,audioobjecttype:1+(d3[o3+2]>>>6&3),channelcount:(1&d3[o3+2])<<2|(192&d3[o3+3])>>>6,samplerate:dt2[(60&d3[o3+2])>>>2],samplingfrequencyindex:(60&d3[o3+2])>>>2,samplesize:16,data:d3.subarray(o3+7+i3,o3+t3)}),h3++,o3+=t3}"number"==typeof a3&&(this.skipWarn_(a3,o3),a3=null),d3=d3.subarray(o3)}},this.flush=function(){h3=0,this.trigger("done")},this.reset=function(){d3=void 0,this.trigger("reset")},this.endTimeline=function(){d3=void 0,this.trigger("endedtimeline")}},ut2=(T2=(ht2.prototype=new g2,ht2),v2=t2,function(s3){var r3=s3.byteLength,n3=0,a3=0;this.length=function(){return 8*r3},this.bitsAvailable=function(){return 8*r3+a3},this.loadWord=function(){var e3=s3.byteLength-r3,t3=new Uint8Array(4),i3=Math.min(4,r3);if(0===i3)throw new Error("no bytes available");t3.set(s3.subarray(e3,e3+i3)),n3=new DataView(t3.buffer).getUint32(0),a3=8*i3,r3-=i3},this.skipBits=function(e3){var t3;e3<a3||(e3=(e3-=a3)-8*(t3=Math.floor(e3/8)),r3-=t3,this.loadWord()),n3<<=e3,a3-=e3},this.readBits=function(e3){var t3=Math.min(a3,e3),i3=n3>>>32-t3;return 0<(a3-=t3)?n3<<=t3:0<r3&&this.loadWord(),0<(t3=e3-t3)?i3<<t3|this.readBits(t3):i3},this.skipLeadingZeros=function(){for(var e3=0;e3<a3;++e3)if(n3&2147483648>>>e3)return n3<<=e3,a3-=e3,e3;return this.loadWord(),e3+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e3=this.skipLeadingZeros();return this.readBits(e3+1)-1},this.readExpGolomb=function(){var e3=this.readUnsignedExpGolomb();return 1&e3?1+e3>>>1:-1*(e3>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()}),ct2=function(){var s3,r3,n3=0;ct2.prototype.init.call(this),this.push=function(e3){for(var t3,i3=(r3=r3?((t3=new Uint8Array(r3.byteLength+e3.data.byteLength)).set(r3),t3.set(e3.data,r3.byteLength),t3):e3.data).byteLength;n3<i3-3;n3++)if(1===r3[n3+2]){s3=n3+5;break}for(;s3<i3;)switch(r3[s3]){case 0:if(0!==r3[s3-1])s3+=2;else if(0!==r3[s3-2])s3++;else{for(n3+3!==s3-2&&this.trigger("data",r3.subarray(n3+3,s3-2));1!==r3[++s3]&&s3<i3;);n3=s3-2,s3+=3}break;case 1:0!==r3[s3-1]||0!==r3[s3-2]||(this.trigger("data",r3.subarray(n3+3,s3-2)),n3=s3-2),s3+=3;break;default:s3+=3}r3=r3.subarray(n3),s3-=n3,n3=0},this.reset=function(){r3=null,n3=0,this.trigger("reset")},this.flush=function(){r3&&3<r3.byteLength&&this.trigger("data",r3.subarray(n3+3)),r3=null,n3=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}};function pt2(e3){return e3[0]<<21|e3[1]<<14|e3[2]<<7|e3[3]}ct2.prototype=new v2,ot2={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(at2=function(){var i3,s3,r3,n3,a3,o3,g3,t3=new ct2;at2.prototype.init.call(this),(i3=this).push=function(e3){"video"===e3.type&&(s3=e3.trackId,r3=e3.pts,n3=e3.dts,t3.push(e3))},t3.on("data",function(e3){var t4={trackId:s3,pts:r3,dts:n3,data:e3,nalUnitTypeCode:31&e3[0]};switch(t4.nalUnitTypeCode){case 5:t4.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:t4.nalUnitType="sei_rbsp",t4.escapedRBSP=a3(e3.subarray(1));break;case 7:t4.nalUnitType="seq_parameter_set_rbsp",t4.escapedRBSP=a3(e3.subarray(1)),t4.config=o3(t4.escapedRBSP);break;case 8:t4.nalUnitType="pic_parameter_set_rbsp";break;case 9:t4.nalUnitType="access_unit_delimiter_rbsp"}i3.trigger("data",t4)}),t3.on("done",function(){i3.trigger("done")}),t3.on("partialdone",function(){i3.trigger("partialdone")}),t3.on("reset",function(){i3.trigger("reset")}),t3.on("endedtimeline",function(){i3.trigger("endedtimeline")}),this.flush=function(){t3.flush()},this.partialFlush=function(){t3.partialFlush()},this.reset=function(){t3.reset()},this.endTimeline=function(){t3.endTimeline()},g3=function(e3,t4){for(var i4=8,s4=8,r4=0;r4<e3;r4++)i4=0===(s4=0!==s4?(i4+t4.readExpGolomb()+256)%256:s4)?i4:s4},a3=function(e3){for(var t4=e3.byteLength,i4=[],s4=1;s4<t4-2;)0===e3[s4]&&0===e3[s4+1]&&3===e3[s4+2]?(i4.push(s4+2),s4+=2):s4++;if(0===i4.length)return e3;var r4=t4-i4.length,n4=new Uint8Array(r4),a4=0;for(s4=0;s4<r4;a4++,s4++)a4===i4[0]&&(a4++,i4.shift()),n4[s4]=e3[a4];return n4},o3=function(e3){var t4,i4,s4,r4,n4,a4,o4=0,l3=0,d3=0,h3=0,u3=[1,1],c3=new ut2(e3),p3=(e3=c3.readUnsignedByte(),c3.readUnsignedByte()),m3=c3.readUnsignedByte();if(c3.skipUnsignedExpGolomb(),ot2[e3]&&(3===(i4=c3.readUnsignedExpGolomb())&&c3.skipBits(1),c3.skipUnsignedExpGolomb(),c3.skipUnsignedExpGolomb(),c3.skipBits(1),c3.readBoolean()))for(n4=3!==i4?8:12,a4=0;a4<n4;a4++)c3.readBoolean()&&g3(a4<6?16:64,c3);if(c3.skipUnsignedExpGolomb(),0===(i4=c3.readUnsignedExpGolomb()))c3.readUnsignedExpGolomb();else if(1===i4)for(c3.skipBits(1),c3.skipExpGolomb(),c3.skipExpGolomb(),t4=c3.readUnsignedExpGolomb(),a4=0;a4<t4;a4++)c3.skipExpGolomb();if(c3.skipUnsignedExpGolomb(),c3.skipBits(1),i4=c3.readUnsignedExpGolomb(),s4=c3.readUnsignedExpGolomb(),0===(r4=c3.readBits(1))&&c3.skipBits(1),c3.skipBits(1),c3.readBoolean()&&(o4=c3.readUnsignedExpGolomb(),l3=c3.readUnsignedExpGolomb(),d3=c3.readUnsignedExpGolomb(),h3=c3.readUnsignedExpGolomb()),c3.readBoolean()&&c3.readBoolean()){switch(c3.readUnsignedByte()){case 1:u3=[1,1];break;case 2:u3=[12,11];break;case 3:u3=[10,11];break;case 4:u3=[16,11];break;case 5:u3=[40,33];break;case 6:u3=[24,11];break;case 7:u3=[20,11];break;case 8:u3=[32,11];break;case 9:u3=[80,33];break;case 10:u3=[18,11];break;case 11:u3=[15,11];break;case 12:u3=[64,33];break;case 13:u3=[160,99];break;case 14:u3=[4,3];break;case 15:u3=[3,2];break;case 16:u3=[2,1];break;case 255:u3=[c3.readUnsignedByte()<<8|c3.readUnsignedByte(),c3.readUnsignedByte()<<8|c3.readUnsignedByte()]}u3&&(u3[0],u3[1])}return{profileIdc:e3,levelIdc:m3,profileCompatibility:p3,width:16*(i4+1)-2*o4-2*l3,height:(2-r4)*(s4+1)*16-2*d3-2*h3,sarRatio:u3}}}).prototype=new v2;g2=at2;var mt2=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],gt2=function(e3,t3){var i3=0<=(i3=e3[t3+6]<<21|e3[t3+7]<<14|e3[t3+8]<<7|e3[t3+9])?i3:0;return(16&e3[t3+5])>>4?20+i3:10+i3},ft2=function(e3,t3){return e3.length-t3<10||e3[t3]!=="I".charCodeAt(0)||e3[t3+1]!=="D".charCodeAt(0)||e3[t3+2]!=="3".charCodeAt(0)?t3:(t3+=gt2(e3,t3),ft2(e3,t3))},yt2=function(e3,t3,i3){for(var s3="",r3=t3;r3<i3;r3++)s3+="%"+("00"+e3[r3].toString(16)).slice(-2);return s3},_t2=t2,vt2=v2={isLikelyAacData:function(e3){var t3=ft2(e3,0);return e3.length>=t3+2&&!(255&~e3[t3])&&!(240&~e3[t3+1])&&16==(22&e3[t3+1])},parseId3TagSize:gt2,parseAdtsSize:function(e3,t3){var i3=(224&e3[t3+5])>>5;return 6144&e3[t3+3]|e3[t3+4]<<3|i3},parseType:function(e3,t3){return e3[t3]==="I".charCodeAt(0)&&e3[t3+1]==="D".charCodeAt(0)&&e3[t3+2]==="3".charCodeAt(0)?"timed-metadata":!0&e3[t3]&&!(240&~e3[t3+1])?"audio":null},parseSampleRate:function(e3){for(var t3=0;t3+5<e3.length;){if(255===e3[t3]&&240==(246&e3[t3+1]))return mt2[(60&e3[t3+2])>>>2];t3++}return null},parseAacTimestamp:function(e3){var t3,i3=10;64&e3[5]&&(i3=(i3+=4)+pt2(e3.subarray(10,14)));do{if((t3=pt2(e3.subarray(i3+4,i3+8)))<1)return null;if("PRIV"===String.fromCharCode(e3[i3],e3[i3+1],e3[i3+2],e3[i3+3]))for(var s3,r3,n3=e3.subarray(i3+10,i3+t3+10),a3=0;a3<n3.byteLength;a3++)if(0===n3[a3]){if("com.apple.streaming.transportStreamTimestamp"===unescape(yt2(n3,0,a3)))return r3=(1&(s3=n3.subarray(a3+1))[3])<<30|s3[4]<<22|s3[5]<<14|s3[6]<<6|s3[7]>>>2,(r3*=4)+(3&s3[7]);break}}while((i3=i3+10+t3)<e3.byteLength);return null}},bt2=function(){var n3=new Uint8Array,a3=0;bt2.prototype.init.call(this),this.setTimestamp=function(e3){a3=e3},this.push=function(e3){var t3,i3,s3=0,r3=0;for(n3.length?(i3=n3.length,(n3=new Uint8Array(e3.byteLength+i3)).set(n3.subarray(0,i3)),n3.set(e3,i3)):n3=e3;3<=n3.length-r3;)if(n3[r3]==="I".charCodeAt(0)&&n3[r3+1]==="D".charCodeAt(0)&&n3[r3+2]==="3".charCodeAt(0)){if(n3.length-r3<10)break;if(r3+(s3=vt2.parseId3TagSize(n3,r3))>n3.length)break;t3={type:"timed-metadata",data:n3.subarray(r3,r3+s3)},this.trigger("data",t3),r3+=s3}else if(255&~n3[r3]||240&~n3[r3+1])r3++;else{if(n3.length-r3<7)break;if(r3+(s3=vt2.parseAdtsSize(n3,r3))>n3.length)break;t3={type:"audio",data:n3.subarray(r3,r3+s3),pts:a3,dts:a3},this.trigger("data",t3),r3+=s3}n3=0<n3.length-r3?n3.subarray(r3):new Uint8Array},this.reset=function(){n3=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){n3=new Uint8Array,this.trigger("endedtimeline")}};function Tt2(e3,t3){for(var i3=Object.keys(t3),s3=0;s3<i3.length;s3++){var r3=i3[s3];"headOfPipeline"!==r3&&t3[r3].on&&t3[r3].on("log",Bt2.bind(e3,r3))}}function St2(e3,t3){var i3;if(e3.length===t3.length){for(i3=0;i3<e3.length;i3++)if(e3[i3]!==t3[i3])return;return 1}}function wt2(e3,t3,i3,s3,r3,n3){return{start:{dts:e3,pts:e3+(i3-t3)},end:{dts:e3+(s3-t3),pts:e3+(r3-i3)},prependedContentDuration:n3,baseMediaDecodeTime:e3}}bt2.prototype=new _t2;_t2=t2;var Et2,Ct2,kt2,It2=Ie2,xt2=Ae2,At2=Pe2,w2=Le2,E2=st2,Dt2=u2,Pt2=T2,Lt2=g2,Ot2=bt2,Rt2=v2.isLikelyAacData,Nt2=u2.ONE_SECOND_IN_TS,Mt2=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Ut2=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Bt2=function(e3,t3){t3.stream=e3,this.trigger("log",t3)},Ft2=function(n3,a3){var o3=[],l3=0,d3=0,h3=1/0,u3=(a3=a3||{}).firstSequenceNumber||0;Ft2.prototype.init.call(this),this.push=function(t3){w2.collectDtsInfo(n3,t3),n3&&Mt2.forEach(function(e3){n3[e3]=t3[e3]}),o3.push(t3)},this.setEarliestDts=function(e3){l3=e3},this.setVideoBaseMediaDecodeTime=function(e3){h3=e3},this.setAudioAppendStart=function(e3){d3=e3},this.flush=function(){var e3,t3,i3,s3,r3;0!==o3.length&&(e3=At2.trimAdtsFramesByEarliestDts(o3,n3,l3),n3.baseMediaDecodeTime=w2.calculateTrackBaseMediaDecodeTime(n3,a3.keepOriginalTimestamps),r3=At2.prefixWithSilence(n3,e3,d3,h3),n3.samples=At2.generateSampleTable(e3),i3=It2.mdat(At2.concatenateFrameData(e3)),o3=[],s3=It2.moof(u3,[n3]),t3=new Uint8Array(s3.byteLength+i3.byteLength),u3++,t3.set(s3),t3.set(i3,s3.byteLength),w2.clearDtsInfo(n3),i3=Math.ceil(1024*Nt2/n3.samplerate),e3.length&&(s3=e3.length*i3,this.trigger("segmentTimingInfo",wt2(Dt2.audioTsToVideoTs(n3.baseMediaDecodeTime,n3.samplerate),e3[0].dts,e3[0].pts,e3[0].dts+s3,e3[0].pts+s3,r3||0)),this.trigger("timingInfo",{start:e3[0].pts,end:e3[0].pts+s3})),this.trigger("data",{track:n3,boxes:t3})),this.trigger("done","AudioSegmentStream")},this.reset=function(){w2.clearDtsInfo(n3),o3=[],this.trigger("reset")}};function qt2(e3){var t3="";return(t3+=String.fromCharCode(e3[0]))+String.fromCharCode(e3[1])+String.fromCharCode(e3[2])+String.fromCharCode(e3[3])}function jt2(e3,t3){var i3,s3,r3,n3=[];if(!t3.length)return null;for(i3=0;i3<e3.byteLength;)s3=Wt2(e3[i3]<<24|e3[i3+1]<<16|e3[i3+2]<<8|e3[i3+3]),r3=Gt2(e3.subarray(i3+4,i3+8)),s3=1<s3?i3+s3:e3.byteLength,r3===t3[0]&&(1===t3.length?n3.push(e3.subarray(i3+8,s3)):(r3=jt2(e3.subarray(i3+8,s3),t3.slice(1))).length&&(n3=n3.concat(r3))),i3=s3;return n3}function Vt2(e3){var t3={version:e3[0],flags:new Uint8Array(e3.subarray(1,4))};return t3.baseMediaDecodeTime=1===t3.version?Kt2(e3.subarray(4)):Xt2(e3[4]<<24|e3[5]<<16|e3[6]<<8|e3[7]),t3}function Ht2(e3){var t3=new DataView(e3.buffer,e3.byteOffset,e3.byteLength),i3=1&(e3={version:e3[0],flags:new Uint8Array(e3.subarray(1,4)),trackId:t3.getUint32(4)}).flags[2],s3=2&e3.flags[2],r3=8&e3.flags[2],n3=16&e3.flags[2],a3=32&e3.flags[2],o3=65536&e3.flags[0],l3=131072&e3.flags[0],d3=8;return i3&&(d3+=4,e3.baseDataOffset=t3.getUint32(12),d3+=4),s3&&(e3.sampleDescriptionIndex=t3.getUint32(d3),d3+=4),r3&&(e3.defaultSampleDuration=t3.getUint32(d3),d3+=4),n3&&(e3.defaultSampleSize=t3.getUint32(d3),d3+=4),a3&&(e3.defaultSampleFlags=t3.getUint32(d3)),o3&&(e3.durationIsEmpty=!0),!i3&&l3&&(e3.baseDataOffsetIsMoof=!0),e3}function zt2(e3){var t3,i3={version:e3[0],flags:new Uint8Array(e3.subarray(1,4)),samples:[]},s3=new DataView(e3.buffer,e3.byteOffset,e3.byteLength),r3=1&i3.flags[2],n3=4&i3.flags[2],a3=1&i3.flags[1],o3=2&i3.flags[1],l3=4&i3.flags[1],d3=8&i3.flags[1],h3=s3.getUint32(4),u3=8;for(r3&&(i3.dataOffset=s3.getInt32(u3),u3+=4),n3&&h3&&(t3={flags:Qt2(e3.subarray(u3,u3+4))},u3+=4,a3&&(t3.duration=s3.getUint32(u3),u3+=4),o3&&(t3.size=s3.getUint32(u3),u3+=4),d3&&(t3.compositionTimeOffset=1===i3.version?s3.getInt32(u3):s3.getUint32(u3),u3+=4),i3.samples.push(t3),h3--);h3--;)t3={},a3&&(t3.duration=s3.getUint32(u3),u3+=4),o3&&(t3.size=s3.getUint32(u3),u3+=4),l3&&(t3.flags=Qt2(e3.subarray(u3,u3+4)),u3+=4),d3&&(t3.compositionTimeOffset=1===i3.version?s3.getInt32(u3):s3.getUint32(u3),u3+=4),i3.samples.push(t3);return i3}function C2(e3){return new Date(1e3*e3-20828448e5)}Ft2.prototype=new _t2,(Et2=function(a3,n3){var t3,i3,o3=[],d3=[],l3=(n3=n3||{}).firstSequenceNumber||0;Et2.prototype.init.call(this),delete a3.minPTS,this.gopCache_=[],this.push=function(e3){w2.collectDtsInfo(a3,e3),"seq_parameter_set_rbsp"!==e3.nalUnitType||t3||(t3=e3.config,a3.sps=[e3.data],Ut2.forEach(function(e4){a3[e4]=t3[e4]},this)),"pic_parameter_set_rbsp"!==e3.nalUnitType||i3||(i3=e3.data,a3.pps=[e3.data]),o3.push(e3)},this.flush=function(){for(var e3,t4,i4,s3=0;o3.length&&"access_unit_delimiter_rbsp"!==o3[0].nalUnitType;)o3.shift();if(0!==o3.length){if(e3=xt2.groupNalsIntoFrames(o3),(e3=xt2.groupFramesIntoGops(e3))[0][0].keyFrame||((r3=this.getGopForFusion_(o3[0],a3))?(s3=r3.duration,e3.unshift(r3),e3.byteLength+=r3.byteLength,e3.nalCount+=r3.nalCount,e3.pts=r3.pts,e3.dts=r3.dts,e3.duration+=r3.duration):e3=xt2.extendFirstKeyFrame(e3)),d3.length){var r3=n3.alignGopsAtEnd?this.alignGopsAtEnd_(e3):this.alignGopsAtStart_(e3);if(!r3)return this.gopCache_.unshift({gop:e3.pop(),pps:a3.pps,sps:a3.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),o3=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");w2.clearDtsInfo(a3),e3=r3}w2.collectDtsInfo(a3,e3),a3.samples=xt2.generateSampleTable(e3),r3=It2.mdat(xt2.concatenateNalData(e3)),a3.baseMediaDecodeTime=w2.calculateTrackBaseMediaDecodeTime(a3,n3.keepOriginalTimestamps),this.trigger("processedGopsInfo",e3.map(function(e4){return{pts:e4.pts,dts:e4.dts,byteLength:e4.byteLength}})),t4=e3[0],i4=e3[e3.length-1],this.trigger("segmentTimingInfo",wt2(a3.baseMediaDecodeTime,t4.dts,t4.pts,i4.dts+i4.duration,i4.pts+i4.duration,s3)),this.trigger("timingInfo",{start:e3[0].pts,end:e3[e3.length-1].pts+e3[e3.length-1].duration}),this.gopCache_.unshift({gop:e3.pop(),pps:a3.pps,sps:a3.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),o3=[],this.trigger("baseMediaDecodeTime",a3.baseMediaDecodeTime),this.trigger("timelineStartInfo",a3.timelineStartInfo),t4=It2.moof(l3,[a3]),i4=new Uint8Array(t4.byteLength+r3.byteLength),l3++,i4.set(t4),i4.set(r3,t4.byteLength),this.trigger("data",{track:a3,boxes:i4})}this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),o3=[],this.gopCache_.length=0,d3.length=0,this.trigger("reset")},this.resetStream_=function(){w2.clearDtsInfo(a3),i3=t3=void 0},this.getGopForFusion_=function(e3){for(var t4,i4,s3,r3=1/0,n4=0;n4<this.gopCache_.length;n4++)i4=(s3=this.gopCache_[n4]).gop,a3.pps&&St2(a3.pps[0],s3.pps[0])&&a3.sps&&St2(a3.sps[0],s3.sps[0])&&(i4.dts<a3.timelineStartInfo.dts||-1e4<=(i4=e3.dts-i4.dts-i4.duration)&&i4<=45e3&&(!t4||i4<r3)&&(t4=s3,r3=i4));return t4?t4.gop:null},this.alignGopsAtStart_=function(e3){for(var t4,i4,s3,r3,n4=e3.byteLength,a4=e3.nalCount,o4=e3.duration,l4=t4=0;l4<d3.length&&t4<e3.length&&(i4=d3[l4],s3=e3[t4],i4.pts!==s3.pts);)i4.pts<s3.pts?l4++:(t4++,n4-=s3.byteLength,a4-=s3.nalCount,o4-=s3.duration);return 0===t4?e3:t4===e3.length?null:((r3=e3.slice(t4)).byteLength=n4,r3.duration=o4,r3.nalCount=a4,r3.pts=r3[0].pts,r3.dts=r3[0].dts,r3)},this.alignGopsAtEnd_=function(e3){for(var t4,i4,s3,r3,n4=d3.length-1,a4=e3.length-1,o4=null,l4=!1;0<=n4&&0<=a4;){if(t4=d3[n4],i4=e3[a4],t4.pts===i4.pts){l4=!0;break}i4.pts<t4.pts?n4--:(n4===d3.length-1&&(o4=a4),a4--)}return l4||null!==o4?0===(s3=l4?a4:o4)?e3:(r3=(s3=e3.slice(s3)).reduce(function(e4,t5){return e4.byteLength+=t5.byteLength,e4.duration+=t5.duration,e4.nalCount+=t5.nalCount,e4},{byteLength:0,duration:0,nalCount:0}),s3.byteLength=r3.byteLength,s3.duration=r3.duration,s3.nalCount=r3.nalCount,s3.pts=s3[0].pts,s3.dts=s3[0].dts,s3):null},this.alignGopsWith=function(e3){d3=e3}}).prototype=new _t2,((kt2=function(e3,t3){this.numberOfTracks=0,this.metadataStream=t3,void 0!==(e3=e3||{}).remux?this.remuxTracks=!!e3.remux:this.remuxTracks=!0,this.keepOriginalTimestamps="boolean"==typeof e3.keepOriginalTimestamps&&e3.keepOriginalTimestamps,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,kt2.prototype.init.call(this),this.push=function(e4){return e4.content||e4.text?this.pendingCaptions.push(e4):e4.frames?this.pendingMetadata.push(e4):(this.pendingTracks.push(e4.track),this.pendingBytes+=e4.boxes.byteLength,"video"===e4.track.type&&(this.videoTrack=e4.track,this.pendingBoxes.push(e4.boxes)),void("audio"===e4.track.type&&(this.audioTrack=e4.track,this.pendingBoxes.unshift(e4.boxes))))}}).prototype=new _t2).flush=function(e3){var t3,i3,s3,r3=0,n3={captions:[],captionStreams:{},metadata:[],info:{}},a3=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e3&&"AudioSegmentStream"!==e3)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(a3=this.videoTrack.timelineStartInfo.pts,Ut2.forEach(function(e4){n3.info[e4]=this.videoTrack[e4]},this)):this.audioTrack&&(a3=this.audioTrack.timelineStartInfo.pts,Mt2.forEach(function(e4){n3.info[e4]=this.audioTrack[e4]},this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?n3.type=this.pendingTracks[0].type:n3.type="combined",this.emittedTracks+=this.pendingTracks.length,e3=It2.initSegment(this.pendingTracks),n3.initSegment=new Uint8Array(e3.byteLength),n3.initSegment.set(e3),n3.data=new Uint8Array(this.pendingBytes),s3=0;s3<this.pendingBoxes.length;s3++)n3.data.set(this.pendingBoxes[s3],r3),r3+=this.pendingBoxes[s3].byteLength;for(s3=0;s3<this.pendingCaptions.length;s3++)(t3=this.pendingCaptions[s3]).startTime=Dt2.metadataTsToSeconds(t3.startPts,a3,this.keepOriginalTimestamps),t3.endTime=Dt2.metadataTsToSeconds(t3.endPts,a3,this.keepOriginalTimestamps),n3.captionStreams[t3.stream]=!0,n3.captions.push(t3);for(s3=0;s3<this.pendingMetadata.length;s3++)(i3=this.pendingMetadata[s3]).cueTime=Dt2.metadataTsToSeconds(i3.pts,a3,this.keepOriginalTimestamps),n3.metadata.push(i3);for(n3.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",n3),s3=0;s3<n3.captions.length;s3++)t3=n3.captions[s3],this.trigger("caption",t3);for(s3=0;s3<n3.metadata.length;s3++)i3=n3.metadata[s3],this.trigger("id3Frame",i3)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},kt2.prototype.setRemux=function(e3){this.remuxTracks=e3},(Ct2=function(s3){var r3,n3,a3=this,i3=!0;Ct2.prototype.init.call(this),s3=s3||{},this.baseMediaDecodeTime=s3.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var t3={};(this.transmuxPipeline_=t3).type="aac",t3.metadataStream=new E2.MetadataStream,t3.aacStream=new Ot2,t3.audioTimestampRolloverStream=new E2.TimestampRolloverStream("audio"),t3.timedMetadataTimestampRolloverStream=new E2.TimestampRolloverStream("timed-metadata"),t3.adtsStream=new Pt2,t3.coalesceStream=new kt2(s3,t3.metadataStream),t3.headOfPipeline=t3.aacStream,t3.aacStream.pipe(t3.audioTimestampRolloverStream).pipe(t3.adtsStream),t3.aacStream.pipe(t3.timedMetadataTimestampRolloverStream).pipe(t3.metadataStream).pipe(t3.coalesceStream),t3.metadataStream.on("timestamp",function(e3){t3.aacStream.setTimestamp(e3.timeStamp)}),t3.aacStream.on("data",function(e3){"timed-metadata"!==e3.type&&"audio"!==e3.type||t3.audioSegmentStream||(n3=n3||{timelineStartInfo:{baseMediaDecodeTime:a3.baseMediaDecodeTime},codec:"adts",type:"audio"},t3.coalesceStream.numberOfTracks++,t3.audioSegmentStream=new Ft2(n3,s3),t3.audioSegmentStream.on("log",a3.getLogTrigger_("audioSegmentStream")),t3.audioSegmentStream.on("timingInfo",a3.trigger.bind(a3,"audioTimingInfo")),t3.adtsStream.pipe(t3.audioSegmentStream).pipe(t3.coalesceStream),a3.trigger("trackinfo",{hasAudio:!!n3,hasVideo:!!r3}))}),t3.coalesceStream.on("data",this.trigger.bind(this,"data")),t3.coalesceStream.on("done",this.trigger.bind(this,"done")),Tt2(this,t3)},this.setupTsPipeline=function(){var i4={};(this.transmuxPipeline_=i4).type="ts",i4.metadataStream=new E2.MetadataStream,i4.packetStream=new E2.TransportPacketStream,i4.parseStream=new E2.TransportParseStream,i4.elementaryStream=new E2.ElementaryStream,i4.timestampRolloverStream=new E2.TimestampRolloverStream,i4.adtsStream=new Pt2,i4.h264Stream=new Lt2,i4.captionStream=new E2.CaptionStream(s3),i4.coalesceStream=new kt2(s3,i4.metadataStream),i4.headOfPipeline=i4.packetStream,i4.packetStream.pipe(i4.parseStream).pipe(i4.elementaryStream).pipe(i4.timestampRolloverStream),i4.timestampRolloverStream.pipe(i4.h264Stream),i4.timestampRolloverStream.pipe(i4.adtsStream),i4.timestampRolloverStream.pipe(i4.metadataStream).pipe(i4.coalesceStream),i4.h264Stream.pipe(i4.captionStream).pipe(i4.coalesceStream),i4.elementaryStream.on("data",function(e3){var t3;if("metadata"===e3.type){for(t3=e3.tracks.length;t3--;)r3||"video"!==e3.tracks[t3].type?n3||"audio"!==e3.tracks[t3].type||((n3=e3.tracks[t3]).timelineStartInfo.baseMediaDecodeTime=a3.baseMediaDecodeTime):(r3=e3.tracks[t3]).timelineStartInfo.baseMediaDecodeTime=a3.baseMediaDecodeTime;r3&&!i4.videoSegmentStream&&(i4.coalesceStream.numberOfTracks++,i4.videoSegmentStream=new Et2(r3,s3),i4.videoSegmentStream.on("log",a3.getLogTrigger_("videoSegmentStream")),i4.videoSegmentStream.on("timelineStartInfo",function(e4){n3&&!s3.keepOriginalTimestamps&&(n3.timelineStartInfo=e4,i4.audioSegmentStream.setEarliestDts(e4.dts-a3.baseMediaDecodeTime))}),i4.videoSegmentStream.on("processedGopsInfo",a3.trigger.bind(a3,"gopInfo")),i4.videoSegmentStream.on("segmentTimingInfo",a3.trigger.bind(a3,"videoSegmentTimingInfo")),i4.videoSegmentStream.on("baseMediaDecodeTime",function(e4){n3&&i4.audioSegmentStream.setVideoBaseMediaDecodeTime(e4)}),i4.videoSegmentStream.on("timingInfo",a3.trigger.bind(a3,"videoTimingInfo")),i4.h264Stream.pipe(i4.videoSegmentStream).pipe(i4.coalesceStream)),n3&&!i4.audioSegmentStream&&(i4.coalesceStream.numberOfTracks++,i4.audioSegmentStream=new Ft2(n3,s3),i4.audioSegmentStream.on("log",a3.getLogTrigger_("audioSegmentStream")),i4.audioSegmentStream.on("timingInfo",a3.trigger.bind(a3,"audioTimingInfo")),i4.audioSegmentStream.on("segmentTimingInfo",a3.trigger.bind(a3,"audioSegmentTimingInfo")),i4.adtsStream.pipe(i4.audioSegmentStream).pipe(i4.coalesceStream)),a3.trigger("trackinfo",{hasAudio:!!n3,hasVideo:!!r3})}}),i4.coalesceStream.on("data",this.trigger.bind(this,"data")),i4.coalesceStream.on("id3Frame",function(e3){e3.dispatchType=i4.metadataStream.dispatchType,a3.trigger("id3Frame",e3)}),i4.coalesceStream.on("caption",this.trigger.bind(this,"caption")),i4.coalesceStream.on("done",this.trigger.bind(this,"done")),Tt2(this,i4)},this.setBaseMediaDecodeTime=function(e3){var t3=this.transmuxPipeline_;s3.keepOriginalTimestamps||(this.baseMediaDecodeTime=e3),n3&&(n3.timelineStartInfo.dts=void 0,n3.timelineStartInfo.pts=void 0,w2.clearDtsInfo(n3),t3.audioTimestampRolloverStream)&&t3.audioTimestampRolloverStream.discontinuity(),r3&&(t3.videoSegmentStream&&(t3.videoSegmentStream.gopCache_=[]),r3.timelineStartInfo.dts=void 0,r3.timelineStartInfo.pts=void 0,w2.clearDtsInfo(r3),t3.captionStream.reset()),t3.timestampRolloverStream&&t3.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e3){n3&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e3)},this.setRemux=function(e3){var t3=this.transmuxPipeline_;s3.remux=e3,t3&&t3.coalesceStream&&t3.coalesceStream.setRemux(e3)},this.alignGopsWith=function(e3){r3&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e3)},this.getLogTrigger_=function(t3){var i4=this;return function(e3){e3.stream=t3,i4.trigger("log",e3)}},this.push=function(e3){var t3;i3&&((t3=Rt2(e3))&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t3||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),i3=!1),this.transmuxPipeline_.headOfPipeline.push(e3)},this.flush=function(){i3=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new _t2;var $t2=Ct2,Wt2=(Pe2=function(e3){return("00"+e3.toString(16)).slice(-2)},t2=function(e3){return e3>>>0}),Gt2=qt2,Xt2=t2,Kt2=i2.getUint64,Yt2=i2.getUint64,Qt2=function(e3){return{isLeading:(12&e3[0])>>>2,dependsOn:3&e3[0],isDependedOn:(192&e3[1])>>>6,hasRedundancy:(48&e3[1])>>>4,paddingValue:(14&e3[1])>>>1,isNonSyncSample:1&e3[1],degradationPriority:e3[2]<<8|e3[3]}},Jt2=i2.getUint64,Zt2=qt2,k2={avc1:function(e3){var t3=new DataView(e3.buffer,e3.byteOffset,e3.byteLength);return{dataReferenceIndex:t3.getUint16(6),width:t3.getUint16(24),height:t3.getUint16(26),horizresolution:t3.getUint16(28)+t3.getUint16(30)/16,vertresolution:t3.getUint16(32)+t3.getUint16(34)/16,frameCount:t3.getUint16(40),depth:t3.getUint16(74),config:I2(e3.subarray(78,e3.byteLength))}},avcC:function(e3){for(var t3,i3,s3=new DataView(e3.buffer,e3.byteOffset,e3.byteLength),r3={configurationVersion:e3[0],avcProfileIndication:e3[1],profileCompatibility:e3[2],avcLevelIndication:e3[3],lengthSizeMinusOne:3&e3[4],sps:[],pps:[]},n3=31&e3[5],a3=6,o3=0;o3<n3;o3++)i3=s3.getUint16(a3),a3+=2,r3.sps.push(new Uint8Array(e3.subarray(a3,a3+i3))),a3+=i3;for(t3=e3[a3],a3++,o3=0;o3<t3;o3++)i3=s3.getUint16(a3),a3+=2,r3.pps.push(new Uint8Array(e3.subarray(a3,a3+i3))),a3+=i3;return r3},btrt:function(e3){return{bufferSizeDB:(e3=new DataView(e3.buffer,e3.byteOffset,e3.byteLength)).getUint32(0),maxBitrate:e3.getUint32(4),avgBitrate:e3.getUint32(8)}},edts:function(e3){return{boxes:I2(e3)}},elst:function(e3){for(var t3=new DataView(e3.buffer,e3.byteOffset,e3.byteLength),i3={version:t3.getUint8(0),flags:new Uint8Array(e3.subarray(1,4)),edits:[]},s3=t3.getUint32(4),r3=8;s3;s3--)0===i3.version?(i3.edits.push({segmentDuration:t3.getUint32(r3),mediaTime:t3.getInt32(r3+4),mediaRate:t3.getUint16(r3+8)+t3.getUint16(r3+10)/65536}),r3+=12):(i3.edits.push({segmentDuration:Jt2(e3.subarray(r3)),mediaTime:Jt2(e3.subarray(r3+8)),mediaRate:t3.getUint16(r3+16)+t3.getUint16(r3+18)/65536}),r3+=20);return i3},esds:function(e3){return{version:e3[0],flags:new Uint8Array(e3.subarray(1,4)),esId:e3[6]<<8|e3[7],streamPriority:31&e3[8],decoderConfig:{objectProfileIndication:e3[11],streamType:e3[12]>>>2&63,bufferSize:e3[13]<<16|e3[14]<<8|e3[15],maxBitrate:e3[16]<<24|e3[17]<<16|e3[18]<<8|e3[19],avgBitrate:e3[20]<<24|e3[21]<<16|e3[22]<<8|e3[23],decoderConfigDescriptor:{tag:e3[24],length:e3[25],audioObjectType:e3[26]>>>3&31,samplingFrequencyIndex:(7&e3[26])<<1|e3[27]>>>7&1,channelConfiguration:e3[27]>>>3&15}}}},ftyp:function(e3){for(var t3=new DataView(e3.buffer,e3.byteOffset,e3.byteLength),i3={majorBrand:Zt2(e3.subarray(0,4)),minorVersion:t3.getUint32(4),compatibleBrands:[]},s3=8;s3<e3.byteLength;)i3.compatibleBrands.push(Zt2(e3.subarray(s3,s3+4))),s3+=4;return i3},dinf:function(e3){return{boxes:I2(e3)}},dref:function(e3){return{version:e3[0],flags:new Uint8Array(e3.subarray(1,4)),dataReferences:I2(e3.subarray(8))}},hdlr:function(e3){var t3={version:new DataView(e3.buffer,e3.byteOffset,e3.byteLength).getUint8(0),flags:new Uint8Array(e3.subarray(1,4)),handlerType:Zt2(e3.subarray(8,12)),name:""},i3=8;for(i3=24;i3<e3.byteLength;i3++){if(0===e3[i3]){i3++;break}t3.name+=String.fromCharCode(e3[i3])}return t3.name=decodeURIComponent(escape(t3.name)),t3},mdat:function(e3){return{byteLength:e3.byteLength,nals:function(e4){for(var t3,i3=new DataView(e4.buffer,e4.byteOffset,e4.byteLength),s3=[],r3=0;r3+4<e4.length;r3+=t3)if(t3=i3.getUint32(r3),r3+=4,t3<=0)s3.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(31&e4[r3]){case 1:s3.push("slice_layer_without_partitioning_rbsp");break;case 5:s3.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:s3.push("sei_rbsp");break;case 7:s3.push("seq_parameter_set_rbsp");break;case 8:s3.push("pic_parameter_set_rbsp");break;case 9:s3.push("access_unit_delimiter_rbsp");break;default:s3.push("UNKNOWN NAL - "+e4[r3]&31)}return s3}(e3)}},mdhd:function(e3){var t3=new DataView(e3.buffer,e3.byteOffset,e3.byteLength),i3=4;return 1===(e3={version:t3.getUint8(0),flags:new Uint8Array(e3.subarray(1,4)),language:""}).version?(e3.creationTime=C2(t3.getUint32(i3+=4)),e3.modificationTime=C2(t3.getUint32(i3+=8)),e3.timescale=t3.getUint32(i3+=4),e3.duration=t3.getUint32(i3+=8)):(e3.creationTime=C2(t3.getUint32(i3)),e3.modificationTime=C2(t3.getUint32(i3+=4)),e3.timescale=t3.getUint32(i3+=4),e3.duration=t3.getUint32(i3+=4)),t3=t3.getUint16(i3+=4),e3.language+=String.fromCharCode(96+(t3>>10)),e3.language+=String.fromCharCode(96+((992&t3)>>5)),e3.language+=String.fromCharCode(96+(31&t3)),e3},mdia:function(e3){return{boxes:I2(e3)}},mfhd:function(e3){return{version:e3[0],flags:new Uint8Array(e3.subarray(1,4)),sequenceNumber:e3[4]<<24|e3[5]<<16|e3[6]<<8|e3[7]}},minf:function(e3){return{boxes:I2(e3)}},mp4a:function(e3){var t3={dataReferenceIndex:(t3=new DataView(e3.buffer,e3.byteOffset,e3.byteLength)).getUint16(6),channelcount:t3.getUint16(16),samplesize:t3.getUint16(18),samplerate:t3.getUint16(24)+t3.getUint16(26)/65536};return 28<e3.byteLength&&(t3.streamDescriptor=I2(e3.subarray(28))[0]),t3},moof:function(e3){return{boxes:I2(e3)}},moov:function(e3){return{boxes:I2(e3)}},mvex:function(e3){return{boxes:I2(e3)}},mvhd:function(e3){var t3=new DataView(e3.buffer,e3.byteOffset,e3.byteLength),i3=4,s3={version:t3.getUint8(0),flags:new Uint8Array(e3.subarray(1,4))};return 1===s3.version?(s3.creationTime=C2(t3.getUint32(i3+=4)),s3.modificationTime=C2(t3.getUint32(i3+=8)),s3.timescale=t3.getUint32(i3+=4),s3.duration=t3.getUint32(i3+=8)):(s3.creationTime=C2(t3.getUint32(i3)),s3.modificationTime=C2(t3.getUint32(i3+=4)),s3.timescale=t3.getUint32(i3+=4),s3.duration=t3.getUint32(i3+=4)),s3.rate=t3.getUint16(i3+=4)+t3.getUint16(i3+2)/16,s3.volume=t3.getUint8(i3+=4)+t3.getUint8(i3+1)/8,i3=(i3+=2)+2+8,s3.matrix=new Uint32Array(e3.subarray(i3,i3+36)),s3.nextTrackId=t3.getUint32(i3=i3+36+24),s3},pdin:function(e3){var t3=new DataView(e3.buffer,e3.byteOffset,e3.byteLength);return{version:t3.getUint8(0),flags:new Uint8Array(e3.subarray(1,4)),rate:t3.getUint32(4),initialDelay:t3.getUint32(8)}},sdtp:function(e3){for(var t3={version:e3[0],flags:new Uint8Array(e3.subarray(1,4)),samples:[]},i3=4;i3<e3.byteLength;i3++)t3.samples.push({dependsOn:(48&e3[i3])>>4,isDependedOn:(12&e3[i3])>>2,hasRedundancy:3&e3[i3]});return t3},sidx:function(e3){var t3=new DataView(e3.buffer,e3.byteOffset,e3.byteLength),i3={version:e3[0],flags:new Uint8Array(e3.subarray(1,4)),references:[],referenceId:t3.getUint32(4),timescale:t3.getUint32(8)},s3=12,r3=(0===i3.version?(i3.earliestPresentationTime=t3.getUint32(s3),i3.firstOffset=t3.getUint32(s3+4),s3+=8):(i3.earliestPresentationTime=Yt2(e3.subarray(s3)),i3.firstOffset=Yt2(e3.subarray(s3+8)),s3+=16),t3.getUint16(s3+=2));for(s3+=2;0<r3;s3+=12,r3--)i3.references.push({referenceType:(128&e3[s3])>>>7,referencedSize:2147483647&t3.getUint32(s3),subsegmentDuration:t3.getUint32(s3+4),startsWithSap:!!(128&e3[s3+8]),sapType:(112&e3[s3+8])>>>4,sapDeltaTime:268435455&t3.getUint32(s3+8)});return i3},smhd:function(e3){return{version:e3[0],flags:new Uint8Array(e3.subarray(1,4)),balance:e3[4]+e3[5]/256}},stbl:function(e3){return{boxes:I2(e3)}},ctts:function(e3){for(var t3=new DataView(e3.buffer,e3.byteOffset,e3.byteLength),i3={version:t3.getUint8(0),flags:new Uint8Array(e3.subarray(1,4)),compositionOffsets:[]},s3=t3.getUint32(4),r3=8;s3;r3+=8,s3--)i3.compositionOffsets.push({sampleCount:t3.getUint32(r3),sampleOffset:t3[0===i3.version?"getUint32":"getInt32"](r3+4)});return i3},stss:function(e3){for(var t3=new DataView(e3.buffer,e3.byteOffset,e3.byteLength),i3={version:t3.getUint8(0),flags:new Uint8Array(e3.subarray(1,4)),syncSamples:[]},s3=t3.getUint32(4),r3=8;s3;r3+=4,s3--)i3.syncSamples.push(t3.getUint32(r3));return i3},stco:function(e3){for(var t3=new DataView(e3.buffer,e3.byteOffset,e3.byteLength),i3={version:e3[0],flags:new Uint8Array(e3.subarray(1,4)),chunkOffsets:[]},s3=t3.getUint32(4),r3=8;s3;r3+=4,s3--)i3.chunkOffsets.push(t3.getUint32(r3));return i3},stsc:function(e3){for(var t3=new DataView(e3.buffer,e3.byteOffset,e3.byteLength),i3=t3.getUint32(4),s3={version:e3[0],flags:new Uint8Array(e3.subarray(1,4)),sampleToChunks:[]},r3=8;i3;r3+=12,i3--)s3.sampleToChunks.push({firstChunk:t3.getUint32(r3),samplesPerChunk:t3.getUint32(r3+4),sampleDescriptionIndex:t3.getUint32(r3+8)});return s3},stsd:function(e3){return{version:e3[0],flags:new Uint8Array(e3.subarray(1,4)),sampleDescriptions:I2(e3.subarray(8))}},stsz:function(e3){for(var t3=new DataView(e3.buffer,e3.byteOffset,e3.byteLength),i3={version:e3[0],flags:new Uint8Array(e3.subarray(1,4)),sampleSize:t3.getUint32(4),entries:[]},s3=12;s3<e3.byteLength;s3+=4)i3.entries.push(t3.getUint32(s3));return i3},stts:function(e3){for(var t3=new DataView(e3.buffer,e3.byteOffset,e3.byteLength),i3={version:e3[0],flags:new Uint8Array(e3.subarray(1,4)),timeToSamples:[]},s3=t3.getUint32(4),r3=8;s3;r3+=8,s3--)i3.timeToSamples.push({sampleCount:t3.getUint32(r3),sampleDelta:t3.getUint32(r3+4)});return i3},styp:function(e3){return k2.ftyp(e3)},tfdt:Vt2,tfhd:Ht2,tkhd:function(e3){var t3=new DataView(e3.buffer,e3.byteOffset,e3.byteLength),i3=4,s3={version:t3.getUint8(0),flags:new Uint8Array(e3.subarray(1,4))};return 1===s3.version?(s3.creationTime=C2(t3.getUint32(i3+=4)),s3.modificationTime=C2(t3.getUint32(i3+=8)),s3.trackId=t3.getUint32(i3+=4),s3.duration=t3.getUint32(i3=i3+4+8)):(s3.creationTime=C2(t3.getUint32(i3)),s3.modificationTime=C2(t3.getUint32(i3+=4)),s3.trackId=t3.getUint32(i3+=4),s3.duration=t3.getUint32(i3=i3+4+4)),s3.layer=t3.getUint16(i3=i3+4+8),s3.alternateGroup=t3.getUint16(i3+=2),s3.volume=t3.getUint8(i3+=2)+t3.getUint8(i3+1)/8,i3=i3+2+2,s3.matrix=new Uint32Array(e3.subarray(i3,i3+36)),s3.width=t3.getUint16(i3+=36)+t3.getUint16(i3+2)/65536,s3.height=t3.getUint16(i3+=4)+t3.getUint16(i3+2)/65536,s3},traf:function(e3){return{boxes:I2(e3)}},trak:function(e3){return{boxes:I2(e3)}},trex:function(e3){var t3=new DataView(e3.buffer,e3.byteOffset,e3.byteLength);return{version:e3[0],flags:new Uint8Array(e3.subarray(1,4)),trackId:t3.getUint32(4),defaultSampleDescriptionIndex:t3.getUint32(8),defaultSampleDuration:t3.getUint32(12),defaultSampleSize:t3.getUint32(16),sampleDependsOn:3&e3[20],sampleIsDependedOn:(192&e3[21])>>6,sampleHasRedundancy:(48&e3[21])>>4,samplePaddingValue:(14&e3[21])>>1,sampleIsDifferenceSample:!!(1&e3[21]),sampleDegradationPriority:t3.getUint16(22)}},trun:zt2,"url ":function(e3){return{version:e3[0],flags:new Uint8Array(e3.subarray(1,4))}},vmhd:function(e3){var t3=new DataView(e3.buffer,e3.byteOffset,e3.byteLength);return{version:e3[0],flags:new Uint8Array(e3.subarray(1,4)),graphicsmode:t3.getUint16(4),opcolor:new Uint16Array([t3.getUint16(6),t3.getUint16(8),t3.getUint16(10)])}}},I2=function(e3){for(var t3,i3,s3,r3,n3,a3=0,o3=[],l3=new ArrayBuffer(e3.length),d3=new Uint8Array(l3),h3=0;h3<e3.length;++h3)d3[h3]=e3[h3];for(t3=new DataView(l3);a3<e3.byteLength;)i3=t3.getUint32(a3),s3=Zt2(e3.subarray(a3+4,a3+8)),r3=1<i3?a3+i3:e3.byteLength,(n3=(k2[s3]||function(e4){return{data:e4}})(e3.subarray(a3+8,r3))).size=i3,n3.type=s3,o3.push(n3),a3=r3;return o3},ei2=function(e3,t3){var r3;return t3=t3||0,r3=new Array(2*t3+1).join(" "),e3.map(function(s3,e4){return r3+s3.type+"\n"+Object.keys(s3).filter(function(e5){return"type"!==e5&&"boxes"!==e5}).map(function(e5){var t4,i3=r3+"  "+e5+": ";return(e5=s3[e5])instanceof Uint8Array||e5 instanceof Uint32Array?(t4=Array.prototype.slice.call(new Uint8Array(e5.buffer,e5.byteOffset,e5.byteLength)).map(function(e6){return" "+("00"+e6.toString(16)).slice(-2)}).join("").match(/.{1,24}/g))?1===t4.length?i3+"<"+t4.join("").slice(1)+">":i3+"<\n"+t4.map(function(e6){return r3+"  "+e6}).join("\n")+"\n"+r3+"  >":i3+"<>":i3+JSON.stringify(e5,null,2).split("\n").map(function(e6,t5){return 0===t5?e6:r3+"  "+e6}).join("\n")}).join("\n")+(s3.boxes?"\n"+ei2(s3.boxes,t3+1):"")}).join("\n")},ti2=(Le2={inspect:I2,textify:ei2,parseType:Zt2,findBox:jt2,parseTraf:k2.traf,parseTfdt:k2.tfdt,parseHdlr:k2.hdlr,parseTfhd:k2.tfhd,parseTrun:k2.trun,parseSidx:k2.sidx},function(e3){for(var t3=0,i3=String.fromCharCode(e3[t3]),s3="";"\0"!==i3;)s3+=i3,t3++,i3=String.fromCharCode(e3[t3]);return s3+i3}),ii2=i2.getUint64,si2=function(e3){return void 0!==e3||null!==e3},ri2=(st2="undefined"!=typeof window?window:void 0!==ye2?ye2:"undefined"!=typeof self?self:{},t2),ni2=Pe2,x2=jt2,A2=qt2,ai2_parseEmsgBox=function(e3){var t3,i3,s3,r3,n3,a3,o3,l3=4,d3=e3[0],h3=(0===d3?(l3=(l3+=(r3=ti2(e3.subarray(l3))).length)+(n3=ti2(e3.subarray(l3))).length,s3=(h3=new DataView(e3.buffer)).getUint32(l3),o3=h3.getUint32(l3+=4),t3=h3.getUint32(l3+=4),i3=h3.getUint32(l3+=4),l3+=4):1===d3&&(s3=(h3=new DataView(e3.buffer)).getUint32(l3),a3=ii2(e3.subarray(l3+=4)),t3=h3.getUint32(l3+=8),i3=h3.getUint32(l3+=4),l3=(l3=(l3+=4)+(r3=ti2(e3.subarray(l3))).length)+(n3=ti2(e3.subarray(l3))).length),{scheme_id_uri:r3,value:n3,timescale:s3||1,presentation_time:a3,presentation_time_delta:o3,event_duration:t3,id:i3,message_data:new Uint8Array(e3.subarray(l3,e3.byteLength))});return n3="\0"!==(r3=h3).scheme_id_uri,a3=0===(s3=d3)&&si2(r3.presentation_time_delta)&&n3,o3=1===s3&&si2(r3.presentation_time)&&n3,!(1<s3)&&a3||o3?h3:void 0},ai2_scaleTime=function(e3,t3,i3,s3){return e3||0===e3?e3/t3:s3+i3/t3},oi2=Ht2,li2=zt2,di2=Vt2,hi2=i2.getUint64,ui2=T2=st2,ci2=et2.parseId3Frames,pi2=function(e3){var t3=0===e3[0]?12:20;return ri2(e3[t3]<<24|e3[1+t3]<<16|e3[2+t3]<<8|e3[3+t3])},mi2={findBox:x2,parseType:A2,timescale:function(e3){return x2(e3,["moov","trak"]).reduce(function(e4,t3){var i3,s3,r3=x2(t3,["tkhd"])[0];return r3&&(i3=r3[0],r3=ri2(r3[s3=0===i3?12:20]<<24|r3[1+s3]<<16|r3[2+s3]<<8|r3[3+s3]),t3=x2(t3,["mdia","mdhd"])[0])?(i3=t3[0],e4[r3]=ri2(t3[s3=0===i3?12:20]<<24|t3[1+s3]<<16|t3[2+s3]<<8|t3[3+s3]),e4):null},{})},startTime:function(n3,e3){return"bigint"==typeof(e3=x2(e3,["moof","traf"]).reduce(function(e4,t3){var i3=x2(t3,["tfhd"])[0],s3=(i3=ri2(i3[4]<<24|i3[5]<<16|i3[6]<<8|i3[7]),i3=n3[i3]||9e4,t3=x2(t3,["tfdt"])[0],new DataView(t3.buffer,t3.byteOffset,t3.byteLength));let r3;return"bigint"==typeof(t3=1===t3[0]?hi2(t3.subarray(4,12)):s3.getUint32(4))?r3=t3/ui2.BigInt(i3):"number"!=typeof t3||isNaN(t3)||(r3=t3/i3),(r3=r3<Number.MAX_SAFE_INTEGER?Number(r3):r3)<e4?r3:e4},1/0))||isFinite(e3)?e3:0},compositionStartTime:function(e3,t3){var i3,s3,r3=0,n3=0,a3=(t3=((t3=x2(t3,["moof","traf"]))&&t3.length&&(s3=x2(t3[0],["tfhd"])[0],a3=x2(t3[0],["trun"])[0],t3=x2(t3[0],["tfdt"])[0],s3&&(i3=oi2(s3).trackId),t3&&(r3=di2(t3).baseMediaDecodeTime),a3)&&(s3=li2(a3)).samples&&s3.samples.length&&(n3=s3.samples[0].compositionTimeOffset||0),e3[i3]||9e4),"bigint"==typeof r3&&(n3=ui2.BigInt(n3),t3=ui2.BigInt(t3)),(r3+n3)/t3);return"bigint"==typeof a3&&a3<Number.MAX_SAFE_INTEGER?Number(a3):a3},videoTrackIds:function(e3){e3=x2(e3,["moov","trak"]);var s3=[];return e3.forEach(function(e4){var t3=x2(e4,["mdia","hdlr"]),i3=x2(e4,["tkhd"]);t3.forEach(function(e5,t4){e5=A2(e5.subarray(8,12)),t4=i3[t4];"vide"===e5&&(t4=0===(e5=new DataView(t4.buffer,t4.byteOffset,t4.byteLength)).getUint8(0)?e5.getUint32(12):e5.getUint32(20),s3.push(t4))})}),s3},tracks:function(e3){e3=x2(e3,["moov","trak"]);var n3=[];return e3.forEach(function(e4){var t3,s3,i3={},r3=((r3=((s3=x2(e4,["tkhd"])[0])&&(r3=(s3=new DataView(s3.buffer,s3.byteOffset,s3.byteLength)).getUint8(0),i3.id=0===r3?s3.getUint32(12):s3.getUint32(20)),x2(e4,["mdia","hdlr"])[0]))&&(s3=A2(r3.subarray(8,12)),i3.type="vide"===s3?"video":"soun"===s3?"audio":s3),x2(e4,["mdia","minf","stbl","stsd"])[0]);(s3=(r3&&(s3=r3.subarray(8),i3.codec=A2(s3.subarray(4,8)),r3=x2(s3,[i3.codec])[0])&&(/^[asm]vc[1-9]$/i.test(i3.codec)?(t3=r3.subarray(78),"avcC"===A2(t3.subarray(4,8))&&11<t3.length?(i3.codec+=".",i3.codec+=ni2(t3[9]),i3.codec+=ni2(t3[10]),i3.codec+=ni2(t3[11])):i3.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(i3.codec)?(t3=r3.subarray(28),"esds"===A2(t3.subarray(4,8))&&20<t3.length&&0!==t3[19]?(i3.codec+="."+ni2(t3[19]),i3.codec+="."+ni2(t3[20]>>>2&63).replace(/^0/,"")):i3.codec="mp4a.40.2"):i3.codec=i3.codec.toLowerCase()),x2(e4,["mdia","mdhd"])[0]))&&(i3.timescale=pi2(s3)),n3.push(i3)}),n3},getTimescaleFromMediaHeader:pi2,getEmsgID3:function(e3,i3=0){return x2(e3,["emsg"]).map(e4=>{e4=ai2_parseEmsgBox(new Uint8Array(e4));var t3=ci2(e4.message_data);return{cueTime:ai2_scaleTime(e4.presentation_time,e4.timescale,e4.presentation_time_delta,i3),duration:ai2_scaleTime(e4.event_duration,e4.timescale),frames:t3}})}};let gi2=Le2.parseTrun,fi2=mi2.findBox;var yi2=T2,_i2=(g2={getMdatTrafPairs:function(e3){var i3=fi2(e3,["moof","traf"]),s3=(e3=fi2(e3,["mdat"]),[]);return e3.forEach(function(e4,t3){t3=i3[t3],s3.push({mdat:e4,traf:t3})}),s3},parseSamples:function(e3,t3,i3){var s3=t3,r3=i3.defaultSampleDuration||0,n3=i3.defaultSampleSize||0,a3=i3.trackId,o3=[];return e3.forEach(function(e4){(e4=gi2(e4).samples).forEach(function(e5){void 0===e5.duration&&(e5.duration=r3),void 0===e5.size&&(e5.size=n3),e5.trackId=a3,e5.dts=s3,void 0===e5.compositionTimeOffset&&(e5.compositionTimeOffset=0),"bigint"==typeof s3?(e5.pts=s3+yi2.BigInt(e5.compositionTimeOffset),s3+=yi2.BigInt(e5.duration)):(e5.pts=s3+e5.compositionTimeOffset,s3+=e5.duration)}),o3=o3.concat(e4)}),o3}},Re2.discardEmulationPreventionBytes),vi2=c2.CaptionStream,bi2=jt2,Ti2=Vt2,Si2=Ht2,{getMdatTrafPairs:wi2,parseSamples:Ei2}=g2,Ci2=function(e3,t3){for(var i3=e3,s3=0;s3<t3.length;s3++){var r3=t3[s3];if(i3<r3.size)return r3;i3-=r3.size}return null},Ii2=function(e3,n3){var a3={};return wi2(e3).forEach(function(e4){var t3=e4.mdat,i3=(e4=e4.traf,bi2(e4,["tfhd"])),s3=(i3=Si2(i3[0])).trackId,r3=0<(r3=bi2(e4,["tfdt"])).length?Ti2(r3[0]).baseMediaDecodeTime:0;e4=bi2(e4,["trun"]);n3===s3&&0<e4.length&&(r3=function(e3,t3,i3){for(var s3,r3,n3=new DataView(e3.buffer,e3.byteOffset,e3.byteLength),a3={logs:[],seiNals:[]},o3=0;o3+4<e3.length;o3+=s3)if(s3=n3.getUint32(o3),o3+=4,!(s3<=0))switch(31&e3[o3]){case 6:var l3=e3.subarray(o3+1,o3+1+s3),d3=Ci2(o3,t3);if(l3={nalUnitType:"sei_rbsp",size:s3,data:l3,escapedRBSP:_i2(l3),trackId:i3},d3)l3.pts=d3.pts,l3.dts=d3.dts,r3=d3;else{if(!r3){a3.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+o3+" for trackId "+i3+". See mux.js#223."});break}l3.pts=r3.pts,l3.dts=r3.dts}a3.seiNals.push(l3)}return a3}(t3,e4=Ei2(e4,r3,i3),s3),a3[s3]||(a3[s3]={seiNals:[],logs:[]}),a3[s3].seiNals=a3[s3].seiNals.concat(r3.seiNals),a3[s3].logs=a3[s3].logs.concat(r3.logs))}),a3},xi2=function(){var t3,a3,o3,l3,d3,i3,s3=!1;this.isInitialized=function(){return s3},this.init=function(e3){t3=new vi2,s3=!0,i3=!!e3&&e3.isPartial,t3.on("data",function(e4){e4.startTime=e4.startPts/l3,e4.endTime=e4.endPts/l3,d3.captions.push(e4),d3.captionStreams[e4.stream]=!0}),t3.on("log",function(e4){d3.logs.push(e4)})},this.isNewInit=function(e3,t4){return!(e3&&0===e3.length||t4&&"object"==typeof t4&&0===Object.keys(t4).length||o3===e3[0]&&l3===t4[o3])},this.parse=function(e3,t4,i4){var s4,r3;if(!this.isInitialized())return null;if(!t4||!i4)return null;if(this.isNewInit(t4,i4))o3=t4[0],l3=i4[o3];else if(null===o3||!l3)return a3.push(e3),null;for(;0<a3.length;){var n3=a3.shift();this.parse(n3,t4,i4)}return r3=l3,(s4=null===(s4=o3)?null:{seiNals:(e3=Ii2(e3,s4)[s4]||{}).seiNals,logs:e3.logs,timescale:r3})&&s4.logs&&(d3.logs=d3.logs.concat(s4.logs)),null!==s4&&s4.seiNals?(this.pushNals(s4.seiNals),this.flushStream(),d3):d3.logs.length?{logs:d3.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(e3){if(!this.isInitialized()||!e3||0===e3.length)return null;e3.forEach(function(e4){t3.push(e4)})},this.flushStream=function(){if(!this.isInitialized())return null;i3?t3.partialFlush():t3.flush()},this.clearParsedCaptions=function(){d3.captions=[],d3.captionStreams={},d3.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;t3.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){a3=[],l3=o3=null,d3?this.clearParsedCaptions():d3={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()};let Ai2=Le2.parseTfdt,D2=jt2,Di2=mi2.getTimescaleFromMediaHeader,{parseSamples:Pi2,getMdatTrafPairs:Li2}=g2;function Oi2(e3){return(31&e3[1])<<8|e3[2]}function Ri2(e3){return!!(64&e3[1])}function Ni2(e3){var t3=0;return 1<(48&e3[3])>>>4&&(t3+=e3[4]+1),t3}function Mi2(e3){switch(e3){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}}var Ui2=function(){let d3=9e4;this.init=function(e3){(e3=D2(e3,["moov","trak","mdia","mdhd"])[0])&&(d3=Di2(e3))},this.parseSegment=function(e3){let l3=[];e3=Li2(e3);let n3=0;return e3.forEach(function(e4){let i3=e4.mdat;e4=e4.traf;var s3=D2(e4,["tfdt"])[0],r3=D2(e4,["tfhd"])[0];e4=D2(e4,["trun"]);if(s3&&(s3=Ai2(s3),n3=s3.baseMediaDecodeTime),e4.length&&r3){s3=Pi2(e4,n3,r3);let t3=0;s3.forEach(function(a3){let o3=new TextDecoder("utf-8");var e5=i3.slice(t3,t3+a3.size);D2(e5,["vtte"])[0]||D2(e5,["vttc"]).forEach(function(e6){var t4=D2(e6,["payl"])[0],i4=(e6=D2(e6,["sttg"])[0],a3.pts/d3),s4=(a3.pts+a3.duration)/d3;let r4,n4;if(t4)try{r4=o3.decode(t4)}catch(e7){}if(e6)try{n4=o3.decode(e6)}catch(e7){}a3.duration&&r4&&l3.push({cueText:r4,start:i4,end:s4,settings:n4})}),t3+=a3.size})}}),l3}},Bi2=He2,Fi2=He2,P2=Ye2,L2={},O2=(L2.ts={parseType:function(e3,t3){return 0===(e3=Oi2(e3))?"pat":e3===t3?"pmt":t3?"pes":null},parsePat:function(e3){var t3=Ri2(e3),i3=4+Ni2(e3);return t3&&(i3+=e3[i3]+1),(31&e3[i3+10])<<8|e3[i3+11]},parsePmt:function(e3){var t3={},i3=Ri2(e3),s3=4+Ni2(e3);if(i3&&(s3+=e3[s3]+1),1&e3[s3+5]){for(var r3=3+((15&e3[s3+1])<<8|e3[s3+2])-4,n3=12+((15&e3[s3+10])<<8|e3[s3+11]);n3<r3;){var a3=s3+n3;t3[(31&e3[a3+1])<<8|e3[a3+2]]=e3[a3],n3+=5+((15&e3[a3+3])<<8|e3[a3+4])}return t3}},parsePayloadUnitStartIndicator:Ri2,parsePesType:function(e3,t3){switch(t3[Oi2(e3)]){case Bi2.H264_STREAM_TYPE:return"video";case Bi2.ADTS_STREAM_TYPE:return"audio";case Bi2.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(e3){var t3,i3,s3;return!Ri2(e3)||(t3=4+Ni2(e3))>=e3.byteLength?null:(i3=null,192&(s3=e3[t3+7])&&((i3={}).pts=(14&e3[t3+9])<<27|(255&e3[t3+10])<<20|(254&e3[t3+11])<<12|(255&e3[t3+12])<<5|(254&e3[t3+13])>>>3,i3.pts*=4,i3.pts+=(6&e3[t3+13])>>>1,i3.dts=i3.pts,64&s3)&&(i3.dts=(14&e3[t3+14])<<27|(255&e3[t3+15])<<20|(254&e3[t3+16])<<12|(255&e3[t3+17])<<5|(254&e3[t3+18])>>>3,i3.dts*=4,i3.dts+=(6&e3[t3+18])>>>1),i3)},videoPacketContainsKeyFrame:function(e3){for(var t3=4+Ni2(e3),i3=e3.subarray(t3),s3=0,r3=0,n3=!1;r3<i3.byteLength-3;r3++)if(1===i3[r3+2]){s3=r3+5;break}for(;s3<i3.byteLength;)switch(i3[s3]){case 0:if(0!==i3[s3-1])s3+=2;else if(0!==i3[s3-2])s3++;else{for(r3+3!==s3-2&&"slice_layer_without_partitioning_rbsp_idr"===Mi2(31&i3[r3+3])&&(n3=!0);1!==i3[++s3]&&s3<i3.length;);r3=s3-2,s3+=3}break;case 1:0!==i3[s3-1]||0!==i3[s3-2]||("slice_layer_without_partitioning_rbsp_idr"===Mi2(31&i3[r3+3])&&(n3=!0),r3=s3-2),s3+=3;break;default:s3+=3}return i3=i3.subarray(r3),s3-=r3,r3=0,!!(i3&&3<i3.byteLength&&"slice_layer_without_partitioning_rbsp_idr"===Mi2(31&i3[r3+3]))||n3}},L2.aac=v2,u2.ONE_SECOND_IN_TS),R2=188,ji2=function(e3,t3,i3){for(var s3,r3,n3,a3,o3=0,l3=R2,d3=!1;l3<=e3.byteLength;)if(71!==e3[o3]||71!==e3[l3]&&l3!==e3.byteLength)o3++,l3++;else{if(s3=e3.subarray(o3,l3),"pes"===L2.ts.parseType(s3,t3.pid)&&(r3=L2.ts.parsePesType(s3,t3.table),n3=L2.ts.parsePayloadUnitStartIndicator(s3),"audio"===r3)&&n3&&(a3=L2.ts.parsePesTime(s3))&&(a3.type="audio",i3.audio.push(a3),d3=!0),d3)break;o3+=R2,l3+=R2}for(o3=(l3=e3.byteLength)-R2,d3=!1;0<=o3;)if(71!==e3[o3]||71!==e3[l3]&&l3!==e3.byteLength)o3--,l3--;else{if(s3=e3.subarray(o3,l3),"pes"===L2.ts.parseType(s3,t3.pid)&&(r3=L2.ts.parsePesType(s3,t3.table),n3=L2.ts.parsePayloadUnitStartIndicator(s3),"audio"===r3)&&n3&&(a3=L2.ts.parsePesTime(s3))&&(a3.type="audio",i3.audio.push(a3),d3=!0),d3)break;o3-=R2,l3-=R2}},Vi2=function(e3,t3,i3){for(var s3,r3,n3,a3,o3,l3,d3,h3,u3=0,c3=R2,p3=!1,m3={data:[],size:0};c3<e3.byteLength;)if(71===e3[u3]&&71===e3[c3]){if(s3=e3.subarray(u3,c3),"pes"===L2.ts.parseType(s3,t3.pid)&&(r3=L2.ts.parsePesType(s3,t3.table),n3=L2.ts.parsePayloadUnitStartIndicator(s3),"video"===r3&&(n3&&!p3&&(a3=L2.ts.parsePesTime(s3))&&(a3.type="video",i3.video.push(a3),p3=!0),!i3.firstKeyFrame))){if(n3&&0!==m3.size){for(o3=new Uint8Array(m3.size),l3=0;m3.data.length;)d3=m3.data.shift(),o3.set(d3,l3),l3+=d3.byteLength;L2.ts.videoPacketContainsKeyFrame(o3)&&(h3=L2.ts.parsePesTime(o3))&&(i3.firstKeyFrame=h3,i3.firstKeyFrame.type="video"),m3.size=0}m3.data.push(s3),m3.size+=s3.byteLength}if(p3&&i3.firstKeyFrame)break;u3+=R2,c3+=R2}else u3++,c3++;for(u3=(c3=e3.byteLength)-R2,p3=!1;0<=u3;)if(71===e3[u3]&&71===e3[c3]){if(s3=e3.subarray(u3,c3),"pes"===L2.ts.parseType(s3,t3.pid)&&(r3=L2.ts.parsePesType(s3,t3.table),n3=L2.ts.parsePayloadUnitStartIndicator(s3),"video"===r3)&&n3&&(a3=L2.ts.parsePesTime(s3))&&(a3.type="video",i3.video.push(a3),p3=!0),p3)break;u3-=R2,c3-=R2}else u3--,c3--},Hi2=function(e3,t3){var i3,s3,r3;e3=(L2.aac.isLikelyAacData(e3)?function(e4){for(var t4,i4,s4=!1,r4=0,n3=null,a3=null,o3=0,l3=0;3<=e4.length-l3;){switch(L2.aac.parseType(e4,l3)){case"timed-metadata":e4.length-l3<10||(o3=L2.aac.parseId3TagSize(e4,l3))>e4.length?s4=!0:(null===a3&&(t4=e4.subarray(l3,l3+o3),a3=L2.aac.parseAacTimestamp(t4)),l3+=o3);break;case"audio":e4.length-l3<7||(o3=L2.aac.parseAdtsSize(e4,l3))>e4.length?s4=!0:(null===n3&&(t4=e4.subarray(l3,l3+o3),n3=L2.aac.parseSampleRate(t4)),r4++,l3+=o3);break;default:l3++}if(s4)return null}return null===n3||null===a3?null:{audio:[{type:"audio",dts:a3,pts:a3},{type:"audio",dts:a3+1024*r4*(i4=O2/n3),pts:a3+1024*r4*i4}]}}:function(e4){var t4,i4={pid:null,table:null},s4={};for(t4 in function(e3,t3){for(var i3,s3=0,r3=R2;r3<e3.byteLength;)if(71===e3[s3]&&71===e3[r3]){switch(i3=e3.subarray(s3,r3),L2.ts.parseType(i3,t3.pid)){case"pat":t3.pid=L2.ts.parsePat(i3);break;case"pmt":var n3=L2.ts.parsePmt(i3);t3.table=t3.table||{},Object.keys(n3).forEach(function(e4){t3.table[e4]=n3[e4]})}s3+=R2,r3+=R2}else s3++,r3++}(e4,i4),i4.table)if(i4.table.hasOwnProperty(t4))switch(i4.table[t4]){case Fi2.H264_STREAM_TYPE:s4.video=[],Vi2(e4,i4,s4),0===s4.video.length&&delete s4.video;break;case Fi2.ADTS_STREAM_TYPE:s4.audio=[],ji2(e4,i4,s4),0===s4.audio.length&&delete s4.audio}return s4})(e3);return e3&&(e3.audio||e3.video)?((i3=e3).audio&&i3.audio.length&&(void 0!==(s3=t3)&&!isNaN(s3)||(s3=i3.audio[0].dts),i3.audio.forEach(function(e4){e4.dts=P2(e4.dts,s3),e4.pts=P2(e4.pts,s3),e4.dtsTime=e4.dts/O2,e4.ptsTime=e4.pts/O2})),i3.video&&i3.video.length&&(void 0!==(r3=t3)&&!isNaN(r3)||(r3=i3.video[0].dts),i3.video.forEach(function(e4){e4.dts=P2(e4.dts,r3),e4.pts=P2(e4.pts,r3),e4.dtsTime=e4.dts/O2,e4.ptsTime=e4.pts/O2}),i3.firstKeyFrame)&&((t3=i3.firstKeyFrame).dts=P2(t3.dts,r3),t3.pts=P2(t3.pts,r3),t3.dtsTime=t3.dts/O2,t3.ptsTime=t3.pts/O2),e3):null};class zi2{constructor(e3,t3){this.options=t3||{},this.self=e3,this.init()}init(){var i3,e3;this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new $t2(this.options),i3=this.self,(e3=this.transmuxer).on("data",function(e4){var t3=e4.initSegment;e4.initSegment={data:t3.buffer,byteOffset:t3.byteOffset,byteLength:t3.byteLength},t3=e4.data;e4.data=t3.buffer,i3.postMessage({action:"data",segment:e4,byteOffset:t3.byteOffset,byteLength:t3.byteLength},[e4.data])}),e3.on("done",function(e4){i3.postMessage({action:"done"})}),e3.on("gopInfo",function(e4){i3.postMessage({action:"gopInfo",gopInfo:e4})}),e3.on("videoSegmentTimingInfo",function(e4){var t3={start:{decode:u2.videoTsToSeconds(e4.start.dts),presentation:u2.videoTsToSeconds(e4.start.pts)},end:{decode:u2.videoTsToSeconds(e4.end.dts),presentation:u2.videoTsToSeconds(e4.end.pts)},baseMediaDecodeTime:u2.videoTsToSeconds(e4.baseMediaDecodeTime)};e4.prependedContentDuration&&(t3.prependedContentDuration=u2.videoTsToSeconds(e4.prependedContentDuration)),i3.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:t3})}),e3.on("audioSegmentTimingInfo",function(e4){var t3={start:{decode:u2.videoTsToSeconds(e4.start.dts),presentation:u2.videoTsToSeconds(e4.start.pts)},end:{decode:u2.videoTsToSeconds(e4.end.dts),presentation:u2.videoTsToSeconds(e4.end.pts)},baseMediaDecodeTime:u2.videoTsToSeconds(e4.baseMediaDecodeTime)};e4.prependedContentDuration&&(t3.prependedContentDuration=u2.videoTsToSeconds(e4.prependedContentDuration)),i3.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:t3})}),e3.on("id3Frame",function(e4){i3.postMessage({action:"id3Frame",id3Frame:e4})}),e3.on("caption",function(e4){i3.postMessage({action:"caption",caption:e4})}),e3.on("trackinfo",function(e4){i3.postMessage({action:"trackinfo",trackInfo:e4})}),e3.on("audioTimingInfo",function(e4){i3.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:u2.videoTsToSeconds(e4.start),end:u2.videoTsToSeconds(e4.end)}})}),e3.on("videoTimingInfo",function(e4){i3.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:u2.videoTsToSeconds(e4.start),end:u2.videoTsToSeconds(e4.end)}})}),e3.on("log",function(e4){i3.postMessage({action:"log",log:e4})})}pushMp4Captions(e3){this.captionParser||(this.captionParser=new xi2,this.captionParser.init());var t3=new Uint8Array(e3.data,e3.byteOffset,e3.byteLength);e3=this.captionParser.parse(t3,e3.trackIds,e3.timescales);this.self.postMessage({action:"mp4Captions",captions:e3&&e3.captions||[],logs:e3&&e3.logs||[],data:t3.buffer},[t3.buffer])}initMp4WebVttParser(e3){this.webVttParser||(this.webVttParser=new Ui2),e3=new Uint8Array(e3.data,e3.byteOffset,e3.byteLength),this.webVttParser.init(e3)}getMp4WebVttText(e3){this.webVttParser||(this.webVttParser=new Ui2);e3=new Uint8Array(e3.data,e3.byteOffset,e3.byteLength);var t3=this.webVttParser.parseSegment(e3);this.self.postMessage({action:"getMp4WebVttText",mp4VttCues:t3||[],data:e3.buffer},[e3.buffer])}probeMp4StartTime({timescales:e3,data:t3}){e3=mi2.startTime(e3,t3),this.self.postMessage({action:"probeMp4StartTime",startTime:e3,data:t3},[t3.buffer])}probeMp4Tracks({data:e3}){var t3=mi2.tracks(e3);this.self.postMessage({action:"probeMp4Tracks",tracks:t3,data:e3},[e3.buffer])}probeEmsgID3({data:e3,offset:t3}){t3=mi2.getEmsgID3(e3,t3),this.self.postMessage({action:"probeEmsgID3",id3Frames:t3,emsgData:e3},[e3.buffer])}probeTs({data:e3,baseStartTime:t3}){t3="number"!=typeof t3||isNaN(t3)?void 0:t3*u2.ONE_SECOND_IN_TS;let i3=null;(t3=Hi2(e3,t3))&&((i3={hasVideo:t3.video&&2===t3.video.length||!1,hasAudio:t3.audio&&2===t3.audio.length||!1}).hasVideo&&(i3.videoStart=t3.video[0].ptsTime),i3.hasAudio)&&(i3.audioStart=t3.audio[0].ptsTime),this.self.postMessage({action:"probeTs",result:i3,data:e3},[e3.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(e3){e3=new Uint8Array(e3.data,e3.byteOffset,e3.byteLength),this.transmuxer.push(e3)}reset(){this.transmuxer.reset()}setTimestampOffset(e3){e3=e3.timestampOffset||0,this.transmuxer.setBaseMediaDecodeTime(Math.round(u2.secondsToVideoTs(e3)))}setAudioAppendStart(e3){this.transmuxer.setAudioAppendStart(Math.ceil(u2.secondsToVideoTs(e3.appendStart)))}setRemux(e3){this.transmuxer.setRemux(e3.remux)}flush(e3){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(e3){this.transmuxer.alignGopsWith(e3.gopsToAlignWith.slice())}}self.onmessage=function(e3){"init"===e3.data.action&&e3.data.options?this.messageHandlers=new zi2(self,e3.data.options):(this.messageHandlers||(this.messageHandlers=new zi2(self)),e3.data&&e3.data.action&&"init"!==e3.data.action&&this.messageHandlers[e3.data.action]&&this.messageHandlers[e3.data.action](e3.data))}})));let pu=t2=>{let{transmuxer:i2,bytes:e2,audioAppendStart:s2,gopsToAlignWith:r2,remux:n2,onData:a2,onTrackInfo:o2,onAudioTimingInfo:l2,onVideoTimingInfo:d2,onVideoSegmentTimingInfo:h2,onAudioSegmentTimingInfo:u2,onId3:c2,onCaptions:p2,onDone:m2,onEndedTimeline:g2,onTransmuxerLog:f2,isEndOfTimeline:y2,segment:_2,triggerSegmentEventFn:v2}=t2,b2={buffer:[]},T2=y2;var S2,w2;i2.onmessage=e3=>{i2.currentTransmux!==t2||("data"===e3.data.action&&((e2,t2,i2)=>{var{type:s2,initSegment:r2,captions:n2,captionStreams:a2,metadata:o2,videoFrameDtsTime:l2,videoFramePtsTime:d2}=e2.data.segment,n2=(t2.buffer.push({captions:n2,captionStreams:a2,metadata:o2}),t2=e2.data.segment.boxes||{data:e2.data.segment.data},{type:s2,data:new Uint8Array(t2.data,t2.data.byteOffset,t2.data.byteLength),initSegment:new Uint8Array(r2.data,r2.byteOffset,r2.byteLength)});void 0!==l2&&(n2.videoFrameDtsTime=l2),void 0!==d2&&(n2.videoFramePtsTime=d2),i2(n2)})(e3,b2,a2),"trackinfo"===e3.data.action&&o2(e3.data.trackInfo),"gopInfo"===e3.data.action&&((e2,t2)=>{t2.gopInfo=e2.data.gopInfo})(e3,b2),"audioTimingInfo"===e3.data.action&&l2(e3.data.audioTimingInfo),"videoTimingInfo"===e3.data.action&&d2(e3.data.videoTimingInfo),"videoSegmentTimingInfo"===e3.data.action&&h2(e3.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===e3.data.action&&u2(e3.data.audioSegmentTimingInfo),"id3Frame"===e3.data.action&&c2([e3.data.id3Frame],e3.data.id3Frame.dispatchType),"caption"===e3.data.action&&p2(e3.data.caption),"endedtimeline"===e3.data.action&&(T2=!1,g2()),"log"===e3.data.action&&f2(e3.data.log),"transmuxed"!==e3.data.type)||T2||(i2.onmessage=null,(({transmuxedData:e2,callback:t2})=>{e2.buffer=[],t2(e2)})({transmuxedData:b2,callback:m2}),mu(i2))},i2.onerror=()=>{var e3={message:"Received an error message from the transmuxer worker",metadata:{errorType:E.Error.StreamingFailedToTransmuxSegment,segmentInfo:ic({segment:_2})}};m2(null,e3)},s2&&i2.postMessage({action:"setAudioAppendStart",appendStart:s2}),Array.isArray(r2)&&i2.postMessage({action:"alignGopsWith",gopsToAlignWith:r2}),void 0!==n2&&i2.postMessage({action:"setRemux",remux:n2}),e2.byteLength&&(S2=e2 instanceof ArrayBuffer?e2:e2.buffer,w2=e2 instanceof ArrayBuffer?0:e2.byteOffset,v2({type:"segmenttransmuxingstart",segment:_2}),i2.postMessage({action:"push",data:S2,byteOffset:w2,byteLength:e2.byteLength},[S2])),y2&&i2.postMessage({action:"endTimeline"}),i2.postMessage({action:"flush"})},mu=e2=>{e2.currentTransmux=null,e2.transmuxQueue.length&&(e2.currentTransmux=e2.transmuxQueue.shift(),"function"==typeof e2.currentTransmux?e2.currentTransmux():pu(e2.currentTransmux))},gu=(e2,t2)=>{e2.postMessage({action:t2}),mu(e2)},yu=e2=>{e2.transmuxer.currentTransmux?e2.transmuxer.transmuxQueue.push(e2):(e2.transmuxer.currentTransmux=e2,pu(e2))};var _u=e2=>{((e2,t2)=>{t2.currentTransmux?t2.transmuxQueue.push(gu.bind(null,t2,e2)):(t2.currentTransmux=e2,gu(t2,e2))})("reset",e2)},vu=e2=>{let t2=new du,i2=(t2.currentTransmux=null,t2.transmuxQueue=[],t2.terminate);return t2.terminate=()=>(t2.currentTransmux=null,t2.transmuxQueue.length=0,i2.call(t2)),t2.postMessage({action:"init",options:e2}),t2};function bu(e2,t2){return(e2=e2&&window.getComputedStyle(e2))?e2[t2]:""}function Tu(e2,t2){let i2,s2;return i2=(i2=e2.attributes.BANDWIDTH?e2.attributes.BANDWIDTH:i2)||window.Number.MAX_VALUE,s2=(s2=t2.attributes.BANDWIDTH?t2.attributes.BANDWIDTH:s2)||window.Number.MAX_VALUE,i2-s2}let Su=function(t2){let i2=t2.transmuxer,s2=t2.endAction||t2.action,r2=t2.callback;var e2,n2=f({},t2,{endAction:null,transmuxer:null,callback:null});let a2=e3=>{e3.data.action===s2&&(i2.removeEventListener("message",a2),e3.data.data&&(e3.data.data=new Uint8Array(e3.data.data,t2.byteOffset||0,t2.byteLength||e3.data.data.byteLength),t2.data)&&(t2.data=e3.data.data),r2(e3.data))};i2.addEventListener("message",a2),t2.data?(e2=t2.data instanceof ArrayBuffer,n2.byteOffset=e2?0:t2.data.byteOffset,n2.byteLength=t2.data.byteLength,e2=[e2?t2.data:t2.data.buffer],i2.postMessage(n2,e2)):i2.postMessage(n2)},wu_FAILURE=2,wu_TIMEOUT=-101,wu_ABORTED=-102,Cu=e2=>{e2.forEach(e3=>{e3.abort()})},xu=(e2,t2)=>{var i2=t2.requestType;i2=Eh({requestType:i2,request:t2,error:e2});return t2.timedout?{status:t2.status,message:"HLS request timed-out at URL: "+t2.uri,code:wu_TIMEOUT,xhr:t2,metadata:i2}:t2.aborted?{status:t2.status,message:"HLS request aborted at URL: "+t2.uri,code:wu_ABORTED,xhr:t2,metadata:i2}:e2?{status:t2.status,message:"HLS request errored at URL: "+t2.uri,code:wu_FAILURE,xhr:t2,metadata:i2}:"arraybuffer"===t2.responseType&&0===t2.response.byteLength?{status:t2.status,message:"Empty HLS response at URL: "+t2.uri,code:wu_FAILURE,xhr:t2,metadata:i2}:null},Au=(r2,n2,a2,o2)=>(e2,t2)=>{var i2=t2.response;if(e2=xu(e2,t2))return a2(e2,r2);if(16!==i2.byteLength)return a2({status:t2.status,message:"Invalid HLS key at URL: "+t2.uri,code:wu_FAILURE,xhr:t2},r2);e2=new DataView(i2);var s2=new Uint32Array([e2.getUint32(0),e2.getUint32(4),e2.getUint32(8),e2.getUint32(12)]);for(let e3=0;e3<n2.length;e3++)n2[e3].bytes=s2;return i2={uri:t2.uri},o2({type:"segmentkeyloadcomplete",segment:r2,keyInfo:i2}),a2(null,r2)},Lu=(i2,s2)=>{var e2,t2=Od(i2.map.bytes);if("mp4"!==t2)return e2=i2.map.resolvedUri||i2.map.uri,s2({internal:!0,message:`Found unsupported ${t2=t2||"unknown"} container for initialization segment at URL: `+e2,code:wu_FAILURE,metadata:{mediaType:t2}});Su({action:"probeMp4Tracks",data:i2.map.bytes,transmuxer:i2.transmuxer,callback:({tracks:e3,data:t3})=>(i2.map.bytes=t3,e3.forEach(function(e4){i2.map.tracks=i2.map.tracks||{},i2.map.tracks[e4.type]||("number"==typeof(i2.map.tracks[e4.type]=e4).id&&e4.timescale&&(i2.map.timescales=i2.map.timescales||{},i2.map.timescales[e4.id]=e4.timescale),"text"===e4.type&&((e2,t2)=>{"wvtt"===t2&&e2.transmuxer.postMessage({action:"initMp4WebVttParser",data:e2.map.bytes})})(i2,e4.codec))}),s2(null))})},Ru=({segment:n2,bytes:a2,trackInfoFn:e2,timingInfoFn:o2,videoSegmentTimingInfoFn:t2,audioSegmentTimingInfoFn:i2,id3Fn:l2,captionsFn:d2,isEndOfTimeline:s2,endedTimelineFn:r2,dataFn:h2,doneFn:u2,onTransmuxerLog:c2,triggerSegmentEventFn:p2})=>{let m2=new Uint8Array(a2);if(function(e2){return 0<vd(e2,["moof"]).length}(m2)){n2.isFmp4=!0;let i3=n2.map.tracks;if(i3.text&&(!i3.audio||!i3.video))return h2(n2,{data:m2,type:"text"}),void((i2,e2,s2)=>{"wvtt"===e2&&Su({action:"getMp4WebVttText",data:i2.bytes,transmuxer:i2.transmuxer,callback:({data:e3,mp4VttCues:t2})=>{i2.bytes=e3,s2(null,i2,{mp4VttCues:t2})}})})(n2,i3.text.codec,u2);let s3={isFmp4:!0,hasVideo:!!i3.video,hasAudio:!!i3.audio},r3=(i3.audio&&i3.audio.codec&&"enca"!==i3.audio.codec&&(s3.audioCodec=i3.audio.codec),i3.video&&i3.video.codec&&"encv"!==i3.video.codec&&(s3.videoCodec=i3.video.codec),i3.video&&i3.audio&&(s3.isMuxed=!0),e2(n2,s3),(e3,t3)=>{h2(n2,{data:m2,type:s3.hasAudio&&!s3.isMuxed?"audio":"video"}),t3&&t3.length&&l2(n2,t3),e3&&e3.length&&d2(n2,e3),u2(null,n2,{})});Su({action:"probeMp4StartTime",timescales:n2.map.timescales,data:m2,transmuxer:n2.transmuxer,callback:({data:e3,startTime:t3})=>{a2=e3.buffer,n2.bytes=m2=e3,s3.hasAudio&&!s3.isMuxed&&o2(n2,"audio","start",t3),s3.hasVideo&&o2(n2,"video","start",t3),Su({action:"probeEmsgID3",data:m2,transmuxer:n2.transmuxer,offset:t3,callback:({emsgData:e4,id3Frames:t4})=>{a2=e4.buffer,n2.bytes=m2=e4,i3.video&&e4.byteLength&&n2.transmuxer?Su({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:n2.transmuxer,data:m2,timescales:n2.map.timescales,trackIds:[i3.video.id],callback:e5=>{a2=e5.data.buffer,n2.bytes=m2=e5.data,e5.logs.forEach(function(e6){c2(L(e6,{stream:"mp4CaptionParser"}))}),r3(e5.captions,t4)}}):r3(void 0,t4)}})}})}else n2.transmuxer?(void 0===n2.container&&(n2.container=Od(m2)),"ts"!==n2.container&&"aac"!==n2.container?(e2(n2,{hasAudio:!1,hasVideo:!1}),u2(null,n2,{})):(({segment:i2,bytes:t2,trackInfoFn:s2,timingInfoFn:e2,videoSegmentTimingInfoFn:r2,audioSegmentTimingInfoFn:n2,id3Fn:a2,captionsFn:o2,isEndOfTimeline:l2,endedTimelineFn:d2,dataFn:h2,doneFn:u2,onTransmuxerLog:c2,triggerSegmentEventFn:p2})=>{var m2=i2.map&&i2.map.tracks||{};let g2=Boolean(m2.audio&&m2.video),f2=e2.bind(null,i2,"audio","start"),y2=e2.bind(null,i2,"audio","end"),_2=e2.bind(null,i2,"video","start"),v2=e2.bind(null,i2,"video","end");Su({action:"probeTs",transmuxer:i2.transmuxer,data:t2,baseStartTime:i2.baseStartTime,callback:e3=>{i2.bytes=t2=e3.data,(e3=e3.result)&&(s2(i2,{hasAudio:e3.hasAudio,hasVideo:e3.hasVideo,isMuxed:g2}),s2=null),yu({bytes:t2,transmuxer:i2.transmuxer,audioAppendStart:i2.audioAppendStart,gopsToAlignWith:i2.gopsToAlignWith,remux:g2,onData:e4=>{e4.type="combined"===e4.type?"video":e4.type,h2(i2,e4)},onTrackInfo:e4=>{s2&&(g2&&(e4.isMuxed=!0),s2(i2,e4))},onAudioTimingInfo:e4=>{f2&&void 0!==e4.start&&(f2(e4.start),f2=null),y2&&void 0!==e4.end&&y2(e4.end)},onVideoTimingInfo:e4=>{_2&&void 0!==e4.start&&(_2(e4.start),_2=null),v2&&void 0!==e4.end&&v2(e4.end)},onVideoSegmentTimingInfo:e4=>{var t3={pts:{start:e4.start.presentation,end:e4.end.presentation},dts:{start:e4.start.decode,end:e4.end.decode}};p2({type:"segmenttransmuxingtiminginfoavailable",segment:i2,timingInfo:t3}),r2(e4)},onAudioSegmentTimingInfo:e4=>{var t3={pts:{start:e4.start.pts,end:e4.end.pts},dts:{start:e4.start.dts,end:e4.end.dts}};p2({type:"segmenttransmuxingtiminginfoavailable",segment:i2,timingInfo:t3}),n2(e4)},onId3:(e4,t3)=>{a2(i2,e4,t3)},onCaptions:e4=>{o2(i2,[e4])},isEndOfTimeline:l2,onEndedTimeline:()=>{d2()},onTransmuxerLog:c2,onDone:(e4,t3)=>{u2&&(e4.type="combined"===e4.type?"video":e4.type,p2({type:"segmenttransmuxingcomplete",segment:i2}),u2(t3,i2,e4))},segment:i2,triggerSegmentEventFn:p2})}})})({segment:n2,bytes:a2,trackInfoFn:e2,timingInfoFn:o2,videoSegmentTimingInfoFn:t2,audioSegmentTimingInfoFn:i2,id3Fn:l2,captionsFn:d2,isEndOfTimeline:s2,endedTimelineFn:r2,dataFn:h2,doneFn:u2,onTransmuxerLog:c2,triggerSegmentEventFn:p2})):u2(null,n2,{})},Nu=function({id:t2,key:e2,encryptedBytes:i2,decryptionWorker:s2,segment:r2,doneFn:n2},a2){let l2,o2=e3=>{e3.data.source===t2&&(s2.removeEventListener("message",o2),e3=e3.data.decrypted,a2(new Uint8Array(e3.bytes,e3.byteOffset,e3.byteLength)))};s2.onerror=()=>{var e3="An error occurred in the decryption worker",t3=ic({segment:r2});e3={message:e3,metadata:{error:new Error(e3),errorType:E.Error.StreamingFailedToDecryptSegment,segmentInfo:t3,keyInfo:{uri:r2.key.resolvedUri||r2.map.key.resolvedUri}}};n2(e3,r2)},s2.addEventListener("message",o2),l2=e2.bytes.slice?e2.bytes.slice():new Uint32Array(Array.prototype.slice.call(e2.bytes)),s2.postMessage(Hh({source:t2,encrypted:i2,key:l2,iv:e2.iv}),[i2.buffer,l2.buffer])},Uu=({xhr:e2,xhrOptions:t2,decryptionWorker:i2,segment:s2,abortFn:r2,progressFn:n2,trackInfoFn:a2,timingInfoFn:o2,videoSegmentTimingInfoFn:l2,audioSegmentTimingInfoFn:d2,id3Fn:h2,captionsFn:u2,isEndOfTimeline:c2,endedTimelineFn:p2,dataFn:m2,doneFn:g2,onTransmuxerLog:f2,triggerSegmentEventFn:y2})=>{let _2=[];var v2,b2,T2,S2,w2,E2,C2,k2,I2;i2=(({activeXhrs:s3,decryptionWorker:r3,trackInfoFn:n3,timingInfoFn:a3,videoSegmentTimingInfoFn:o3,audioSegmentTimingInfoFn:l3,id3Fn:d3,captionsFn:h3,isEndOfTimeline:u3,endedTimelineFn:c3,dataFn:p3,doneFn:m3,onTransmuxerLog:g3,triggerSegmentEventFn:f3})=>{let t3=0,y3=!1;return(e3,i3)=>{if(!y3){if(e3)return y3=!0,Cu(s3),m3(e3,i3);if((t3+=1)===s3.length){let t4=function(){if(i3.encryptedBytes)return(({decryptionWorker:e2,segment:t2,trackInfoFn:i2,timingInfoFn:s2,videoSegmentTimingInfoFn:r2,audioSegmentTimingInfoFn:n2,id3Fn:a2,captionsFn:o2,isEndOfTimeline:l2,endedTimelineFn:d2,dataFn:h2,doneFn:u2,onTransmuxerLog:c2,triggerSegmentEventFn:p2})=>{p2({type:"segmentdecryptionstart"}),Nu({id:t2.requestId,key:t2.key,encryptedBytes:t2.encryptedBytes,decryptionWorker:e2,segment:t2,doneFn:u2},e3=>{t2.bytes=e3,p2({type:"segmentdecryptioncomplete",segment:t2}),Ru({segment:t2,bytes:t2.bytes,trackInfoFn:i2,timingInfoFn:s2,videoSegmentTimingInfoFn:r2,audioSegmentTimingInfoFn:n2,id3Fn:a2,captionsFn:o2,isEndOfTimeline:l2,endedTimelineFn:d2,dataFn:h2,doneFn:u2,onTransmuxerLog:c2,triggerSegmentEventFn:p2})})})({decryptionWorker:r3,segment:i3,trackInfoFn:n3,timingInfoFn:a3,videoSegmentTimingInfoFn:o3,audioSegmentTimingInfoFn:l3,id3Fn:d3,captionsFn:h3,isEndOfTimeline:u3,endedTimelineFn:c3,dataFn:p3,doneFn:m3,onTransmuxerLog:g3,triggerSegmentEventFn:f3});Ru({segment:i3,bytes:i3.bytes,trackInfoFn:n3,timingInfoFn:a3,videoSegmentTimingInfoFn:o3,audioSegmentTimingInfoFn:l3,id3Fn:d3,captionsFn:h3,isEndOfTimeline:u3,endedTimelineFn:c3,dataFn:p3,doneFn:m3,onTransmuxerLog:g3,triggerSegmentEventFn:f3})};if(i3.endOfAllRequests=Date.now(),i3.map&&i3.map.encryptedBytes&&!i3.map.bytes)return f3({type:"segmentdecryptionstart",segment:i3}),Nu({decryptionWorker:r3,id:i3.requestId+"-init",encryptedBytes:i3.map.encryptedBytes,key:i3.map.key,segment:i3,doneFn:m3},e4=>{i3.map.bytes=e4,f3({type:"segmentdecryptioncomplete",segment:i3}),Lu(i3,e5=>{if(e5)return Cu(s3),m3(e5,i3);t4()})});t4()}}}})({activeXhrs:_2,decryptionWorker:i2,trackInfoFn:a2,timingInfoFn:o2,videoSegmentTimingInfoFn:l2,audioSegmentTimingInfoFn:d2,id3Fn:h2,captionsFn:u2,isEndOfTimeline:c2,endedTimelineFn:p2,dataFn:m2,doneFn:g2,onTransmuxerLog:f2,triggerSegmentEventFn:y2}),s2.key&&!s2.key.bytes&&(a2=[s2.key],s2.map&&!s2.map.bytes&&s2.map.key&&s2.map.key.resolvedUri===s2.key.resolvedUri&&a2.push(s2.map.key),o2=L(t2,{uri:s2.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),l2=Au(s2,a2,i2,y2),y2({type:"segmentkeyloadstart",segment:s2,keyInfo:{uri:s2.key.resolvedUri}}),d2=e2(o2,l2),_2.push(d2)),s2.map&&!s2.map.bytes&&(!s2.map.key||s2.key&&s2.key.resolvedUri===s2.map.key.resolvedUri||(h2=L(t2,{uri:s2.map.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),u2=Au(s2,[s2.map.key],i2,y2),y2({type:"segmentkeyloadstart",segment:s2,keyInfo:{uri:s2.map.key.resolvedUri}}),c2=e2(h2,u2),_2.push(c2)),p2=L(t2,{uri:s2.map.resolvedUri,responseType:"arraybuffer",headers:Bh(s2.map),requestType:"segment-media-initialization"}),({segment:v2,finishProcessingFn:b2,triggerSegmentEventFn:T2}={segment:s2,finishProcessingFn:i2,triggerSegmentEventFn:y2}),m2=(e3,t3)=>(e3=xu(e3,t3))?b2(e3,v2):(e3=new Uint8Array(t3.response),T2({type:"segmentloaded",segment:v2}),v2.map.key?(v2.map.encryptedBytes=e3,b2(null,v2)):(v2.map.bytes=e3,void Lu(v2,function(e4){if(e4)return e4.xhr=t3,e4.status=t3.status,b2(e4,v2);b2(null,v2)}))),y2({type:"segmentloadstart",segment:s2}),g2=e2(p2,m2),_2.push(g2)),f2=L(t2,{uri:s2.part&&s2.part.resolvedUri||s2.resolvedUri,responseType:"arraybuffer",headers:Bh(s2),requestType:"segment"}),({segment:S2,finishProcessingFn:w2,responseType:E2,triggerSegmentEventFn:C2}={segment:s2,finishProcessingFn:i2,responseType:f2.responseType,triggerSegmentEventFn:y2}),a2=(e3,t3)=>(e3=xu(e3,t3))?w2(e3,S2):(C2({type:"segmentloaded",segment:S2}),e3="arraybuffer"!==E2&&t3.responseText?(t2=>{var i2=new Uint8Array(new ArrayBuffer(t2.length));for(let e2=0;e2<t2.length;e2++)i2[e2]=t2.charCodeAt(e2);return i2.buffer})(t3.responseText.substring(S2.lastReachedChar||0)):t3.response,S2.stats=(e2=>({bandwidth:e2.bandwidth,bytesReceived:e2.bytesReceived||0,roundTripTime:e2.roundTripTime||0}))(t3),S2.key?S2.encryptedBytes=new Uint8Array(e3):S2.bytes=new Uint8Array(e3),w2(null,S2));(o2=(y2({type:"segmentloadstart",segment:s2}),e2(f2,a2))).addEventListener("progress",(({segment:k2,progressFn:I2}={segment:s2,progressFn:n2}),e3=>{if(!e3.target.aborted)return k2.stats=L(k2.stats,(e2=>{var t2=e2.target;return(t2={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-t2.requestTime||0}).bytesReceived=e2.loaded,t2.bandwidth=Math.floor(t2.bytesReceived/t2.roundTripTime*8*1e3),t2})(e3)),!k2.stats.firstBytesReceivedAt&&k2.stats.bytesReceived&&(k2.stats.firstBytesReceivedAt=Date.now()),I2(e3,k2)})),_2.push(o2);let x2={};return _2.forEach(e3=>{var t3,i3;e3.addEventListener("loadend",(({loadendState:t3,abortFn:i3}={loadendState:x2,abortFn:r2}),e4=>{e4.target.aborted&&i3&&!t3.calledAbortFn&&(i3(),t3.calledAbortFn=!0)}))}),()=>Cu(_2)},Bu=Bd("PlaylistSelector"),Fu=function(e2){var t2;if(e2&&e2.playlist)return t2=e2.playlist,JSON.stringify({id:t2.id,bandwidth:e2.bandwidth,width:e2.width,height:e2.height,codecs:t2.attributes&&t2.attributes.CODECS||""})},qu=function(e2,s2){let r2=e2.slice();e2.sort(function(e3,t2){var i2=s2(e3,t2);return 0===i2?r2.indexOf(e3)-r2.indexOf(t2):i2})};function ju(l2){let{main:t2,bandwidth:i2,playerWidth:d2,playerHeight:h2,playerObjectFit:u2,limitRenditionByPlayerDimensions:s2,playlistController:c2}=l2;if(t2){l2={bandwidth:i2,width:d2,height:h2,limitRenditionByPlayerDimensions:s2};let e2=t2.playlists,n2=(ph.isAudioOnly(t2)&&(e2=c2.getAudioTrackPlaylists_(),l2.audioOnly=!0),e2.map(e3=>{var t3=e3.attributes&&e3.attributes.RESOLUTION&&e3.attributes.RESOLUTION.width,i3=e3.attributes&&e3.attributes.RESOLUTION&&e3.attributes.RESOLUTION.height;return{bandwidth:e3.attributes&&e3.attributes.BANDWIDTH||window.Number.MAX_VALUE,width:t3,height:i3,playlist:e3}})),a2=(qu(n2,(e3,t3)=>e3.bandwidth-t3.bandwidth),(n2=n2.filter(e3=>!ph.isIncompatible(e3.playlist))).filter(e3=>ph.isEnabled(e3.playlist)));let o2=(p2=(a2=a2.length?a2:n2.filter(e3=>!ph.isDisabled(e3.playlist))).filter(e3=>e3.bandwidth*R.BANDWIDTH_VARIANCE<i2))[p2.length-1];var m2=p2.filter(e3=>e3.bandwidth===o2.bandwidth)[0];if(!1===s2){let t3=m2||a2[0]||n2[0];if(t3&&t3.playlist){let e3=m2?"bandwidthBestRep":"sortedPlaylistReps";return a2[0]&&(e3="enabledPlaylistReps"),Bu(`choosing ${Fu(t3)} using ${e3} with options`,l2),t3.playlist}}else{var g2,p2=p2.filter(e3=>e3.width&&e3.height),f2=(qu(p2,(e3,t4)=>e3.width-t4.width),p2.filter(e3=>e3.width===d2&&e3.height===h2));let t3,i3;(f2=(o2=f2[f2.length-1],f2.filter(e3=>e3.bandwidth===o2.bandwidth)[0]))||(g2=(t3=p2.filter(e3=>"cover"===u2?e3.width>d2&&e3.height>h2:e3.width>d2||e3.height>h2)).filter(e3=>e3.width===t3[0].width&&e3.height===t3[0].height),o2=g2[g2.length-1],i3=g2.filter(e3=>e3.bandwidth===o2.bandwidth)[0]);let s3,r2=(c2.leastPixelDiffSelector&&(g2=p2.map(e3=>(e3.pixelDiff=Math.abs(e3.width-d2)+Math.abs(e3.height-h2),e3)),qu(g2,(e3,t4)=>e3.pixelDiff===t4.pixelDiff?t4.bandwidth-e3.bandwidth:e3.pixelDiff-t4.pixelDiff),s3=g2[0]),s3||i3||f2||m2||a2[0]||n2[0]);if(r2&&r2.playlist){let e3="sortedPlaylistReps";return s3?e3="leastPixelDiffRep":i3?e3="resolutionPlusOneRep":f2?e3="resolutionBestRep":m2?e3="bandwidthBestRep":a2[0]&&(e3="enabledPlaylistReps"),Bu(`choosing ${Fu(r2)} using ${e3} with options`,l2),r2.playlist}}return Bu("could not choose a playlist with options",l2),null}}function Vu(){let e2=this.useDevicePixelRatio&&window.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(e2=this.customPixelRatio),ju({main:this.playlists.main,bandwidth:this.systemBandwidth,playerWidth:parseInt(bu(this.tech_.el(),"width"),10)*e2,playerHeight:parseInt(bu(this.tech_.el(),"height"),10)*e2,playerObjectFit:this.usePlayerObjectFit?bu(this.tech_.el(),"objectFit"):"",limitRenditionByPlayerDimensions:this.limitRenditionByPlayerDimensions,playlistController:this.playlistController_})}function Hu(e2){try{return new URL(e2).pathname.split("/").slice(-2).join("/")}catch(e3){return""}}function zu(e2,t2,i2){let s2;var r2;if(i2&&i2.cues)for(s2=i2.cues.length;s2--;)(r2=i2.cues[s2]).startTime>=e2&&r2.endTime<=t2&&i2.removeCue(r2)}let Wu={id:"ID",class:"CLASS",startDate:"START-DATE",duration:"DURATION",endDate:"END-DATE",endOnNext:"END-ON-NEXT",plannedDuration:"PLANNED-DURATION",scte35Out:"SCTE35-OUT",scte35In:"SCTE35-IN"},Gu=new Set(["id","class","startDate","duration","endDate","endOnNext","startTime","endTime","processDateRange"]),Xu=(e2,t2,i2)=>{e2.metadataTrack_||(e2.metadataTrack_=i2.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,E.browser.IS_ANY_SAFARI)||(e2.metadataTrack_.inBandMetadataTrackDispatchType=t2)},Ku=e2=>"number"==typeof e2&&isFinite(e2),Yu=e2=>{var{startOfSegment:t2,duration:i2,segment:s2,part:r2,playlist:{mediaSequence:n2,id:a2,segments:o2=[]},mediaIndex:l2,partIndex:d2,timeline:h2}=e2,o2=o2.length-1;let u2="mediaIndex/partIndex increment";e2.getMediaInfoForTime?u2=`getMediaInfoForTime (${e2.getMediaInfoForTime})`:e2.isSyncRequest&&(u2="getSyncSegmentCandidate (isSyncRequest)"),e2.independent&&(u2+=" with independent "+e2.independent);var c2="number"==typeof d2,p2=(e2=e2.segment.uri?"segment":"pre-segment",c2?Zd({preloadSegment:s2})-1:0);return e2+` [${n2+l2}/${n2+o2}]`+(c2?` part [${d2}/${p2}]`:"")+` segment start/end [${s2.start} => ${s2.end}]`+(c2?` part start/end [${r2.start} => ${r2.end}]`:"")+` startOfSegment [${t2}] duration [${i2}] timeline [${h2}] selected by [${u2}] playlist [${a2}]`},Qu=e2=>e2+"TimingInfo",Ju=({timelineChangeController:e2,currentTimeline:t2,segmentTimeline:i2,loaderType:s2,audioDisabled:r2})=>!(t2===i2||("audio"===s2?(t2=e2.lastTimelineChange({type:"main"}))&&t2.to===i2:"main"!==s2||!r2||(t2=e2.pendingTimelineChange({type:"audio"}))&&t2.to===i2)),Zu=e2=>{var t2,i2,s2,r2=e2.pendingSegment_;r2&&Ju({timelineChangeController:e2.timelineChangeController_,currentTimeline:e2.currentTimeline_,segmentTimeline:r2.timeline,loaderType:e2.loaderType_,audioDisabled:e2.audioDisabled_})&&(r2=e2.timelineChangeController_)&&(t2=r2.pendingTimelineChange({type:"audio"}),r2=r2.pendingTimelineChange({type:"main"}),s2=(i2=t2&&r2)&&t2.to!==r2.to,i2)&&-1!==t2.from&&-1!==r2.from&&s2&&(t2=(i2=e2).timelineChangeController_.pendingTimelineChange({type:"audio"}),i2=i2.timelineChangeController_.pendingTimelineChange({type:"main"}),t2&&i2&&t2.to<i2.to?e2.timelineChangeController_.trigger("audioTimelineBehind"):e2.timelineChangeController_.trigger("fixBadTimelineChange"))},ec=({segmentDuration:e2,maxDuration:t2})=>!!e2&&Math.round(e2)>t2+$d,ic=({type:e2,segment:t2})=>{var i2,s2,r2;if(t2)return i2=Boolean(t2.key||t2.map&&t2.map.ke),s2=Boolean(t2.map&&!t2.map.bytes),r2=void 0===t2.startOfSegment?t2.start:t2.startOfSegment,{type:e2||t2.type,uri:t2.resolvedUri||t2.uri,start:r2,duration:t2.duration,isEncrypted:i2,isMediaInitialization:s2}};class sc extends E.EventTarget{constructor(e2,t2=0){if(super(),!e2)throw new TypeError("Initialization settings are required");if("function"!=typeof e2.currentTime)throw new TypeError("No currentTime getter specified");if(!e2.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=e2.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=e2.hasPlayed,this.currentTime_=e2.currentTime,this.seekable_=e2.seekable,this.seeking_=e2.seeking,this.duration_=e2.duration,this.mediaSource_=e2.mediaSource,this.vhs_=e2.vhs,this.loaderType_=e2.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=e2.segmentMetadataTrack,this.goalBufferLength_=e2.goalBufferLength,this.sourceType_=e2.sourceType,this.sourceUpdater_=e2.sourceUpdater,this.inbandTextTracks_=e2.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=e2.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=e2.parse708captions,this.useDtsForTimestampOffset_=e2.useDtsForTimestampOffset,this.captionServices_=e2.captionServices,this.exactManifestTimings=e2.exactManifestTimings,this.addMetadataToTextTrack=e2.addMetadataToTextTrack,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.shouldForceTimestampOffsetAfterResync_=!1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=!1,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=e2.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=e2.decrypter,this.syncController_=e2.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.logger_=Bd(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(e3){e3!==this.state_&&(this.logger_(this.state_+" -> "+e3),this.state_=e3,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():Zu(this)}),this.sourceUpdater_.on("codecschange",e3=>{this.trigger(f({type:"codecschange"},e3))}),"main"===this.loaderType_&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():Zu(this)}),"audio"===this.loaderType_&&this.timelineChangeController_.on("timelinechange",e3=>{this.trigger(f({type:"timelinechange"},e3)),this.hasEnoughInfoToLoad_()?this.processLoadQueue_():Zu(this),this.hasEnoughInfoToAppend_()?this.processCallQueue_():Zu(this)})}get mediaSequenceSync_(){return this.syncController_.getMediaSequenceSync(this.loaderType_)}createTransmuxer_(){return vu({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&window.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(e2){this.audioDisabled_=!e2,e2?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){"WAITING"!==this.state?(this.pendingSegment_&&(this.pendingSegment_=null),this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_)):(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_())}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,window.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(e2){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==e2:(this.state="READY",!0)}error(e2){return void 0!==e2&&(this.logger_("error occurred:",e2),this.error_=e2),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&_u(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){var e2=this.getMediaInfo_();if(!this.sourceUpdater_||!e2)return O();if("main"===this.loaderType_){var{hasAudio:e2,hasVideo:t2,isMuxed:i2}=e2;if(t2&&e2&&!this.audioDisabled_&&!i2)return this.sourceUpdater_.buffered();if(t2)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(e2,t2=!1){if(!e2)return null;var i2=jh(e2);let s2=this.initSegments_[i2];return t2&&!s2&&e2.bytes&&(this.initSegments_[i2]=s2={resolvedUri:e2.resolvedUri,byterange:e2.byterange,bytes:e2.bytes,tracks:e2.tracks,timescales:e2.timescales}),s2||e2}segmentKey(e2,t2=!1){if(!e2)return null;var i2=Vh(e2);let s2=this.keyCache_[i2];return this.cacheEncryptionKeys_&&t2&&!s2&&e2.bytes&&(this.keyCache_[i2]=s2={resolvedUri:e2.resolvedUri,bytes:e2.bytes}),t2={resolvedUri:(s2||e2).resolvedUri},s2&&(t2.bytes=s2.bytes),t2}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),this.playlist_)return"INIT"===this.state&&this.couldBeginLoading_()?this.init_():void(!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY"))}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(t2,i2={}){if(t2&&!(this.playlist_&&this.playlist_.endList&&t2.endList&&this.playlist_.uri===t2.uri)){var s2,r2=this.playlist_,n2=this.pendingSegment_;this.playlist_=t2,this.xhrOptions_=i2,"INIT"===this.state&&(t2.syncInfo={mediaSequence:t2.mediaSequence,time:0},"main"===this.loaderType_)&&this.syncController_.setDateTimeMappingForStart(t2);let e2=null;if(r2&&(r2.id?e2=r2.id:r2.uri&&(e2=r2.uri)),this.logger_(`playlist update [${e2} => ${t2.id||t2.uri}]`),this.mediaSequenceSync_&&(this.mediaSequenceSync_.update(t2,this.currentTime_()),this.logger_(`Playlist update:\ncurrentTime: ${this.currentTime_()}\nbufferedEnd: ${jd(this.buffered_())}\n`,this.mediaSequenceSync_.diagnostics)),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();r2&&r2.uri===t2.uri?(i2=t2.mediaSequence-r2.mediaSequence,this.logger_(`live window shift [${i2}]`),null!==this.mediaIndex&&(this.mediaIndex-=i2,this.mediaIndex<0?(this.mediaIndex=null,this.partIndex=null):(s2=this.playlist_.segments[this.mediaIndex],!this.partIndex||s2.parts&&s2.parts.length&&s2.parts[this.partIndex]||(s2=this.mediaIndex,this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=s2))),n2&&(n2.mediaIndex-=i2,n2.mediaIndex<0?(n2.mediaIndex=null,n2.partIndex=null):(0<=n2.mediaIndex&&(n2.segment=t2.segments[n2.mediaIndex]),0<=n2.partIndex&&n2.segment.parts&&(n2.part=n2.segment.parts[n2.partIndex]))),this.syncController_.saveExpiredSegmentInfo(r2,t2)):(null!==this.mediaIndex&&(t2.endList||"number"!=typeof t2.partTargetDuration?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate"))}}pause(){this.checkBufferTimeout_&&(window.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return null===this.checkBufferTimeout_}resetEverything(e2){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e2),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.mediaSequenceSync_&&this.mediaSequenceSync_.resetAppendedStatus(),this.resyncLoader()}resyncLoader(){this.transmuxer_&&_u(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1;var e2=this.currentMediaInfo_&&this.currentMediaInfo_.isFmp4;"hls"!==this.sourceType_||e2||(this.shouldForceTimestampOffsetAfterResync_=!0),this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(t2,i2,s2=()=>{},r2=!1){if((i2=i2===1/0?this.duration_():i2)<=t2)this.logger_("skipping remove because end ${end} is <= start ${start}");else if(this.sourceUpdater_&&this.getMediaInfo_()){let e2=1;var n2,a2=()=>{0===--e2&&s2()};for(n2 in!r2&&this.audioDisabled_||(e2++,this.sourceUpdater_.removeAudio(t2,i2,a2)),!r2&&"main"!==this.loaderType_||(this.gopBuffer_=((t3,i3,e3,s3)=>{var r3=Math.ceil((i3-s3)*Nd),n3=Math.ceil((e3-s3)*Nd);i3=t3.slice();let a3=t3.length;for(;a3--&&!(t3[a3].pts<=n3););if(-1!==a3){let e4=a3+1;for(;e4--&&!(t3[e4].pts<=r3););e4=Math.max(e4,0),i3.splice(e4,a3-e4+1)}return i3})(this.gopBuffer_,t2,i2,this.timeMapping_),e2++,this.sourceUpdater_.removeVideo(t2,i2,a2)),this.inbandTextTracks_)zu(t2,i2,this.inbandTextTracks_[n2]);zu(t2,i2,this.segmentMetadataTrack_),a2()}else this.logger_("skipping remove because no source updater or starting media info")}monitorBuffer_(){this.checkBufferTimeout_&&window.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=window.setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&window.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=window.setTimeout(this.monitorBufferTick_.bind(this),500)}fillBuffer_(){var e2,t2;this.sourceUpdater_.updating()||(e2=this.chooseNextRequest_())&&(t2={segmentInfo:ic({type:this.loaderType_,segment:e2})},this.trigger({type:"segmentselected",metadata:t2}),"number"==typeof e2.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e2.timeline})),this.loadSegment_(e2))}isEndOfStream_(e2=this.mediaIndex,t2=this.playlist_,i2=this.partIndex){var s2;return!(!t2||!this.mediaSource_)&&(s2="number"==typeof e2&&t2.segments[e2],e2=e2+1===t2.segments.length,i2=!s2||!s2.parts||i2+1===s2.parts.length,t2.endList)&&"open"===this.mediaSource_.readyState&&e2&&i2}chooseNextRequest_(){var s2=jd(e2=this.buffered_())||0,e2=Vd(e2,this.currentTime_()),r2=!this.hasPlayed_()&&1<=e2,n2=e2>=this.goalBufferLength_(),t2=this.playlist_.segments;if(!t2.length||r2||n2)return null;if(this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_(),this.loaderType_),(r2={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)}).isSyncRequest)r2.mediaIndex=function(t3,i3,s3){i3=i3||[];var r3=[];let n3=0;for(let e3=0;e3<i3.length;e3++){var a3=i3[e3];if(t3===a3.timeline&&(r3.push(e3),(n3+=a3.duration)>s3))return e3}return 0===r3.length?0:r3[r3.length-1]}(this.currentTimeline_,t2,s2),this.logger_("choose next request. Can not find sync point. Fallback to media Index: "+r2.mediaIndex);else if(null!==this.mediaIndex){n2=t2[this.mediaIndex];var a2="number"==typeof this.partIndex?this.partIndex:-1;r2.startOfSegment=n2.end||s2,n2.parts&&n2.parts[a2+1]?(r2.mediaIndex=this.mediaIndex,r2.partIndex=a2+1):r2.mediaIndex=this.mediaIndex+1}else{let e3,t3,i3;if(n2=this.fetchAtBuffer_?s2:this.currentTime_(),this.mediaSequenceSync_&&this.logger_(`chooseNextRequest_ request after Quality Switch:\nFor TargetTime: ${n2}.\nCurrentTime: ${this.currentTime_()}\nBufferedEnd: ${s2}\nFetch At Buffer: ${this.fetchAtBuffer_}\n`,this.mediaSequenceSync_.diagnostics),this.mediaSequenceSync_&&this.mediaSequenceSync_.isReliable){if(!(a2=this.getSyncInfoFromMediaSequenceSync_(n2)))return this.error({message:s2="No sync info found while using media sequence sync",metadata:{errorType:E.Error.StreamingFailedToSelectNextSegment,error:new Error(s2)}}),this.logger_("chooseNextRequest_ - no sync info found using media sequence sync"),null;this.logger_(`chooseNextRequest_ mediaSequence syncInfo (${a2.start} --\x3e ${a2.end})`),e3=a2.segmentIndex,t3=a2.partIndex,i3=a2.start}else this.logger_("chooseNextRequest_ - fallback to a regular segment selection algorithm, based on a syncPoint."),e3=(s2=ph.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:n2,startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time})).segmentIndex,t3=s2.partIndex,i3=s2.startTime;r2.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+n2:"currentTime "+n2,r2.mediaIndex=e3,r2.startOfSegment=i3,r2.partIndex=t3,this.logger_(`choose next request. Playlist switched and we have a sync point. Media Index: ${r2.mediaIndex} `)}let i2=(a2=t2[r2.mediaIndex])&&"number"==typeof r2.partIndex&&a2.parts&&a2.parts[r2.partIndex];return!a2||"number"==typeof r2.partIndex&&!i2?null:("number"!=typeof r2.partIndex&&a2.parts&&(r2.partIndex=0,i2=a2.parts[0]),s2=this.vhs_.playlists&&this.vhs_.playlists.main&&this.vhs_.playlists.main.independentSegments||this.playlist_.independentSegments,e2||!i2||s2||i2.independent||(0===r2.partIndex?(e2=(n2=t2[r2.mediaIndex-1]).parts&&n2.parts.length&&n2.parts[n2.parts.length-1])&&e2.independent&&(--r2.mediaIndex,r2.partIndex=n2.parts.length-1,r2.independent="previous segment"):a2.parts[r2.partIndex-1].independent&&(--r2.partIndex,r2.independent="previous part")),s2=this.mediaSource_&&"ended"===this.mediaSource_.readyState,r2.mediaIndex>=t2.length-1&&s2&&!this.seeking_()?null:(this.shouldForceTimestampOffsetAfterResync_&&(this.shouldForceTimestampOffsetAfterResync_=!1,r2.forceTimestampOffset=!0,this.logger_("choose next request. Force timestamp offset after loader resync")),this.generateSegmentInfo_(r2)))}getSyncInfoFromMediaSequenceSync_(e2){var t2;return this.mediaSequenceSync_&&(e2!==(t2=Math.max(e2,this.mediaSequenceSync_.start))&&this.logger_(`getSyncInfoFromMediaSequenceSync_. Pulled target time from ${e2} to `+t2),e2=this.mediaSequenceSync_.getSyncInfoForTime(t2))?e2.isAppended?(t2=this.mediaSequenceSync_.getSyncInfoForTime(e2.end))?(t2.isAppended&&this.logger_("getSyncInfoFromMediaSequenceSync_: We encounter unexpected scenario where next media sequence sync info is also appended!"),t2):null:e2:null}generateSegmentInfo_(e2){var r2,{independent:e2,playlist:t2,mediaIndex:i2,startOfSegment:s2,isSyncRequest:r2,partIndex:n2,forceTimestampOffset:a2,getMediaInfoForTime:o2}=e2,l2=t2.segments[i2],d2="number"==typeof n2&&l2.parts[n2],i2={requestId:"segment-loader-"+Math.random(),uri:d2&&d2.resolvedUri||l2.resolvedUri,mediaIndex:i2,partIndex:d2?n2:null,isSyncRequest:r2,startOfSegment:s2,playlist:t2,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:l2.timeline,duration:d2&&d2.duration||l2.duration,segment:l2,part:d2,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:o2,independent:e2},n2=void 0!==a2?a2:this.isPendingTimestampOffset_;return"number"==typeof(r2=(i2.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:l2.timeline,currentTimeline:this.currentTimeline_,startOfSegment:s2,buffered:this.buffered_(),overrideCheck:n2}),jd(this.sourceUpdater_.audioBuffered())))&&(i2.audioAppendStart=r2-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(i2.gopsToAlignWith=((e3,t3,i3)=>{if(null==t3||!e3.length)return[];var s3=Math.ceil((t3-i3+3)*Nd);let r3;for(r3=0;r3<e3.length&&!(e3[r3].pts>s3);r3++);return e3.slice(r3)})(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),i2}timestampOffsetForSegment_(e2){return({segmentTimeline:e2,currentTimeline:t2,startOfSegment:i2,buffered:s2,overrideCheck:r2}=[e2][0]),r2||e2!==t2?e2<t2||!s2.length?i2:s2.end(s2.length-1):null;var t2,i2,s2,r2}earlyAbortWhenNeeded_(t2){if(!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&!(Date.now()-(t2.firstBytesReceivedAt||Date.now())<1e3)){var e2=this.currentTime_(),i2=t2.bandwidth,s2=this.pendingSegment_.duration,r2=(t2=ph.estimateSegmentRequestTime(s2,i2,this.playlist_,t2.bytesReceived),[r2,n2,a2=1]=[this.buffered_(),e2,this.vhs_.tech_.playbackRate()],((r2.length?r2.end(r2.length-1):0)-n2)/a2-1);if(!(t2<=r2)){var n2=function(e3){let{main:t3,currentTime:i3,bandwidth:s3,duration:r3,segmentDuration:n3,timeUntilRebuffer:a3,currentTimeline:o2,syncController:l2}=e3,d2=(e3=t3.playlists.filter(e4=>!ph.isIncompatible(e4))).filter(ph.isEnabled);var h2=(e3=(d2=d2.length?d2:e3.filter(e4=>!ph.isDisabled(e4))).filter(ph.hasAttribute.bind(null,"BANDWIDTH")).map(e4=>{var t4=l2.getSyncPoint(e4,r3,o2,i3)?1:2;return{playlist:e4,rebufferingImpact:ph.estimateSegmentRequestTime(n3,s3,e4)*t4-a3}})).filter(e4=>e4.rebufferingImpact<=0);return qu(h2,(e4,t4)=>Tu(t4.playlist,e4.playlist)),h2.length?h2[0]:(qu(e3,(e4,t4)=>e4.rebufferingImpact-t4.rebufferingImpact),e3[0]||null)}({main:this.vhs_.playlists.main,currentTime:e2,bandwidth:i2,duration:this.duration_(),segmentDuration:s2,timeUntilRebuffer:r2,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(n2){var a2=t2-r2-n2.rebufferingImpact;let e3=.5;r2<=$d&&(e3=1),!n2.playlist||n2.playlist.uri===this.playlist_.uri||a2<e3||(this.bandwidth=n2.playlist.attributes.BANDWIDTH*R.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}}handleAbort_(e2){this.logger_("Aborting "+Yu(e2)),this.mediaRequestsAborted+=1}handleProgress_(e2,t2){this.earlyAbortWhenNeeded_(t2.stats),this.checkForAbort_(t2.requestId)||this.trigger("progress")}handleTrackInfo_(e2,t2){var{hasAudio:i2,hasVideo:s2}=t2,i2={segmentInfo:ic({type:this.loaderType_,segment:e2}),trackInfo:{hasAudio:i2,hasVideo:s2}};this.trigger({type:"segmenttransmuxingtrackinfoavailable",metadata:i2}),this.earlyAbortWhenNeeded_(e2.stats),this.checkForAbort_(e2.requestId)||this.checkForIllegalMediaSwitch(t2)||(function(t3,i3){if(!t3&&!i3||!t3&&i3||t3&&!i3)return!1;if(t3!==i3){var s3=Object.keys(t3).sort(),r2=Object.keys(i3).sort();if(s3.length!==r2.length)return!1;for(let e3=0;e3<s3.length;e3++){var n2=s3[e3];if(n2!==r2[e3])return!1;if(t3[n2]!==i3[n2])return!1}}return!0}(this.currentMediaInfo_,t2=t2||{})||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t2,this.currentMediaInfo_=t2,this.logger_("trackinfo update",t2),this.trigger("trackinfo")),this.checkForAbort_(e2.requestId))||(this.pendingSegment_.trackInfo=t2,this.hasEnoughInfoToAppend_()?this.processCallQueue_():Zu(this))}handleTimingInfo_(e2,t2,i2,s2){var r2;this.earlyAbortWhenNeeded_(e2.stats),this.checkForAbort_(e2.requestId)||((e2=this.pendingSegment_)[r2=Qu(t2)]=e2[r2]||{},e2[r2][i2]=s2,this.logger_(`timinginfo: ${t2} - ${i2} - `+s2),this.hasEnoughInfoToAppend_()?this.processCallQueue_():Zu(this))}handleCaptions_(e2,t2){if(this.earlyAbortWhenNeeded_(e2.stats),!this.checkForAbort_(e2.requestId))if(0===t2.length)this.logger_("SegmentLoader received no captions from a caption event");else if(this.pendingSegment_.hasAppendedData_){let n2=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),a2={};t2.forEach(e3=>{a2[e3.stream]=a2[e3.stream]||{startTime:1/0,captions:[],endTime:0};var t3=a2[e3.stream];t3.startTime=Math.min(t3.startTime,e3.startTime+n2),t3.endTime=Math.max(t3.endTime,e3.endTime+n2),t3.captions.push(e3)}),Object.keys(a2).forEach(e3=>{var{startTime:t3,endTime:i2,captions:s2}=a2[e3],r2=this.inbandTextTracks_;this.logger_(`adding cues from ${t3} -> ${i2} for `+e3),function(r3,n3,a3){if(!r3[a3]){n3.trigger({type:"usage",name:"vhs-608"});let s3=a3;/^cc708_/.test(a3)&&(s3="SERVICE"+a3.split("_")[1]);var o2=n3.textTracks().getTrackById(s3);if(o2)r3[a3]=o2;else{let e4=a3,t4=a3,i3=!1;(o2=(n3.options_.vhs&&n3.options_.vhs.captionServices||{})[s3])&&(e4=o2.label,t4=o2.language,i3=o2.default),r3[a3]=n3.addRemoteTextTrack({kind:"captions",id:s3,default:i3,label:e4,language:t4},!1).track}}}(r2,this.vhs_.tech_,e3),zu(t3,i2,r2[e3]),function({inbandTextTracks:n3,captionArray:e4,timestampOffset:a3}){if(e4){let r3=window.WebKitDataCue||window.VTTCue;e4.forEach(i3=>{let s3=i3.stream;i3.content?i3.content.forEach(e5=>{var t4=new r3(i3.startTime+a3,i3.endTime+a3,e5.text);t4.line=e5.line,t4.align="left",t4.position=e5.position,t4.positionAlign="line-left",n3[s3].addCue(t4)}):n3[s3].addCue(new r3(i3.startTime+a3,i3.endTime+a3,i3.text))})}}({captionArray:s2,inbandTextTracks:r2,timestampOffset:n2})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}else this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e2,t2))}handleId3_(e2,t2,i2){this.earlyAbortWhenNeeded_(e2.stats),this.checkForAbort_(e2.requestId)||(this.pendingSegment_.hasAppendedData_?this.addMetadataToTextTrack(i2,t2,this.duration_()):this.metadataQueue_.id3.push(this.handleId3_.bind(this,e2,t2,i2)))}processMetadataQueue_(){this.metadataQueue_.id3.forEach(e2=>e2()),this.metadataQueue_.caption.forEach(e2=>e2()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){var e2=this.callQueue_;this.callQueue_=[],e2.forEach(e3=>e3())}processLoadQueue_(){var e2=this.loadQueue_;this.loadQueue_=[],e2.forEach(e3=>e3())}hasEnoughInfoToLoad_(){var e2;return"audio"!==this.loaderType_||!(!(e2=this.pendingSegment_)||this.getCurrentMediaInfo_()&&Ju({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e2.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}getCurrentMediaInfo_(e2=this.pendingSegment_){return e2&&e2.trackInfo||this.currentMediaInfo_}getMediaInfo_(e2=this.pendingSegment_){return this.getCurrentMediaInfo_(e2)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){var e2,t2,i2,s2;return!!this.sourceUpdater_.ready()&&!(this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_||(e2=this.pendingSegment_,t2=this.getCurrentMediaInfo_(),!e2)||!t2||(({hasAudio:t2,hasVideo:i2,isMuxed:s2}=t2),i2&&!e2.videoTimingInfo)||t2&&!this.audioDisabled_&&!s2&&!e2.audioTimingInfo||Ju({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e2.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(t2,e2){if(this.earlyAbortWhenNeeded_(t2.stats),!this.checkForAbort_(t2.requestId))if(this.callQueue_.length||!this.hasEnoughInfoToAppend_())Zu(this),this.callQueue_.push(this.handleData_.bind(this,t2,e2));else{var i2=this.pendingSegment_;if(this.setTimeMapping_(i2.timeline),this.updateMediaSecondsLoaded_(i2.part||i2.segment),"closed"!==this.mediaSource_.readyState){if(t2.map&&(t2.map=this.initSegmentForMap(t2.map,!0),i2.segment.map=t2.map),t2.key&&this.segmentKey(t2.key,!0),i2.isFmp4=t2.isFmp4,i2.timingInfo=i2.timingInfo||{},i2.isFmp4)this.trigger("fmp4"),i2.timingInfo.start=i2[Qu(e2.type)].start;else{let e3;t2=this.getCurrentMediaInfo_(),(t2="main"===this.loaderType_&&t2&&t2.hasVideo)&&(e3=i2.videoTimingInfo.start),i2.timingInfo.start=this.trueSegmentStart_({currentStart:i2.timingInfo.start,playlist:i2.playlist,mediaIndex:i2.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:t2,firstVideoFrameTimeForData:e3,videoTimingInfo:i2.videoTimingInfo,audioTimingInfo:i2.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(i2,e2.type),this.updateSourceBufferTimestampOffset_(i2),i2.isSyncRequest){if(this.updateTimingInfoEnd_(i2),this.syncController_.saveSegmentTimingInfo({segmentInfo:i2,shouldSaveTimelineMapping:"main"===this.loaderType_}),(t2=this.chooseNextRequest_()).mediaIndex!==i2.mediaIndex||t2.partIndex!==i2.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}i2.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(i2,e2)}}}updateAppendInitSegmentStatus(e2,t2){"main"!==this.loaderType_||"number"!=typeof e2.timestampOffset||e2.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t2]!==e2.playlist&&(this.appendInitSegment_[t2]=!0)}getInitSegmentAndUpdateState_({type:e2,initSegment:t2,map:i2,playlist:s2}){if(i2){var r2=jh(i2);if(this.activeInitSegmentId_===r2)return null;t2=this.initSegmentForMap(i2,!0).bytes,this.activeInitSegmentId_=r2}return t2&&this.appendInitSegment_[e2]?(this.playlistOfLastInitSegment_[e2]=s2,this.appendInitSegment_[e2]=!1,this.activeInitSegmentId_=null,t2):null}handleQuotaExceededError_({segmentInfo:e2,type:t2,bytes:i2},s2){var r2=this.sourceUpdater_.audioBuffered(),n2=this.sourceUpdater_.videoBuffered(),a2=(1<r2.length&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+Kd(r2).join(", ")),1<n2.length&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+Kd(n2).join(", ")),r2.length?r2.start(0):0),o2=r2.length?r2.end(r2.length-1):0,l2=n2.length?n2.start(0):0,d2=n2.length?n2.end(n2.length-1):0;o2-a2<=1&&d2-l2<=1?(this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${i2.byteLength}, audio buffer: ${Kd(r2).join(", ")}, video buffer: ${Kd(n2).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error")):(this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:e2,type:t2,bytes:i2})),o2=this.currentTime_()-1,this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+o2),this.remove(0,o2,()=>{this.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=window.setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},1e3)},!0))}handleAppendError_({segmentInfo:e2,type:t2,bytes:i2},s2){s2&&(22===s2.code?this.handleQuotaExceededError_({segmentInfo:e2,type:t2,bytes:i2}):(this.logger_("Received non QUOTA_EXCEEDED_ERR on append",s2),this.error({message:`${t2} append of ${i2.length}b failed for segment #${e2.mediaIndex} in playlist `+e2.playlist.id,metadata:{errorType:E.Error.StreamingFailedToAppendSegment}}),this.trigger("appenderror")))}appendToSourceBuffer_({segmentInfo:e2,type:t2,initSegment:i2,data:s2,bytes:r2}){if(!r2){var n2=[s2];let e3=s2.byteLength;i2&&(n2.unshift(i2),e3+=i2.byteLength),r2=(e4=>{let i3,t3=0;return e4.bytes&&(i3=new Uint8Array(e4.bytes),e4.segments.forEach(e5=>{i3.set(e5,t3),t3+=e5.byteLength})),i3})({bytes:e3,segments:n2})}s2={segmentInfo:ic({type:this.loaderType_,segment:e2})},this.trigger({type:"segmentappendstart",metadata:s2}),this.sourceUpdater_.appendBuffer({segmentInfo:e2,type:t2,bytes:r2},this.handleAppendError_.bind(this,{segmentInfo:e2,type:t2,bytes:r2}))}handleSegmentTimingInfo_(e2,t2,i2){this.pendingSegment_&&t2===this.pendingSegment_.requestId&&((t2=this.pendingSegment_.segment)[e2+="TimingInfo"]||(t2[e2]={}),t2[e2].transmuxerPrependedSeconds=i2.prependedContentDuration||0,t2[e2].transmuxedPresentationStart=i2.start.presentation,t2[e2].transmuxedDecodeStart=i2.start.decode,t2[e2].transmuxedPresentationEnd=i2.end.presentation,t2[e2].transmuxedDecodeEnd=i2.end.decode,t2[e2].baseMediaDecodeTime=i2.baseMediaDecodeTime)}appendData_(e2,t2){var{type:i2,data:s2}=t2;s2&&s2.byteLength&&("audio"===i2&&this.audioDisabled_||(t2=this.getInitSegmentAndUpdateState_({type:i2,initSegment:t2.initSegment,playlist:e2.playlist,map:e2.isFmp4?e2.segment.map:null}),this.appendToSourceBuffer_({segmentInfo:e2,type:i2,initSegment:t2,data:s2})))}loadSegment_(t2){this.state="WAITING",this.pendingSegment_=t2,this.trimBackBuffer_(t2),"number"==typeof t2.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(t2):(Zu(this),this.loadQueue_.push(()=>{var e2=f({},t2,{forceTimestampOffset:!0});f(t2,this.generateSegmentInfo_(e2)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(t2)}))}updateTransmuxerAndRequestSegment_(s2){this.shouldUpdateTransmuxerTimestampOffset_(s2.timestampOffset)&&(this.gopBuffer_.length=0,s2.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:s2.timestampOffset}));var e2=this.createSimplifiedSegmentObj_(s2),t2=this.isEndOfStream_(s2.mediaIndex,s2.playlist,s2.partIndex),i2=null!==this.mediaIndex,r2=s2.timeline!==this.currentTimeline_&&0<s2.timeline;t2=t2||i2&&r2;this.logger_(`Requesting\n${Hu(s2.uri)}\n`+Yu(s2)),e2.map&&!e2.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),s2.abortRequests=Uu({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:e2,abortFn:this.handleAbort_.bind(this,s2),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",s2.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",s2.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:t2,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:e3,level:t3,stream:i3})=>{this.logger_(Yu(s2)+` logged from transmuxer stream ${i3} as a ${t3}: `+e3)},triggerSegmentEventFn:({type:e3,segment:t3,keyInfo:i3,trackInfo:s3,timingInfo:r3})=>{t3={segmentInfo:ic({segment:t3})},i3&&(t3.keyInfo=i3),s3&&(t3.trackInfo=s3),r3&&(t3.timingInfo=r3),this.trigger({type:e3,metadata:t3})}})}trimBackBuffer_(e2){var t2=((e3,t3,i2)=>{let s2=t3-R.BACK_BUFFER_LENGTH;return e3.length&&(s2=Math.max(s2,e3.start(0))),Math.min(t3-i2,s2)})(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);0<t2&&this.remove(0,t2)}createSimplifiedSegmentObj_(e2){var t2=e2.segment,i2=e2.part,s2=e2.segment.key||e2.segment.map&&e2.segment.map.key,r2=e2.segment.map&&!e2.segment.map.bytes;i2={resolvedUri:(i2||t2).resolvedUri,byterange:(i2||t2).byterange,requestId:e2.requestId,transmuxer:e2.transmuxer,audioAppendStart:e2.audioAppendStart,gopsToAlignWith:e2.gopsToAlignWith,part:e2.part,type:this.loaderType_,start:e2.startOfSegment,duration:e2.duration,isEncrypted:s2,isMediaInitialization:r2};return(s2=e2.playlist.segments[e2.mediaIndex-1])&&s2.timeline===t2.timeline&&(s2.videoTimingInfo?i2.baseStartTime=s2.videoTimingInfo.transmuxedDecodeEnd:s2.audioTimingInfo&&(i2.baseStartTime=s2.audioTimingInfo.transmuxedDecodeEnd)),t2.key&&(r2=t2.key.iv||new Uint32Array([0,0,0,e2.mediaIndex+e2.playlist.mediaSequence]),i2.key=this.segmentKey(t2.key),i2.key.iv=r2),t2.map&&(i2.map=this.initSegmentForMap(t2.map)),i2}saveTransferStats_(e2){this.mediaRequests+=1,e2&&(this.mediaBytesTransferred+=e2.bytesReceived,this.mediaTransferDuration+=e2.roundTripTime)}saveBandwidthRelatedStats_(e2,t2){this.pendingSegment_.byteLength=t2.bytesReceived,e2<1/60?this.logger_("Ignoring segment's bandwidth because its duration of "+e2+" is less than the min to record "+1/60):(e2={bandwidthInfo:{from:this.bandwidth,to:t2.bandwidth}},this.trigger({type:"bandwidthupdated",metadata:e2}),this.bandwidth=t2.bandwidth,this.roundTrip=t2.roundTripTime)}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(e2,t2,i2){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,e2,t2,i2));else if(this.saveTransferStats_(t2.stats),this.pendingSegment_&&t2.requestId===this.pendingSegment_.requestId){if(e2)return this.pendingSegment_=null,this.state="READY",e2.code===wu_ABORTED?void 0:(this.pause(),e2.code===wu_TIMEOUT?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(e2),void this.trigger("error")));e2=this.pendingSegment_,this.saveBandwidthRelatedStats_(e2.duration,t2.stats),e2.endOfAllRequests=t2.endOfAllRequests,i2.gopInfo&&(this.gopBuffer_=((e3,t3,i3)=>{if(!t3.length)return e3;if(i3)return t3.slice();var s2=t3[0].pts;let r2=0;for(;r2<e3.length&&!(e3[r2].pts>=s2);r2++);return e3.slice(0,r2).concat(t3)})(this.gopBuffer_,i2.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(e2)}}setTimeMapping_(e2){null!==(e2=this.syncController_.mappingForTimeline(e2))&&(this.timeMapping_=e2)}updateMediaSecondsLoaded_(e2){"number"==typeof e2.start&&"number"==typeof e2.end?this.mediaSecondsLoaded+=e2.end-e2.start:this.mediaSecondsLoaded+=e2.duration}shouldUpdateTransmuxerTimestampOffset_(e2){return null!==e2&&("main"===this.loaderType_&&e2!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e2!==this.sourceUpdater_.audioTimestampOffset())}trueSegmentStart_({currentStart:e2,playlist:t2,mediaIndex:i2,firstVideoFrameTimeForData:s2,currentVideoTimestampOffset:r2,useVideoTimingInfo:n2,videoTimingInfo:a2,audioTimingInfo:o2}){return void 0!==e2?e2:n2?(e2=t2.segments[i2-1],0!==i2&&e2&&void 0!==e2.start&&e2.end===s2+r2?a2.start:s2):o2.start}waitForAppendsToComplete_(e2){var t2,i2,s2=this.getCurrentMediaInfo_(e2);s2?(({hasAudio:s2,hasVideo:i2,isMuxed:t2}=s2),i2="main"===this.loaderType_&&i2,s2=!this.audioDisabled_&&s2&&!t2,e2.waitingOnAppends=0,e2.hasAppendedData_?(i2&&e2.waitingOnAppends++,s2&&e2.waitingOnAppends++,i2&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e2)),s2&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e2))):(e2.timingInfo||"number"!=typeof e2.timestampOffset||(this.isPendingTimestampOffset_=!0),e2.timingInfo={start:0},e2.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e2),this.processMetadataQueue_()),this.checkAppendsDone_(e2))):(this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),this.trigger("error"))}checkAppendsDone_(e2){this.checkForAbort_(e2.requestId)||(e2.waitingOnAppends--,0===e2.waitingOnAppends&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(e2){i2=this.loaderType_,t2=this.getCurrentMediaInfo_();var t2,i2="main"===i2&&t2&&e2?e2.hasAudio||e2.hasVideo?t2.hasVideo&&!e2.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!t2.hasVideo&&e2.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null;return!!i2&&(this.error({message:i2,playlistExclusionDuration:1/0}),this.trigger("error"),!0)}updateSourceBufferTimestampOffset_(t2){if(null!==t2.timestampOffset&&"number"==typeof t2.timingInfo.start&&!t2.changedTimestampOffset&&"main"===this.loaderType_){let e2=!1;t2.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:t2.segment.videoTimingInfo,audioTimingInfo:t2.segment.audioTimingInfo,timingInfo:t2.timingInfo}),t2.changedTimestampOffset=!0,t2.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(t2.timestampOffset),e2=!0),t2.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(t2.timestampOffset),e2=!0),e2&&this.trigger("timestampoffset")}}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e2,audioTimingInfo:t2,timingInfo:i2}){return this.useDtsForTimestampOffset_?e2&&"number"==typeof e2.transmuxedDecodeStart?e2.transmuxedDecodeStart:t2&&"number"==typeof t2.transmuxedDecodeStart?t2.transmuxedDecodeStart:i2.start:i2.start}updateTimingInfoEnd_(e2){e2.timingInfo=e2.timingInfo||{};var t2=this.getMediaInfo_();(t2="main"===this.loaderType_&&t2&&t2.hasVideo&&e2.videoTimingInfo?e2.videoTimingInfo:e2.audioTimingInfo)&&(e2.timingInfo.end="number"==typeof t2.end?t2.end:t2.start+e2.duration)}handleAppendsDone_(){var e2,t2,i2;this.pendingSegment_&&(e2={segmentInfo:ic({type:this.loaderType_,segment:this.pendingSegment_})},this.trigger({type:"appendsdone",metadata:e2})),this.pendingSegment_?((e2=this.pendingSegment_).part&&e2.part.syncInfo?e2.part.syncInfo.markAppended():e2.segment.syncInfo&&e2.segment.syncInfo.markAppended(),this.updateTimingInfoEnd_(e2),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e2,shouldSaveTimelineMapping:"main"===this.loaderType_}),(t2=((e2,t2)=>{var i2,s2,r2;return"hls"===t2&&(t2=(e3=>{let s3=0;return["video","audio"].forEach(function(t3){if(t3=e3[t3+"TimingInfo"]){var{start:t3,end:i3}=t3;let e4;"bigint"==typeof t3||"bigint"==typeof i3?e4=window.BigInt(i3)-window.BigInt(t3):"number"==typeof t3&&"number"==typeof i3&&(e4=i3-t3),void 0!==e4&&e4>s3&&(s3=e4)}}),s3="bigint"==typeof s3&&s3<Number.MAX_SAFE_INTEGER?Number(s3):s3})({audioTimingInfo:e2.audioTimingInfo,videoTimingInfo:e2.videoTimingInfo}))&&(i2=e2.playlist.targetDuration,s2=ec({segmentDuration:t2,maxDuration:2*i2}),r2=ec({segmentDuration:t2,maxDuration:i2}),t2=`Segment with index ${e2.mediaIndex} from playlist ${e2.playlist.id} has a duration of ${t2} when the reported duration is ${e2.duration} and the target duration is ${i2}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`,s2||r2)?{severity:s2?"warn":"info",message:t2}:null})(e2,this.sourceType_))&&("warn"===t2.severity?E.log.warn(t2.message):this.logger_(t2.message)),this.recordThroughput_(e2),this.pendingSegment_=null,this.state="READY",e2.isSyncRequest&&(this.trigger("syncinfoupdate"),!e2.hasAppendedData_)?this.logger_("Throwing away un-appended sync request "+Yu(e2)):(this.logger_("Appended "+Yu(e2)),this.addSegmentMetadataCue_(e2),this.fetchAtBuffer_=!0,this.currentTimeline_!==e2.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e2.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e2.timeline})),this.currentTimeline_=e2.timeline,this.trigger("syncinfoupdate"),t2=e2.segment,i2=e2.part,t2=t2.end&&this.currentTime_()-t2.end>3*e2.playlist.targetDuration,i2=i2&&i2.end&&this.currentTime_()-i2.end>3*e2.playlist.partTargetDuration,t2||i2?(this.logger_(`bad ${t2?"segment":"part"} `+Yu(e2)),this.resetEverything()):(null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e2.mediaIndex,this.partIndex=e2.partIndex,this.isEndOfStream_(e2.mediaIndex,e2.playlist,e2.partIndex)&&this.endOfStream(),this.trigger("appended"),e2.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()))):(this.state="READY",this.paused()||this.monitorBuffer_())}recordThroughput_(e2){var t2,i2;e2.duration<1/60?this.logger_("Ignoring segment's throughput because its duration of "+e2.duration+" is less than the min to record "+1/60):(t2=this.throughput.rate,i2=Date.now()-e2.endOfAllRequests+1,e2=Math.floor(e2.byteLength/i2*8*1e3),this.throughput.rate+=(e2-t2)/++this.throughput.count)}addSegmentMetadataCue_(e2){var t2,i2,s2,r2;this.segmentMetadataTrack_&&(t2=(r2=e2.segment).start,i2=r2.end,Ku(t2))&&Ku(i2)&&(zu(t2,i2,this.segmentMetadataTrack_),s2=window.WebKitDataCue||window.VTTCue,r2={custom:r2.custom,dateTimeObject:r2.dateTimeObject,dateTimeString:r2.dateTimeString,programDateTime:r2.programDateTime,bandwidth:e2.playlist.attributes.BANDWIDTH,resolution:e2.playlist.attributes.RESOLUTION,codecs:e2.playlist.attributes.CODECS,byteLength:e2.byteLength,uri:e2.uri,timeline:e2.timeline,playlist:e2.playlist.id,start:t2,end:i2},(e2=new s2(t2,i2,JSON.stringify(r2))).value=r2,this.segmentMetadataTrack_.addCue(e2))}}function rc(){}function nc(e2){return"string"!=typeof e2?e2:e2.replace(/./,e3=>e3.toUpperCase())}let ac=["video","audio"],oc=(e2,t2)=>{var i2=t2[e2+"Buffer"];return i2&&i2.updating||t2.queuePending[e2]},lc=(i2,s2)=>{if(0!==s2.queue.length){let e2=0,t2=s2.queue[e2];if("mediaSource"===t2.type)s2.updating()||"closed"===s2.mediaSource.readyState||(s2.queue.shift(),t2.action(s2),t2.doneFn&&t2.doneFn(),lc("audio",s2),lc("video",s2));else if("mediaSource"!==i2&&s2.ready()&&"closed"!==s2.mediaSource.readyState&&!oc(i2,s2)){if(t2.type!==i2){if(null===(e2=((t3,i3)=>{for(let e3=0;e3<i3.length;e3++){var s3=i3[e3];if("mediaSource"===s3.type)return null;if(s3.type===t3)return e3}return null})(i2,s2.queue)))return;t2=s2.queue[e2]}s2.queue.splice(e2,1),(s2.queuePending[i2]=t2).action(i2,s2),t2.doneFn||(s2.queuePending[i2]=null,lc(i2,s2))}}},dc=(e2,t2)=>{var i2=t2[e2+"Buffer"],s2=nc(e2);i2&&(i2.removeEventListener("updateend",t2[`on${s2}UpdateEnd_`]),i2.removeEventListener("error",t2[`on${s2}Error_`]),t2.codecs[e2]=null,t2[e2+"Buffer"]=null)},hc=(e2,t2)=>e2&&t2&&-1!==Array.prototype.indexOf.call(e2.sourceBuffers,t2),uc_appendBuffer=(s2,r2,n2)=>(t2,i2)=>{var e2=i2[t2+"Buffer"];if(hc(i2.mediaSource,e2)){i2.logger_(`Appending segment ${r2.mediaIndex}'s ${s2.length} bytes to ${t2}Buffer`);try{e2.appendBuffer(s2)}catch(e3){i2.logger_(`Error with code ${e3.code} `+(22===e3.code?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${r2.mediaIndex} to ${t2}Buffer`),i2.queuePending[t2]=null,n2(e3)}}},uc_remove=(s2,r2)=>(t2,i2)=>{var e2=i2[t2+"Buffer"];if(hc(i2.mediaSource,e2)){i2.logger_(`Removing ${s2} to ${r2} from ${t2}Buffer`);try{e2.remove(s2,r2)}catch(e3){i2.logger_(`Remove ${s2} to ${r2} from ${t2}Buffer failed`)}}},uc_timestampOffset=s2=>(e2,t2)=>{var i2=t2[e2+"Buffer"];hc(t2.mediaSource,i2)&&(t2.logger_(`Setting ${e2}timestampOffset to `+s2),i2.timestampOffset=s2)},uc_callback=i2=>(e2,t2)=>{i2()},uc_endOfStream=t2=>e2=>{if("open"===e2.mediaSource.readyState){e2.logger_(`Calling mediaSource endOfStream(${t2||""})`);try{e2.mediaSource.endOfStream(t2)}catch(e3){E.log.warn("Failed to call media source endOfStream",e3)}}},uc_duration=t2=>e2=>{e2.logger_("Setting mediaSource duration to "+t2);try{e2.mediaSource.duration=t2}catch(e3){E.log.warn("Failed to set media source duration",e3)}},uc_abort=()=>(t2,e2)=>{if("open"===e2.mediaSource.readyState){var i2=e2[t2+"Buffer"];if(hc(e2.mediaSource,i2)){e2.logger_(`calling abort on ${t2}Buffer`);try{i2.abort()}catch(e3){E.log.warn(`Failed to abort on ${t2}Buffer`,e3)}}}},uc_addSourceBuffer=(s2,r2)=>e2=>{var t2=nc(s2),i2=oa(r2);(i2=(e2.logger_(`Adding ${s2}Buffer with codec ${r2} to mediaSource`),e2.mediaSource.addSourceBuffer(i2))).addEventListener("updateend",e2[`on${t2}UpdateEnd_`]),i2.addEventListener("error",e2[`on${t2}Error_`]),e2.codecs[s2]=r2,e2[s2+"Buffer"]=i2},uc_removeSourceBuffer=i2=>e2=>{var t2=e2[i2+"Buffer"];if(dc(i2,e2),hc(e2.mediaSource,t2)){e2.logger_(`Removing ${i2}Buffer with codec ${e2.codecs[i2]} from mediaSource`);try{e2.mediaSource.removeSourceBuffer(t2)}catch(e3){E.log.warn(`Failed to removeSourceBuffer ${i2}Buffer`,e3)}}},uc_changeType=o2=>(t2,i2)=>{var e2=i2[t2+"Buffer"],s2=oa(o2);if(hc(i2.mediaSource,e2)){var r2=o2.substring(0,o2.indexOf(".")),n2=i2.codecs[t2],a2=n2.substring(0,n2.indexOf("."));if(a2!==r2){a2={codecsChangeInfo:{from:n2,to:o2}},i2.trigger({type:"codecschange",metadata:a2}),i2.logger_(`changing ${t2}Buffer codec from ${n2} to `+o2);try{e2.changeType(s2),i2.codecs[t2]=o2}catch(e3){a2.errorType=E.Error.StreamingCodecsChangeError,(a2.error=e3).metadata=a2,i2.error_=e3,i2.trigger("error"),E.log.warn(`Failed to changeType on ${t2}Buffer`,e3)}}}},cc=({type:e2,sourceUpdater:t2,action:i2,doneFn:s2,name:r2})=>{t2.queue.push({type:e2,action:i2,doneFn:s2,name:r2}),lc(e2,t2)},pc=(i2,s2)=>e2=>{var t2=function(t3){if(0===t3.length)return"Buffered Ranges are empty";let i3="Buffered Ranges: \n";for(let e3=0;e3<t3.length;e3++){var s3=t3.start(e3),r2=t3.end(e3);i3+=s3+` --\x3e ${r2}. Duration (${r2-s3})\n`}return i3}(s2[i2+"Buffered"]());s2.logger_(`received "updateend" event for ${i2} Source Buffer: `,t2),s2.queuePending[i2]&&(t2=s2.queuePending[i2].doneFn,s2.queuePending[i2]=null,t2)&&t2(s2[i2+"Error_"]),lc(i2,s2)};class mc extends E.EventTarget{constructor(e2){super(),this.mediaSource=e2,this.sourceopenListener_=()=>lc("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=Bd("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=pc("video",this),this.onAudioUpdateEnd_=pc("audio",this),this.onVideoError_=e3=>{this.videoError_=e3},this.onAudioError_=e3=>{this.audioError_=e3},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(e2){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e2),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(e2,t2){cc({type:"mediaSource",sourceUpdater:this,action:uc_addSourceBuffer(e2,t2),name:"addSourceBuffer"})}abort(e2){cc({type:e2,sourceUpdater:this,action:uc_abort(e2),name:"abort"})}removeSourceBuffer(e2){this.canRemoveSourceBuffer()?cc({type:"mediaSource",sourceUpdater:this,action:uc_removeSourceBuffer(e2),name:"removeSourceBuffer"}):E.log.error("removeSourceBuffer is not supported!")}canRemoveSourceBuffer(){return!E.browser.IS_FIREFOX&&window.MediaSource&&window.MediaSource.prototype&&"function"==typeof window.MediaSource.prototype.removeSourceBuffer}static canChangeType(){return window.SourceBuffer&&window.SourceBuffer.prototype&&"function"==typeof window.SourceBuffer.prototype.changeType}canChangeType(){return this.constructor.canChangeType()}changeType(e2,t2){this.canChangeType()?cc({type:e2,sourceUpdater:this,action:uc_changeType(t2),name:"changeType"}):E.log.error("changeType is not supported!")}addOrChangeSourceBuffers(i2){if(!i2||"object"!=typeof i2||0===Object.keys(i2).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(i2).forEach(e2=>{var t2=i2[e2];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(e2,t2);this.canChangeType()&&this.changeType(e2,t2)})}appendBuffer(e2,t2){var{segmentInfo:i2,type:s2,bytes:r2}=e2;this.processedAppend_=!0,"audio"===s2&&this.videoBuffer&&!this.videoAppendQueued_?(this.delayedAudioAppendQueue_.push([e2,t2]),this.logger_(`delayed audio append of ${r2.length} until video append`)):(cc({type:s2,sourceUpdater:this,action:uc_appendBuffer(r2,i2||{mediaIndex:-1},e2=t2),doneFn:t2,name:"appendBuffer"}),"video"===s2&&(this.videoAppendQueued_=!0,this.delayedAudioAppendQueue_.length)&&(r2=this.delayedAudioAppendQueue_.slice(),this.logger_(`queuing delayed audio ${r2.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,r2.forEach(e3=>{this.appendBuffer.apply(this,e3)})))}audioBuffered(){return hc(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered||O()}videoBuffered(){return hc(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered||O()}buffered(){var e2=hc(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t2=hc(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t2&&!e2?this.audioBuffered():e2&&!t2?this.videoBuffered():function(e3,t3){let i2=null,s2=null,r2=0;var n2=[],a2=[];if(!(e3&&e3.length&&t3&&t3.length))return O();let o2=e3.length;for(;o2--;)n2.push({time:e3.start(o2),type:"start"}),n2.push({time:e3.end(o2),type:"end"});for(o2=t3.length;o2--;)n2.push({time:t3.start(o2),type:"start"}),n2.push({time:t3.end(o2),type:"end"});for(n2.sort(function(e4,t4){return e4.time-t4.time}),o2=0;o2<n2.length;o2++)"start"===n2[o2].type?2===++r2&&(i2=n2[o2].time):"end"===n2[o2].type&&1===--r2&&(s2=n2[o2].time),null!==i2&&null!==s2&&(a2.push([i2,s2]),i2=null,s2=null);return O(a2)}(this.audioBuffered(),this.videoBuffered())}setDuration(e2,t2=rc){cc({type:"mediaSource",sourceUpdater:this,action:uc_duration(e2),name:"duration",doneFn:t2})}endOfStream(e2=null,t2=rc){"string"!=typeof e2&&(e2=void 0),cc({type:"mediaSource",sourceUpdater:this,action:uc_endOfStream(e2),name:"endOfStream",doneFn:t2})}removeAudio(e2,t2,i2=rc){this.audioBuffered().length&&0!==this.audioBuffered().end(0)?cc({type:"audio",sourceUpdater:this,action:uc_remove(e2,t2),doneFn:i2,name:"remove"}):i2()}removeVideo(e2,t2,i2=rc){this.videoBuffered().length&&0!==this.videoBuffered().end(0)?cc({type:"video",sourceUpdater:this,action:uc_remove(e2,t2),doneFn:i2,name:"remove"}):i2()}updating(){return!(!oc("audio",this)&&!oc("video",this))}audioTimestampOffset(e2){return void 0!==e2&&this.audioBuffer&&this.audioTimestampOffset_!==e2&&(cc({type:"audio",sourceUpdater:this,action:uc_timestampOffset(e2),name:"timestampOffset"}),this.audioTimestampOffset_=e2),this.audioTimestampOffset_}videoTimestampOffset(e2){return void 0!==e2&&this.videoBuffer&&this.videoTimestampOffset_!==e2&&(cc({type:"video",sourceUpdater:this,action:uc_timestampOffset(e2),name:"timestampOffset"}),this.videoTimestampOffset_=e2),this.videoTimestampOffset_}audioQueueCallback(e2){this.audioBuffer&&cc({type:"audio",sourceUpdater:this,action:uc_callback(e2),name:"callback"})}videoQueueCallback(e2){this.videoBuffer&&cc({type:"video",sourceUpdater:this,action:uc_callback(e2),name:"callback"})}dispose(){this.trigger("dispose"),ac.forEach(e2=>{this.abort(e2),this.canRemoveSourceBuffer()?this.removeSourceBuffer(e2):this[e2+"QueueCallback"](()=>dc(e2,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}}let gc=e2=>decodeURIComponent(escape(String.fromCharCode.apply(null,e2))),fc=new Uint8Array("\n\n".split("").map(e2=>e2.charCodeAt(0)));class yc extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}}class _c extends sc{constructor(e2,t2={}){super(e2,t2),this.mediaSource_=null,this.subtitlesTrack_=null,this.featuresNativeTextTracks_=e2.featuresNativeTextTracks,this.loadVttJs=e2.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}buffered_(){var e2;return this.subtitlesTrack_&&this.subtitlesTrack_.cues&&this.subtitlesTrack_.cues.length?O([[(e2=this.subtitlesTrack_.cues)[0].startTime,e2[e2.length-1].startTime]]):O()}initSegmentForMap(e2,t2=!1){if(!e2)return null;var i2=jh(e2);let s2=this.initSegments_[i2];return t2&&!s2&&e2.bytes&&(t2=fc.byteLength+e2.bytes.byteLength,(t2=new Uint8Array(t2)).set(e2.bytes),t2.set(fc,e2.bytes.byteLength),this.initSegments_[i2]=s2={resolvedUri:e2.resolvedUri,byterange:e2.byterange,bytes:t2}),s2||e2}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(e2){return void 0!==e2&&(this.subtitlesTrack_=e2,"INIT"===this.state&&this.couldBeginLoading_())&&this.init_(),this.subtitlesTrack_}remove(e2,t2){zu(e2,t2,this.subtitlesTrack_)}fillBuffer_(){var e2=this.chooseNextRequest_();e2&&(null===this.syncController_.timestampOffsetForTimeline(e2.timeline)?(this.syncController_.one("timestampoffset",()=>{this.state="READY",this.paused()||this.monitorBuffer_()}),this.state="WAITING_ON_TIMELINE"):this.loadSegment_(e2))}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(e2){for(;e2&&e2.segment.empty;){if(e2.mediaIndex+1>=e2.playlist.segments.length){e2=null;break}e2=this.generateSegmentInfo_({playlist:e2.playlist,mediaIndex:e2.mediaIndex+1,startOfSegment:e2.startOfSegment+e2.duration,isSyncRequest:e2.isSyncRequest})}return e2}stopForError(e2){this.error(e2),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(e2,t2,i2){if(this.subtitlesTrack_)if(this.saveTransferStats_(t2.stats),this.pendingSegment_)if(e2)e2.code===wu_TIMEOUT&&this.handleTimeout_(),e2.code===wu_ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(e2);else{var s2=this.pendingSegment_,r2=i2.mp4VttCues&&i2.mp4VttCues.length,n2=(r2&&(s2.mp4VttCues=i2.mp4VttCues),this.saveBandwidthRelatedStats_(s2.duration,t2.stats),t2.key&&this.segmentKey(t2.key,!0),this.state="APPENDING",this.trigger("appending"),s2.segment);if(n2.map&&(n2.map.bytes=t2.map.bytes),s2.bytes=t2.bytes,"function"!=typeof window.WebVTT&&"function"==typeof this.loadVttJs)this.state="WAITING_ON_VTTJS",this.loadVttJs().then(()=>this.segmentRequestFinished_(e2,t2,i2),()=>this.stopForError({message:"Error loading vtt.js"}));else{n2.requested=!0;try{this.parseVTTCues_(s2)}catch(e3){return void this.stopForError({message:e3.message,metadata:{errorType:E.Error.StreamingVttParserError,error:e3}})}r2||this.updateTimeMapping_(s2,this.syncController_.timelines[s2.timeline],this.playlist_),s2.cues.length?s2.timingInfo={start:s2.cues[0].startTime,end:s2.cues[s2.cues.length-1].endTime}:s2.timingInfo={start:s2.startOfSegment,end:s2.startOfSegment+s2.duration},s2.isSyncRequest?(this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY"):(s2.byteLength=s2.bytes.byteLength,this.mediaSecondsLoaded+=n2.duration,s2.cues.forEach(e3=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new window.VTTCue(e3.startTime,e3.endTime,e3.text):e3)}),function(t3){var i3=t3.cues;if(i3){var s3={};for(let e3=i3.length-1;0<=e3;e3--){var r3=i3[e3],n3=r3.startTime+`-${r3.endTime}-`+r3.text;s3[n3]?t3.removeCue(r3):s3[n3]=r3}}}(this.subtitlesTrack_),this.handleAppendsDone_())}}else this.state="READY",this.mediaRequestsAborted+=1;else this.state="READY"}handleData_(e2,t2){var i2=e2&&"vtt"===e2.type,s2=t2&&"text"===t2.type;i2&&s2&&super.handleData_(e2,t2)}updateTimingInfoEnd_(){}parseMp4VttCues_(r2){let n2=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();r2.mp4VttCues.forEach(e2=>{var t2=e2.start+n2,i2=e2.end+n2;let s2=new window.VTTCue(t2,i2,e2.cueText);e2.settings&&e2.settings.split(" ").forEach(e3=>{var t3=(e3=e3.split(":"))[0];e3=e3[1];s2[t3]=isNaN(e3)?e3:Number(e3)}),r2.cues.push(s2)})}parseVTTCues_(t2){let i2,s2=!1;if("function"!=typeof window.WebVTT)throw new yc;if(t2.cues=[],t2.timestampmap={MPEGTS:0,LOCAL:0},t2.mp4VttCues)this.parseMp4VttCues_(t2);else{"function"==typeof window.TextDecoder?i2=new window.TextDecoder("utf8"):(i2=window.WebVTT.StringDecoder(),s2=!0);var r2=new window.WebVTT.Parser(window,window.vttjs,i2);if(r2.oncue=t2.cues.push.bind(t2.cues),r2.ontimestampmap=e3=>{t2.timestampmap=e3},r2.onparsingerror=e3=>{E.log.warn("Error encountered when parsing cues: "+e3.message)},t2.segment.map){let e3=t2.segment.map.bytes;s2&&(e3=gc(e3)),r2.parse(e3)}let e2=t2.bytes;s2&&(e2=gc(e2)),r2.parse(e2),r2.flush()}}updateTimeMapping_(e2,r2,t2){var i2=e2.segment;if(r2)if(e2.cues.length){var{MPEGTS:n2,LOCAL:a2}=e2.timestampmap;let s2=n2/Nd-a2+r2.mapping;e2.cues.forEach(e3=>{var t3=e3.endTime-e3.startTime,i3=this.handleRollover_(e3.startTime+s2,r2.time);e3.startTime=Math.max(i3,0),e3.endTime=Math.max(i3+t3,0)}),t2.syncInfo||(n2=e2.cues[0].startTime,a2=e2.cues[e2.cues.length-1].startTime,t2.syncInfo={mediaSequence:t2.mediaSequence+e2.mediaIndex,time:Math.min(n2,a2-i2.duration)})}else i2.empty=!0}handleRollover_(e2,t2){if(null===t2)return e2;let i2=e2*Nd;var s2=t2*Nd;let r2;for(r2=s2<i2?-8589934592:8589934592;4294967296<Math.abs(i2-s2);)i2+=r2;return i2/Nd}}class vc{constructor({start:e2,end:t2,segmentIndex:i2,partIndex:s2=null,appended:r2=!1}){this.start_=e2,this.end_=t2,this.segmentIndex_=i2,this.partIndex_=s2,this.appended_=r2}isInRange(e2){return e2>=this.start&&e2<this.end}markAppended(){this.appended_=!0}resetAppendedStatus(){this.appended_=!1}get isAppended(){return this.appended_}get start(){return this.start_}get end(){return this.end_}get segmentIndex(){return this.segmentIndex_}get partIndex(){return this.partIndex_}}class bc{constructor(e2,t2=[]){this.segmentSyncInfo_=e2,this.partsSyncInfo_=t2}get segmentSyncInfo(){return this.segmentSyncInfo_}get partsSyncInfo(){return this.partsSyncInfo_}get hasPartsSyncInfo(){return 0<this.partsSyncInfo_.length}resetAppendStatus(){this.segmentSyncInfo_.resetAppendedStatus(),this.partsSyncInfo_.forEach(e2=>e2.resetAppendedStatus())}}class Tc{constructor(){this.storage_=new Map,this.diagnostics_="",this.isReliable_=!1,this.start_=-1/0,this.end_=1/0}get start(){return this.start_}get end(){return this.end_}get diagnostics(){return this.diagnostics_}get isReliable(){return this.isReliable_}resetAppendedStatus(){this.storage_.forEach(e2=>e2.resetAppendStatus())}update(e2,t2){var{mediaSequence:e2,segments:i2}=e2;if(this.isReliable_=this.isReliablePlaylist_(e2,i2),this.isReliable_)return this.updateStorage_(i2,e2,this.calculateBaseTime_(e2,i2,t2))}getSyncInfoForTime(e2){for(var{segmentSyncInfo:t2,partsSyncInfo:i2}of this.storage_.values())if(i2.length){for(var s2 of i2)if(s2.isInRange(e2))return s2}else if(t2.isInRange(e2))return t2;return null}getSyncInfoForMediaSequence(e2){return this.storage_.get(e2)}updateStorage_(e2,t2,i2){let d2=new Map,h2="\n",u2=i2,c2=t2;this.start_=u2,e2.forEach((e3,a2)=>{let o2=this.storage_.get(c2);var t3=u2,i3=t3+e3.duration,s2=Boolean(o2&&o2.segmentSyncInfo&&o2.segmentSyncInfo.isAppended),r2=new vc({start:t3,end:i3,appended:s2,segmentIndex:a2});e3.syncInfo=r2;let l2=u2;var n2=(e3.parts||[]).map((e4,t4)=>{var i4=l2,s3=l2+e4.duration,r3=Boolean(o2&&o2.partsSyncInfo&&o2.partsSyncInfo[t4]&&o2.partsSyncInfo[t4].isAppended),n3=new vc({start:i4,end:s3,appended:r3,segmentIndex:a2,partIndex:t4});return l2=s3,h2+=`Media Sequence: ${c2}.${t4} | Range: ${i4} --\x3e ${s3} | Appended: ${r3}\n`,e4.syncInfo=n3});d2.set(c2,new bc(r2,n2)),h2+=`${Hu(e3.resolvedUri)} | Media Sequence: ${c2} | Range: ${t3} --\x3e ${i3} | Appended: ${s2}\n`,c2++,u2=i3}),this.end_=u2,this.storage_=d2,this.diagnostics_=h2}calculateBaseTime_(e2,i2,t2){if(!this.storage_.size)return 0;if(this.storage_.has(e2))return this.storage_.get(e2).segmentSyncInfo.start;var s2=Math.min(...this.storage_.keys());if(e2<s2){var r2=s2-e2;let t3=this.storage_.get(s2).segmentSyncInfo.start;for(let e3=0;e3<r2;e3++){t3-=i2[e3].duration}return t3}return t2}isReliablePlaylist_(e2,t2){return null!=e2&&Array.isArray(t2)&&t2.length}}class Sc extends Tc{constructor(e2){super(),this.parent_=e2}calculateBaseTime_(e2,t2,i2){return this.storage_.size?super.calculateBaseTime_(e2,t2,i2):(t2=this.parent_.getSyncInfoForMediaSequence(e2))?t2.segmentSyncInfo.start:0}}let wc=[{name:"VOD",run:(e2,t2,i2,s2,r2)=>i2!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"MediaSequence",run:(e2,t2,i2,s2,r2,n2)=>(e2=e2.getMediaSequenceSync(n2))&&e2.isReliable&&(n2=e2.getSyncInfoForTime(r2))?{time:n2.start,partIndex:n2.partIndex,segmentIndex:n2.segmentIndex}:null},{name:"ProgramDateTime",run:(t2,i2,e2,s2,r2)=>{if(!Object.keys(t2.timelineToDatetimeMappings).length)return null;let n2=null,a2=null;var o2=Qd(i2);r2=r2||0;for(let e3=0;e3<o2.length;e3++){var l2=o2[i2.endList||0===r2?e3:o2.length-(e3+1)],d2=l2.segment,h2=t2.timelineToDatetimeMappings[d2.timeline];if(h2&&d2.dateTimeObject){let t3=d2.dateTimeObject.getTime()/1e3+h2;if(d2.parts&&"number"==typeof l2.partIndex)for(let e4=0;e4<l2.partIndex;e4++)t3+=d2.parts[e4].duration;if(h2=Math.abs(r2-t3),null!==a2&&(0===h2||a2<h2))break;a2=h2,n2={time:t3,segmentIndex:l2.segmentIndex,partIndex:l2.partIndex}}}return n2}},{name:"Segment",run:(e2,t2,i2,s2,r2)=>{let n2=null,a2=null;r2=r2||0;var o2=Qd(t2);for(let e3=0;e3<o2.length;e3++){var l2=o2[t2.endList||0===r2?e3:o2.length-(e3+1)],d2=l2.segment,h2=l2.part&&l2.part.start||d2&&d2.start;if(d2.timeline===s2&&void 0!==h2){if(d2=Math.abs(r2-h2),null!==a2&&a2<d2)break;(!n2||null===a2||a2>=d2)&&(a2=d2,n2={time:h2,segmentIndex:l2.segmentIndex,partIndex:l2.partIndex})}}return n2}},{name:"Discontinuity",run:(i2,s2,e2,t2,r2)=>{let n2=null;if(r2=r2||0,s2.discontinuityStarts&&s2.discontinuityStarts.length){let t3=null;for(let e3=0;e3<s2.discontinuityStarts.length;e3++){var a2=s2.discontinuityStarts[e3],o2=s2.discontinuitySequence+e3+1;if(o2=i2.discontinuities[o2]){var l2=Math.abs(r2-o2.time);if(null!==t3&&t3<l2)break;(!n2||null===t3||t3>=l2)&&(t3=l2,n2={time:o2.time,segmentIndex:a2,partIndex:null})}}}return n2}},{name:"Playlist",run:(e2,t2,i2,s2,r2)=>t2.syncInfo?{time:t2.syncInfo.time,segmentIndex:t2.syncInfo.mediaSequence-t2.mediaSequence,partIndex:null}:null}];class Ec extends E.EventTarget{constructor(e2=0){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={};var t2=new Tc,i2=new Sc(t2),s2=new Sc(t2);this.mediaSequenceStorage_={main:t2,audio:i2,vtt:s2},this.logger_=Bd("SyncController")}getMediaSequenceSync(e2){return this.mediaSequenceStorage_[e2]||null}getSyncPoint(e2,t2,i2,s2,r2){if(t2!==1/0)return wc.find(({name:e3})=>"VOD"===e3).run(this,e2,t2);var n2;if(!(t2=this.runStrategies_(e2,t2,i2,s2,r2)).length)return null;for(n2 of t2){var{syncPoint:a2,strategy:o2}=n2,{segmentIndex:l2,time:d2}=a2;if(!(l2<0)){var h2=d2+e2.segments[l2].duration;if(this.logger_(`Strategy: ${o2}. Current time: ${s2}. selected segment: ${l2}. Time: [${d2} -> ${h2}]}`),d2<=s2&&s2<h2)return this.logger_("Found sync point with exact match: ",a2),a2}}return this.selectSyncPoint_(t2,{key:"time",value:s2})}getExpiredTime(e2,t2){return e2&&e2.segments&&(t2=this.runStrategies_(e2,t2,e2.discontinuitySequence,0)).length?(0<(t2=this.selectSyncPoint_(t2,{key:"segmentIndex",value:0})).segmentIndex&&(t2.time*=-1),Math.abs(t2.time+Hd({defaultDuration:e2.targetDuration,durationList:e2.segments,startIndex:t2.segmentIndex,endIndex:0}))):null}runStrategies_(t2,i2,s2,r2,n2){var a2=[];for(let e2=0;e2<wc.length;e2++){var o2=wc[e2],l2=o2.run(this,t2,i2,s2,r2,n2);l2&&(l2.strategy=o2.name,a2.push({strategy:o2.name,syncPoint:l2}))}return a2}selectSyncPoint_(t2,i2){let s2=t2[0].syncPoint,r2=Math.abs(t2[0].syncPoint[i2.key]-i2.value),n2=t2[0].strategy;for(let e2=1;e2<t2.length;e2++){var a2=Math.abs(t2[e2].syncPoint[i2.key]-i2.value);a2<r2&&(r2=a2,s2=t2[e2].syncPoint,n2=t2[e2].strategy)}return this.logger_(`syncPoint for [${i2.key}: ${i2.value}] chosen with strategy [${n2}]: [time:${s2.time}, segmentIndex:`+s2.segmentIndex+("number"==typeof s2.partIndex?",partIndex:"+s2.partIndex:"")+"]"),s2}saveExpiredSegmentInfo(t2,i2){var s2=i2.mediaSequence-t2.mediaSequence;if(86400<s2)E.log.warn(`Not saving expired segment info. Media sequence gap ${s2} is too large.`);else for(let e2=s2-1;0<=e2;e2--){var r2=t2.segments[e2];if(r2&&void 0!==r2.start){i2.syncInfo={mediaSequence:t2.mediaSequence+e2,time:r2.start},this.logger_(`playlist refresh sync: [time:${i2.syncInfo.time}, mediaSequence: ${i2.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(e2){var t2;this.timelineToDatetimeMappings={},e2.segments&&e2.segments.length&&e2.segments[0].dateTimeObject&&(t2=(e2=e2.segments[0]).dateTimeObject.getTime()/1e3,this.timelineToDatetimeMappings[e2.timeline]=-t2)}saveSegmentTimingInfo({segmentInfo:e2,shouldSaveTimelineMapping:t2}){var i2=this.calculateSegmentTimeMapping_(e2,e2.timingInfo,t2),s2=e2.segment;i2&&(this.saveDiscontinuitySyncInfo_(e2),e2.playlist.syncInfo||(e2.playlist.syncInfo={mediaSequence:e2.playlist.mediaSequence+e2.mediaIndex,time:s2.start})),i2=s2.dateTimeObject;s2.discontinuity&&t2&&i2&&(this.timelineToDatetimeMappings[s2.timeline]=-i2.getTime()/1e3)}timestampOffsetForTimeline(e2){return void 0===this.timelines[e2]?null:this.timelines[e2].time}mappingForTimeline(e2){return void 0===this.timelines[e2]?null:this.timelines[e2].mapping}calculateSegmentTimeMapping_(e2,t2,i2){var s2=e2.segment,r2=e2.part;let a2,o2,n2=this.timelines[e2.timeline];if("number"==typeof e2.timestampOffset)n2={time:e2.startOfSegment,mapping:e2.startOfSegment-t2.start},i2&&(this.timelines[e2.timeline]=n2,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${e2.timeline}: [time: ${n2.time}] [mapping: ${n2.mapping}]`)),a2=e2.startOfSegment;else{if(!n2)return!1;a2=t2.start+n2.mapping}return o2=t2.end+n2.mapping,r2&&(r2.start=a2,r2.end=o2),(!s2.start||a2<s2.start)&&(s2.start=a2),s2.end=o2,!0}saveDiscontinuitySyncInfo_(t2){var i2=t2.playlist,s2=t2.segment;if(s2.discontinuity)this.discontinuities[s2.timeline]={time:s2.start,accuracy:0};else if(i2.discontinuityStarts&&i2.discontinuityStarts.length)for(let e2=0;e2<i2.discontinuityStarts.length;e2++){var r2=i2.discontinuityStarts[e2],n2=i2.discontinuitySequence+e2+1,a2=r2-t2.mediaIndex,o2=Math.abs(a2);if(!this.discontinuities[n2]||this.discontinuities[n2].accuracy>o2){let e3;e3=a2<0?s2.start-Hd({defaultDuration:i2.targetDuration,durationList:i2.segments,startIndex:t2.mediaIndex,endIndex:r2}):s2.end+Hd({defaultDuration:i2.targetDuration,durationList:i2.segments,startIndex:t2.mediaIndex+1,endIndex:r2}),this.discontinuities[n2]={time:e3,accuracy:o2}}}}dispose(){this.trigger("dispose"),this.off()}}class Cc extends E.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(e2){this.pendingTimelineChanges_[e2]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:e2,from:t2,to:i2}){return"number"==typeof t2&&"number"==typeof i2&&(this.pendingTimelineChanges_[e2]={type:e2,from:t2,to:i2},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[e2]}lastTimelineChange({type:e2,from:t2,to:i2}){return"number"==typeof t2&&"number"==typeof i2&&(this.lastTimelineChanges_[e2]={type:e2,from:t2,to:i2},delete this.pendingTimelineChanges_[e2],this.trigger({type:"timelinechange",metadata:{timelineChangeInfo:{from:t2,to:i2}}})),this.lastTimelineChanges_[e2]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}}var kc=au(ou(lu(function(){var e2=function(){function e3(){this.listeners={}}var t3=e3.prototype;return t3.on=function(e4,t4){this.listeners[e4]||(this.listeners[e4]=[]),this.listeners[e4].push(t4)},t3.off=function(e4,t4){return!!this.listeners[e4]&&(t4=this.listeners[e4].indexOf(t4),this.listeners[e4]=this.listeners[e4].slice(0),this.listeners[e4].splice(t4,1),-1<t4)},t3.trigger=function(e4){var t4=this.listeners[e4];if(t4)if(2===arguments.length)for(var i2=t4.length,s2=0;s2<i2;++s2)t4[s2].call(this,arguments[1]);else for(var r3=Array.prototype.slice.call(arguments,1),n2=t4.length,a2=0;a2<n2;++a2)t4[a2].apply(this,r3)},t3.dispose=function(){this.listeners={}},t3.pipe=function(t4){this.on("data",function(e4){t4.push(e4)})},e3}();let h2=null;class g2{constructor(e3){let t3,i2,s2;h2=h2||function(){var e4=[[[],[],[],[],[]],[[],[],[],[],[]]],t4=e4[0],i3=e4[1],s3=t4[4],r4=i3[4];let n3,a3,o3;var l4,d4,u2,c2=[],p2=[];let m2,g3;for(n3=0;n3<256;n3++)p2[(c2[n3]=n3<<1^283*(n3>>7))^n3]=n3;for(a3=o3=0;!s3[a3];a3^=l4||1,o3=p2[o3]||1)for(u2=(u2=o3^o3<<1^o3<<2^o3<<3^o3<<4)>>8^255&u2^99,g3=16843009*c2[d4=c2[l4=c2[r4[s3[a3]=u2]=a3]]]^65537*d4^257*l4^16843008*a3,m2=257*c2[u2]^16843008*u2,n3=0;n3<4;n3++)t4[n3][a3]=m2=m2<<24^m2>>>8,i3[n3][u2]=g3=g3<<24^g3>>>8;for(n3=0;n3<5;n3++)t4[n3]=t4[n3].slice(0),i3[n3]=i3[n3].slice(0);return e4}(),this._tables=[[h2[0][0].slice(),h2[0][1].slice(),h2[0][2].slice(),h2[0][3].slice(),h2[0][4].slice()],[h2[1][0].slice(),h2[1][1].slice(),h2[1][2].slice(),h2[1][3].slice(),h2[1][4].slice()]];var r3=this._tables[0][4],n2=this._tables[1],a2=e3.length;let o2=1;if(4!==a2&&6!==a2&&8!==a2)throw new Error("Invalid aes key size");var l3=e3.slice(0),d3=[];for(this._key=[l3,d3],t3=a2;t3<4*a2+28;t3++)s2=l3[t3-1],(t3%a2==0||8===a2&&t3%a2==4)&&(s2=r3[s2>>>24]<<24^r3[s2>>16&255]<<16^r3[s2>>8&255]<<8^r3[255&s2],t3%a2==0)&&(s2=s2<<8^s2>>>24^o2<<24,o2=o2<<1^283*(o2>>7)),l3[t3]=l3[t3-a2]^s2;for(i2=0;t3;i2++,t3--)s2=l3[3&i2?t3:t3-4],d3[i2]=t3<=4||i2<4?s2:n2[0][r3[s2>>>24]]^n2[1][r3[s2>>16&255]]^n2[2][r3[s2>>8&255]]^n2[3][r3[255&s2]]}decrypt(e3,t3,i2,s2,r3,n2){var a2,o2,l3=this._key[1];let p2,d3=e3^l3[0],h3=s2^l3[1],u2=i2^l3[2],c2=t3^l3[3];var m2=l3.length/4-2;let g3,f3=4;var y2=(e3=this._tables[1])[0],_2=e3[1],v2=e3[2],b2=e3[3],T2=e3[4];for(g3=0;g3<m2;g3++)p2=y2[d3>>>24]^_2[h3>>16&255]^v2[u2>>8&255]^b2[255&c2]^l3[f3],a2=y2[h3>>>24]^_2[u2>>16&255]^v2[c2>>8&255]^b2[255&d3]^l3[f3+1],o2=y2[u2>>>24]^_2[c2>>16&255]^v2[d3>>8&255]^b2[255&h3]^l3[f3+2],c2=y2[c2>>>24]^_2[d3>>16&255]^v2[h3>>8&255]^b2[255&u2]^l3[f3+3],f3+=4,d3=p2,h3=a2,u2=o2;for(g3=0;g3<4;g3++)r3[(3&-g3)+n2]=T2[d3>>>24]<<24^T2[h3>>16&255]<<16^T2[u2>>8&255]<<8^T2[255&c2]^l3[f3++],p2=d3,d3=h3,h3=u2,u2=c2,c2=p2}}class l2 extends e2{constructor(){super(e2),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(e3){this.jobs.push(e3),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}function f2(e3){return e3<<24|(65280&e3)<<8|(16711680&e3)>>8|e3>>>24}class d2{constructor(e3,t3,i2,s2){var r3=d2.STEP,n2=new Int32Array(e3.buffer);let a2=new Uint8Array(e3.byteLength),o2=0;for(this.asyncStream_=new l2,this.asyncStream_.push(this.decryptChunk_(n2.subarray(o2,o2+r3),t3,i2,a2)),o2=r3;o2<n2.length;o2+=r3)i2=new Uint32Array([f2(n2[o2-4]),f2(n2[o2-3]),f2(n2[o2-2]),f2(n2[o2-1])]),this.asyncStream_.push(this.decryptChunk_(n2.subarray(o2,o2+r3),t3,i2,a2));this.asyncStream_.push(function(){var e4;s2(null,(e4=a2).subarray(0,e4.byteLength-e4[e4.byteLength-1]))})}static get STEP(){return 32e3}decryptChunk_(t3,i2,s2,r3){return function(){var e3=function(e4,t4,i3){var s3,r4,n2,a2,o2=new Int32Array(e4.buffer,e4.byteOffset,e4.byteLength>>2),l3=new g2(Array.prototype.slice.call(t4)),d3=(t4=new Uint8Array(e4.byteLength),new Int32Array(t4.buffer));let h3,u2,c2,p2,m2;for(h3=i3[0],u2=i3[1],c2=i3[2],p2=i3[3],m2=0;m2<o2.length;m2+=4)s3=f2(o2[m2]),r4=f2(o2[m2+1]),n2=f2(o2[m2+2]),a2=f2(o2[m2+3]),l3.decrypt(s3,r4,n2,a2,d3,m2),d3[m2]=f2(d3[m2]^h3),d3[m2+1]=f2(d3[m2+1]^u2),d3[m2+2]=f2(d3[m2+2]^c2),d3[m2+3]=f2(d3[m2+3]^p2),h3=s3,u2=r4,c2=n2,p2=a2;return t4}(t3,i2,s2);r3.set(e3,t3.byteOffset)}}}var t2="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};(t2=(t2="undefined"!=typeof window?window:void 0!==t2?t2:"undefined"!=typeof self?self:{}).BigInt||Number)("0x1"),t2("0x100"),t2("0x10000"),t2("0x1000000"),t2("0x100000000"),t2("0x10000000000"),t2("0x1000000000000"),t2("0x100000000000000"),t2("0x10000000000000000"),t2=new Uint16Array([65484]),(t2=new Uint8Array(t2.buffer,t2.byteOffset,t2.byteLength))[0],self.onmessage=function(e3){let i2=e3.data;e3=new Uint8Array(i2.encrypted.bytes,i2.encrypted.byteOffset,i2.encrypted.byteLength);var t3=new Uint32Array(i2.key.bytes,i2.key.byteOffset,i2.key.byteLength/4),s2=new Uint32Array(i2.iv.bytes,i2.iv.byteOffset,i2.iv.byteLength/4);new d2(e3,t3,s2,function(e4,t4){self.postMessage(function r2(s2){let r3={};return Object.keys(s2).forEach(e3=>{var t3,i2=s2[e3];t3=i2,("function"===ArrayBuffer.isView?ArrayBuffer.isView(t3):t3&&t3.buffer instanceof ArrayBuffer)?r3[e3]={bytes:i2.buffer,byteOffset:i2.byteOffset,byteLength:i2.byteLength}:r3[e3]=i2}),r3}({source:i2.source,decrypted:t4}),[t4.buffer])})}})));let Ic=(e2,t2)=>{e2.abort(),e2.pause(),t2&&t2.activePlaylistLoader&&(t2.activePlaylistLoader.pause(),t2.activePlaylistLoader=null)},xc=(e2,t2)=>{(t2.activePlaylistLoader=e2).load()},Ac={AUDIO:(a2,o2)=>()=>{var{mediaTypes:{[a2]:e2},excludePlaylist:t2}=o2,i2=e2.activeTrack(),s2=((s2=e2.activeGroup()).filter(e3=>e3.default)[0]||s2[0]).id,r2=e2.tracks[s2];if(i2===r2)t2({error:{message:"Problem encountered loading the default audio track."}});else{for(var n2 in E.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),e2.tracks)e2.tracks[n2].enabled=e2.tracks[n2]===r2;e2.onTrackChanged()}},SUBTITLES:(i2,s2)=>()=>{var{[i2]:e2}=s2.mediaTypes,t2=(E.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),e2.activeTrack());t2&&(t2.mode="disabled"),e2.onTrackChanged()}},Dc={AUDIO:(e2,t2,i2)=>{if(!t2)return;let{tech:s2,requestOptions:r2,segmentLoaders:{[e2]:n2}}=i2;t2.on("loadedmetadata",()=>{var e3=t2.media();n2.playlist(e3,r2),(!s2.paused()||e3.endList&&"none"!==s2.preload())&&n2.load()}),t2.on("loadedplaylist",()=>{n2.playlist(t2.media(),r2),s2.paused()||n2.load()}),t2.on("error",Ac[e2](e2,i2))},SUBTITLES:(e2,t2,i2)=>{let{tech:s2,requestOptions:r2,segmentLoaders:{[e2]:n2},mediaTypes:{[e2]:a2}}=i2;t2.on("loadedmetadata",()=>{var e3=t2.media();n2.playlist(e3,r2),n2.track(a2.activeTrack()),(!s2.paused()||e3.endList&&"none"!==s2.preload())&&n2.load()}),t2.on("loadedplaylist",()=>{n2.playlist(t2.media(),r2),s2.paused()||n2.load()}),t2.on("error",Ac[e2](e2,i2))}},Pc={AUDIO:(i2,s2)=>{var r2,n2,{vhs:a2,sourceType:o2,segmentLoaders:{[i2]:e2},requestOptions:l2,main:{mediaGroups:d2},mediaTypes:{[i2]:{groups:h2,tracks:u2,logger_:c2}},mainPlaylistLoader:p2}=s2,m2=ch(p2.main);for(r2 in d2[i2]&&0!==Object.keys(d2[i2]).length||(d2[i2]={main:{default:{default:!0}}},m2&&(d2[i2].main.default.playlists=p2.main.playlists)),d2[i2])for(var g2 in h2[r2]||(h2[r2]=[]),d2[i2][r2]){let t2,e3=d2[i2][r2][g2];t2=m2?(c2(`AUDIO group '${r2}' label '${g2}' is a main playlist`),e3.isMainPlaylist=!0,null):"vhs-json"===o2&&e3.playlists?new Nh(e3.playlists[0],a2,l2):e3.resolvedUri?new Nh(e3.resolvedUri,a2,l2):e3.playlists&&"dash"===o2?new su(e3.playlists[0],a2,l2,p2):null,e3=L({id:g2,playlistLoader:t2},e3),Dc[i2](i2,e3.playlistLoader,s2),h2[r2].push(e3),void 0===u2[g2]&&(n2=new E.AudioTrack({id:g2,kind:(e4=>{let t3=e4.default?"main":"alternative";return e4.characteristics&&0<=e4.characteristics.indexOf("public.accessibility.describes-video")?"main-desc":t3})(e3),enabled:!1,language:e3.language,default:e3.default,label:g2}),u2[g2]=n2)}e2.on("error",Ac[i2](i2,s2))},SUBTITLES:(i2,s2)=>{var r2,n2,{tech:a2,vhs:o2,sourceType:l2,segmentLoaders:{[i2]:e2},requestOptions:d2,main:{mediaGroups:h2},mediaTypes:{[i2]:{groups:u2,tracks:c2}},mainPlaylistLoader:p2}=s2;for(r2 in h2[i2])for(var m2 in u2[r2]||(u2[r2]=[]),h2[i2][r2])if(o2.options_.useForcedSubtitles||!h2[i2][r2][m2].forced){let t2,e3=h2[i2][r2][m2];if("hls"===l2)t2=new Nh(e3.resolvedUri,o2,d2);else if("dash"===l2){if(!e3.playlists.filter(e4=>e4.excludeUntil!==1/0).length)return;t2=new su(e3.playlists[0],o2,d2,p2)}else"vhs-json"===l2&&(t2=new Nh(e3.playlists?e3.playlists[0]:e3.resolvedUri,o2,d2));e3=L({id:m2,playlistLoader:t2},e3),Dc[i2](i2,e3.playlistLoader,s2),u2[r2].push(e3),void 0===c2[m2]&&(n2=a2.addRemoteTextTrack({id:m2,kind:"subtitles",default:e3.default&&e3.autoselect,language:e3.language,label:m2},!1).track,c2[m2]=n2)}e2.on("error",Ac[i2](i2,s2))},"CLOSED-CAPTIONS":(e2,t2)=>{var i2,{tech:s2,main:{mediaGroups:r2},mediaTypes:{[e2]:{groups:n2,tracks:a2}}}=t2;for(i2 in r2[e2])for(var o2 in n2[i2]||(n2[i2]=[]),r2[e2][i2]){var l2=r2[e2][i2][o2];if(/^(?:CC|SERVICE)/.test(l2.instreamId)){var d2=s2.options_.vhs&&s2.options_.vhs.captionServices||{};let e3={label:o2,language:l2.language,instreamId:l2.instreamId,default:l2.default&&l2.autoselect};void 0===(e3=d2[e3.instreamId]?L(e3,d2[e3.instreamId]):e3).default&&delete e3.default,n2[i2].push(L({id:o2},l2)),void 0===a2[o2]&&(d2=s2.addRemoteTextTrack({id:e3.instreamId,kind:"captions",default:e3.default,language:e3.language,label:e3.label},!1).track,a2[o2]=d2)}}}},Lc=(t2,i2)=>{for(let e2=0;e2<t2.length;e2++){if(uh(i2,t2[e2]))return!0;if(t2[e2].playlists&&Lc(t2[e2].playlists,i2))return!0}return!1},Oc={AUDIO:(i2,s2)=>()=>{var e2,{[i2]:{tracks:t2}}=s2.mediaTypes;for(e2 in t2)if(t2[e2].enabled)return t2[e2];return null},SUBTITLES:(i2,s2)=>()=>{var e2,{[i2]:{tracks:t2}}=s2.mediaTypes;for(e2 in t2)if("showing"===t2[e2].mode||"hidden"===t2[e2].mode)return t2[e2];return null}};class Nc{constructor(){this.priority_=[],this.pathwayClones_=new Map}set version(e2){1===e2&&(this.version_=e2)}set ttl(e2){this.ttl_=e2||300}set reloadUri(e2){e2&&(this.reloadUri_=Md(this.reloadUri_,e2))}set priority(e2){e2&&e2.length&&(this.priority_=e2)}set pathwayClones(e2){e2&&e2.length&&(this.pathwayClones_=new Map(e2.map(e3=>[e3.ID,e3])))}get version(){return this.version_}get ttl(){return this.ttl_}get reloadUri(){return this.reloadUri_}get priority(){return this.priority_}get pathwayClones(){return this.pathwayClones_}}class Mc extends E.EventTarget{constructor(e2,t2){super(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=!1,this.availablePathways_=new Set,this.steeringManifest=new Nc,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.currentPathwayClones=new Map,this.nextPathwayClones=new Map,this.excludedSteeringManifestURLs=new Set,this.logger_=Bd("Content Steering"),this.xhr_=e2,this.getBandwidth_=t2}assignTagProperties(e2,t2){this.manifestType_=t2.serverUri?"HLS":"DASH";var i2=t2.serverUri||t2.serverURL;i2?i2.startsWith("data:")?this.decodeDataUriManifest_(i2.substring(i2.indexOf(",")+1)):(this.steeringManifest.reloadUri=Md(e2,i2),this.defaultPathway=t2.pathwayId||t2.defaultServiceLocation,this.queryBeforeStart=t2.queryBeforeStart,this.proxyServerUrl_=t2.proxyServerURL,this.defaultPathway&&!this.queryBeforeStart&&this.trigger("content-steering")):(this.logger_(`steering manifest URL is ${i2}, cannot request steering manifest.`),this.trigger("error"))}requestSteeringManifest(e2){var t2=this.steeringManifest.reloadUri;if(t2){let r2=e2?t2:this.getRequestURI(t2);if(r2){let s2={contentSteeringInfo:{uri:r2}};this.trigger({type:"contentsteeringloadstart",metadata:s2}),this.request_=this.xhr_({uri:r2,requestType:"content-steering-manifest"},(e3,t3)=>{if(e3)return 410===t3.status?(this.logger_(`manifest request 410 ${e3}.`),this.logger_(`There will be no more content steering requests to ${r2} this session.`),void this.excludedSteeringManifestURLs.add(r2)):429===t3.status?(t3=t3.responseHeaders["retry-after"],this.logger_(`manifest request 429 ${e3}.`),this.logger_(`content steering will retry in ${t3} seconds.`),void this.startTTLTimeout_(parseInt(t3,10))):(this.logger_(`manifest failed to load ${e3}.`),void this.startTTLTimeout_());let i2;this.trigger({type:"contentsteeringloadcomplete",metadata:s2});try{i2=JSON.parse(this.request_.responseText)}catch(e4){t3={errorType:E.Error.StreamingContentSteeringParserError,error:e4},this.trigger({type:"error",metadata:t3})}this.assignSteeringProperties_(i2),e3={contentSteeringInfo:s2.contentSteeringInfo,contentSteeringManifest:{version:this.steeringManifest.version,reloadUri:this.steeringManifest.reloadUri,priority:this.steeringManifest.priority}},this.trigger({type:"contentsteeringparsed",metadata:e3}),this.startTTLTimeout_()})}else this.logger_("No valid content steering manifest URIs. Stopping content steering."),this.trigger("error"),this.dispose()}}setProxyServerUrl_(e2){e2=new window.URL(e2);var t2=new window.URL(this.proxyServerUrl_);return t2.searchParams.set("url",encodeURI(e2.toString())),this.setSteeringParams_(t2.toString())}decodeDataUriManifest_(e2){e2=JSON.parse(window.atob(e2)),this.assignSteeringProperties_(e2)}setSteeringParams_(e2){e2=new window.URL(e2);var t2,i2=this.getPathway(),s2=this.getBandwidth_();return i2&&(t2=`_${this.manifestType_}_pathway`,e2.searchParams.set(t2,i2)),s2&&(t2=`_${this.manifestType_}_throughput`,e2.searchParams.set(t2,s2)),e2.toString()}assignSteeringProperties_(e2){var t2;this.steeringManifest.version=e2.VERSION,this.steeringManifest.version?(this.steeringManifest.ttl=e2.TTL,this.steeringManifest.reloadUri=e2["RELOAD-URI"],this.steeringManifest.priority=e2["PATHWAY-PRIORITY"]||e2["SERVICE-LOCATION-PRIORITY"],this.steeringManifest.pathwayClones=e2["PATHWAY-CLONES"],this.nextPathwayClones=this.steeringManifest.pathwayClones,this.availablePathways_.size||(this.logger_("There are no available pathways for content steering. Ending content steering."),this.trigger("error"),this.dispose()),t2=(e3=>{for(var t3 of e3)if(this.availablePathways_.has(t3))return t3;return[...this.availablePathways_][0]})(this.steeringManifest.priority),this.currentPathway!==t2&&(this.currentPathway=t2,this.trigger("content-steering"))):(this.logger_(`manifest version is ${e2.VERSION}, which is not supported.`),this.trigger("error"))}getPathway(){return this.currentPathway||this.defaultPathway}getRequestURI(e2){if(!e2)return null;var t2=e3=>this.excludedSteeringManifestURLs.has(e3);if(this.proxyServerUrl_){var i2=this.setProxyServerUrl_(e2);if(!t2(i2))return i2}return t2(i2=this.setSteeringParams_(e2))?null:i2}startTTLTimeout_(e2=this.steeringManifest.ttl){this.ttlTimeout_=window.setTimeout(()=>{this.requestSteeringManifest()},1e3*e2)}clearTTLTimeout_(){window.clearTimeout(this.ttlTimeout_),this.ttlTimeout_=null}abort(){this.request_&&this.request_.abort(),this.request_=null}dispose(){this.off("content-steering"),this.off("error"),this.abort(),this.clearTTLTimeout_(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=null,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.excludedSteeringManifestURLs=new Set,this.availablePathways_=new Set,this.steeringManifest=new Nc}addAvailablePathway(e2){e2&&this.availablePathways_.add(e2)}clearAvailablePathways(){this.availablePathways_.clear()}excludePathway(e2){return this.availablePathways_.delete(e2)}didDASHTagChange(e2,t2){return!t2&&this.steeringManifest.reloadUri||t2&&(Md(e2,t2.serverURL)!==this.steeringManifest.reloadUri||t2.defaultServiceLocation!==this.defaultPathway||t2.queryBeforeStart!==this.queryBeforeStart||t2.proxyServerURL!==this.proxyServerUrl_)}getAvailablePathways(){return this.availablePathways_}}let Uc,Bc=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"];class Fc extends E.EventTarget{constructor(e2){super(),this.fastQualityChange_=(t3=>{let s3=null;return(...e3)=>{clearTimeout(s3),s3=setTimeout(()=>{t3.apply(null,e3)},100)}})(this.fastQualityChange_.bind(this));let{src:t2,withCredentials:i2,tech:r2,bandwidth:s2,externVhs:n2,useCueTags:a2,playlistExclusionDuration:o2,enableLowInitialPlaylist:l2,sourceType:d2,cacheEncryptionKeys:h2,bufferBasedABR:u2,leastPixelDiffSelector:c2,captionServices:p2,experimentalUseMMS:m2}=e2;if(!t2)throw new Error("A non-empty playlist URL or JSON manifest string is required");let g2=e2.maxPlaylistRetries;null!=g2||(g2=1/0),Uc=n2,this.bufferBasedABR=Boolean(u2),this.leastPixelDiffSelector=Boolean(c2),this.withCredentials=i2,this.tech_=r2,this.vhs_=r2.vhs,this.player_=e2.player_,this.sourceType_=d2,this.useCueTags_=a2,this.playlistExclusionDuration=o2,this.maxPlaylistRetries=g2,this.enableLowInitialPlaylist=l2,this.usingManagedMediaSource_=!1,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:i2,maxPlaylistRetries:g2,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=(()=>{let t3={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e3=>{t3[e3]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:rc,activeTrack:rc,getActiveGroup:rc,onGroupChanged:rc,onTrackChanged:rc,lastTrack_:null,logger_:Bd(`MediaGroups[${e3}]`)}}),t3})(),m2&&window.ManagedMediaSource?(this.tech_.el_.disableRemotePlayback=!0,this.mediaSource=new window.ManagedMediaSource,this.usingManagedMediaSource_=!0,E.log("Using ManagedMediaSource")):window.MediaSource&&(this.mediaSource=new window.MediaSource),this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.load=this.load.bind(this),this.pause=this.pause.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.mediaSource.addEventListener("startstreaming",this.load),this.mediaSource.addEventListener("endstreaming",this.pause),this.seekable_=O(),this.hasPlayed_=!1,this.syncController_=new Ec(e2),this.segmentMetadataTrack_=r2.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.segmentMetadataTrack_.mode="hidden",this.decrypter_=new kc,this.sourceUpdater_=new mc(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new Cc,this.keyStatusMap_=new Map;var f2={vhs:this.vhs_,parse708captions:e2.parse708captions,useDtsForTimestampOffset:e2.useDtsForTimestampOffset,captionServices:p2,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:s2,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:h2,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:e2.exactManifestTimings,addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)};this.mainPlaylistLoader_="dash"===this.sourceType_?new su(t2,this.vhs_,L(this.requestOptions_,{addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)})):new Nh(t2,this.vhs_,L(this.requestOptions_,{addDateRangesToTextTrack:this.addDateRangesToTextTrack_.bind(this)})),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new sc(L(f2,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),e2),this.audioSegmentLoader_=new sc(L(f2,{loaderType:"audio"}),e2),this.subtitleSegmentLoader_=new _c(L(f2,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise((e3,t3)=>{function i3(){r2.off("vttjserror",s3),e3()}function s3(){r2.off("vttjsloaded",i3),t3()}r2.one("vttjsloaded",i3),r2.one("vttjserror",s3),r2.addWebVttScript_()})}),e2),this.contentSteeringController_=new Mc(this.vhs_.xhr,()=>this.mainSegmentLoader_.bandwidth),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),Bc.forEach(e3=>{this[e3+"_"]=function(e4){return this.audioSegmentLoader_[e4]+this.mainSegmentLoader_[e4]}.bind(this,e3)}),this.logger_=Bd("pc"),this.triggeredFmp4Usage=!1,"none"===this.tech_.preload()?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1,f2="none"===this.tech_.preload()?"play":"loadstart";this.tech_.one(f2,()=>{let e3=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-e3,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){var e2=this.mainAppendsToLoadedData_(),t2=this.audioAppendsToLoadedData_();return-1===e2||-1===t2?-1:e2+t2}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(e2="abr"){var t2=this.selectPlaylist();t2&&this.shouldSwitchToMedia_(t2)&&this.switchMedia_(t2,e2)}switchMedia_(e2,t2,i2){var s2=(s2=this.media())&&(s2.id||s2.uri),r2=e2&&(e2.id||e2.uri);s2&&s2!==r2&&(this.logger_(`switch media ${s2} -> ${r2} from `+t2),s2={renditionInfo:{id:r2,bandwidth:e2.attributes.BANDWIDTH,resolution:e2.attributes.RESOLUTION,codecs:e2.attributes.CODECS},cause:t2},this.trigger({type:"renditionselected",metadata:s2}),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+t2})),this.mainPlaylistLoader_.media(e2,i2)}switchMediaForDASHContentSteering_(){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e2=>{var t2=(t2=this.mediaTypes_[e2])?t2.activeGroup():null;let i2=this.contentSteeringController_.getPathway();t2&&i2&&(t2=(t2.length?t2[0]:t2).playlists.filter(e3=>e3.attributes.serviceLocation===i2)).length&&this.mediaTypes_[e2].activePlaylistLoader.media(t2[0])})}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=window.setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(window.clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){var t2=this.main(),e2=t2&&t2.playlists||[];if(!t2||!t2.mediaGroups||!t2.mediaGroups.AUDIO)return e2;var i2=t2.mediaGroups.AUDIO,s2=Object.keys(i2);let r2;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)r2=this.mediaTypes_.AUDIO.activeTrack();else{var n2,a2=i2.main||s2.length&&i2[s2[0]];for(n2 in a2)if(a2[n2].default){r2={label:n2};break}}if(!r2)return e2;var o2,l2=[];for(o2 in i2)if(i2[o2][r2.label]){var d2=i2[o2][r2.label];if(d2.playlists&&d2.playlists.length)l2.push.apply(l2,d2.playlists);else if(d2.uri)l2.push(d2);else if(t2.playlists.length)for(let e3=0;e3<t2.playlists.length;e3++){var h2=t2.playlists[e3];h2.attributes&&h2.attributes.AUDIO&&h2.attributes.AUDIO===o2&&l2.push(h2)}}return l2.length?l2:e2}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{var e2=this.mainPlaylistLoader_.media(),t2=1.5*e2.targetDuration*1e3;hh(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=t2,e2.endList&&"none"!==this.tech_.preload()&&(this.mainSegmentLoader_.playlist(e2,this.requestOptions_),this.mainSegmentLoader_.load()),(n2=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e3=>{Pc[e3](e3,n2)});let{mediaTypes:a2,mainPlaylistLoader:e2,tech:t2,vhs:i2,segmentLoaders:{AUDIO:s2,main:r2}}=n2;["AUDIO","SUBTITLES"].forEach(e3=>{var o3,l3,d3,h2,i3,s3,u2,c2,t3,r3;a2[e3].activeGroup=(o3=e3,l3=n2,t4=>{var{mainPlaylistLoader:e4,mediaTypes:{[o3]:{groups:i4}}}=l3,s4=e4.media();if(!s4)return null;let r4=null;s4.attributes[o3]&&(r4=i4[s4.attributes[o3]]);var n3=Object.keys(i4);if(!r4)if("AUDIO"===o3&&1<n3.length&&ch(l3.main))for(let e5=0;e5<n3.length;e5++){var a3=i4[n3[e5]];if(Lc(a3,s4)){r4=a3;break}}else i4.main?r4=i4.main:1===n3.length&&(r4=i4[n3[0]]);return void 0===t4?r4:null!==t4&&r4&&r4.filter(e5=>e5.id===t4.id)[0]||null}),a2[e3].activeTrack=Oc[e3](e3,n2),a2[e3].onGroupChanged=(d3=e3,h2=n2,()=>{var{segmentLoaders:{[d3]:e4,main:t4},mediaTypes:{[d3]:i4}}=h2,s4=i4.activeTrack(),r4=i4.getActiveGroup(),n3=i4.activePlaylistLoader,a3=i4.lastGroup_;r4&&a3&&r4.id===a3.id||(i4.lastGroup_=r4,i4.lastTrack_=s4,Ic(e4,i4),r4&&!r4.isMainPlaylist&&(r4.playlistLoader?(e4.resyncLoader(),xc(r4.playlistLoader,i4)):n3&&t4.resetEverything()))}),a2[e3].onGroupChanging=(i3=e3,s3=n2,()=>{var{segmentLoaders:{[i3]:e4},mediaTypes:{[i3]:t4}}=s3;t4.lastGroup_=null,e4.abort(),e4.pause()}),a2[e3].onTrackChanged=(u2=e3,c2=n2,()=>{var e4,t4,{mainPlaylistLoader:i4,segmentLoaders:{[u2]:s4,main:r4},mediaTypes:{[u2]:n3}}=c2,a3=n3.activeTrack(),o4=n3.getActiveGroup(),l4=n3.activePlaylistLoader,d4=n3.lastTrack_;if((!d4||!a3||d4.id!==a3.id)&&(n3.lastGroup_=o4,n3.lastTrack_=a3,Ic(s4,n3),o4)){if(o4.isMainPlaylist)return a3&&d4&&a3.id!==d4.id&&(t4=(e4=c2.vhs.playlistController_).selectPlaylist(),e4.media()!==t4)?(n3.logger_(`track change. Switching main audio from ${d4.id} to `+a3.id),i4.pause(),r4.resetEverything(),void e4.fastQualityChange_(t4)):void 0;if("AUDIO"===u2){if(!o4.playlistLoader)return r4.setAudio(!0),void r4.resetEverything();s4.setAudio(!0),r4.setAudio(!1)}l4===o4.playlistLoader||(s4.track&&s4.track(a3),s4.resetEverything()),xc(o4.playlistLoader,n3)}}),a2[e3].getActiveGroup=([t3,r3]=[e3,n2.mediaTypes],()=>{var e4=r3[t3].activeTrack();return e4?r3[t3].activeGroup(e4):null})});var o2,l2=a2.AUDIO.activeGroup();l2&&(l2=(l2.filter(e3=>e3.default)[0]||l2[0]).id,a2.AUDIO.tracks[l2].enabled=!0,a2.AUDIO.onGroupChanged(),a2.AUDIO.onTrackChanged(),(a2.AUDIO.getActiveGroup().playlistLoader?(r2.setAudio(!1),s2):r2).setAudio(!0)),e2.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(e3=>a2[e3].onGroupChanged())}),e2.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(e3=>a2[e3].onGroupChanging())});let d2=()=>{a2.AUDIO.onTrackChanged(),t2.trigger({type:"usage",name:"vhs-audio-change"})};for(o2 in t2.audioTracks().addEventListener("change",d2),t2.remoteTextTracks().addEventListener("change",a2.SUBTITLES.onTrackChanged),i2.on("dispose",()=>{t2.audioTracks().removeEventListener("change",d2),t2.remoteTextTracks().removeEventListener("change",a2.SUBTITLES.onTrackChanged)}),t2.clearTracks("audio"),a2.AUDIO.tracks)t2.audioTracks().addTrack(a2.AUDIO.tracks[o2])})({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),e2),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let t2=this.mainPlaylistLoader_.media();if(!t2){let e2;if(this.attachContentSteeringListeners_(),this.initContentSteeringController_(),this.excludeUnsupportedVariants_(),!(e2=(e2=this.enableLowInitialPlaylist?this.selectInitialPlaylist():e2)||this.selectPlaylist())||!this.shouldSwitchToMedia_(e2))return;if(this.initialMedia_=e2,this.switchMedia_(this.initialMedia_,"initial"),"vhs-json"!==this.sourceType_||!this.initialMedia_.segments)return;t2=this.initialMedia_}this.handleUpdatedMediaPlaylist(t2)}),this.mainPlaylistLoader_.on("error",()=>{var e2=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:e2.playlist,error:e2})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{var e2=this.mainPlaylistLoader_.media(),t2=1.5*e2.targetDuration*1e3;hh(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=t2,"dash"===this.sourceType_&&this.mainPlaylistLoader_.isPaused&&this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(e2,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_?this.runFastQualitySwitch_():this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{var e2=this.mainPlaylistLoader_.media();"playlist-unchanged"!==e2.lastExcludeReason_&&this.stuckAtPlaylistEnd_(e2)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})}),["manifestrequeststart","manifestrequestcomplete","manifestparsestart","manifestparsecomplete","playlistrequeststart","playlistrequestcomplete","playlistparsestart","playlistparsecomplete","renditiondisabled","renditionenabled"].forEach(e2=>{this.mainPlaylistLoader_.on(e2,e3=>{this.player_.trigger(f({},e3))})})}handleUpdatedMediaPlaylist(e2){this.useCueTags_&&this.updateAdCues_(e2),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(e2,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_&&this.runFastQualitySwitch_(),this.updateDuration(!e2.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(e2,t2){var i2=e2.mediaGroups||{};let s2=!0;var r2;e2=Object.keys(i2.AUDIO);for(r2 in i2.AUDIO)for(var n2 in i2.AUDIO[r2])i2.AUDIO[r2][n2].uri||(s2=!1);s2&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(i2.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),Uc.Playlist.isAes(t2)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),e2.length&&1<Object.keys(i2.AUDIO[e2[0]]).length&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(e2){var t2=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,i2=this.tech_.currentTime(),s2=this.bufferLowWaterLine(),r2=this.bufferHighWaterLine();return function({currentPlaylist:e3,buffered:t3,currentTime:i3,nextPlaylist:s3,bufferLowWaterLine:r3,bufferHighWaterLine:n2,duration:a2,bufferBasedABR:o2,log:l2}){if(s3){var d2=`allowing switch ${e3&&e3.id||"null"} -> `+s3.id;if(!e3)return l2(d2+" as current playlist is not set"),!0;if(s3.id!==e3.id){var h2=Boolean(Fd(t3,i3).length);if(!e3.endList)return h2||"number"!=typeof e3.partTargetDuration?(l2(d2+" as current playlist is live"),!0):(l2(`not ${d2} as current playlist is live llhls, but currentTime isn't in buffered.`),!1);if(h2=Vd(t3,i3),a2<(t3=o2?R.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:R.MAX_BUFFER_LOW_WATER_LINE))return l2(d2+` as duration < max low water line (${a2} < ${t3})`),!0;if((i3=s3.attributes.BANDWIDTH)<(a2=e3.attributes.BANDWIDTH)&&(!o2||h2<n2)){let e4=d2+` as next bandwidth < current bandwidth (${i3} < ${a2})`;return o2&&(e4+=` and forwardBuffer < bufferHighWaterLine (${h2} < ${n2})`),l2(e4),!0}if((!o2||a2<i3)&&r3<=h2){let e4=d2+` as forwardBuffer >= bufferLowWaterLine (${h2} >= ${r3})`;return o2&&(e4+=` and next bandwidth > current bandwidth (${i3} > ${a2})`),l2(e4),!0}l2(`not ${d2} as no switching criteria met`)}}else E.log.warn("We received no playlist to switch to. Please check your stream.");return!1}({buffered:this.tech_.buffered(),currentTime:i2,currentPlaylist:t2,nextPlaylist:e2,bufferLowWaterLine:s2,bufferHighWaterLine:r2,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{var e3=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:e3.playlist,error:e3})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.timelineChangeController_.on("audioTimelineBehind",()=>{var e3=this.audioSegmentLoader_.pendingSegment_;e3&&e3.segment&&e3.segment.syncInfo&&(e3=e3.segment.syncInfo.end+.01,this.tech_.setCurrentTime(e3))}),this.timelineChangeController_.on("fixBadTimelineChange",()=>{this.logger_("Fix bad timeline change. Restarting al segment loaders..."),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}),this.mainSegmentLoader_.on("earlyabort",e3=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:10}))});var e2=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();var e3=this.getCodecsOrExclude_();e3&&this.sourceUpdater_.addOrChangeSourceBuffers(e3)};this.mainSegmentLoader_.on("trackinfo",e2),this.audioSegmentLoader_.on("trackinfo",e2),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()}),["segmentselected","segmentloadstart","segmentloaded","segmentkeyloadstart","segmentkeyloadcomplete","segmentdecryptionstart","segmentdecryptioncomplete","segmenttransmuxingstart","segmenttransmuxingcomplete","segmenttransmuxingtrackinfoavailable","segmenttransmuxingtiminginfoavailable","segmentappendstart","appendsdone","bandwidthupdated","timelinechange","codecschange"].forEach(e3=>{this.mainSegmentLoader_.on(e3,e4=>{this.player_.trigger(f({},e4))}),this.audioSegmentLoader_.on(e3,e4=>{this.player_.trigger(f({},e4))}),this.subtitleSegmentLoader_.on(e3,e4=>{this.player_.trigger(f({},e4))})})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}pause(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}fastQualityChange_(e2=this.selectPlaylist()){e2&&e2===this.mainPlaylistLoader_.media()?this.logger_("skipping fastQualityChange because new media is same as old"):(this.switchMedia_(e2,"fast-quality"),this.waitingForFastQualityPlaylistReceived_=!0)}runFastQualitySwitch_(){this.waitingForFastQualityPlaylistReceived_=!1,this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}play(){var e2;if(!this.setupFirstPlay())return this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load(),e2=this.tech_.seekable(),this.tech_.duration()===1/0&&this.tech_.currentTime()<e2.start(0)?this.tech_.setCurrentTime(e2.end(e2.length-1)):void 0}setupFirstPlay(){var t2=this.mainPlaylistLoader_.media();if(!t2||this.tech_.paused()||this.hasPlayed_)return!1;if(!t2.endList||t2.start){var i2=this.seekable();if(!i2.length)return!1;var s2=i2.end(0);let e2=s2;t2.start&&(e2=(t2=t2.start.timeOffset)<0?Math.max(s2+t2,i2.start(0)):Math.min(s2,t2)),this.trigger("firstplay"),this.tech_.setCurrentTime(e2)}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){var e2;this.tryToCreateSourceBuffers_(),this.tech_.autoplay()&&void 0!==(e2=this.tech_.play())&&"function"==typeof e2.then&&e2.then(null,e3=>{}),this.trigger("sourceopen")}handleSourceEnded_(){var e2,t2;this.inbandTextTracks_.metadataTrack_&&(e2=this.inbandTextTracks_.metadataTrack_.cues)&&e2.length&&(t2=this.duration(),e2[e2.length-1].endTime=isNaN(t2)||Math.abs(t2)===1/0?Number.MAX_VALUE:t2)}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let e2=this.mainSegmentLoader_.ended_;var t2;this.mediaTypes_.AUDIO.activePlaylistLoader&&(e2=((t2=this.mainSegmentLoader_.getCurrentMediaInfo_())&&!t2.hasVideo||e2)&&this.audioSegmentLoader_.ended_),e2&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(e2){var t2,i2;return!!this.seekable().length&&null!==(t2=this.syncController_.getExpiredTime(e2,this.duration()))&&(e2=Uc.Playlist.playlistEnd(e2,t2),t2=this.tech_.currentTime(),(i2=this.tech_.buffered()).length?(i2=i2.end(i2.length-1))-t2<=Wd&&e2-i2<=Wd:e2-t2<=Wd)}excludePlaylist({playlistToExclude:s2=this.mainPlaylistLoader_.media(),error:t2={},playlistExclusionDuration:i2}){if(s2=s2||this.mainPlaylistLoader_.media(),i2=i2||t2.playlistExclusionDuration||this.playlistExclusionDuration,s2){s2.playlistErrors_++;var r2=this.mainPlaylistLoader_.main.playlists,n2=1===(n2=r2.filter(oh)).length&&n2[0]===s2;if(1===r2.length&&i2!==1/0)return E.log.warn(`Problem encountered with playlist ${s2.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(n2);if(n2){if(this.main().contentSteering){let e3=this.pathwayAttribute_(s2);var a2=1e3*this.contentSteeringController_.steeringManifest.ttl;return this.contentSteeringController_.excludePathway(e3),this.excludeThenChangePathway_(),void setTimeout(()=>{this.contentSteeringController_.addAvailablePathway(e3)},a2)}let i3=!1;r2.forEach(e3=>{var t3;e3!==s2&&void 0!==(t3=e3.excludeUntil)&&t3!==1/0&&(i3=!0,delete e3.excludeUntil)}),i3&&(E.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let e2;if(e2=s2.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*i2,s2.excludeUntil=e2,t2.reason&&(s2.lastExcludeReason_=t2.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"}),a2=this.selectPlaylist())return(t2.internal?this.logger_:E.log.warn)(`${t2.internal?"Internal problem":"Problem"} encountered with playlist ${s2.id}.`+(t2.message?" "+t2.message:"")+` Switching to playlist ${a2.id}.`),a2.attributes.AUDIO!==s2.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),a2.attributes.SUBTITLES!==s2.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]),r2=a2.targetDuration/2*1e3||5e3,i2="number"==typeof a2.lastRequest&&Date.now()-a2.lastRequest<=r2,this.switchMedia_(a2,"exclude",n2||i2);this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error")}else this.error=t2,"open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network")}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(i2,e2){let s2=[];var t2="all"===i2,r2=(!t2&&"main"!==i2||s2.push(this.mainPlaylistLoader_),[]);!t2&&"audio"!==i2||r2.push("AUDIO"),!t2&&"subtitle"!==i2||(r2.push("CLOSED-CAPTIONS"),r2.push("SUBTITLES")),r2.forEach(e3=>{(e3=this.mediaTypes_[e3]&&this.mediaTypes_[e3].activePlaylistLoader)&&s2.push(e3)}),["main","audio","subtitle"].forEach(e3=>{var t3=this[e3+"SegmentLoader_"];!t3||i2!==e3&&"all"!==i2||s2.push(t3)}),s2.forEach(t3=>e2.forEach(e3=>{"function"==typeof t3[e3]&&t3[e3]()}))}setCurrentTime(e2){var t2=Fd(this.tech_.buffered(),e2);return this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media()&&this.mainPlaylistLoader_.media().segments?t2&&t2.length?e2:(this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),void this.load()):0}duration(){var e2;return this.mainPlaylistLoader_&&(e2=this.mainPlaylistLoader_.media())?e2.endList?this.mediaSource?this.mediaSource.duration:Uc.Playlist.duration(e2):1/0:0}seekable(){return this.seekable_}getSeekableRange_(e2,t2){var i2,s2;return(e2=e2.media())?(t2=this.syncController_.getMediaSequenceSync(t2))&&t2.isReliable?(s2=t2.start,t2=t2.end,isFinite(s2)&&isFinite(t2)?(i2=Uc.Playlist.liveEdgeDelay(this.mainPlaylistLoader_.main,e2),O([[s2,Math.max(s2,t2-i2)]])):null):null!==(s2=this.syncController_.getExpiredTime(e2,this.duration()))&&(t2=Uc.Playlist.seekable(e2,s2,Uc.Playlist.liveEdgeDelay(this.mainPlaylistLoader_.main,e2))).length?t2:null:null}computeFinalSeekable_(e2,t2){var i2,s2,r2;return!t2||(i2=e2.start(0),s2=e2.end(0),r2=t2.start(0),t2=t2.end(0),s2<r2)||t2<i2?e2:O([[Math.max(i2,r2),Math.min(s2,t2)]])}onSyncInfoUpdate_(){if(this.mainPlaylistLoader_){var t2,i2=this.getSeekableRange_(this.mainPlaylistLoader_,"main");if(i2){let e2;this.mediaTypes_.AUDIO.activePlaylistLoader&&!(e2=this.getSeekableRange_(this.mediaTypes_.AUDIO.activePlaylistLoader,"audio"))||(t2=this.seekable_,this.seekable_=this.computeFinalSeekable_(i2,e2),!this.seekable_)||t2&&t2.length&&this.seekable_.length&&t2.start(0)===this.seekable_.start(0)&&t2.end(0)===this.seekable_.end(0)||(this.logger_(`seekable updated [${Xd(this.seekable_)}]`),i2={seekableRanges:this.seekable_},this.trigger({type:"seekablerangeschanged",metadata:i2}),this.tech_.trigger("seekablechanged"))}}}updateDuration(t2){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)this.updateDuration_=this.updateDuration.bind(this,t2),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);else{if(t2)return(t2=this.seekable()).length?void((isNaN(this.mediaSource.duration)||this.mediaSource.duration<t2.end(t2.length-1))&&this.sourceUpdater_.setDuration(t2.end(t2.length-1))):void 0;t2=this.tech_.buffered();let e2=Uc.Playlist.duration(this.mainPlaylistLoader_.media());0<t2.length&&(e2=Math.max(e2,t2.end(t2.length-1))),this.mediaSource.duration!==e2&&this.sourceUpdater_.setDuration(e2)}}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.contentSteeringController_.dispose(),this.keyStatusMap_.clear(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(e2=>{var t2,i2=this.mediaTypes_[e2].groups;for(t2 in i2)i2[t2].forEach(e3=>{e3.playlistLoader&&e3.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){var e2=!!this.mediaTypes_.AUDIO.activePlaylistLoader,t2=!!this.mainSegmentLoader_.getCurrentMediaInfo_();e2=!e2||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return t2&&e2}getCodecsOrExclude_(){let n2={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},a2=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();n2.video=n2.main;var e2=wh(this.main(),a2);let o2={};var t2=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(n2.main.hasVideo&&(o2.video=e2.video||n2.main.videoCodec||"avc1.4d400d"),n2.main.isMuxed&&(o2.video+=","+(e2.audio||n2.main.audioCodec||la)),(n2.main.hasAudio&&!n2.main.isMuxed||n2.audio.hasAudio||t2)&&(o2.audio=e2.audio||n2.main.audioCodec||n2.audio.audioCodec||la,n2.audio.isFmp4=(n2.main.hasAudio&&!n2.main.isMuxed?n2.main:n2.audio).isFmp4),o2.audio||o2.video){let r2,i2=(e3,t3)=>e3?Jn(t3,this.usingManagedMediaSource_):Zn(t3),s2={};if(["video","audio"].forEach(function(e3){var t3;o2.hasOwnProperty(e3)&&!i2(n2[e3].isFmp4,o2[e3])&&(t3=n2[e3].isFmp4?"browser":"muxer",s2[t3]=s2[t3]||[],s2[t3].push(o2[e3]),"audio"===e3)&&(r2=t3)}),t2&&r2&&a2.attributes.AUDIO){let t3=a2.attributes.AUDIO;this.main().playlists.forEach(e3=>{(e3.attributes&&e3.attributes.AUDIO)===t3&&e3!==a2&&(e3.excludeUntil=1/0)}),this.logger_(`excluding audio group ${t3} as ${r2} does not support codec(s): "${o2.audio}"`)}if(!Object.keys(s2).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){let s3=[];if(["video","audio"].forEach(e3=>{var t3=(aa(this.sourceUpdater_.codecs[e3]||"")[0]||{}).type,i3=(aa(o2[e3]||"")[0]||{}).type;t3&&i3&&t3.toLowerCase()!==i3.toLowerCase()&&s3.push(`"${this.sourceUpdater_.codecs[e3]}" -> "${o2[e3]}"`)}),s3.length)return void this.excludePlaylist({playlistToExclude:a2,error:{message:`Codec switching not supported: ${s3.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0})}return o2}e2=Object.keys(s2).reduce((e3,t3)=>(e3&&(e3+=", "),e3+`${t3} does not support codec(s): "${s2[t3].join(",")}"`),"")+".",this.excludePlaylist({playlistToExclude:a2,error:{internal:!0,message:e2},playlistExclusionDuration:1/0})}else this.excludePlaylist({playlistToExclude:a2,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0})}tryToCreateSourceBuffers_(){var e2;"open"!==this.mediaSource.readyState||this.sourceUpdater_.hasCreatedSourceBuffers()||this.areMediaTypesKnown_()&&(e2=this.getCodecsOrExclude_())&&(this.sourceUpdater_.createSourceBuffers(e2),e2=[e2.video,e2.audio].filter(Boolean).join(","),this.excludeIncompatibleVariants_(e2))}excludeUnsupportedVariants_(){let s2=this.main().playlists,r2=[];Object.keys(s2).forEach(e2=>{var t2,i2;e2=s2[e2];-1===r2.indexOf(e2.id)&&(r2.push(e2.id),i2=[],!(t2=wh(this.main,e2)).audio||Zn(t2.audio)||Jn(t2.audio,this.usingManagedMediaSource_)||i2.push("audio codec "+t2.audio),!t2.video||Zn(t2.video)||Jn(t2.video,this.usingManagedMediaSource_)||i2.push("video codec "+t2.video),t2.text&&"stpp.ttml.im1t"===t2.text&&i2.push("text codec "+t2.text),i2.length)&&(e2.excludeUntil=1/0,this.logger_(`excluding ${e2.id} for unsupported: `+i2.join(", ")))})}excludeIncompatibleVariants_(e2){let r2=[],n2=this.main().playlists,a2=Sh(e2=Ih(aa(e2))),o2=e2.video&&aa(e2.video)[0]||null,l2=e2.audio&&aa(e2.audio)[0]||null;Object.keys(n2).forEach(e3=>{var t2,i2,s2;e3=n2[e3];-1===r2.indexOf(e3.id)&&e3.excludeUntil!==1/0&&(r2.push(e3.id),t2=[],i2=Sh(s2=wh(this.mainPlaylistLoader_.main,e3)),s2.audio||s2.video)&&(i2!==a2&&t2.push(`codec count "${i2}" !== "${a2}"`),this.sourceUpdater_.canChangeType()||(i2=s2.video&&aa(s2.video)[0]||null,s2=s2.audio&&aa(s2.audio)[0]||null,i2&&o2&&i2.type.toLowerCase()!==o2.type.toLowerCase()&&t2.push(`video codec "${i2.type}" !== "${o2.type}"`),s2&&l2&&s2.type.toLowerCase()!==l2.type.toLowerCase()&&t2.push(`audio codec "${s2.type}" !== "${l2.type}"`)),t2.length)&&(e3.excludeUntil=1/0,this.logger_(`excluding ${e3.id}: `+t2.join(" && ")))})}updateAdCues_(e2){let t2=0;var i2=this.seekable();i2.length&&(t2=i2.start(0)),function(s2,r2,e3=0){if(s2.segments){let i3,t3=e3;for(let e4=0;e4<s2.segments.length;e4++){var n2,a2,o2=s2.segments[e4];if(i3=i3||function(e5,t4){var i4=e5.cues;for(let e6=0;e6<i4.length;e6++){var s3=i4[e6];if(t4>=s3.adStartTime&&t4<=s3.adEndTime)return s3}return null}(r2,t3+o2.duration/2)){if("cueIn"in o2){i3.endTime=t3,i3.adEndTime=t3,t3+=o2.duration,i3=null;continue}if(t3<i3.endTime){t3+=o2.duration;continue}i3.endTime+=o2.duration}else"cueOut"in o2&&((i3=new window.VTTCue(t3,t3+o2.duration,o2.cueOut)).adStartTime=t3,i3.adEndTime=t3+parseFloat(o2.cueOut),r2.addCue(i3)),"cueOutCont"in o2&&([n2,a2]=o2.cueOutCont.split("/").map(parseFloat),(i3=new window.VTTCue(t3,t3+o2.duration,"")).adStartTime=t3-n2,i3.adEndTime=i3.adStartTime+a2,r2.addCue(i3));t3+=o2.duration}}}(e2,this.cueTagsTrack_,t2)}goalBufferLength(){var e2=this.tech_.currentTime(),t2=R.GOAL_BUFFER_LENGTH,i2=R.GOAL_BUFFER_LENGTH_RATE,s2=Math.max(t2,R.MAX_GOAL_BUFFER_LENGTH);return Math.min(t2+e2*i2,s2)}bufferLowWaterLine(){var e2=this.tech_.currentTime(),t2=R.BUFFER_LOW_WATER_LINE,i2=R.BUFFER_LOW_WATER_LINE_RATE,s2=Math.max(t2,R.MAX_BUFFER_LOW_WATER_LINE),r2=Math.max(t2,R.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t2+e2*i2,this.bufferBasedABR?r2:s2)}bufferHighWaterLine(){return R.BUFFER_HIGH_WATER_LINE}addDateRangesToTextTrack_(e2){Xu(this.inbandTextTracks_,"com.apple.streaming",this.tech_),(({inbandTextTracks:e3,dateRanges:t2})=>{let r2=e3.metadataTrack_;if(r2){let s2=window.WebKitDataCue||window.VTTCue;t2.forEach(e4=>{for(var t3 of Object.keys(e4)){var i2;Gu.has(t3)||((i2=new s2(e4.startTime,e4.endTime,"")).id=e4.id,i2.type="com.apple.quicktime.HLS",i2.value={key:Wu[t3],data:e4[t3]},"scte35Out"!==t3&&"scte35In"!==t3||(i2.value.data=new Uint8Array(i2.value.data.match(/[\da-f]{2}/gi)).buffer),r2.addCue(i2))}e4.processDateRange()})}})({inbandTextTracks:this.inbandTextTracks_,dateRanges:e2})}addMetadataToTextTrack(e2,t2,i2){var s2=this.sourceUpdater_.videoBuffer?this.sourceUpdater_.videoTimestampOffset():this.sourceUpdater_.audioTimestampOffset();Xu(this.inbandTextTracks_,e2,this.tech_),(({inbandTextTracks:e2,metadataArray:t2,timestampOffset:i2,videoDuration:o2})=>{if(t2){let r2=window.WebKitDataCue||window.VTTCue,a2=e2.metadataTrack_;if(a2&&(t2.forEach(e3=>{let s3=e3.cueTime+i2;!("number"!=typeof s3||window.isNaN(s3)||s3<0)&&s3<1/0&&e3.frames&&e3.frames.length&&e3.frames.forEach(e4=>{var t3,i3=new r2(s3,s3,e4.value||e4.url||e4.data||"");i3.frame=e4,i3.value=e4,t3=i3,Object.defineProperties(t3.frame,{id:{get:()=>(E.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),t3.value.key)},value:{get:()=>(E.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),t3.value.data)},privateData:{get:()=>(E.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),t3.value.data)}}),a2.addCue(i3)})}),a2.cues)&&a2.cues.length){var s2=a2.cues,l2=[];for(let e3=0;e3<s2.length;e3++)s2[e3]&&l2.push(s2[e3]);let r3=l2.reduce((e3,t3)=>{var i3=e3[t3.startTime]||[];return i3.push(t3),e3[t3.startTime]=i3,e3},{}),n2=Object.keys(r3).sort((e3,t3)=>Number(e3)-Number(t3));n2.forEach((e3,t3)=>{var i3=r3[e3];e3=isFinite(o2)?o2:e3;let s3=Number(n2[t3+1])||e3;i3.forEach(e4=>{e4.endTime=s3})})}}})({inbandTextTracks:this.inbandTextTracks_,metadataArray:t2,timestampOffset:s2,videoDuration:i2})}pathwayAttribute_(e2){return e2.attributes["PATHWAY-ID"]||e2.attributes.serviceLocation}initContentSteeringController_(){var e2=this.main();if(e2.contentSteering){for(var t2 of e2.playlists)this.contentSteeringController_.addAvailablePathway(this.pathwayAttribute_(t2));this.contentSteeringController_.assignTagProperties(e2.uri,e2.contentSteering),this.contentSteeringController_.queryBeforeStart?this.contentSteeringController_.requestSteeringManifest(!0):this.tech_.one("canplay",()=>{this.contentSteeringController_.requestSteeringManifest()})}}resetContentSteeringController_(){this.contentSteeringController_.clearAvailablePathways(),this.contentSteeringController_.dispose(),this.initContentSteeringController_()}attachContentSteeringListeners_(){this.contentSteeringController_.on("content-steering",this.excludeThenChangePathway_.bind(this)),["contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"].forEach(e2=>{this.contentSteeringController_.on(e2,e3=>{this.trigger(f({},e3))})}),"dash"===this.sourceType_&&this.mainPlaylistLoader_.on("loadedplaylist",()=>{let r2=this.main();(this.contentSteeringController_.didDASHTagChange(r2.uri,r2.contentSteering)||(()=>{var e2,t2=this.contentSteeringController_.getAvailablePathways(),i2=[];for(e2 of r2.playlists){var s2=e2.attributes.serviceLocation;if(s2&&(i2.push(s2),!t2.has(s2)))return!0}return!(i2.length||!t2.size)})())&&this.resetContentSteeringController_()})}excludeThenChangePathway_(){let a2=this.contentSteeringController_.getPathway();if(a2){this.handlePathwayClones_();let s2=this.main().playlists,r2=new Set,n2=!1;Object.keys(s2).forEach(e2=>{e2=s2[e2];var t2=(t2=this.pathwayAttribute_(e2))&&a2!==t2,i2=(e2.excludeUntil===1/0&&"content-steering"===e2.lastExcludeReason_&&!t2&&(delete e2.excludeUntil,delete e2.lastExcludeReason_,n2=!0),!e2.excludeUntil&&e2.excludeUntil!==1/0);!r2.has(e2.id)&&t2&&i2&&(r2.add(e2.id),e2.excludeUntil=1/0,e2.lastExcludeReason_="content-steering",this.logger_(`excluding ${e2.id} for `+e2.lastExcludeReason_))}),"DASH"===this.contentSteeringController_.manifestType_&&Object.keys(this.mediaTypes_).forEach(e2=>{(e2=this.mediaTypes_[e2]).activePlaylistLoader&&(e2=e2.activePlaylistLoader.media_)&&e2.attributes.serviceLocation!==a2&&(n2=!0)}),n2&&this.changeSegmentPathway_()}}handlePathwayClones_(){var i2=this.main().playlists,s2=this.contentSteeringController_.currentPathwayClones,r2=this.contentSteeringController_.nextPathwayClones;if(s2&&s2.size||r2&&r2.size){for(var[e2,t2]of s2.entries())r2.get(e2)||(this.mainPlaylistLoader_.updateOrDeleteClone(t2),this.contentSteeringController_.excludePathway(e2));for(let[e3,t3]of r2.entries()){var n2=s2.get(e3);n2?this.equalPathwayClones_(n2,t3)||(this.mainPlaylistLoader_.updateOrDeleteClone(t3,!0),this.contentSteeringController_.addAvailablePathway(e3)):(i2.filter(e4=>e4.attributes["PATHWAY-ID"]===t3["BASE-ID"]).forEach(e4=>{this.mainPlaylistLoader_.addClonePathway(t3,e4)}),this.contentSteeringController_.addAvailablePathway(e3))}this.contentSteeringController_.currentPathwayClones=new Map(JSON.parse(JSON.stringify([...r2])))}}equalPathwayClones_(e2,t2){if(e2["BASE-ID"]!==t2["BASE-ID"]||e2.ID!==t2.ID||e2["URI-REPLACEMENT"].HOST!==t2["URI-REPLACEMENT"].HOST)return!1;var i2,s2,r2=e2["URI-REPLACEMENT"].PARAMS,n2=t2["URI-REPLACEMENT"].PARAMS;for(i2 in r2)if(r2[i2]!==n2[i2])return!1;for(s2 in n2)if(r2[s2]!==n2[s2])return!1;return!0}changeSegmentPathway_(){var e2=this.selectPlaylist();this.pauseLoading(),"DASH"===this.contentSteeringController_.manifestType_&&this.switchMediaForDASHContentSteering_(),this.switchMedia_(e2,"content-steering")}excludeNonUsablePlaylistsByKeyId_(){if(this.mainPlaylistLoader_&&this.mainPlaylistLoader_.main){let r2=0,n2="non-usable";this.mainPlaylistLoader_.main.playlists.forEach(s2=>{var e2=this.mainPlaylistLoader_.getKeyIdSet(s2);e2&&e2.size&&e2.forEach(e3=>{var t2="usable",i2=(t2=this.keyStatusMap_.has(e3)&&this.keyStatusMap_.get(e3)===t2,s2.lastExcludeReason_===n2&&s2.excludeUntil===1/0);t2?i2&&(delete s2.excludeUntil,delete s2.lastExcludeReason_,this.logger_(`enabling playlist ${s2.id} because key ID ${e3} is usable`)):(s2.excludeUntil!==1/0&&s2.lastExcludeReason_!==n2&&(s2.excludeUntil=1/0,s2.lastExcludeReason_=n2,this.logger_(`excluding playlist ${s2.id} because the key ID ${e3} doesn't exist in the keyStatusMap or is not usable`)),r2++)})}),r2>=this.mainPlaylistLoader_.main.playlists.length&&this.mainPlaylistLoader_.main.playlists.forEach(e2=>{var t2=e2&&e2.attributes&&e2.attributes.RESOLUTION&&e2.attributes.RESOLUTION.height<720,i2=e2.excludeUntil===1/0&&e2.lastExcludeReason_===n2;t2&&i2&&(delete e2.excludeUntil,E.log.warn(`enabling non-HD playlist ${e2.id} because all playlists were excluded due to ${n2} key IDs`))})}}addKeyStatus_(e2,t2){var e3;e2=("string"==typeof e2?e2:(e3=e2,e3=new Uint8Array(e3),Array.from(e3).map(e4=>e4.toString(16).padStart(2,"0")).join(""))).slice(0,32).toLowerCase(),this.logger_(`KeyStatus '${t2}' with key ID ${e2} added to the keyStatusMap`),this.keyStatusMap_.set(e2,t2)}updatePlaylistByKeyStatus(e2,t2){this.addKeyStatus_(e2,t2),this.waitingForFastQualityPlaylistReceived_||this.excludeNonUsableThenChangePlaylist_(),this.mainPlaylistLoader_.off("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this)),this.mainPlaylistLoader_.on("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this))}excludeNonUsableThenChangePlaylist_(){this.excludeNonUsablePlaylistsByKeyId_(),this.fastQualityChange_()}}class qc{constructor(e2,t2,i2){var s2,n2,a2,o2,r2=e2.playlistController_,l2=r2.fastQualityChange_.bind(r2);t2.attributes&&(s2=t2.attributes.RESOLUTION,this.width=s2&&s2.width,this.height=s2&&s2.height,this.bandwidth=t2.attributes.BANDWIDTH,this.frameRate=t2.attributes["FRAME-RATE"]),this.codecs=wh(r2.main(),t2),this.playlist=t2,this.id=i2,this.enabled=(n2=e2.playlists,a2=t2.id,o2=l2,e3=>{var t3=n2.main.playlists[a2],i3=ah(t3),s3=oh(t3);if(void 0===e3)return s3;e3?delete t3.disabled:t3.disabled=!0;var r3={renditionInfo:{id:a2,bandwidth:t3.attributes.BANDWIDTH,resolution:t3.attributes.RESOLUTION,codecs:t3.attributes.CODECS},cause:"fast-quality"};return e3===s3||i3||(e3?(o2(t3),n2.trigger({type:"renditionenabled",metadata:r3})):n2.trigger({type:"renditiondisabled",metadata:r3})),e3})}}let jc=["seeking","seeked","pause","playing","error"];class Vc extends E.EventTarget{constructor(e2){super(),this.playlistController_=e2.playlistController,this.tech_=e2.tech,this.seekable=e2.seekable,this.allowSeeksWithinUnsafeLiveWindow=e2.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e2.liveRangeSafeTimeDelta,this.media=e2.media,this.playedRanges_=[],this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=Bd("PlaybackWatcher"),this.logger_("initialize");let t2=()=>this.monitorCurrentTime_(),i2=()=>this.monitorCurrentTime_(),s2=()=>this.techWaiting_(),r2=()=>this.resetTimeUpdate_(),n2=this.playlistController_,a2=["main","subtitle","audio"],o2={},l2=(a2.forEach(e3=>{o2[e3]={reset:()=>this.resetSegmentDownloads_(e3),updateend:()=>this.checkSegmentDownloads_(e3)},n2[e3+"SegmentLoader_"].on("appendsdone",o2[e3].updateend),n2[e3+"SegmentLoader_"].on("playlistupdate",o2[e3].reset),this.tech_.on(["seeked","seeking"],o2[e3].reset)}),t3=>{["main","audio"].forEach(e3=>{n2[e3+"SegmentLoader_"][t3]("appended",this.seekingAppendCheck_)})});this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),l2("off"))},this.clearSeekingAppendCheck_=()=>l2("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),l2("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",s2),this.tech_.on(jc,r2),this.tech_.on("canplay",i2),this.tech_.one("play",t2),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",s2),this.tech_.off(jc,r2),this.tech_.off("canplay",i2),this.tech_.off("play",t2),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),a2.forEach(e3=>{n2[e3+"SegmentLoader_"].off("appendsdone",o2[e3].updateend),n2[e3+"SegmentLoader_"].off("playlistupdate",o2[e3].reset),this.tech_.off(["seeked","seeking"],o2[e3].reset)}),this.checkCurrentTimeTimeout_&&window.clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&window.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=window.setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(e2){var t2=this.playlistController_[e2+"SegmentLoader_"];0<this[e2+"StalledDownloads_"]&&this.logger_(`resetting possible stalled download count for ${e2} loader`),this[e2+"StalledDownloads_"]=0,this[e2+"Buffered_"]=t2.buffered_()}checkSegmentDownloads_(e2){var t2=this.playlistController_,i2=t2[e2+"SegmentLoader_"],s2=i2.buffered_(),r2=function(t3,i3){if(t3!==i3){if(!t3&&i3||!i3&&t3)return!0;if(t3.length!==i3.length)return!0;for(let e3=0;e3<t3.length;e3++)if(t3.start(e3)!==i3.start(e3)||t3.end(e3)!==i3.end(e3))return!0}return!1}(this[e2+"Buffered_"],s2);this[e2+"Buffered_"]=s2,r2?(t2.trigger({type:"bufferedrangeschanged",metadata:{bufferedRanges:s2}}),this.resetSegmentDownloads_(e2)):(this[e2+"StalledDownloads_"]++,this.logger_(`found #${this[e2+"StalledDownloads_"]} ${e2} appends that did not increase buffer (possible stalled download)`,{playlistId:i2.playlist_&&i2.playlist_.id,buffered:Kd(s2)}),this[e2+"StalledDownloads_"]<10||(this.logger_(e2+" loader stalled download exclusion"),this.resetSegmentDownloads_(e2),this.tech_.trigger({type:"usage",name:`vhs-${e2}-download-exclusion`}),"subtitle"!==e2&&t2.excludePlaylist({error:{message:`Excessive ${e2} segment downloading detected.`},playlistExclusionDuration:1/0})))}checkCurrentTime_(){var e2,t2;if(!this.tech_.paused()&&!this.tech_.seeking())return e2=this.tech_.currentTime(),t2=this.tech_.buffered(),this.lastRecordedTime===e2&&(!t2.length||e2+Wd>=t2.end(t2.length-1))?this.techWaiting_():void(5<=this.consecutiveUpdates&&e2===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e2===this.lastRecordedTime?this.consecutiveUpdates++:(this.playedRanges_.push(O([this.lastRecordedTime,e2])),t2={playedRanges:this.playedRanges_},this.playlistController_.trigger({type:"playedrangeschanged",metadata:t2}),this.consecutiveUpdates=0,this.lastRecordedTime=e2))}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;var e2=this.seekable(),t2=this.tech_.currentTime();let i2;if(this.afterSeekableWindow_(e2,t2,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(i2=s2=e2.end(e2.length-1)),this.beforeSeekableWindow_(e2,t2)&&(i2=(s2=e2.start(0))+(s2===e2.end(0)?0:Wd)),void 0!==i2)this.logger_(`Trying to seek outside of seekable at time ${t2} with seekable range ${Xd(e2)}. Seeking to `+i2+".");else{var s2=this.playlistController_.sourceUpdater_,r2=(e2=this.tech_.buffered(),s2.audioBuffer?s2.audioBuffered():null),n2=(s2=s2.videoBuffer?s2.videoBuffered():null,this.media()),a2=n2.partTargetDuration||2*(n2.targetDuration-$d),o2=[r2,s2];for(let e3=0;e3<o2.length;e3++)if(o2[e3]&&Vd(o2[e3],t2)<a2)return!1;if(0===(n2=qd(e2,t2)).length)return!1;i2=n2.start(0)+Wd,this.logger_(`Buffered region starts (${n2.start(0)})  just beyond seek point (${t2}). Seeking to ${i2}.`)}return this.tech_.setCurrentTime(i2),!0}waiting_(){var e2,t2;this.techWaiting_()||(e2=this.tech_.currentTime(),(t2=Fd(t2=this.tech_.buffered(),e2)).length&&e2+3<=t2.end(0)&&(this.resetTimeUpdate_(),this.tech_.setCurrentTime(e2),this.logger_(`Stopped at ${e2} while inside a buffered region [${t2.start(0)} -> ${t2.end(0)}]. Attempting to resume playback by seeking to the current time.`),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"})))}techWaiting_(){var e2,t2=this.seekable(),i2=this.tech_.currentTime();return!!this.tech_.seeking()||(this.beforeSeekableWindow_(t2,i2)?(t2=t2.end(t2.length-1),this.logger_(`Fell out of live window at time ${i2}. Seeking to live point (seekable end) `+t2),this.resetTimeUpdate_(),this.tech_.setCurrentTime(t2),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0):(t2=this.tech_.vhs.playlistController_.sourceUpdater_,e2=this.tech_.buffered(),this.videoUnderflow_({audioBuffered:t2.audioBuffered(),videoBuffered:t2.videoBuffered(),currentTime:i2})?(this.resetTimeUpdate_(),this.tech_.setCurrentTime(i2),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0):0<(t2=qd(e2,i2)).length&&(this.logger_(`Stopped at ${i2} and seeking to `+t2.start(0)),this.resetTimeUpdate_(),this.skipTheGap_(i2),!0)))}afterSeekableWindow_(e2,t2,i2,s2=!1){if(!e2.length)return!1;let r2=e2.end(e2.length-1)+Wd;return t2>(!i2.endList&&("number"==typeof i2.partTargetDuration||s2)?e2.end(e2.length-1)+3*i2.targetDuration:r2)}beforeSeekableWindow_(e2,t2){return!!(e2.length&&0<e2.start(0)&&t2<e2.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:t2,audioBuffered:i2,currentTime:s2}){if(t2){let e2;var r2,n2;return t2.length&&i2.length?(r2=Fd(t2,s2-3),n2=Fd(t2,s2),(i2=Fd(i2,s2)).length&&!n2.length&&r2.length&&(e2={start:r2.end(0),end:i2.end(0)})):qd(t2,s2).length||(e2=this.gapFromVideoUnderflow_(t2,s2)),!!e2&&(this.logger_(`Encountered a gap in video from ${e2.start} to ${e2.end}. Seeking to current time `+s2),!0)}}skipTheGap_(e2){var t2=this.tech_.buffered(),i2=this.tech_.currentTime();t2=qd(t2,i2);this.resetTimeUpdate_(),0!==t2.length&&i2===e2&&(this.logger_("skipTheGap_:","currentTime:",i2,"scheduled currentTime:",e2,"nextRange start:",t2.start(0)),this.tech_.setCurrentTime(t2.start(0)+$d),e2={gapInfo:{from:i2,to:t2.start(0)}},this.playlistController_.trigger({type:"gapjumped",metadata:e2}),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}))}gapFromVideoUnderflow_(e2,t2){var i2=function(t3){if(t3.length<2)return O();var i3=[];for(let e3=1;e3<t3.length;e3++){var s3=t3.end(e3-1),r3=t3.start(e3);i3.push([s3,r3])}return O(i3)}(e2);for(let e3=0;e3<i2.length;e3++){var s2=i2.start(e3),r2=i2.end(e3);if(t2-s2<4&&2<t2-s2)return{start:s2,end:r2}}return null}}let Hc={errorInterval:30,getSource(e2){return e2(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},zc=function(t2,e2){function i2(e3){null!=e3&&(a2=t2.duration()!==1/0&&t2.currentTime()||0,t2.one("loadedmetadata",l2),t2.src(e3),t2.trigger({type:"usage",name:"vhs-error-reload"}),t2.play())}function s2(){if(Date.now()-n2<1e3*o2.errorInterval)t2.trigger({type:"usage",name:"vhs-error-reload-canceled"});else{if(o2.getSource&&"function"==typeof o2.getSource)return n2=Date.now(),o2.getSource.call(t2,i2);E.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}}function r2(){t2.off("loadedmetadata",l2),t2.off("error",s2),t2.off("dispose",r2)}let n2=0,a2=0,o2=L(Hc,e2),l2=(t2.ready(()=>{t2.trigger({type:"usage",name:"vhs-error-reload-initialized"})}),function(){a2&&t2.currentTime(a2)});t2.on("error",s2),t2.on("dispose",r2),t2.reloadSourceOnError=function(e3){r2(),zc(t2,e3)}};function $c(t2,e2){var i2=e2.media();let s2=-1;for(let e3=0;e3<t2.length;e3++)if(t2[e3].id===i2.id){s2=e3;break}t2.selectedIndex_=s2,t2.trigger({selectedIndex:s2,type:"change"})}let N={PlaylistLoader:Nh,Playlist:ph,utils:Jr,STANDARD_PLAYLIST_SELECTOR:Vu,INITIAL_PLAYLIST_SELECTOR:function(){var e2=this.playlists.main.playlists.filter(ph.isEnabled);return(e2=(qu(e2,(e3,t2)=>Tu(e3,t2)),e2.filter(e3=>!!wh(this.playlists.main,e3).video)))[0]||null},lastBandwidthSelector:Vu,movingAverageBandwidthSelector:function(t2){let i2=-1,s2=-1;if(t2<0||1<t2)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){let e2=this.useDevicePixelRatio&&window.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(e2=this.customPixelRatio),i2<0&&(i2=this.systemBandwidth,s2=this.systemBandwidth),0<this.systemBandwidth&&this.systemBandwidth!==s2&&(i2=t2*this.systemBandwidth+(1-t2)*i2,s2=this.systemBandwidth),ju({main:this.playlists.main,bandwidth:i2,playerWidth:parseInt(bu(this.tech_.el(),"width"),10)*e2,playerHeight:parseInt(bu(this.tech_.el(),"height"),10)*e2,playerObjectFit:this.usePlayerObjectFit?bu(this.tech_.el(),"objectFit"):"",limitRenditionByPlayerDimensions:this.limitRenditionByPlayerDimensions,playlistController:this.playlistController_})}},comparePlaylistBandwidth:Tu,comparePlaylistResolution:function(e2,t2){let i2,s2;return i2=(i2=e2.attributes.RESOLUTION&&e2.attributes.RESOLUTION.width?e2.attributes.RESOLUTION.width:i2)||window.Number.MAX_VALUE,s2=(s2=t2.attributes.RESOLUTION&&t2.attributes.RESOLUTION.width?t2.attributes.RESOLUTION.width:s2)||window.Number.MAX_VALUE,i2===s2&&e2.attributes.BANDWIDTH&&t2.attributes.BANDWIDTH?e2.attributes.BANDWIDTH-t2.attributes.BANDWIDTH:i2-s2},xhr:Uh()},Wc=(Object.keys(R).forEach(t2=>{Object.defineProperty(N,t2,{get:()=>(E.log.warn(`using Vhs.${t2} is UNSAFE be sure you know what you are doing`),R[t2]),set(e2){E.log.warn(`using Vhs.${t2} is UNSAFE be sure you know what you are doing`),"number"!=typeof e2||e2<0?E.log.warn(`value of Vhs.${t2} must be greater than or equal to 0`):R[t2]=e2}})}),"videojs-vhs"),Gc=(N.canPlaySource=function(){return E.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")},({player:s2,sourceKeySystems:e2,audioMedia:t2,mainPlaylists:i2})=>{if(!s2.eme.initializeMediaKeys)return Promise.resolve();var r2;t2=t2?i2.concat([t2]):i2,i2=t2,r2=Object.keys(e2),t2=i2.reduce((e3,s3)=>{var t3;return s3.contentProtection&&(t3=r2.reduce((e4,t4)=>{var i3=s3.contentProtection[t4];return i3&&i3.pssh&&(e4[t4]={pssh:i3.pssh}),e4},{}),Object.keys(t3).length)&&e3.push(t3),e3},[]);let n2=[],a2=[];return t2.forEach(e3=>{a2.push(new Promise((e4,t3)=>{s2.tech_.one("keysessioncreated",e4)})),n2.push(new Promise((t3,i3)=>{s2.eme.initializeMediaKeys({keySystems:e3},e4=>{e4?i3(e4):t3()})}))}),Promise.race([Promise.all(n2),Promise.race(a2)])}),Kc=()=>{if(!window.localStorage)return null;var e2=window.localStorage.getItem(Wc);if(!e2)return null;try{return JSON.parse(e2)}catch(e3){return null}},Yc=(e2,t2)=>{e2._requestCallbackSet||(e2._requestCallbackSet=new Set),e2._requestCallbackSet.add(t2)},Qc=(e2,t2)=>{e2._responseCallbackSet||(e2._responseCallbackSet=new Set),e2._responseCallbackSet.add(t2)},Jc=(e2,t2)=>{e2._requestCallbackSet&&(e2._requestCallbackSet.delete(t2),e2._requestCallbackSet.size||delete e2._requestCallbackSet)},Zc=(e2,t2)=>{e2._responseCallbackSet&&(e2._responseCallbackSet.delete(t2),e2._responseCallbackSet.size||delete e2._responseCallbackSet)};N.supportsNativeHls=function(){if(!document||!document.createElement)return!1;let t2=document.createElement("video");return!!E.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(e2){return/maybe|probably/i.test(t2.canPlayType(e2))})}(),N.supportsNativeDash=!!(document&&document.createElement&&E.getTech("Html5").isSupported())&&/maybe|probably/i.test(document.createElement("video").canPlayType("application/dash+xml")),N.supportsTypeNatively=e2=>"hls"===e2?N.supportsNativeHls:"dash"===e2&&N.supportsNativeDash,N.isSupported=function(){return E.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")},N.xhr.onRequest=function(e2){Yc(N.xhr,e2)},N.xhr.onResponse=function(e2){Qc(N.xhr,e2)},N.xhr.offRequest=function(e2){Jc(N.xhr,e2)},N.xhr.offResponse=function(e2){Zc(N.xhr,e2)},t=E.getComponent("Component");class ep extends t{constructor(e2,t2,i2){if(super(t2,i2.vhs),"number"==typeof i2.initialBandwidth&&(this.options_.bandwidth=i2.initialBandwidth),this.logger_=Bd("VhsHandler"),t2.options_&&t2.options_.playerId&&(i2=E.getPlayer(t2.options_.playerId),this.player_=i2),this.tech_=t2,this.source_=e2,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&t2.overrideNativeAudioTracks&&t2.overrideNativeVideoTracks)t2.overrideNativeAudioTracks(!0),t2.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(t2.featuresNativeVideoTracks||t2.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(document,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],e3=>{var t3=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;t3&&t3.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(e2={}){this.options_=L(this.options_,e2),this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.usePlayerObjectFit=this.options_.usePlayerObjectFit||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useForcedSubtitles=this.options_.useForcedSubtitles||!1,this.options_.useNetworkInformationApi=void 0===this.options_.useNetworkInformationApi||this.options_.useNetworkInformationApi,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=!1!==this.options_.llhls,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,"number"!=typeof this.options_.playlistExclusionDuration&&(this.options_.playlistExclusionDuration=60),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage&&((e2=Kc())&&e2.bandwidth&&(this.options_.bandwidth=e2.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),e2)&&e2.throughput&&(this.options_.throughput=e2.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"})),"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=R.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===R.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","usePlayerObjectFit","customPixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useForcedSubtitles","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach(e3=>{void 0!==this.source_[e3]&&(this.options_[e3]=this.source_[e3])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio,this.usePlayerObjectFit=this.options_.usePlayerObjectFit,"number"==typeof(e2=this.options_.customPixelRatio)&&0<=e2&&(this.customPixelRatio=e2)}setOptions(e2={}){this.setOptions_(e2)}src(e2,t2){e2&&(this.setOptions_(),this.options_.src=0===(e2=this.source_.src).toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(e2.substring(e2.indexOf(",")+1)):e2,this.options_.tech=this.tech_,this.options_.externVhs=N,this.options_.sourceType=ea(t2),this.options_.seekTo=e3=>{this.tech_.setCurrentTime(e3)},this.options_.player_=this.player_,this.playlistController_=new Fc(this.options_),e2=L({liveRangeSafeTimeDelta:Wd},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_}),this.playbackWatcher_=new Vc(e2),this.attachStreamingEventListeners_(),this.playlistController_.on("error",()=>{var e3=E.players[this.tech_.options_.playerId];let t3=this.playlistController_.error;"object"!=typeof t3||t3.code?"string"==typeof t3&&(t3={message:t3,code:3}):t3.code=3,e3.error(t3)}),t2=this.options_.bufferBasedABR?N.movingAverageBandwidthSelector(.55):N.STANDARD_PLAYLIST_SELECTOR,this.playlistController_.selectPlaylist=(this.selectPlaylist||t2).bind(this),this.playlistController_.selectInitialPlaylist=N.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(e3){this.playlistController_.selectPlaylist=e3.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(e3){this.playlistController_.mainSegmentLoader_.throughput.rate=e3,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let e3=this.playlistController_.mainSegmentLoader_.bandwidth;var t3=window.navigator.connection||window.navigator.mozConnection||window.navigator.webkitConnection;return this.options_.useNetworkInformationApi&&t3&&(e3=1e7<=(t3=1e3*t3.downlink*1e3)&&1e7<=e3?Math.max(e3,t3):t3),e3},set(e3){this.playlistController_.mainSegmentLoader_.bandwidth=e3,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){var e3=1/(this.bandwidth||1);let t3;return t3=0<this.throughput?1/this.throughput:0,Math.floor(1/(e3+t3))},set(){E.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>Kd(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>Kd(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{if(this.options_.useBandwidthFromLocalStorage){var e3={bandwidth:this.bandwidth,throughput:Math.round(this.throughput)};if(window.localStorage){var t3=(t3=Kc())?L(t3,e3):e3;try{window.localStorage.setItem(Wc,JSON.stringify(t3))}catch(e4){return}}}}),this.playlistController_.on("selectedinitialmedia",()=>{var i2;(i2=this).representations=()=>{var e3=i2.playlistController_.main();return(e3=ch(e3)?i2.playlistController_.getAudioTrackPlaylists_():e3.playlists)?e3.filter(e4=>!ah(e4)).map((e4,t3)=>new qc(i2,e4,e4.id)):[]}}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el())&&(this.mediaSourceUrl_=window.URL.createObjectURL(this.playlistController_.mediaSource),(E.browser.IS_ANY_SAFARI||E.browser.IS_IOS)&&this.options_.overrideNative&&"hls"===this.options_.sourceType&&"function"==typeof this.tech_.addSourceElement?(this.tech_.addSourceElement(this.mediaSourceUrl_),this.tech_.addSourceElement(this.source_.src)):this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){var e2=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),Gc({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:e2&&e2.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(e3=>{this.logger_("error while creating EME key session",e3),this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){var e2=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;e2=(({player:e2,sourceKeySystems:t2,media:i2,audioMedia:s2})=>!(!(t2=((e3,t3,i3)=>{if(!e3)return e3;let s3={};t3&&t3.attributes&&t3.attributes.CODECS&&(s3=Ih(aa(t3.attributes.CODECS))),i3&&i3.attributes&&i3.attributes.CODECS&&(s3.audio=i3.attributes.CODECS);var r2,n2=oa(s3.video),a2=oa(s3.audio),o2={};for(r2 in e3)o2[r2]={},a2&&(o2[r2].audioContentType=a2),n2&&(o2[r2].videoContentType=n2),t3.contentProtection&&t3.contentProtection[r2]&&t3.contentProtection[r2].pssh&&(o2[r2].pssh=t3.contentProtection[r2].pssh),"string"==typeof e3[r2]&&(o2[r2].url=e3[r2]);return L(e3,o2)})(t2,i2,s2))||(e2.currentSource().keySystems=t2)&&!e2.eme&&(E.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),1)))({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:e2&&e2.media()});this.player_.tech_.on("keystatuschange",e3=>{this.playlistController_.updatePlaylistByKeyStatus(e3.keyId,e3.status)}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),e2?this.createKeySessions_():this.playlistController_.sourceUpdater_.initializedEme()}setupQualityLevels_(){var e2=E.players[this.tech_.options_.playerId];e2&&e2.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=e2.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{var t2,e3;t2=this.qualityLevels_,(e3=this).representations().forEach(e4=>{t2.addQualityLevel(e4)}),$c(t2,e3.playlists)}),this.playlists.on("mediachange",()=>{$c(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":"3.17.0","mux.js":"7.1.0","mpd-parser":"1.3.1","m3u8-parser":"7.2.0","aes-decrypter":"4.0.2"}}version(){return this.constructor.version()}canChangeType(){return mc.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(e2){this.playlistController_.setCurrentTime(e2)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&window.URL.revokeObjectURL&&(window.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(e2,t2){return(({playlist:e2,time:t2,callback:i2})=>{var s2,r2;if(i2)return e2&&void 0!==t2?(e2=((t3,i3)=>{if(!i3||!i3.segments||0===i3.segments.length)return null;let r3,s3=0;for(let e4=0;e4<i3.segments.length&&(r3=i3.segments[e4],!(t3<=(s3=r3.videoTimingInfo?r3.videoTimingInfo.transmuxedPresentationEnd:s3+r3.duration)));e4++);var e3=i3.segments[i3.segments.length-1];if(e3.videoTimingInfo&&e3.videoTimingInfo.transmuxedPresentationEnd<t3)return null;if(t3>s3){if(t3>s3+.25*e3.duration)return null;r3=e3}return{segment:r3,estimatedStart:r3.videoTimingInfo?r3.videoTimingInfo.transmuxedPresentationStart:s3-r3.duration,type:r3.videoTimingInfo?"accurate":"estimate"}})(t2,e2))?"estimate"===e2.type?i2({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:e2.estimatedStart}):(s2={mediaSeconds:t2},(r2=(e2=e2.segment).dateTimeObject?(r2=e2.videoTimingInfo.transmuxerPrependedSeconds,t2-=e2.videoTimingInfo.transmuxedPresentationStart+r2,new Date(e2.dateTimeObject.getTime()+1e3*t2)):null)&&(s2.programDateTime=r2.toISOString()),i2(null,s2)):i2({message:"valid programTime was not found"}):i2({message:"getProgramTime: playlist and time must be provided"});throw new Error("getProgramTime: callback must be provided")})({playlist:this.playlistController_.media(),time:e2,callback:t2})}seekToProgramTime(e2,t2,i2=!0,s2=2){return Xh({programTime:e2,playlist:this.playlistController_.media(),retryCount:s2,pauseAfterSeek:i2,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t2})}setupXhrHooks_(){this.xhr.onRequest=e2=>{Yc(this.xhr,e2)},this.xhr.onResponse=e2=>{Qc(this.xhr,e2)},this.xhr.offRequest=e2=>{Jc(this.xhr,e2)},this.xhr.offResponse=e2=>{Zc(this.xhr,e2)},this.player_.trigger("xhr-hooks-ready")}attachStreamingEventListeners_(){["seekablerangeschanged","bufferedrangeschanged","contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"].forEach(e2=>{this.playlistController_.on(e2,e3=>{this.player_.trigger(f({},e3))})}),["gapjumped","playedrangeschanged"].forEach(e2=>{this.playbackWatcher_.on(e2,e3=>{this.player_.trigger(f({},e3))})})}}let tp={name:"videojs-http-streaming",VERSION:"3.17.0",canHandleSource:(e2,t2={})=>!(!(t2=L(E.options,t2)).vhs.experimentalUseMMS&&!Jn("avc1.4d400d,mp4a.40.2",!1))&&tp.canPlayType(e2.type,t2),handleSource:(e2,t2,i2={})=>(i2=L(E.options,i2),t2.vhs=new ep(e2,t2,i2),t2.vhs.xhr=Uh(),t2.vhs.setupXhrHooks_(),t2.vhs.src(e2.src,e2.type),t2.vhs),canPlayType:(e2,t2)=>(e2=ea(e2))&&(t2=tp.getOverrideNative(t2),!N.supportsTypeNatively(e2)||t2)?"maybe":"",getOverrideNative(e2={}){var{vhs:e2={}}=e2,t2=!(E.browser.IS_ANY_SAFARI||E.browser.IS_IOS),{overrideNative:e2=t2}=e2;return e2}};return Jn("avc1.4d400d,mp4a.40.2",!0)&&E.getTech("Html5").registerSourceHandler(tp,0),E.VhsHandler=ep,E.VhsSourceHandler=tp,E.Vhs=N,E.use||E.registerComponent("Vhs",N),E.options.vhs=E.options.vhs||{},E.getPlugin&&E.getPlugin("reloadSourceOnError")||E.registerPlugin("reloadSourceOnError",function(e2){zc(this,e2)}),E});let BaseInputController=class BaseInputController2{handleSuffix($input2){const suffix=$input2.data("suffix")||"";$input2.next(".input-group-append").find(".input-group-text").html(suffix)}handlePrefix($input2){const prefix=$input2.data("prefix")||"";$input2.prev(".input-group-prepend").find(".input-group-text").html(prefix)}displayInitialMessage($input2){const message=$input2.data("default-message");if(!message)return;($input2.hasClass("x-component")?$input2.find("[data-suppress-logic-messages]").data("suppress-logic-messages"):$input2.closest(".x-form-component").find("[data-suppress-logic-messages]").data("suppress-logic-messages"))||showComponentMessage({type:$input2.data("message-type"),targetElement:$input2,message:message,title:$input2.data("message-type")})}tooltip(title){this.$input&&(this.$input.tooltip("dispose"),this.$input.attr("title",title),this.$input.tooltip({title:title}))}};function styleProgressBars(){$(".progress-stacked").each(function(){const $progressBars=$(this).find("> .progress > .progress-bar"),totalBars=$progressBars.length;$progressBars.each(function(index){$(this).css({left:4*index+"px","z-index":totalBars-index})})})}window.BaseInputController=BaseInputController,doravel.ready(()=>{$(".x-card-component").each(function(){"true"===$(this).attr("data-default-opened")?($(this).addClass("opened"),$(this).find(".card-expand-icon").css("transition","none").css("transform","rotate(180deg)").css("transition","all 0.1s ease")):$(this).find(".card-expand-icon").css("transition","none").css("transform","rotate(0deg)").css("transition","all 0.1s ease")})}),$(document).on("click",".x-card-component .card-expand-icon",function(){const card=$(this).closest(".x-card-component"),icon=$(this);card.toggleClass("opened"),card.hasClass("opened")?icon.css("transform","rotate(180deg)"):icon.css("transform","rotate(0deg)"),card.find(".card-body").first().slideToggle(400)}),$.fn.setValue=function(value){const $el=this,el=$el[0],formComponent=$el.closest(".x-form-component"),setVal=v=>{$el.val(v),el&&(el.defaultValue=$el.val())};if($el.hasClass("pwt-datepicker-input-element")){const picker=window[$el.attr("id")];if(""===value)return this;const timestamp=isNaN(value)?new persianDate(value.match(/(\d+)/g).map(Number)).valueOf():value<1e11?1e3*value:value;return picker.setDate(timestamp),$el.attr("data-default-value",timestamp/1e3),this}if(formComponent.hasClass("x-number-input-component"))return setVal(value),formComponent.find(".number-input")[0].defaultValue=$el.val(),this;if(formComponent.hasClass("x-select-component"))return $el.val(value).trigger("change"),$el.find("option").each(function(){this.defaultSelected=Array.isArray(value)?value.includes(this.value):this.value==value}),this;if(formComponent.hasClass("x-checkbox-group-component")||formComponent.hasClass("x-checkbox-component"))return Array.isArray(value)?el.checked=value.includes(el.value):el.checked="boolean"==typeof value?value:el.value==value,el.defaultChecked=el.checked,this;if(formComponent.hasClass("x-radio-input-component")){const name=$el.attr("name");if(name){($el.closest("form").length?$el.closest("form").find(`input[type="radio"][name="${name}"]`):$(`input[type="radio"][name="${name}"]`)).each(function(){this.checked=this.value==value,this.defaultChecked=this.checked})}else el.checked=el.value==value,el.defaultChecked=el.checked;return this}return setVal(value),this};class DateRangeInput{constructor(fromInput,toInput,fromConfig,toConfig,disableToday,inputlocale,format){this.format=format,this.fromInput=$(fromInput),this.toInput=$(toInput),this.fromConfig=fromConfig,this.toConfig=toConfig,this.disableToday=disableToday,this.inputlocale=inputlocale,this.suppressLogicMessages="true"===this.fromInput.closest(".x-form-component").attr("data-suppress-logic-messages"),this.from=null,this.to=null,this.isFromInitialLoad=!0,this.isToInitialLoad=!0,this.selectableRange=this.toInput.data("selectable-range"),this.hasFromMaxDate=!!this.fromInput.attr("data-max-date"),this.hasToMinDate=!!this.toInput.attr("data-min-date"),this.setupEvents()}setupEvents(){this.fromInput.siblings(".date-picker-clear-icon").on("click",()=>{this.clearValue(this.fromInput,!0)}),this.toInput.siblings(".date-picker-clear-icon").on("click",()=>{this.clearValue(this.toInput,!1)}),this.fromInput.on("focusout",function(e){e.stopImmediatePropagation()}),this.toInput.on("focusout",function(e){e.stopImmediatePropagation()}),this.fromInput.on("input",()=>{""===this.fromInput.val()&&clearComponentMessage(this.fromInput,!1)}),this.toInput.on("input",()=>{""===this.toInput.val()&&clearComponentMessage(this.toInput,!1)})}displayInitialMessage(selector){const $targetElement=$(selector).closest(".x-form-component"),message=$targetElement.data("default-message");$targetElement.data("suppress-logic-messages")||showComponentMessage({type:$targetElement.data("message-type"),targetElement:$targetElement,message:message,title:$targetElement.data("message-type")})}clearValue(input,isFrom){if($(input).val(""),$(input).trigger("change"),isFrom){const cachedValue=this.to.getState().selected.unixDate,config=getConfigDateInput(this.toInput);this.to.options={...this.to.options,minDate:config.minDate||null},this.toConfig.minDate=config.minDate||null,this.to.touched&&""!==this.toInput.val()&&this.to.setDate(cachedValue)}else{const cachedValue=this.from.getState().selected.unixDate,config=getConfigDateInput(this.fromInput);this.from.options={...this.from.options,maxDate:config.maxDate||null},this.fromConfig.maxDate=config.maxDate||null,this.from.touched&&""!==this.fromInput.val()&&this.from.setDate(cachedValue)}}isDisabled(dateObj,disabledDates){let formattedDate=toEnglishDigits(dateObj.format("YYYY/MM/DD"));const today=toEnglishDigits((new persianDate).format("YYYY/MM/DD")),dayOfWeek=dateObj.day();return disabledDates.includes(formattedDate)||this.disableToday&&formattedDate===today||this.fromConfig.disabledDays.includes(dayOfWeek)||this.toConfig.disabledDays.includes(dayOfWeek)}isInRange(dateObj,range,isFrom){if(!range)return!0;if(isFrom){if(!this.toInput.val())return!0;const[year,month,day]=this.toInput.val().split("/"),selectedDate=new persianDate([+year,+month,+day]),diffDays=Math.abs(dateObj.diff(selectedDate,"days"));return diffDays>1&&diffDays%range===0}{if(!this.fromInput.val())return!0;const[year,month,day]=this.fromInput.val().split("/"),selectedDate=new persianDate([+year,+month,+day]),diffDays=Math.abs(dateObj.diff(selectedDate,"days"))-1;return diffDays>1&&diffDays%range===0}}initPicker(selector,config,otherConfig,isFrom){this.displayInitialMessage(selector);const input=isFrom?this.fromInput:this.toInput,minDate=config.minDate||!isFrom&&otherConfig.defaultValue||null,otherDefaultValue=otherConfig.defaultValue?otherConfig.defaultValue.unix():null,adjustedMinDate=minDate&&!isFrom&&otherDefaultValue&&otherDefaultValue>minDate.unix()?new persianDate.unix(otherDefaultValue):minDate,maxDate=config.maxDate||isFrom&&otherConfig.defaultValue||null,adjustedMaxDate=maxDate&&isFrom&&otherDefaultValue&&otherDefaultValue<maxDate.unix()?new persianDate.unix(otherDefaultValue):maxDate,picker=$(selector).persianDatepicker({initialValue:!1,format:this.format||generateFormat(config.type,config.timePickerOptions),observer:!1,responsive:!1,inputDelay:1e3,calendar:{persian:{locale:this.inputlocale||"fa",leapYearMode:"astronomical"},gregorian:{locale:this.inputlocale||"fa"}},timePicker:{enabled:"time"===config.type||"datetime"===config.type,hour:{enabled:config.timePickerOptions.includes("hours")},minute:{enabled:config.timePickerOptions.includes("minutes")},second:{enabled:config.timePickerOptions.includes("seconds")}},onlyTimePicker:"time"===config.type,minDate:adjustedMinDate,maxDate:adjustedMaxDate,autoClose:config.autoClose,toolbox:{onToday:()=>this.handleToday(config,picker,selector),calendarSwitch:{enabled:config.allowGregorian},submitButton:{enabled:"time"===config.type,text:{fa:"",en:"Now"},onSubmit:()=>{picker.setDate(new persianDate)}}},checkDate:timestamp=>!this.isDisabled(new persianDate(timestamp),config.disabledDates)&&this.isInRange(new persianDate(timestamp),this.selectableRange,isFrom),dayPicker:{onSelect:timestamp=>{this.handleSelect(timestamp,isFrom),isFrom?this.fromInput.trigger("change"):this.toInput.trigger("change")}},onSet:instance=>{"number"==typeof instance?this.handleSelect(instance,isFrom):this.handleSelect(1e3*instance.State.unixtime,isFrom)},onShow:function(){""===$(selector).val()&&this.model.view.$container.find(".selected").removeClass("selected")}});if(config.allowTyping){const placeholder=generateMask(config.type,config.timePickerOptions).replace(/0/g,"_");Inputmask({regex:generateRegex(config.type,config.timePickerOptions),placeholder:placeholder,onBeforeMask:function(value,opts){const persianDigits=["","","","","","","","","",""],arabicDigits=["","","","","","","","","",""];let result=value;for(let i=0;i<10;i++)result=result.replace(new RegExp(persianDigits[i],"g"),i);for(let i=0;i<10;i++)result=result.replace(new RegExp(arabicDigits[i],"g"),i);return result},oncomplete:e=>{const value=e.target.value;let valueDate;if("date"===config.type)valueDate=new persianDate(value.split("/").map(Number));else if("time"===config.type){const today=new persianDate,[hours,minutes,seconds]=value.split(":").map(Number);valueDate=today.startOf("day"),void 0!==hours&&valueDate.hours(hours%24),void 0!==minutes&&valueDate.minute(minutes%60),void 0!==seconds&&valueDate.second(seconds%60)}else if("datetime"===config.type){const[datePart,timePart]=value.split(" "),dateValues=datePart.split("/").map(Number);if(valueDate=new persianDate(dateValues),timePart&&(new persianDate).isPersianDate(valueDate)){const[hours,minutes,seconds]=timePart.split(":").map(Number);void 0!==hours&&valueDate.hours(hours%24),void 0!==minutes&&valueDate.minute(minutes%60),void 0!==seconds&&valueDate.second(seconds%60)}}else valueDate=new persianDate(value.split("/").map(Number));if(!(new persianDate).isPersianDate(valueDate))return picker.hide(),picker.show(),void(this.suppressLogicMessages||showComponentMessage({type:"error",targetElement:input,message:"    ."}));const valueUnix=valueDate.unix(),minDateUnix=config.minDate?config.minDate.unix():null,maxDateUnix=config.maxDate?config.maxDate.unix():null,isMinValid=!minDateUnix||valueUnix>=minDateUnix,isMaxValid=!maxDateUnix||valueUnix<=maxDateUnix,isDisabled=this.isDisabled(valueDate,config.disabledDates);input.closest(".x-form-component").find(".form-label").text();isMinValid&&isMaxValid&&!isDisabled?(clearComponentMessage(input),picker.setDate(valueDate.valueOf())):(picker.hide(),picker.show(),this.suppressLogicMessages||showComponentMessage({type:"error",targetElement:input,message:"       ."}))}}).mask($(selector)[0])}return config.defaultValue&&setTimeout(()=>{this.setDefaultValue(config,picker,isFrom)},100),picker}handleToday(config,picker,selector){const today=new persianDate,todayUnix=today.unix(),minDateUnix=config.minDate?config.minDate.unix():null,maxDateUnix=config.maxDate?config.maxDate.unix():null;this.isDisabled(today,config.disabledDates)?selector.val(""):((!minDateUnix||todayUnix>=minDateUnix)&&(!maxDateUnix||todayUnix<=maxDateUnix)?picker.setDate(today):minDateUnix&&todayUnix<minDateUnix?picker.setDate(config.minDate):maxDateUnix&&todayUnix>maxDateUnix&&picker.setDate(config.maxDate),selector.trigger("change"))}handleSelect(timestamp,isFrom){const picker=isFrom?this.from:this.to,otherPicker=isFrom?this.to:this.from,otherConfig=isFrom?this.toConfig:this.fromConfig,input=isFrom?this.fromInput:this.toInput,otherInput=isFrom?this.toInput:this.fromInput,optionKey=isFrom?"minDate":"maxDate";let adjustedTimeStamp=timestamp;if(isFrom&&this.hasToMinDate||!isFrom&&this.hasFromMaxDate)clearComponentMessage(input);else{if(this.fromConfig.allowSameDaySelection||(adjustedTimeStamp=isFrom?new persianDate.unix(String(timestamp).length>10?timestamp/1e3:timestamp).startOf("day").add("hours",25).valueOf():new persianDate.unix(String(timestamp).length>10?timestamp/1e3:timestamp).startOf("day").subtract("days",2).valueOf()),picker&&(picker.touched=!0),otherPicker&&otherPicker.options&&otherPicker.options[optionKey]!==adjustedTimeStamp){const cachedValue=otherPicker.getState().selected.unixDate;otherPicker.options={...otherPicker.options,[optionKey]:adjustedTimeStamp},otherConfig[optionKey]=new persianDate.unix(String(adjustedTimeStamp).length>10?adjustedTimeStamp/1e3:adjustedTimeStamp),otherPicker.touched&&""!==otherInput.val()&&otherPicker.setDate(cachedValue)}clearComponentMessage(input)}}setDefaultValue(config,picker,isFrom){const defaultValueDate=config.defaultValue,minDateUnix=config.minDate?config.minDate.startOf("day").unix():null,maxDateUnix=config.maxDate?config.maxDate.startOf("day").unix():null,defaultValueUnix=defaultValueDate.unix(),isMinValid=!minDateUnix||defaultValueUnix>=minDateUnix,isMaxValid=!maxDateUnix||defaultValueUnix<=maxDateUnix,isDisabled=this.isDisabled(defaultValueDate,config.disabledDates);isMinValid&&isMaxValid&&!isDisabled&&(isFrom&&(!this.toConfig.defaultValue||this.toConfig.defaultValue.unix()>=defaultValueUnix)?picker.setDate(defaultValueDate):isFrom||this.fromConfig.defaultValue&&!(this.fromConfig.defaultValue.unix()<=defaultValueUnix)||picker.setDate(defaultValueDate))}initFromPicker(selector){this.from=this.initPicker(selector,this.fromConfig,this.toConfig,!0),window[selector.attr("id")]=this.from}initToPicker(selector){this.to=this.initPicker(selector,this.toConfig,this.fromConfig,!1),window[selector.attr("id")]=this.to}}class DatePickerInput{constructor(input,config,disableToday,inputlocale,format){this.input=$(input),this.label=this.input.closest(".x-form-component").find(".form-label").text()??"",this.format=format,this.config=config,this.disableToday=disableToday,this.inputlocale=inputlocale,this.suppressLogicMessages="true"===this.input.closest(".x-date-picker-component").attr("data-suppress-logic-messages"),this.displayInitialMessage(),this.setupEvents()}setupEvents(){this.input.siblings(".date-picker-clear-icon").on("click",()=>{this.clearValue()}),this.input.on("focusout",function(e){e.stopImmediatePropagation()}),this.input.on("input",()=>{""===this.input.val()&&clearComponentMessage(this.input,!1)})}isDisabled(dateObj,disabledDates){let formattedDate=toEnglishDigits(dateObj.format("YYYY/MM/DD"));const today=toEnglishDigits((new persianDate).format("YYYY/MM/DD")),dayOfWeek=dateObj.day();return disabledDates.includes(formattedDate)||this.disableToday&&formattedDate===today||this.config.disabledDays.includes(dayOfWeek)}clearValue(){this.input.val(""),this.input.trigger("change")}displayInitialMessage(){const $targetElement=this.input.closest(".x-date-picker-component"),message=$targetElement.data("default-message");$targetElement.data("suppress-logic-messages")||showComponentMessage({type:$targetElement.data("message-type"),targetElement:$targetElement,message:message,title:$targetElement.data("message-type")})}initDatePicker(selector){if(this.picker=$(selector).persianDatepicker({initialValue:!1,format:this.format||generateFormat(this.config.type,this.config.timePickerOptions),responsive:!1,observer:!1,inputDelay:1e3,calendar:{persian:{locale:this.inputlocale||"fa",leapYearMode:"astronomical"},gregorian:{locale:this.inputlocale||"fa"}},timePicker:{enabled:"time"===this.config.type||"datetime"===this.config.type,hour:{enabled:this.config.timePickerOptions.includes("hours")},minute:{enabled:this.config.timePickerOptions.includes("minutes")},second:{enabled:this.config.timePickerOptions.includes("seconds")}},onlyTimePicker:"time"===this.config.type,minDate:this.config.minDate||null,maxDate:this.config.maxDate||null,autoClose:this.config.autoClose,dayPicker:{onSelect:e=>{clearComponentMessage(this.input),this.input.trigger("change")}},toolbox:{onToday:()=>this.handleToday(selector),calendarSwitch:{enabled:this.config.allowGregorian},submitButton:{enabled:"time"===this.config.type,text:{fa:"",en:"Now"},onSubmit:()=>{this.picker.setDate(new persianDate)}}},checkDate:timestamp=>!this.isDisabled(new persianDate(timestamp),this.config.disabledDates),onShow:function(){""===$(selector).val()&&this.model.view.$container.find(".selected").removeClass("selected")}}),window[selector.attr("id")]=this.picker,this.config.allowTyping){const placeholder=generateMask(this.config.type,this.config.timePickerOptions).replace(/0/g,"_");Inputmask({regex:generateRegex(this.config.type,this.config.timePickerOptions),placeholder:placeholder,definitions:{0:{validator:"[0123456789]"}},onBeforeMask:function(value,opts){const persianDigits=["","","","","","","","","",""],arabicDigits=["","","","","","","","","",""];let result=value;for(let i=0;i<10;i++)result=result.replace(new RegExp(persianDigits[i],"g"),i);for(let i=0;i<10;i++)result=result.replace(new RegExp(arabicDigits[i],"g"),i);return result},oncomplete:e=>{const value=e.target.value;let valueDate;if("date"===this.config.type)valueDate=new persianDate(value.split("/").map(Number));else if("time"===this.config.type){const today=new persianDate,[hours,minutes,seconds]=value.split(":").map(Number);valueDate=today.startOf("day"),void 0!==hours&&valueDate.hours(hours%24),void 0!==minutes&&valueDate.minute(minutes%60),void 0!==seconds&&valueDate.second(seconds%60)}else if("datetime"===this.config.type){const[datePart,timePart]=value.split(" "),dateValues=datePart.split("/").map(Number);if(valueDate=new persianDate(dateValues),timePart&&(new persianDate).isPersianDate(valueDate)){const[hours,minutes,seconds]=timePart.split(":").map(Number);void 0!==hours&&valueDate.hours(hours%24),void 0!==minutes&&valueDate.minute(minutes%60),void 0!==seconds&&valueDate.second(seconds%60)}}else valueDate=new persianDate(value.split("/").map(Number));if(!(new persianDate).isPersianDate(valueDate))return this.picker.hide(),this.picker.show(),void(this.suppressLogicMessages||showComponentMessage({type:"error",targetElement:this.input,message:"    ."}));const valueUnix=valueDate.unix(),minDateUnix=this.config.minDate?this.config.minDate.unix():null,maxDateUnix=this.config.maxDate?this.config.maxDate.unix():null,isMinValid=!minDateUnix||valueUnix>=minDateUnix,isMaxValid=!maxDateUnix||valueUnix<=maxDateUnix,isDisabled=this.isDisabled(valueDate,this.config.disabledDates);isMinValid&&isMaxValid&&!isDisabled?(clearComponentMessage(this.input),this.picker.setDate(valueDate.valueOf())):(this.picker.hide(),this.picker.show(),this.suppressLogicMessages||showComponentMessage({type:"error",targetElement:this.input,message:"       ."}))}}).mask($(selector)[0])}return this.config.defaultValue&&this.setDefaultValue(),this.picker}handleToday(selector){clearComponentMessage(this.input);const today=new persianDate,todayUnix=today.unix(),minDateUnix=this.config.minDate?this.config.minDate.startOf("day").unix():null,maxDateUnix=this.config.maxDate?this.config.maxDate.startOf("day").unix():null;this.isDisabled(today,this.config.disabledDates)?selector.val(""):((!minDateUnix||todayUnix>=minDateUnix)&&(!maxDateUnix||todayUnix<=maxDateUnix)?this.picker.setDate(today):minDateUnix&&todayUnix<minDateUnix?this.picker.setDate(this.config.minDate):maxDateUnix&&todayUnix>maxDateUnix&&this.picker.setDate(this.config.maxDate),selector.trigger("change"))}setDefaultValue(){const defaultValueDate=new persianDate(this.config.defaultValue),minDateUnix=this.config.minDate?this.config.minDate.unix():null,maxDateUnix=this.config.maxDate?this.config.maxDate.unix():null,defaultValueUnix=defaultValueDate.unix(),isMinValid=!minDateUnix||defaultValueUnix>=minDateUnix,isMaxValid=!maxDateUnix||defaultValueUnix<=maxDateUnix,isDisabled=this.isDisabled(defaultValueDate,this.config.disabledDates);isMinValid&&isMaxValid&&!isDisabled&&this.picker.setDate(defaultValueDate)}}function toEnglishDigits(str){const persianNumbers=["","","","","","","","","",""],arabicNumbers=["","","","","","","","","",""],englishNumbers=["1","2","3","4","5","6","7","8","9","0"];return str.split("").map(c=>englishNumbers[persianNumbers.indexOf(c)]||englishNumbers[arabicNumbers.indexOf(c)]||c).join("")}function createDateRangePicker(fromInput,toInput,locale,format){const fromConfig=getConfigDateInput(fromInput),toConfig=getConfigDateInput(toInput),dateRangePicker=new DateRangeInput(fromInput,toInput,fromConfig,toConfig,!1,locale,format);return dateRangePicker.initFromPicker(fromInput),dateRangePicker.initToPicker(toInput),dateRangePicker}function createDatePicker(input,locale,format){const config=getConfigDateInput(input),datePicker=new DatePickerInput(input,config,!1,locale,format);return datePicker.initDatePicker(input),datePicker}function isLeapYear(year){return[1,5,9,13,17,22,26,30].includes(year%33)}function generateMask(type,options){const hasHours=options&&options.includes("hours"),hasMinutes=options&&options.includes("minutes"),hasSeconds=options&&options.includes("seconds");if("date"===type)return"0000/00/00";if("time"===type)return hasHours&&hasMinutes&&hasSeconds?"00:00:00":hasHours&&hasMinutes||hasMinutes&&hasSeconds?"00:00":"00:00:00";if("datetime"===type){const baseDate="0000/00/00 ";return hasHours&&hasMinutes&&hasSeconds?baseDate+"00:00:00":hasHours&&hasMinutes||hasMinutes&&hasSeconds?baseDate+"00:00":baseDate+"00:00:00"}return"0000/00/00"}function generateRegex(type,options){const hasHours=options&&options.includes("hours"),hasMinutes=options&&options.includes("minutes"),hasSeconds=options&&options.includes("seconds");if("date"===type)return"^(12[0-9]{2}|13[0-9]{2}|14[0-9]{2})\\/(0[1-9]|1[0-2])\\/(0[1-9]|[12][0-9]|3[01])$";if("time"===type)return hasHours&&hasMinutes&&hasSeconds?"^([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])$":hasHours&&hasMinutes?"^([01][0-9]|2[0-3]):([0-5][0-9])$":hasMinutes&&hasSeconds?"^([0-5][0-9]):([0-5][0-9])$":"^([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])$";if("datetime"===type){const datePattern="(12[0-9]{2}|13[0-9]{2}|14[0-9]{2})\\/(0[1-9]|1[0-2])\\/(0[1-9]|[12][0-9]|3[01])";return hasHours&&hasMinutes&&hasSeconds?`^${datePattern} ([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])$`:hasHours&&hasMinutes?`^${datePattern} ([01][0-9]|2[0-3]):([0-5][0-9])$`:hasMinutes&&hasSeconds?`^${datePattern} ([0-5][0-9]):([0-5][0-9])$`:`^${datePattern} ([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])$`}return"^(12[0-9]{2}|13[0-9]{2}|14[0-9]{2})\\/(0[1-9]|1[0-2])\\/(0[1-9]|[12][0-9]|3[01])$"}const generateFormat=(type,options)=>{const hasHours=options&&options.includes("hours"),hasMinutes=options&&options.includes("minutes"),hasSeconds=options&&options.includes("seconds");if("date"===type)return"YYYY/MM/DD";if("time"===type)return hasHours&&hasMinutes&&hasSeconds?"HH:mm:ss":hasHours&&hasMinutes?"HH:mm":hasMinutes&&hasSeconds?"mm:ss":"HH:mm";if("datetime"===type){const baseFormat="YYYY/MM/DD ";return hasHours&&hasMinutes&&hasSeconds?baseFormat+"HH:mm:ss":hasHours&&hasMinutes?baseFormat+"HH:mm":hasMinutes&&hasSeconds?baseFormat+"mm:ss":baseFormat+"HH:mm"}return"YYYY/MM/DD"};function isValidDate(date){const match=date.match(/^(\d{4})[\/-](\d{2})[\/-](\d{2})$/);if(!match)return!1;const[_,yearStr,monthStr,dayStr]=match,year=parseInt(yearStr,10),month=parseInt(monthStr,10),day=parseInt(dayStr,10);try{const parsed=new persianDate([year,month,day]),parsedY=parsed.year(),parsedM=parsed.month(),parsedD=parsed.date();return year===parsedY&&month===parsedM&&day===parsedD}catch{return!1}}function getConfigDateInput(input){const parseUnixDate=unixStr=>new persianDate.unix(unixStr);return{disabledDates:input.attr("data-disabled-dates")?.split(",").filter(Boolean)||[],autoClose:"true"===input.attr("data-auto-close"),minDate:input.attr("data-min-date")?parseUnixDate(input.attr("data-min-date")):null,maxDate:input.attr("data-max-date")?parseUnixDate(input.attr("data-max-date")):null,disabledDays:input.attr("data-disabled-days")?.split(",").map(Number).filter(Boolean)||[],defaultValue:input.attr("data-default-value")?parseUnixDate(input.attr("data-default-value")):null,allowGregorian:"true"===input.attr("data-allow-gregorian"),allowSameDaySelection:"true"===input.closest(".date-range-container").attr("data-allow-same-day-selection"),type:input.attr("data-type")?input.attr("data-type"):input.closest(".date-range-container").attr("data-type"),timePickerOptions:input.attr("data-time-picker-options")?input.attr("data-time-picker-options"):input.closest(".date-range-container").attr("data-time-picker-options"),allowTyping:!input.attr("readonly")}}function initializeDateRangePicker(selector){const container=$(selector),instance=createDateRangePicker(container.find(".from"),container.find(".to"),container.attr("data-locale"),container.attr("data-format"));container.data("instance",instance)}function initializeDatePicker(selector){const container=$(selector),instance=createDatePicker(container.find("input"),container.attr("data-locale"),container.attr("data-format"));container.data("instance",instance)}window.initializeDateRangePicker=initializeDateRangePicker,window.initializeDatePicker=initializeDatePicker,doravel.ready(context=>{$(".date-range-container",context).each((index,element)=>{initializeDateRangePicker(element)}),$(".date-picker-container",context).each((index,element)=>{initializeDatePicker(element)}),$(".modal-body").on("scroll",function(){$(".datepicker-container:visible").length>0&&($(".pwt-datepicker-input-element").attr("ignore-validation",!0).trigger("blur"),setTimeout(()=>{$(".pwt-datepicker-input-element").removeAttr("ignore-validation")},300),$(".datepicker-container:visible").each(function(){$(this).addClass("pwt-hide")}))})}),$(document).on("click",".down-btn",function(e){"00"===replacePersianDigits($(e.currentTarget).prev().val())&&e.stopImmediatePropagation()}),$(document).on("click",".up-btn",function(e){const value=replacePersianDigits($(e.currentTarget).next().val()),key=$(e.currentTarget).attr("data-time-key");("hour"===key&&"23"===value||"minute"===key&&"59"===value||"second"===key&&"59"===value)&&e.stopImmediatePropagation()}),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});let SelectBaseController=class SelectBaseController2 extends BaseInputController{static selectElementsInfo=[];static cascadeConfig={};static activeFetchCount={};static currentAjaxRequest=[];constructor(input){super(),this.$input=$(input),this.isMultiple=void 0!==this.$input.attr("multiple"),this.displaySelectedAsCount=this.$input.attr("data-display-selected-as-count"),this.suppressLogicMessages=this.$input.data("suppress-logic-messages"),this.elementSubInfo={},this.isChangeParent=!1,this.ajaxRequest=null,this.displayInitialMessage(this.$input),this.init(input),this.#setupEvents()}init(){const id=this.$input.attr("id"),parentId=this.$input.attr("data-parent-id"),selectName=this.$input.attr("name"),routeName=this.$input.attr("data-route-name"),parameters=this.$input.attr("data-route-parameters"),selectedItems=this.$input.attr("data-selected-items"),renderedRouteName=this.$input.attr("data-rendered-route-name"),entityName=this.$input.attr("data-entity-name"),multiple=this.$input.is("[multiple]"),readonly=!!this.$input.attr("readonly"),fromFilter=this.$input.attr("data-from-filter");this.constructor.selectElementsInfo.push({id:id,parentId:parentId,selectName:selectName,routeName:routeName,parameters:parameters,selectedItems:selectedItems,renderedRouteName:renderedRouteName,entityName:entityName,multiple:multiple,fromFilter:fromFilter,selectedValues:[]}),this.initializeSelect2(multiple,readonly),$(`[data-parent-id=${id}]`).length>0&&this.$input.find("option").each((index,option)=>{$(option).attr("uuid",generateUUID())}),setTimeout(()=>{this.$input.attr("ignore-validation","true"),this.$input.trigger("change"),clearComponentMessage(id,!0),this.$input.removeAttr("ignore-validation")},0)}setupResizeObserver(){if(void 0!==this.displaySelectedAsCount)return;const $select=this.$input,select2Container=$select.next(".select2").find(".select2-selection")[0];if(select2Container){new ResizeObserver(()=>{this.#handleSelectDisplayCount($select)}).observe(select2Container)}}#setupEvents(){this.$input.on("change",()=>{this.#handleSelectChange(this.$input),this.#handleSelectDisplayCount(this.$input,this.displaySelectedAsCount)}),this.setupResizeObserver()}attachSelect2Reposition($el){const select=$el.data("select2");if(!select)return;const container=$el.closest("form")[0],resizeObserver=new ResizeObserver(()=>{select&&select.isOpen()&&select.dropdown._positionDropdown()});container&&resizeObserver.observe(container)}initializeSelect2(isMultiple=!1,readonly=!1){const element=this.$input,elementId=element.attr("id"),searchAllowed=element.attr("data-search-allowed");let minimumResultsForSearch=10;"true"===searchAllowed?minimumResultsForSearch=0:"false"===searchAllowed&&(minimumResultsForSearch=1/0),element.select2({placeholder:element.attr("data-placeholder"),allowClear:"true"===element.attr("data-clearable"),closeOnSelect:"true"===element.attr("data-auto-close"),minimumResultsForSearch:minimumResultsForSearch,theme:"bootstrap5",dropdownParent:element.closest(".modal").length?element.closest(".modal"):$("body"),width:"100%",selectionCssClass:":all:",language:{noResults:()=>"    ",removeAllItems:()=>isMultiple?" ":""},templateResult:function(state){if(!state.id)return state.text;const $option=$("<span>"+state.text+"</span>");return($(state.element).attr("data-disabled")||readonly)&&$option.attr("data-disabled","true"),$option},templateSelection:function(state){return state.text}}).on("select2:unselecting",function(){$(this).on("select2:opening",function(ev){ev.preventDefault(),$(this).off("select2:opening")})}).on("select2:open",()=>{$(".select-all-options").length||"true"!==element.attr("data-allow-select-all")||($(".select2-results ul")?.addClass("list-padding"),$(".select2-results").prepend(`<div class="select2-results__option select-all-options d-none" data-parent-id="#${elementId}">  </div>`)),$(".clear-all-options").length||"true"!==element.attr("data-allow-select-all")||($(".select2-results ul")?.addClass("list-padding"),$(".select2-results").prepend(`<div class="select2-results__option clear-all-options d-none" data-parent-id="#${elementId}">  </div>`)),this.areAllOptionsSelected()?($(".select-all-options").addClass("d-none"),$(".clear-all-options").removeClass("d-none")):($(".select-all-options").removeClass("d-none"),$(".clear-all-options").addClass("d-none")),0===element.find("option").not("[value='']").length&&($(".select-all-options").addClass("d-none"),$(".clear-all-options").addClass("d-none")),element.attr("readonly")&&($(".select-all-options").addClass("d-none"),$(".clear-all-options").addClass("d-none"),$(".select2-search__field").addClass("d-none"),$(".select2-results__options").addClass("readonly-options"))}),this.attachSelect2Reposition(element),setTimeout(()=>{element.parent().find("[title]").not(".select2-selection__choice__display, .select2-selection__choice__remove").each((index,item)=>{$(item).removeAttr("title")})},500),element.one("select2:open",function(){$("input.select2-search__field").prop("placeholder","")}),element.on("change",function(){Array.isArray(element.val())&&element.val().includes("")&&element.val(element.val().filter(value=>""!==value)).trigger("change");const parent=element.parent();setTimeout(()=>{parent.find("[title]").not(".select2-selection__choice__display, .select2-selection__choice__remove").each((index,item)=>{$(item).removeAttr("title")})},500),parent.find("[select-tooltip]").tooltip("dispose"),parent.find(".select2-selection__choice").each((index,item)=>{const remove=$(item).find(".select2-selection__choice__remove"),removeTitle=remove.attr("title");$(item).attr("title",""),remove.attr("title","").attr("select-tooltip","true"),remove.tooltip({trigger:"hover",title:()=>removeTitle})});const clearButton=parent.find(".select2-selection__clear");clearButton.tooltip({trigger:"hover",title:()=>clearButton.attr("title")}).attr("select-tooltip","true"),parent.find(".select2-selection__rendered[data-bs-toggle='tooltip']").tooltip("dispose").removeAttr("data-bs-original-title"),parent.find(".select2-selection__rendered:has(.select2-selection__placeholder)").removeAttr("title"),parent.find(".select2-selection__rendered:not(:has(*)), .select2-selection__choice__display:not(:has(*))")}),element.on("select2:unselecting",function(){element.parent().find("[select-tooltip]").tooltip("dispose")})}#handleSelectDisplayCount($input2,displaySelectedAsCount){if(!this.isMultiple||"false"===displaySelectedAsCount)return;const selected=$input2.val().length,allSelected=this.areAllOptionsSelected();if("true"===displaySelectedAsCount){if(selected>0){$input2.attr("data-count-shown","true");const displayText=allSelected?"   ":`${selected}   `;$input2.parent().find(".select2 .select2-selection ul").html(displayText)}}else{const container=$input2.next(".select2").find(".select2-selection"),containerChild=container.find(".select2-selection__choice"),parentWidth=container.width();let childrenWidth=0;if($(containerChild).each((index,item)=>{childrenWidth+=$(item).outerWidth(!0)}),parentWidth<childrenWidth&&parentWidth>0){$input2.attr("data-count-shown","true");const displayText=allSelected?"   ":`${selected}   `;$input2.parent().find(".select2 .select2-selection ul").html(displayText)}else $input2.removeAttr("data-count-shown")}}#fillOptions(element,data,parentName="",selectedValues,length,parentUuid,isSingle=!1){isSingle&&element.empty(),parentName=parentName?`${parentName} - `:"",element.append("<option value=''></option>"),data.forEach(item=>{const disabledAttr=item.is_active?"":'data-disabled="true"',selectedAttr=item.selected?"selected":"",standardKeys=["id","name","is_active","selected"],extraAttrs=Object.entries(item).filter(([key])=>!standardKeys.includes(key)).map(([key,value])=>`data-${key}="${value}"`).join(" ");element.append(`<option uuid='${generateUUID()}' data-pid='${parentUuid}' ${disabledAttr} value="${item.id}" ${selectedAttr} ${extraAttrs}>${parentName}${item.name}</option>`)}),isSingle||selectedValues.length!==length||(element.attr("ignore-validation","true"),element.trigger("change"),setTimeout(()=>{element.removeAttr("ignore-validation")},0),0===element.val().length&&clearComponentMessage(element,!0)),isSingle&&(element.attr("ignore-validation","true"),element.trigger("change"),setTimeout(()=>{element.removeAttr("ignore-validation")},0),""===element.val()&&clearComponentMessage(element,!0)),element.is(":visible")&&1===this.constructor.activeFetchCount[element.attr("id")]&&element.attr("data-has-initial-values","true")}#fetchDataAndFillOptions(fetchParams,isSingle=!1,isChanged=!1){if(isSingle&&null===fetchParams.index)return;toggleFormElementLoading($(`#${fetchParams.selectId}`),!0),this.constructor.activeFetchCount[fetchParams.selectId]=(this.constructor.activeFetchCount[fetchParams.selectId]||0)+1;const element=$(`#${fetchParams.selectId}`);this.ajaxRequest=$.ajax({url:fetchParams.route,type:"post",data:{entity_name:fetchParams.entityName,parent_selected:fetchParams.index,route_parameters:fetchParams.parameters,selected_items:fetchParams.selectedItems,rendered_route_name:fetchParams.renderedRouteName,multiple:fetchParams.multiple,from_filter:fetchParams.fromFilter},success:response=>{const res=response.data;element.attr("multiple")||"true"!==element.attr("data-select-first-item-on-load")||res.forEach((elem,index)=>{elem.selected=0===index}),"true"===element.attr("data-has-initial-values")&&$(res).each((index,elem)=>{!0===elem.selected&&(elem.selected=!1)}),clearComponentMessage(fetchParams.selectId,!0),isSingle?this.#fillOptions($(`#${fetchParams.selectId}`),response.data,fetchParams.text,[],fetchParams.length,fetchParams.uuid,!0):(fetchParams.selectedValues.push({value:fetchParams.index,uuid:fetchParams.uuid||null}),this.#fillOptions($(`#${fetchParams.selectId}`),response.data,fetchParams.text,fetchParams.selectedValues,fetchParams.length,fetchParams.uuid,!1)),element.trigger("depend-on-fetched",{data:response.data})},complete:()=>{this.constructor.activeFetchCount[fetchParams.selectId]=(this.constructor.activeFetchCount[fetchParams.selectId]||0)-1,this.constructor.activeFetchCount[fetchParams.selectId]<=0&&toggleFormElementLoading($(`#${fetchParams.selectId}`),!1),this.constructor.currentAjaxRequest=this.constructor.currentAjaxRequest.filter(request=>request.id!==fetchParams.selectId)},error:response=>{showComponentMessage({type:"error",targetElement:fetchParams.selectId,message:"  ",title:__("error"),formValidation:!0});let responseJSON=response.responseJSON;responseJSON&&responseJSON.hasOwnProperty("message")?console.error("Multi Select DependOn #"+fetchParams.selectId+": "+response.responseJSON.message):console.error("Multi Select DependOn #"+fetchParams.selectId+": ",response)}}),this.constructor.currentAjaxRequest.push({id:fetchParams.selectId,request:this.ajaxRequest})}getAllChildren(map,parent){const result=new Set;return function traverse(current){const children=map[current];if(children&&children.length>0)for(const child of children)result.has(child)||(result.add(child),traverse(child))}(parent),Array.from(result)}areAllOptionsSelected(){const options=this.$input.find("option:not([value=''])");return options.length===options.filter(":selected").length}#handleSelectChange(element){const style=element.data("message-type"),defaultMessage=element.data("default-message"),messageTypeElement=element.data("message-type"),suppressLogicMessages=element.data("suppress-logic-messages");this.elementSubInfo.style=style,this.elementSubInfo.defaultMessage=defaultMessage,this.elementSubInfo.messageTypeElement=messageTypeElement,this.elementSubInfo.suppressLogicMessages=suppressLogicMessages,element.val()&&(clearComponentMessage(element,!0),clearComponentMessage(element,!1));const optionsElements=element.find("option"),optionsSelectedElements=element.find("option:selected"),clearAllOptions=$(".clear-all-options"),selectAllOptions=$(".select-all-options");!clearAllOptions.hasClass("d-none")&&optionsElements.length>optionsSelectedElements.length?(clearAllOptions.addClass("d-none"),selectAllOptions.removeClass("d-none")):clearAllOptions.hasClass("d-none")&&optionsElements.length==optionsSelectedElements.length&&(clearAllOptions.removeClass("d-none"),selectAllOptions.addClass("d-none"));const selectedValues=[...Array.isArray(element.val())?element.val():[element.val()]].filter(item=>null!==item);$(`[data-parent-id='${element.attr("id")}']`).each((index,childElement)=>{const matchingElement=this.constructor.selectElementsInfo.find(info=>info.id===$(childElement).attr("id"));if(matchingElement)if(Array.isArray(element.val())){if(matchingElement.selectedValues.length==selectedValues.length&&selectedValues.length>0){this.isChangeParent=!0;const relatedRequest=this.constructor.currentAjaxRequest.find(request=>request.id===matchingElement.id);relatedRequest&&this.#ajaxAbort(this.isChangeParent,relatedRequest.request)}matchingElement.selectedValues.length<selectedValues.length?selectedValues.forEach(item=>{if(!matchingElement.selectedValues.some(val=>val.value===item)){let targetElement=$(`#${element.attr("id")} option[value='${item}']`);const fetchParams={text:targetElement.text(),uuid:targetElement.attr("uuid"),route:matchingElement.routeName,selectedValues:matchingElement.selectedValues,entityName:matchingElement.entityName,selectId:matchingElement.id,renderedRouteName:matchingElement.renderedRouteName,fromFilter:matchingElement.fromFilter,multiple:matchingElement.multiple,index:item,length:selectedValues.length};matchingElement.parameters&&(fetchParams.parameters=matchingElement.parameters),matchingElement.selectedItems&&(fetchParams.selectedItems=matchingElement.selectedItems),""!==fetchParams.index&&this.#fetchDataAndFillOptions(fetchParams)}}):matchingElement.selectedValues=matchingElement.selectedValues.filter(item=>!!selectedValues.includes(item.value)||(this.#cascadeRemove(element.attr("id"),item.uuid),!1))}else{if($(childElement).empty(),selectedValues.length>0){this.isChangeParent=!0;const relatedRequest=this.constructor.currentAjaxRequest.find(request=>request.id===matchingElement.id);relatedRequest&&this.#ajaxAbort(this.isChangeParent,relatedRequest.request)}if(""!==element.val()){let targetElement=$(`#${element.attr("id")} option[value='${element.val()}']`);const fetchParams={route:matchingElement.routeName,entityName:matchingElement.entityName,selectId:matchingElement.id,uuid:targetElement.attr("uuid"),renderedRouteName:matchingElement.renderedRouteName,fromFilter:matchingElement.fromFilter,multiple:matchingElement.multiple,index:element.val(),length:1};matchingElement.parameters&&(fetchParams.parameters=matchingElement.parameters),matchingElement.selectedItems&&(fetchParams.selectedItems=matchingElement.selectedItems),null!==fetchParams.index&&this.#fetchDataAndFillOptions(fetchParams,!0,this.isChangeParent)}else{this.getAllChildren(this.constructor.cascadeConfig,element.attr("id")).forEach(child=>{$(`#${child}`).val(null).trigger("change"),clearComponentMessage($(`#${child}`),!0)})}}}),element.closest("form").length>0&&0===element.closest(".item-collector-grid").length&&"function"==typeof element.valid&&element.valid()}#cascadeRemove(parentId,parentUuid){const childIds=this.constructor.cascadeConfig[parentId];childIds&&childIds.forEach(childId=>{null!==parentUuid&&($(`#${childId} option[data-pid='${parentUuid}']`).each((index,item)=>{$(item).remove()}),$(`#${childId}`).trigger("change"),""===$(`#${parentId}`).val()&&clearComponentMessage(childId,!0))})}#ajaxAbort(disabledAjax,ajaxRequest){disabledAjax&&ajaxRequest&&4!==ajaxRequest.readyState&&ajaxRequest.abort()}items(data){this.$input.empty();const isMultiple=this.$input.prop("multiple"),hasSelected=data.some(item=>item.selected);isMultiple||hasSelected||this.$input.append('<option value=""></option>'),data.forEach(item=>{const disabledAttr=item.is_active?"":'data-disabled="true"',selectedAttr=item.selected?"selected":"",standardKeys=["id","name","is_active","selected"],extraAttrs=Object.entries(item).filter(([key])=>!standardKeys.includes(key)).map(([key,value])=>`data-${key}="${value}"`).join(" ");this.$input.append(`<option ${disabledAttr} value="${item.id}" ${selectedAttr} ${extraAttrs}>${item.name}</option>`)}),this.$input.trigger("change.select2")}static createCascadeConfig(selectInfoArray){const cascadeConfig={};return selectInfoArray.forEach(item=>{(item.parentId?.split(",")??[]).forEach(parentId=>{cascadeConfig[parentId]||(cascadeConfig[parentId]=[]),cascadeConfig[parentId].push(item.id)})}),cascadeConfig}static toggleSelectAllOptions(){$(document).off("click.selectAll").on("click.selectAll",".select-all-options, .clear-all-options",function(){const $this=$(this),parentElement=$($this.data("parent-id")),selectAll=$this.hasClass("select-all-options");parentElement.find("option").prop("selected",selectAll).end().trigger("change"),parentElement.select2("close")})}resetValue(clear=!0){void 0!==this.$input.attr("data-parent-id")?this.$input.empty():this.$input.val(this.isMultiple?[]:"").trigger("change")}};window.SelectBaseController=SelectBaseController;let SelectController=class SelectController2 extends SelectBaseController{constructor(input){super(input)}};function initializeSelect(selector){const instance=new SelectController(selector);$(selector).data("instance",instance)}window.initializeSelect=initializeSelect,doravel.ready(context=>{$(".select2-tag",context).each((index,item)=>{initializeSelect(item)}),SelectController.toggleSelectAllOptions(),SelectController.cascadeConfig=SelectController.createCascadeConfig(SelectController.selectElementsInfo)});let TextInputBaseController=class TextInputBaseController2 extends BaseInputController{constructor(input){super(),this.$input=$(input),this.clearable=this.$input.data("clearable"),this.setupEvents(this.$input),this.handleSuffix(this.$input),this.handlePrefix(this.$input),this.handleSuggestion(this.$input),this.handleInitialAutoFocus(this.$input),this.handleDirection(this.$input),this.handleAlign(this.$input),this.handleTrim(this.$input),this.handleRules(this.$input),this.handleMaskType(this.$input),this.displayInitialMessage(this.$input),this.suppressLogicMessages=this.$input.data("suppress-logic-messages")}setupEvents($input2){$input2.on("keyup",()=>{this.validateInput($input2)}),$input2.on("blur",()=>{this.handleTrim($input2)}),$input2.on("change",()=>{this.validateInput($input2)}),this.clearable&&this.setupClearIconHandler()}setupClearIconHandler(){this.$input.parent().find(".form-control-clear-icon").on("click",()=>{this.$input.val("")})}validateInput($input2){const maxLength=$input2.data("max-length"),minLength=$input2.data("min-length"),direction=$input2.data("direction"),allowTrim=void 0===$input2.data("trim")||$input2.data("trim"),rules=$input2.data("rules")||"",regex=$input2.data("regex-expression"),maskType=$input2.data("mask-expression"),charLength=$input2.data("char-length")||void 0;let isValid=!0;const value=allowTrim?$input2.val().trim():$input2.val();void 0!==charLength?value.length!==charLength&&(getSuppressLogicMessages($input2)||showComponentMessage({type:"error",targetElement:$input2,message:__("charLength",{charLength:charLength}),title:__("error")}),isValid=!1):(void 0!==minLength&&value.length<minLength&&value.length>0&&(getSuppressLogicMessages($input2)||showComponentMessage({type:"error",targetElement:$input2,message:__("min",{min:minLength}),title:__("error")}),isValid=!1),void 0!==maxLength&&value.length>maxLength&&value.length>0&&(getSuppressLogicMessages($input2)||showComponentMessage({type:"error",targetElement:$input2,message:__("max",{max:maxLength}),title:__("error")}),isValid=!1)),direction&&this.handleDirection($input2),!rules||regex||maskType?regex&&!maskType?(this.handleRegex($input2),this.handleRegex($input2)||(isValid=!1)):maskType&&this.handleMaskType($input2):this.handleRules($input2),!isValid||hasFormComponentMessage($input2.parents("form"),"error",!0)||hasComponentMessage($input2.parents("form"),"error",!0)||clearComponentMessage($input2,!0),isValid&&clearComponentMessage($input2,!1)}handleDirection($input2){"ltr"===$input2.data("direction")?$input2.css("direction","ltr"):$input2.parents(".form-group").css("direction","rtl")}handleAlign($input2){const direction=$input2.data("direction"),alignText=$input2.data("text-align")||direction;"left"===alignText?$input2.css("text-align","left"):"right"===alignText?$input2.css("text-align","right"):"center"===alignText?$input2.css("text-align","center"):$input2.css("text-align",direction)}handleSuggestion($input2){const suggestions=$input2.attr("data-suggestion")?JSON.parse($input2.attr("data-suggestion")):void 0,datalist=$(`#${$input2.attr("list")}`);datalist.empty(),suggestions&&suggestions.forEach((item,index)=>{datalist.append(`<option value='${item}'>${item}</option>`)})}handleTrim($input2){(void 0===$input2.data("trim")||$input2.data("trim"))&&$input2.val($input2.val().trim().replace(/\s+/g," "))}handleInitialAutoFocus($input2){!0===$input2.data("auto-focus")&&$input2.focus()}handleRules($input2){const rules=$input2.data("rules")??"",regexExpression=$input2.data("regex-expression"),filterInput=pattern=>{$input2.on("input",function(){$(this).val($(this).val().replace(new RegExp(`[^${pattern}]`,"g"),""))}),$input2.on("keydown",e=>{new RegExp(`^[${pattern}]$`).test(e.key)||["Backspace","Tab","ArrowLeft","ArrowRight","Delete","Home","End","Insert","Enter"].includes(e.key)||e.ctrlKey&&("KeyV"===e.code||"KeyC"===e.code||"KeyX"===e.code||"KeyA"===e.code||"KeyZ"===e.code||"KeyY"===e.code||"KeyF"===e.code||"KeyH"===e.code||"KeyS"===e.code)||e.shiftKey&&("ArrowLeft"===e.code||"ArrowRight"===e.code||"ArrowUp"===e.code||"ArrowDown"===e.code||"Home"===e.code||"End"===e.code||"PageUp"===e.code||"PageDown"===e.code)||e.preventDefault()})};if(rules&&!regexExpression){filterInput(createRegexFromRules(rules))}}handleRegex($input2){const regexPattern=$input2.data("regex-expression");return!!new RegExp(regexPattern).test($input2.val().trim())||(getSuppressLogicMessages($input2)||showComponentMessage({type:"error",targetElement:$input2,message:__("regex"),title:__("error")}),!1)}handleMaskType($input2){const maskType=$input2.data("mask-expression")??"";if(maskType){const mask=getMaskOptions(maskType);Inputmask({mask:mask,definitions:{9:{validator:"[0123456789]"}},removeMaskOnSubmit:!0,autoUnmask:!0,onBeforeMask:function(value,opts){const persianDigits=["","","","","","","","","",""],arabicDigits=["","","","","","","","","",""];let result=value;for(let i=0;i<10;i++)result=result.replace(new RegExp(persianDigits[i],"g"),i);for(let i=0;i<10;i++)result=result.replace(new RegExp(arabicDigits[i],"g"),i);return result}}).mask($input2[0])}}};window.TextInputBaseController=TextInputBaseController;let TextInputController=class TextInputController2 extends TextInputBaseController{constructor(input){super(input)}};function initializeTextInput(selector){const instance=new TextInputController(selector);$(selector).data("instance",instance)}window.initializeTextInput=initializeTextInput,doravel.ready(()=>{$(".x-text-input-component .text-input").each((index,input)=>{initializeTextInput(input)})});let UrlInputBaseController=class UrlInputBaseController2 extends BaseInputController{constructor(input){super(),this.$input=$(input),this.setupEvents(this.$input),this.handleSuffix(this.$input),this.handlePrefix(this.$input),this.handleSuggestion(this.$input),this.handleInitialAutoFocus(this.$input),this.handleTrim(this.$input),this.displayInitialMessage(this.$input),this.suppressLogicMessages=this.$input.data("suppress-logic-messages")}setupEvents($input2){$input2.on("input blur",()=>{this.validateInput($input2)})}validateInput($input2){const maxLength=$input2.data("max-length"),minLength=$input2.data("min-length"),required=$input2.data("required");let isValid=!0;const value=void 0===$input2.data("trim")||$input2.data("trim")?$input2.val().trim():$input2.val(),regexExpression=$input2.data("expression")?$input2.data("expression"):"";required&&!value||(regexExpression&&value?(value.match(regexExpression)||getSuppressLogicMessages($input2)||showComponentMessage({type:"error",targetElement:$input2,message:__("url"),title:__("error")}),isValid=!1):!/^(https?:\/\/)?(?:www\.)?(?:localhost|127\.0\.0\.1(?:\:\d+)?|([a-zA-Z0-9\u0600-\u06FF-]+(?:\.[a-zA-Z0-9\u0600-\u06FF-]+)*\.[a-zA-Z]{2,})(?::\d+)?(?:\/[a-zA-Z0-9\u0600-\u06FF._~:/?#[\]@!$&'()*+,;=%-]*)?)$/.test(value)&&value&&(getSuppressLogicMessages($input2)||showComponentMessage({type:"error",targetElement:$input2,message:__("url"),title:__("error")}),isValid=!1)),void 0!==minLength&&value.length<minLength&&required&&(getSuppressLogicMessages($input2)||showComponentMessage({type:"error",targetElement:$input2,message:__("min",{min:minLength}),title:__("error")}),isValid=!1),void 0!==maxLength&&value.length>maxLength&&(getSuppressLogicMessages($input2)||showComponentMessage({type:"error",targetElement:$input2,message:__("max",{max:maxLength}),title:__("error")}),isValid=!1),this.handleTrim($input2),!isValid||hasFormComponentMessage($input2.parents("form"),"error",!0)||hasComponentMessage($input2.parents("form"),"error",!0)||clearComponentMessage($input2,!0),isValid&&clearComponentMessage($input2,!1)}handleSuggestion($input2){const suggestions=$input2.attr("data-suggestion")?JSON.parse($input2.attr("data-suggestion")):void 0,datalist=$(`#${$input2.attr("list")}`);datalist.empty(),suggestions&&suggestions.forEach((item,index)=>{datalist.append(`<option value='${item}'>${item}</option>`)})}handleTrim($input2){(void 0===$input2.data("trim")||$input2.data("trim"))&&$input2.val($input2.val().trim().replace(/\s+/g,""))}handleInitialAutoFocus($input2){!0===$input2.data("auto-focus")&&$input2.focus()}};window.UrlInputBaseController=UrlInputBaseController;class UrlInputController extends UrlInputBaseController{constructor(input){super(input)}}function initializeUrlInput(selector){const instance=new UrlInputController(selector);$(selector).data("instance",instance)}window.initializeUrlInput=initializeUrlInput,doravel.ready(context=>{$(".x-url-input-component .url-input",context).each((index,input)=>{initializeUrlInput(input)})});let TextAreaInputBaseController=class TextAreaInputBaseController2 extends BaseInputController{constructor(input){super(),this.$input=$(input),this.setupEvents(this.$input),this.handleInitialAutoFocus(this.$input),this.handleTrim(this.$input),this.handleShowMaxLength(this.$input),this.handleResize(this.$input),this.displayInitialMessage(this.$input),this.suppressLogicMessages=this.$input.data("suppress-logic-messages"),this.showLengthBadge=this.$input.data("show-max-length")}setupEvents($input2){$input2.on("keyup",()=>{this.validateInput($input2);const inputElement=findTargetElement($input2);findComponentMessage(inputElement)}),$input2.on("blur",()=>{this.handleTrim($input2),this.validateInput($input2)}),$input2.on("keydown",()=>{this.showLengthBadge&&$input2.closest(".x-form-component").find(".max-length-counter").removeClass("d-none").addClass("d-line-block")})}validateInput($input2){const allowTrim=void 0===$input2.data("trim")||$input2.data("trim"),isShowMaxLength=$input2.data("show-max-length"),minLength=$input2.attr("minlength");let isValid=!0;const value=allowTrim?$input2.val().trim():$input2.val();isShowMaxLength&&this.handleShowMaxLength($input2),void 0!==minLength&&value.length>0&&value.length<minLength&&!this.suppressLogicMessages&&(showComponentMessage({type:"error",targetElement:$input2,message:__("min",{min:minLength}),title:__("error")}),isValid=!1),!isValid||hasFormComponentMessage($input2.parents("form"),"error",!0)||hasComponentMessage($input2.parents("form"),"error",!0)||clearComponentMessage($input2,!0),isValid&&clearComponentMessage($input2,!1)}handleTrim($input2){(void 0===$input2.data("trim")||$input2.data("trim"))&&$input2.val($input2.val().trim().replace(/[^\S\r\n]+/g," "))}handleInitialAutoFocus($input2){!0===$input2.data("auto-focus")&&$input2.focus()}displayInitialMessage($input2){const message=$input2.data("default-message");getSuppressLogicMessages($input2)||showComponentMessage({type:$input2.data("message-type"),targetElement:$input2,message:message,title:$input2.data("message-type")})}handleShowMaxLength($input2){if(void 0!==$input2.data("show-max-length")){const initialLength=$input2.val().length,maxLength=$input2.attr("maxlength"),characterCountText=__("text_area.character_count");initialLength>0&&($input2.closest(".x-form-component").find(".max-length-counter").addClass("d-line-block").removeClass("d-none"),maxLength?$input2.closest(".x-form-component").find(".max-length-counter").text(`${characterCountText} : ${initialLength}/${maxLength}`):$input2.closest(".x-form-component").find(".max-length-counter").text(`${characterCountText} : ${initialLength}`)),$input2.on("input",()=>{const length=$input2.val().length;maxLength?$input2.closest(".x-form-component").find(".max-length-counter").text(`${characterCountText} : ${length}/${maxLength}`):$input2.closest(".x-form-component").find(".max-length-counter").text(`${characterCountText} : ${length}`)})}}handleResize($input2){const isResizeAble=$input2.data("resize");if(!0===$input2.data("autosize"))$input2.css("resize","none"),this.autoResize($input2);else if(!0===isResizeAble){const mode=$input2.data("resize-mode")||"vertical";$input2.css("resize",mode)}else $input2.css("resize","none")}autoResize($input2){const resizeTextarea=()=>{$input2.is(":visible")&&($input2.css("height","auto"),$input2.css("height",$input2[0].scrollHeight+4+"px"))};if($input2.is(":visible"))resizeTextarea();else{const observer=new MutationObserver(mutations=>{$input2.is(":visible")&&(resizeTextarea(),observer.disconnect())});observer.observe(document.body,{attributes:!0,childList:!0,subtree:!0})}$input2.on("input",resizeTextarea)}};window.TextAreaInputBaseController=TextAreaInputBaseController;class TextAreaInputController extends TextAreaInputBaseController{constructor(input){super(input)}}function initializeTextArea(selector){const instance=new TextAreaInputController(selector);$(selector).data("instance",instance)}window.initializeTextArea=initializeTextArea,doravel.ready(context=>{$(".x-textarea-input-component .text-area-input",context).each((index,input)=>{initializeTextArea(input)})});let TagInputBaseController=class TagInputBaseController2 extends BaseInputController{constructor(input){super(),this.$input=$(input),this.$tagsList=this.$input.closest(".tags-list"),this.$hiddenInput=this.$input.closest(".x-form-component").find(".tags-hidden-input"),this.separator=this.$input.data("separator"),this.displayInitialMessage(this.$input),this.suppressLogicMessages=this.$input.data("suppress-logic-messages"),this.setupEvents(this.$input),this.draggable=this.$input.data("draggable"),this.minTags=this.$input.data("min")||0,this.maxTags=this.$input.data("max")||1/0,this.itemMaxWidth=this.$input.data("item-max-width")||1/0,this.initialTags=this.$hiddenInput.val().split(this.separator).map(tag=>tag.trim()).filter(tag=>tag),this.loadInitialTags()}loadInitialTags(){this.initialTags.forEach(tag=>this.addTag(tag))}resetValues(clear=!1){this.$tagsList.children(".tag").remove(),this.$hiddenInput.val(""),clear||this.initialTags.forEach(tag=>this.addTag(tag))}setupEvents($input2){$input2.on("keypress",event=>{if("Enter"===event.key||event.key===this.separator){event.preventDefault();const tagText=$input2.val().trim();tagText&&(this.addTag(tagText),$input2.val(""))}}),$input2.on("keyup",event=>{"Backspace"!==event.key||$input2.val()||""!==$input2.data("last-value")||this.removeLastTag(),$input2.data("last-value",$input2.val())}),$input2.on("focusout",()=>{const tagText=$input2.val().trim();tagText&&(this.addTag(tagText),$input2.val(""))}),$input2.on("paste",event=>{event.preventDefault();(event.originalEvent||event).clipboardData.getData("text").split(this.separator).map(tag=>tag.trim()).filter(tag=>tag).forEach(tag=>this.addTag(tag))}),this.$hiddenInput.on("change",()=>{"true"!==this.$hiddenInput.attr("initialized")&&(this.loadInitialTags(),this.$hiddenInput.attr("initialized","true"))})}addTag(text){if(this.$tagsList.children(".tag").length>=this.maxTags)return void toastr.error(__("tag_input_max_tags",{count:this.maxTags}));const $tag=$("<div>").addClass("tag").html(`<span>${text}</span>`).attr("draggable","true");if(this.itemMaxWidth!==1/0){this.$tagsList.append($tag);$tag[0].offsetWidth>this.itemMaxWidth&&$tag.addClass("truncate").css("max-width",`${this.itemMaxWidth}px`).attr("title",text).attr("data-bs-toggle","tooltip").attr("data-bs-placement","top").attr("data-bs-original-title",text),$tag.detach()}const $removeBtn=$("<span>").addClass("remove-tag").html('<i class="fa-light fa-xmark"></i>').on("click",()=>{this.$tagsList.children(".tag").length<=this.minTags?toastr.error(__("tag_input_min_tags",{count:this.minTags})):(this.removeTooltip($tag),$tag.remove(),this.updateHiddenInput())});this.$tagsList.children(".tag").is((_,tag)=>$(tag).text()===text)||($tag.append($removeBtn),this.$tagsList.append($tag),this.updateHiddenInput(),this.draggable&&this.addDragAndDropEvents($tag)),new bootstrap.Tooltip($tag[0])}addDragAndDropEvents($tag){$tag.on("dragstart",e=>{e.originalEvent.dataTransfer.setData("text/plain",$tag.index()),$tag.addClass("dragging")}),$tag.on("dragend",()=>{$tag.removeClass("dragging")}),$tag.on("dragover",e=>{e.preventDefault(),$tag.addClass("drag-hover")}),$tag.on("dragleave",()=>{$tag.removeClass("drag-hover")}),$tag.on("drop",e=>{e.preventDefault(),$tag.removeClass("drag-hover");const draggedIndex=e.originalEvent.dataTransfer.getData("text/plain"),$draggedTag=this.$tagsList.children().eq(draggedIndex);$tag.index()<draggedIndex?$tag.before($draggedTag):$tag.after($draggedTag),this.updateHiddenInput()})}removeTooltip($element){const tooltip=bootstrap.Tooltip.getInstance($element[0]);tooltip&&tooltip.dispose()}removeLastTag(){if(this.$tagsList.children(".tag").length<=this.minTags&&this.minTags>0)return void toastr.error(__("tag_input_min_tags",{count:this.minTags}));const $lastTag=this.$tagsList.children(".tag").last();$lastTag.length&&(this.removeTooltip($lastTag),$lastTag.remove(),this.updateHiddenInput())}updateHiddenInput(){const tags=this.$tagsList.children(".tag").map((_,tag)=>$(tag).text()).get();this.$hiddenInput.val(tags.join(this.separator)).trigger("change")}};window.TagInputBaseController=TagInputBaseController;class TagInputController extends TagInputBaseController{constructor(input){super(input)}}function initializeTagInput(selector){const instance=new TagInputController(selector);$(selector).data("instance",instance)}window.initializeTagInput=initializeTagInput,doravel.ready(context=>{$(".x-tag-input .tags-input",context).each((index,input)=>{initializeTagInput(input)})});let TagCollectorBaseController=class TagCollectorBaseController2 extends BaseInputController{constructor(input){super(input),this.$input=$(input),this.$hiddenInput=this.$input.closest(".x-tag-collector-component").find(".tag-collector-hidden-input"),this.$addButton=this.$input.closest(".x-tag-collector-component").find(".add-tag-button"),this.name=this.$input.attr("data-name"),this.$container=this.$input.closest(".x-tag-collector-component"),this.parentForm=this.$input.closest("form"),this.max=this.$input.data("max"),this.values=this.$input.data("values")??[],this.inputsContainer=this.$container.find(".tag-collector-inputs-container"),this.messageContainer=this.$container.find(".x-tag-collector-message"),this.items={},this.activeTagId=null,this.labelFieldName=this.$input.data("label-field-name"),this.valueFieldName=this.$input.data("value-field-name"),this.itemClass=this.$input.data("item-class"),this.modalId=this.$input.data("modal-id"),this.$tagsContainer=this.$input.closest(".x-tag-collector-component").find(".tags-container"),this.displayInitialMessage(this.$input),this.suppressLogicMessages=this.$input.data("suppress-logic-messages"),this.regexExpression=this.$input.data("regex")?new RegExp(this.$input.data("regex")):null,this.allowDuplicates=this.$input.data("allow-duplicates"),this.setupEvents(this.$input),this.errors=[]}toggleButtonAvailability(){const $container=this.$input.closest(".tag-collector-input-container");if(this.max&&Object.keys(this.items).length===this.max)this.$input.prop("disabled",!0),this.$addButton.prop("disabled",!0),$container.attr("data-bs-toggle","tooltip").attr("data-bs-placement","top").attr("title",__("tag_collector_max_count",{count:this.max})),new bootstrap.Tooltip($container[0]);else{this.$input.prop("disabled",!1),this.$addButton.prop("disabled",!1);const tooltipInstance=bootstrap.Tooltip.getInstance($container[0]);tooltipInstance&&tooltipInstance.dispose(),$container.removeAttr("data-bs-toggle").removeAttr("data-bs-placement").removeAttr("title")}}resetValues(clear=!0){this.items={},this.renderTags(),this.updateInputValue(),this.updateTagsWithErrors(),clear||this.addInitialValues(),this.errors=[]}addInitialValues(){this.values.forEach(value=>{if(void 0!==value[this.valueFieldName]&&""===value[this.valueFieldName].trim()||this.regexExpression&&!this.regexExpression.test(value[this.valueFieldName]))return;const id=generateUUID(),additionalFields=Object.fromEntries(this.getFormFields().map(field=>{const cleanField=field.replace(/\[\]$/,"");return[field,value[cleanField]]}));this.items[id]={[this.labelFieldName]:value[this.labelFieldName]??value[this.valueFieldName]??"",[this.valueFieldName]:value[this.valueFieldName]??"",...additionalFields}}),this.renderTags(),this.updateInputValue()}updateInputValue(){this.inputsContainer.html(""),Object.entries(this.items).forEach(([id,item],index)=>{for(const[key,value]of Object.entries(item)){if("dornica_form-validation"===key||"form_validation"===key)continue;const inputName=key.endsWith("[]")?`${this.name}[${index}][${key.slice(0,-2)}][]`:`${this.name}[${index}][${key}]`,input=$("<input>").attr("type","text").attr("parent-id",id).attr("name",inputName).val(value??"");input[0].defaultValue=input.val(),input.on("focus",()=>input.trigger("blur"));const container=$('<div class="x-form-component"></div>');container.append(input),container.append('<div class="x-component-message"></div>'),this.inputsContainer.append(container)}}),Object.keys(this.items).length>0?this.$hiddenInput.val(["1"]).trigger("change"):this.$hiddenInput.val([]).trigger("change"),this.toggleButtonAvailability()}getFormFields(){return $(`#${this.modalId} form [name]`).not(`[name="${this.labelFieldName}"],[name="${this.valueFieldName}"],[name='dornica_form-validation'],.tag-collector-hidden-input`).map((_,el)=>el.name).get()}setupEvents($input2){this.$addButton.on("click",()=>this.handleAddTag($input2)),this.$input.on("keypress",e=>{13===e.which&&(e.preventDefault(),this.handleAddTag(this.$input))}),this.$tagsContainer.on("click",".tag-item-remove-button",e=>{const id=$(e.target).closest(".tag-item").data("id");this.handleRemoveTag(id)}),this.$tagsContainer.on("click",".tag-item-edit-button",e=>{const id=$(e.target).closest(".tag-item").data("id");this.activeTagId=id,this.handleEditTag(id)}),$(`#${this.modalId} form`).on("submit",e=>{e.preventDefault(),this.handleTagUpdate(),clearComponentMessage(this.$input),this.updateTagsWithErrors()}),$(`#${this.modalId}`).on("hidden.bs.modal",()=>{toggleButtonLoading($(`#${this.modalId}-tag-collector-submit`),!1)}),this.values.length&&this.addInitialValues(),this.checkFormValidation()}handleTagUpdate(){if(!this.activeTagId||$(`#${this.modalId} .x-component-message:not(:empty)`).length>0)return;const tag=this.items[this.activeTagId];tag[this.labelFieldName]=$(`#${this.modalId}`).find(`[name='${this.labelFieldName}']`).val().trim().replace(/\s+/g," "),tag[this.valueFieldName]=$(`#${this.modalId}`).find(`[name='${this.valueFieldName}']`).val().trim().replace(/\s+/g," ");const additionalFields=Object.fromEntries(this.getFormFields().map(field=>[field,$(`#${this.modalId}`).find(`[name='${field}']`).val()]));this.handleRemoveTag(this.activeTagId),this.items[this.activeTagId]={...tag,...additionalFields},this.renderTags(),this.activeTagId=null,this.updateInputValue(),$(`#${this.modalId}`).modal("hide"),this.updateTagsWithErrors()}handleRemoveTag(id){const $form=$(this.$hiddenInput[0].form);if(!$form.length)return;const formId=$form.attr("id");formId&&(doravel.formValidation.pendingRequests.find(req=>req.form===formId)?showToast("warning","            ."):(delete this.items[id],this.errors=this.errors.filter(error=>error.parent!==id),this.renderTags(),this.updateInputValue(),this.updateTagsWithErrors()))}handleEditTag(id){$(`#${this.modalId}`).modal("show");const tag=this.items[id],errors=this.errors.filter(error=>error.parent===id);Object.keys(tag).forEach(key=>{const value=tag[key],input=$(`#${this.modalId}`).find(`[name="${key}"]`);input.hasClass("hidden-number-input")?input.closest(".x-number-input-component").find(".number-input").val(value).trigger("input").trigger("change").trigger("blur"):input.val(value).trigger("input").trigger("change").trigger("blur")}),errors.forEach(error=>{const targetElement=$(`#${this.modalId}`).find(`[name="${error.name}"]`);this.suppressLogicMessages||showComponentMessage({type:"error",message:error.message,targetElement:$(`#${this.modalId}`).find(`[name="${error.name}"]`),formValidation:!0}),targetElement.one("change",()=>{clearComponentMessage(targetElement,!0)})}),errors.length&&handleSubmitButtonState($(`#${this.modalId}`).find("form"),{errorState:!0})}extractMessageData(messageElement){const formComponent=messageElement.closest(".x-form-component");if(!formComponent)return null;const inputElement=formComponent.querySelector("input[name]");if(!inputElement)return null;const parentId=inputElement.getAttribute("parent-id"),name=inputElement.getAttribute("name"),message=messageElement.textContent.trim(),match=name?.match(/\[(\d+)\]\[([^\]]+)\]/);return{parent:parentId,name:match?match[2]:null,message:message}}updateTagsWithErrors(){const tagsWithError=[...new Set(this.errors.map(error=>error.parent))];this.$tagsContainer.find(".tag-item").each((_,item)=>{const id=$(item).attr("data-id");tagsWithError.includes(id)?this.$tagsContainer.find(`.tag-item[data-id="${id}"]`).addClass("invalid-tag"):this.$tagsContainer.find(`.tag-item[data-id="${id}"]`).removeClass("invalid-tag")}),tagsWithError.length&&!this.suppressLogicMessages?showComponentMessage({type:"error",message:"     .",targetElement:this.$hiddenInput,formValidation:!0}):clearComponentMessage(this.$hiddenInput,!0)}checkFormValidation(){if(!this.parentForm)return;new MutationObserver(mutations=>{mutations.forEach(mutation=>{if(mutation.target.classList.contains("x-component-message")){let messageElement=mutation.target;const data=this.extractMessageData(messageElement);data&&!this.errors.some(err=>err&&err.parent===data.parent&&err.name===data.name)&&this.errors.push(data)}}),this.updateTagsWithErrors()}).observe(this.inputsContainer[0],{childList:!0,subtree:!0,characterData:!0,attributes:!0})}handleAddTag($input2){if(this.max&&Object.keys(this.items).length===this.max)return;const value=$input2.val().trim().replace(/\s+/g," ");if(""===value)return;if(!this.allowDuplicates&&Object.values(this.items).some(item=>item[this.valueFieldName]===value))return void showToast("error",__("duplicate_tag"));if(this.regexExpression&&!this.regexExpression.test(value))return void showToast("error",__("regex"));const id=generateUUID(),additionalFields=Object.fromEntries(this.getFormFields().map(field=>[field,""]));this.items[id]={[this.labelFieldName]:"",[this.valueFieldName]:value,...additionalFields},this.renderTags(),$input2.val(""),this.updateInputValue()}createTagItem(text,id){return`\n            <div class="tag-item" data-id="${id}">\n                <div class="tag-item-text truncate-1 ${this.itemClass??""}">${text}</div>\n                <button\n                    type="button"\n                    class="btn tag-item-edit-button text-info"\n                >\n                    <i class="fa-regular fa-gear"></i>\n                </button>\n                <button\n                    type="button"\n                    class="btn tag-item-remove-button text-danger"\n                >\n                    <i class="fa-regular fa-trash-can"></i>\n                </button>\n            </div>\n        `}renderTags(){this.$tagsContainer.html("");for(const[id,value]of Object.entries(this.items))this.$tagsContainer.append(this.createTagItem(value[this.labelFieldName]||value[this.valueFieldName],id))}init(){this.$input.on("keypress",e=>{13===e.which&&(e.preventDefault(),this.handleAddTag(this.$input))})}};window.TagCollectorBaseController=TagCollectorBaseController;class TagCollectorController extends TagCollectorBaseController{constructor(input){super(input)}}function initializeTagCollector(selector){const instance=new TagCollectorController(selector);$(selector).data("instance",instance)}window.initializeTagCollector=initializeTagCollector,doravel.ready(context=>{$(".x-tag-collector-component .tag-collector-input",context).each((index,input)=>{initializeTagCollector(input)})});let SwitchInputBaseController=class SwitchInputBaseController2 extends BaseInputController{constructor(input){super(),this.$input=$(input),this.setupEvents(this.$input),this.initializeSwitch(),this.displayInitialMessage(this.$input),this.suppressLogicMessages=this.$input.data("suppress-logic-messages")}setupEvents($input2){$input2.parents(".toggle-switch").on("click",event=>{this.handleToggleChange(event),this.validateInput()})}initializeSwitch(){const isActive=this.$input.parents(".toggle-container").hasClass("active"),initialValue=isActive?this.$input.attr("on-value"):this.$input.attr("off-value");this.$input.val(initialValue).trigger("change"),this.updateSwitchLabel(isActive),this.$input.attr("readonly")&&this.handleReadonly()}handleToggleChange(event){const $toggleContainer=$(event.currentTarget);if($toggleContainer.data("disabled")||$toggleContainer.data("readOnly"))return;const isActive=!$toggleContainer.hasClass("active");$toggleContainer.toggleClass("active",isActive);const newValue=isActive?this.$input.attr("on-value"):this.$input.attr("off-value");this.$input.val(newValue).trigger("change"),this.updateSwitchLabel(isActive)}updateSwitchLabel(isActive){const actionLabels=this.$input.data("action-label")||[],onLabel=actionLabels[1]?.on_label||__("switch_input.active"),offLabel=actionLabels[0]?.off_label||__("switch_input.inactive"),labelText=isActive?onLabel:offLabel,labelOuter=this.$input.closest(".toggle-container").siblings(".switch-label-outer");labelOuter.text()!==labelText&&labelOuter.text(labelText)}validateInput(){hasFormComponentMessage(this.$input.parents("form"),"error",!0)||hasComponentMessage(this.$input.parents("form"),"error",!0)||clearComponentMessage(this.$input,!0)}handleReadonly(){this.$input.addClass("palette-readonly")}handleUpdateValue(){const value=this.$input.val()===this.$input.attr("on-value")?this.$input.attr("on-value"):this.$input.attr("off-value");this.$input.val(value).trigger("change")}};window.SwitchInputBaseController=SwitchInputBaseController;class SwitchInputController extends SwitchInputBaseController{constructor(input){super(input)}}function initializeSwitchInput(selector){const instance=new SwitchInputController(selector);$(selector).data("instance",instance)}window.initializeSwitchInput=initializeSwitchInput,doravel.ready(context=>{$(".x-switch-input-component .switch-input",context).each((index,input)=>{initializeSwitchInput(input)})});let SlugInputBaseController=class SlugInputBaseController2 extends BaseInputController{constructor(input){super(),this.$input=$(input),this.displayInitialMessage(this.$input),this.suppressLogicMessages=this.$input.data("suppress-logic-messages"),this.parent=$(`#${this.$input.data("parent-id")}`),this.separator=this.$input.data("separator"),this.stopWords=["and","a","or","the","is","in","on","at","to"],this.mode=this.$input.data("mode"),this.removeStopWords=this.$input.data("remove-stop-words"),this.removeNumbers=this.$input.data("remove-numbers"),this.setupEvents(this.$input)}setupEvents($input2){this.parent.on("input",()=>{$input2.val(this.parent.val()).trigger("input").trigger("change")}),$input2.on("input",()=>{$input2.val(this.slugify($input2.val()))}),$input2.val(this.slugify($input2.val()))}slugify(text){const separator=this.separator,removeStopWords=this.removeStopWords,removeNumbers=this.removeNumbers,stopWords=this.stopWords;return text.toString().normalize("NFD").replace(/[\u064B-\u065F\u0670\u06D6-\u06ED]/g,"").replace(/[\u060C\u061B\u061F\u0621\u0640]/g,"").replace(/[\u0300-\u036f]/g,"").replace(/[^a-zA-Z0-9\u0600-\u06FF\s-_]/g,"").trim().split(/\s+/).map(word=>{const isStopWord=stopWords.includes(word.toLowerCase());return removeStopWords&&isStopWord?"":removeNumbers?word.replace(/\d+/g,""):word}).filter(word=>""!==word.trim()).map(word=>word.trim()).join(separator).toLowerCase().replace(new RegExp(`(${separator}|_)+`,"g"),separator)}};window.SlugInputBaseController=SlugInputBaseController;class SlugInputController extends SlugInputBaseController{constructor(input){super(input)}}function initializeSlugInput(selector){const instance=new SlugInputController(selector);$(selector).data("instance",instance)}window.initializeSlugInput=initializeSlugInput,doravel.ready(context=>{$(".x-slug-input-component .slug-input",context).each((index,input)=>{initializeSlugInput(input)})});let RepeaterInputsBaseController=class RepeaterInputsBaseController2{constructor(component){this.$component=$(component),this.deleteCondition=this.$component.data("delete-condition")??null,this.suppressLogicMessages=this.$component.data("suppress-logic-messages"),this.values=this.$component.data("values")??[],this.columns=this.createColumnsData(),this.maxRows=this.$component.data("max-rows")??1/0,this.minRows=this.$component.data("min-rows")??0,this.table=void 0,this.name=this.$component.data("name")??"",this.init()}init(){this.createTable(),this.addInitialRows(),this.setupEventListeners(),this.setupConditionalDeleteButtons(),this.$component.data("repeater-inputs",this)}createColumnsData(){const columns=[];return this.$component.closest(".x-repeater-inputs-component").find(".repeater-input-columns").find(".repeater-input-column").each((_,column)=>{const columnData={name:$(column).data("name"),label:$(column).data("label"),type:$(column).data("type"),tooltip:$(column).data("tooltip"),isUnique:$(column).data("is-unique"),suffix:$(column).data("suffix"),id:$(column).attr("id")};columns.push(columnData)}),columns}createTable(){const $grid=this.$component.find(".repeater-grid");this.$grid=$grid,this.$header=$grid.find(".repeater-header"),this.$body=$grid.find(".repeater-body"),this.createGridHeaders(),this.updateGridOnResize()}createGridHeaders(){if(this.columns.length>0){let gridTemplateColumns="";for(let i=0;i<this.columns.length;i++)gridTemplateColumns+="1fr ";this.$component.data("show-delete")&&(gridTemplateColumns+="100px"),this.$header.css("grid-template-columns",gridTemplateColumns),this.$body.find(".repeater-row").css("grid-template-columns",gridTemplateColumns),this.columns.forEach(column=>{const tooltip=column.tooltip?`data-bs-toggle="tooltip" title="${column.tooltip}"`:"";"hidden"!==column.type&&this.$header.append(`<div class="repeater-cell">\n                        <span ${tooltip} class="p-0">${column.label??""} ${column.suffix?`<span class="suffix">${column.suffix}</span>`:""} ${column.tooltip?'<i class="fa-light fa-info-circle"></i>':""}</span>\n                    </div>`)}),this.$component.data("show-delete")&&this.$component.data("allow-delete")&&this.$component.data("show-delete-all")?this.$header.append('<div class="repeater-cell delete-icon-container">\n                        <span class="delete-all-rows badge text-bg-light-danger"><i class="fa-light fa-trash-can"></i>  </span>\n                    </div>'):this.$component.data("show-delete")&&this.$header.append('<div class="repeater-cell delete-icon-container"></div>'),this.$component.find("[data-bs-toggle='tooltip']").tooltip()}else devConsoleLog({message:"No columns defined in repeater inputs data",type:"error"})}addInitialRows(isInitial=!0,isReset=!1){const initialCount=this.$component.data("initial-rows");for(let i=0;i<Math.min(initialCount,this.maxRows);i++)this.addRowInputs(isInitial,isReset);initialCount===this.minRows&&this.toggleDeleteButtonAvailability(!0)}addRowInputs(isInitial=!1,isReset=!1){const currentRowCount=this.$body.find(".repeater-row").length;!this.maxRows||currentRowCount<this.maxRows?(clearComponentMessage(this.$component.attr("id")),this.toggleDeleteButtonAvailability(!1),currentRowCount===this.maxRows-1&&this.$component.closest(".x-repeater-inputs-component").find(".add-row").hide(),this.addTableRow(),this.columns.forEach((column,index)=>{const selectedRow=this.values[currentRowCount],columnRenderer=this.renderOptions(column,selectedRow&&isInitial?selectedRow[column.name]??"":"",currentRowCount);columnRenderer?this.$body.find(".repeater-row:last-child").append(columnRenderer):console.error(`Unsupported column type: ${column.type}`)}),this.$body.find(".repeater-row:last-child .x-number-input-component .number-input").each((_,input)=>{new NumberInputController(input)}),this.$body.find(".repeater-row:last-child .x-text-input-component .text-input").each((_,input)=>{new TextInputController(input)}),this.$body.find(".repeater-row .x-select-component .select2-tag").each((_,input)=>{new SelectController(input)}),this.$component.data("show-delete")&&this.addDeleteIcon(),this.$body.scrollTop(this.$body[0].scrollHeight),this.toggleDeleteButtonAvailability(!1,this.$body.find(".repeater-row:last-child"))):this.suppressLogicMessages||showComponentMessage({type:"error",targetElement:this.$component.attr("id"),message:__("repeater_input_max_rows",{max:this.maxRows})})}addTableRow(){this.$body.append('<div class="repeater-row"></div>')}addDeleteIcon(){const disabled=this.$component.data("allow-delete")?"":"disabled",tooltip=this.$component.data("tooltip")?`data-bs-toggle="tooltip" title="${this.$component.data("tooltip")}"`:"";this.$body.find(".repeater-row:last-child").append(`<div class="repeater-cell delete-icon-container"><i class="fa-light fa-trash-can delete-row" ${disabled} ${tooltip}></i></div>`),this.$body.find(".repeater-row:last-child").find("i").tooltip()}renderOptions(column,value,index){const{type:type,name:name}=column,html=repeaterInputColumns?.[this.$component.attr("id")]?.[`${name}`].replace(/\b(id=")([^"]*)(")/g,(match,p1,oldId,p3)=>`${p1}${oldId.replace(this.$component.attr("id"),`${this.$component.attr("id")}-${index}`)}${p3}`).replace(new RegExp('(?<![a-zA-Z-])(name=")([^"]*)(")',"g"),(match,p1,oldName,p3)=>`${p1}${this.name+`[${index}][${name}]`}${p3}`),doc=(new DOMParser).parseFromString(html,"text/html"),targetElem=doc.querySelector(`#${name}-${this.$component.attr("id")}-${index}`);return $(targetElem).val(value),doravel.ready(context=>{"number"===type&&setTimeout(()=>{$(targetElem,context).attr("ignore-validation",!0),$(targetElem,context).trigger("input"),$(targetElem,context).removeAttr("ignore-validation")},0)}),doc.querySelector("div.repeater-cell")}setupEventListeners(){this.$component.closest(".x-repeater-inputs-component").on("click",".add-row",()=>this.handleAddRow()),this.$component.closest(".x-repeater-inputs-component").on("click",".delete-row:not([disabled])",event=>this.handleDeleteRow(event)),this.$component.closest(".x-repeater-inputs-component").on("input",'input[data-is-unique="true"]',event=>this.handleInputValidation(event)),this.$component.closest(".x-repeater-inputs-component").on("change",'select[data-is-unique="true"]',event=>this.handleSelectValidation(event)),this.$component.closest(".x-repeater-inputs-component").on("click",".delete-all-rows",()=>this.handleDeleteAllRows());let resizeTimeout;if(new MutationObserver(mutations=>{mutations.forEach(mutation=>{if("childList"===mutation.type&&mutation.addedNodes.length>0){const gridTemplateColumns=this.$header.css("grid-template-columns");this.$body.find(".repeater-row").css("grid-template-columns",gridTemplateColumns)}})}).observe(this.$body[0],{childList:!0}),$(window).on("resize",()=>{resizeTimeout&&clearTimeout(resizeTimeout),resizeTimeout=setTimeout(()=>{this.updateGridOnResize()},150)}),window.ResizeObserver){const resizeObserver=new ResizeObserver(()=>{resizeTimeout&&clearTimeout(resizeTimeout),resizeTimeout=setTimeout(()=>{this.updateGridOnResize()},150)}),$container=this.$component.closest(".repeater-inputs");$container.length&&resizeObserver.observe($container[0])}this.updateGridOnResize()}updateGridOnResize(){let gridTemplateColumns="";for(let i=0;i<this.columns.length;i++)"hidden"!==this.columns[i].type&&(gridTemplateColumns+="1fr ");this.$component.data("show-delete")&&(gridTemplateColumns+="100px"),this.$header.css("grid-template-columns",gridTemplateColumns),this.$body.find(".repeater-row").css("grid-template-columns",gridTemplateColumns),this.$body[0].scrollHeight>450?this.$header.css("padding-right","8px"):this.$header.css("padding-right","0")}handleDeleteAllRows(){this.$body.find(".repeater-row").each((_,row2)=>{$(row2).find(".delete-row").trigger("click")})}handleSelectValidation(event){const $select=$(event.currentTarget),match=($select.val(),$select.attr("name").match(/\[([^\[\]]+)\]$/)),key=match?match[1]:$select.attr("name"),$targetElement=$(`div.repeater-cell:has([name$="[${key}]"])`);clearComponentMessage($targetElement,!1);const $selects=this.$body.find(`select[name$="[${key}]"]`),valueCounts={};$selects.each((_,select)=>{const value=$(select).val();Array.isArray(value)?value.forEach(val=>{valueCounts[val]=(valueCounts[val]||0)+1}):valueCounts[value]=(valueCounts[value]||0)+1}),$selects.each((_,select)=>{const $currentSelect=$(select),value=$currentSelect.val(),$currentTargetElement=$(`div.repeater-cell:has([name="${$currentSelect.attr("name")}"])`);clearComponentMessage($currentTargetElement,!1),Array.isArray(value)?value.forEach(val=>{""!==val&&valueCounts[val]>1&&(this.suppressLogicMessages||showComponentMessage({type:"error",targetElement:$currentTargetElement,message:__("repeater_input.unique_value")}))}):""!==value&&valueCounts[value]>1&&(this.suppressLogicMessages||showComponentMessage({type:"error",targetElement:$currentTargetElement,message:__("repeater_input.unique_value")}))})}handleInputValidation(event){let $input2=$(event.currentTarget).hasClass("number-input")?$(event.currentTarget).next(".hidden-number-input"):$(event.currentTarget);$input2.val();const match=$input2.attr("name").match(/\[([^\[\]]+)\]$/),key=match?match[1]:$input2.attr("name"),$targetElement=$(`div.repeater-cell:has([name$="[${key}]"])`);clearComponentMessage($targetElement,!0);const $inputs=this.$body.find(`input[name$="[${key}]"]`),valueCounts={};$inputs.each((_,input)=>{const value=$(input).val();Array.isArray(value)?value.forEach(val=>{valueCounts[val]=(valueCounts[val]||0)+1}):valueCounts[value]=(valueCounts[value]||0)+1}),$inputs.each((_,input)=>{const $currentInput=$(input),value=$currentInput.val(),$currentTargetElement=$(`div.repeater-cell:has([name="${$currentInput.attr("name")}"])`);clearComponentMessage($currentTargetElement,!0),Array.isArray(value)?value.forEach(val=>{""!==val&&valueCounts[val]>1&&(this.suppressLogicMessages||showComponentMessage({type:"error",targetElement:$currentTargetElement,message:__("repeater_input.unique_value"),formValidation:!0}))}):""!==value&&valueCounts[value]>1&&(this.suppressLogicMessages||showComponentMessage({type:"error",targetElement:$currentTargetElement,message:__("repeater_input.unique_value"),formValidation:!0}))})}handleAddRow(){this.addRowInputs(),this.updateGridOnResize(),this.toggleDeleteButtonAvailability()}toggleDeleteButtonAvailability(isDisabled=!1,$targetRow=null){if(!this.$component.data("allow-delete"))return;const atMinRows=this.$body.find(".repeater-row").length<=this.minRows;if(atMinRows&&(isDisabled=!0),this.deleteCondition)return $targetRow?(this.updateRowDeleteButton($targetRow,isDisabled),void this.updateGlobalDeleteCondition()):(this.$body.find(".repeater-row").each((_,row2)=>{this.updateRowDeleteButton($(row2),isDisabled)}),void this.updateGlobalDeleteCondition());const $buttons=this.$component.find(".delete-row, .delete-all-rows"),tooltipConfig={title:__("repeater_input_min_rows_reached",{min:this.minRows})};if(isDisabled?$buttons.attr("disabled","disabled").each((_,btn)=>new bootstrap.Tooltip(btn,tooltipConfig)):$buttons.removeAttr("disabled").each((_,btn)=>{bootstrap.Tooltip.getInstance(btn)?.dispose()}),atMinRows&&this.$component.data("show-delete-all")){const $deleteAllBtn=this.$component.find(".delete-all-rows");$deleteAllBtn.attr("disabled","disabled"),bootstrap.Tooltip.getInstance($deleteAllBtn[0])||new bootstrap.Tooltip($deleteAllBtn[0],tooltipConfig)}}updateRowDeleteButton($row2,isDisabled){const canDelete=this.checkDeleteCondition($row2[0]),$deleteBtn=$row2.find(".delete-row"),tooltip=bootstrap.Tooltip.getInstance($deleteBtn[0]);if(tooltip?.dispose(),canDelete&&!isDisabled)$deleteBtn.removeAttr("disabled");else{$deleteBtn.attr("disabled","disabled");const tooltipTitle=canDelete?__("repeater_input_min_rows_reached",{min:this.minRows}):__("repeater_input_delete_condition_error");new bootstrap.Tooltip($deleteBtn[0],{title:tooltipTitle})}}updateGlobalDeleteCondition(){if(!this.$component.data("show-delete-all"))return;const $deleteAllBtn=this.$component.find(".delete-all-rows");if(!$deleteAllBtn.length)return;this.$body.find(".repeater-row").length;const totalButtons=this.$body.find(".delete-row").length,disabledButtons=this.$body.find(".delete-row[disabled]").length,tooltip=bootstrap.Tooltip.getInstance($deleteAllBtn[0]);if(tooltip?.dispose(),totalButtons>0&&totalButtons===disabledButtons){$deleteAllBtn.attr("disabled","disabled");const title=totalButtons===this.minRows?__("repeater_input_min_rows_reached",{min:this.minRows}):__("repeater_input_delete_condition_error");new bootstrap.Tooltip($deleteAllBtn[0],{title:title})}else $deleteAllBtn.removeAttr("disabled")}checkDeleteCondition(row){if(!this.deleteCondition)return!0;const $row=$(row),rowData={};$row.find("input, select").each((_,input)=>{const $input2=$(input),name=$input2.data("original-name");name&&(rowData[name]=$input2.hasClass("number-input")?$input2.next(".hidden-number-input").val():$input2.val())});try{const condition=this.deleteCondition.replace(/\$row\[([^\]]+)\]/g,(_,key)=>JSON.stringify(rowData[key]??void 0));return eval(condition)}catch(error){return devConsoleLog({message:`Error evaluating delete condition: ${this.deleteCondition}`,type:"error"}),devConsoleLog({message:error,type:"error"}),!1}}setupConditionalDeleteButtons(){this.deleteCondition&&(this.$body.on("change input","input, select",event=>{this.toggleDeleteButtonAvailability(!1,$(event.target).closest(".repeater-row"))}),this.$body.find(".repeater-row").each((_,row2)=>{this.toggleDeleteButtonAvailability(!1,$(row2))}))}handleDeleteRow(event){const currentRowCount=this.$body.find(".repeater-row").length;currentRowCount===this.maxRows&&this.$component.closest(".x-repeater-inputs-component").find(".add-row").show(),currentRowCount===this.minRows?this.suppressLogicMessages||showComponentMessage({type:"error",targetElement:this.$component.attr("id"),message:__("repeater_input_min_rows_reached",{min:this.minRows}),title:"warning"}):($(event.currentTarget).tooltip("dispose"),$(event.currentTarget).closest(".repeater-row").find("input[data-is-unique='true']").val("").trigger("input"),$(event.currentTarget).closest(".repeater-row").find("select[data-is-unique='true']").val("").trigger("change"),$(event.currentTarget).closest(".repeater-row").remove(),this.$body.find(".repeater-row").each((index,row2)=>{$(row2).find("input, select").each((_,input)=>{const name=$(input).attr("name"),id=$(input).attr("id");if(name){const newName=name.replace(/\[\d+\]/,`[${index}]`);$(input).attr("name",newName)}if(id){const newId=id.replace(/-\d+$/,`-${index}`);$(input).attr("id",newId)}})}),currentRowCount-this.minRows===1&&this.toggleDeleteButtonAvailability(!0),this.updateGridOnResize())}getRows(){return this.$body.find(".repeater-row").map((_,row2)=>$(row2).find("input, select").toArray().reduce((acc,input)=>{let $input2=$(input).hasClass("number-input")?$(input).next(".hidden-number-input"):$(input);const name=$input2.attr("name"),value=$input2.val(),match=name.match(/\[([^\[\]]+)\]$/),key=match?match[1]:name;return acc[key]?Array.isArray(acc[key])?acc[key].push(value):acc[key]=[acc[key],value]:acc[key]=value,acc},{})).get()}getRow(index){if(void 0!==index)return this.$body.find(".repeater-row").eq(index).find("input, select").toArray().reduce((acc,input)=>{let $input2=$(input).hasClass("number-input")?$(input).next(".hidden-number-input"):$(input);const name=$input2.attr("name"),value=$input2.val(),match=name.match(/\[([^\[\]]+)\]$/);return acc[match?match[1]:name]=value,acc},{});devConsoleLog({message:"You need to pass index to getRow function",type:"error"})}reset(){this.$body.empty(),this.addInitialRows(!0,!0),this.updateGridOnResize(),this.toggleDeleteButtonAvailability(),this.$body.find(".hidden-number-input").each((_,input)=>{$(input).attr("ignore-validation",!0),$(input).trigger("input"),$(input).removeAttr("ignore-validation")})}};window.RepeaterInputsBaseController=RepeaterInputsBaseController,doravel.ready((context,event)=>{$.fn.getRows=function(){const repeaterInputsInstance=this.data("repeater-inputs");return repeaterInputsInstance?repeaterInputsInstance.getRows():null},$.fn.resetRepeaterInputs=function(){const repeaterInputsInstance=this.data("repeater-inputs");repeaterInputsInstance&&repeaterInputsInstance.reset()},$.fn.getRow=function(index){const repeaterInputsInstance=this.data("repeater-inputs");return repeaterInputsInstance?repeaterInputsInstance.getRow(index):null}});class RepeaterInputsController extends RepeaterInputsBaseController{constructor(input){super(input)}}function initializeRepeaterInputs(selector){const instance=new RepeaterInputsController(selector);$(selector).data("instance",instance)}window.initializeRepeaterInputs=initializeRepeaterInputs,doravel.ready((context,event)=>{$(".x-repeater-inputs-component .repeater-inputs",context).each(function(){initializeRepeaterInputs(this)})});let RadioInputBaseController=class RadioInputBaseController2 extends BaseInputController{constructor(input){super(),this.$input=$(input),this.setupEvents(this.$input),this.displayInitialMessage(this.$input);const readOnly=this.$input.data("readonly"),mode=this.$input.closest(".form-group").data("mode");this.suppressLogicMessages=this.$input.data("suppress-logic-messages"),mode&&this.handleMode(this.$input,mode),readOnly&&this.$input.click(()=>!1)}setupEvents($input2){$input2.on("change",()=>{})}validateInput($input2){hasFormComponentMessage($input2.parents("form"),"error",!0)||hasComponentMessage($input2.parents("form"),"error",!0)||clearComponentMessage($input2,!0),clearComponentMessage($input2,!1)}handleMode($input2,mode){"vertical"===mode?$input2.closest(".form-group").find(".radio-group").addClass("flex-column"):"horizontal"===mode?$input2.closest(".form-group").find(".radio-group").removeClass("flex-column"):$input2.closest(".form-group").find(".radio-group").addClass("flex").removeClass("flex-column")}};window.RadioInputBaseController=RadioInputBaseController;class RadioInputController extends RadioInputBaseController{constructor(input){super(input)}}function initializeRadioInput(selector){const instance=new RadioInputController(selector);$(selector).data("instance",instance)}window.initializeRadioInput=initializeRadioInput,doravel.ready(context=>{$(".x-radio-input-component .radio-check",context).each((index,input)=>{initializeRadioInput(input)})});let PasswordInputBaseController=class PasswordInputBaseController2 extends BaseInputController{constructor(input){super(),this.$input=$(input),this.setupEvents(this.$input),this.handleSuffix(this.$input),this.handlePrefix(this.$input),this.handleSuggestion(this.$input),this.handleInitialAutoFocus(this.$input),this.handleTrim(this.$input),this.handleConfirm(this.$input),this.displayInitialMessage(this.$input),this.suppressLogicMessages=this.$input.data("suppress-logic-messages")}setupEvents($input2){let debounceTimeout;const schema=$input2.data("schema")||"disc",visibilityToggleEnabled=!1!==$input2.data("visibility-toggle");$input2.css("-webkit-text-security",schema),visibilityToggleEnabled?$input2.closest(".form-group").find(".toggle-visibility").show().on("click",()=>{$input2.hasClass("hide-text")?($input2.removeClass("hide-text").css("-webkit-text-security","none"),$input2.siblings(".toggle-visibility").find("i").removeClass("fa-eye-slash").addClass("fa-eye")):($input2.addClass("hide-text").css("-webkit-text-security",schema),$input2.siblings(".toggle-visibility").find("i").removeClass("fa-eye").addClass("fa-eye-slash"))}):$input2.closest(".form-group").find(".toggle-visibility").hide(),$input2.on("keyup",()=>{clearTimeout(debounceTimeout),debounceTimeout=setTimeout(()=>{this.handleAssessPasswordSecurity($input2)},300)}),$input2.on("keyup",()=>{this.validateInput($input2)})}validateInput($input2){const maxLength=$input2.data("max-length"),minLength=$input2.data("min-length"),dataProgress=($input2.data("required"),void 0===$input2.data("trim")||$input2.data("trim"),$input2.data("progress"));let isValid=!0;this.handleTrim($input2);const value=$input2.val().trim();void 0!==minLength&&value.length>0&&value.length<minLength&&(getSuppressLogicMessages($input2)||showComponentMessage({type:"error",targetElement:$input2,message:__("min",{min:minLength}),title:__("error"),formValidation:!0}),isValid=!1),void 0!==maxLength&&value.length>0&&value.length>maxLength&&(getSuppressLogicMessages($input2)||showComponentMessage({type:"error",targetElement:$input2,message:__("max",{max:maxLength}),title:__("error"),formValidation:!0}),isValid=!1),dataProgress&&this.handleAssessPasswordSecurity($input2),!isValid||hasFormComponentMessage($input2.parents("form"),"error",!0)||hasComponentMessage($input2.parents("form"),"error",!0)||clearComponentMessage($input2,!0),isValid&&clearComponentMessage($input2,!1)}handleSuggestion($input2){const suggestions=$input2.attr("data-suggestion")?JSON.parse($input2.attr("data-suggestion")):void 0,datalist=$(`#${$input2.attr("list")}`);datalist.empty(),suggestions&&suggestions.forEach((item,index)=>{datalist.append(`<option value='${item}'>${item}</option>`)})}handleTrim($input2){$input2.val($input2.val().trim().replace(/\s+/g,""))}handleInitialAutoFocus($input2){!0===$input2.data("auto-focus")&&$input2.focus()}handleAssessPasswordSecurity($input2){const progressContainer=$input2.closest(".form-group").find(".password-progress");progressContainer.find(".progress-bar");if(!(!1!==$input2.data("show-strength-meter")))return void progressContainer.hide();progressContainer.show();const password=$input2.val().trim(),minLength=parseInt($input2.data("min-length"),10)||4,requireUppercase=!0===$input2.data("require-uppercase"),requireNumber=!0===$input2.data("require-number"),requireLowercase=!0===$input2.data("require-lowercase"),requireSpecialChar=!0===$input2.data("require-special-char");if(0===password.length)return void updateProgressBar(progressContainer,0,0);const regex=[new RegExp(`.{${minLength},}`),requireUppercase?/[A-Z]/:null,requireLowercase?/[a-z]/:null,requireNumber?/[0-9]/:null,requireSpecialChar?/[$@$!%*#?&_]/:null].filter(Boolean);let step=0;regex.forEach(rule=>{rule.test(password)&&step++});updateProgressBar(progressContainer,step,regex.length)||$input2.on("keypress",()=>{this.validateInput($input2)})}handleConfirm($input2){const confirmInput=$(`#${$input2.data("confirm")}`);confirmInput.on("blur",()=>{const confirmValue=confirmInput.val().trim(),originalValue=$input2.val().trim();!confirmInput.data("required")||confirmValue?originalValue!==confirmValue?getSuppressLogicMessages($input2)||showComponentMessage({type:"error",targetElement:confirmInput,message:__("match_password"),title:__("error"),formValidation:!0}):confirmInput.closest(".form-group").find(".error-message").text("").hide():getSuppressLogicMessages($input2)||showComponentMessage({type:"error",targetElement:confirmInput,message:__("required"),title:__("error"),formValidation:!0})})}};window.PasswordInputBaseController=PasswordInputBaseController;class PasswordInputController extends PasswordInputBaseController{constructor(input){super(input)}}function initializePasswordInput(selector){const instance=new PasswordInputController(selector);$(selector).data("instance",instance)}window.initializePasswordInput=initializePasswordInput,doravel.ready(context=>{$(".x-password-input-component .password-input",context).each((index,input)=>{initializePasswordInput(input)})});let NumberInputBaseController=class NumberInputBaseController2 extends BaseInputController{constructor(input){super(),this.$input=$(input),this.$hiddenInput=this.$input.closest(".x-number-input-component").find(".hidden-number-input"),this.min=this.$input.data("min"),this.max=this.$input.data("max"),this.step=this.$input.data("step")||1,this.zeroFill=this.$input.data("zerofill"),this.zeroFillSize=this.$input.data("zerofill-size"),this.unsigned=this.$input.data("unsigned"),this.allowDecimal=this.$input.data("allow-decimal"),this.decimalPlaces=this.$input.data("decimal-places"),this.showSeparator=this.$input.data("show-separator"),this.separatorChar=this.$input.data("separator-char"),this.autoFocus=this.$input.data("auto-focus"),this.name=this.$input.data("name"),this.suppressLogicMessages=this.$input.data("suppress-logic-messages"),this.hotKeysAlign=this.$input.data("hot-keys-align"),this.showAmountInWords=this.$input.data("show-amount-in-words"),this.amountInWordsSuffix=this.$input.data("amount-in-words-suffix"),this.amountInWordsFactor=this.$input.data("amount-in-words-factor"),this.caretPosition=0,this.previousValue="",this.suppressInputEvent=!1,this.init()}init(){this.setupEvents(this.$input),this.handleSuffix(this.$input),this.handlePrefix(this.$input),this.handleSuggestion(this.$input),this.handleInitialAutoFocus(this.$input),this.$input.val()&&this.$input.trigger("keypress").trigger("input").trigger("change")}rawVal(){return this.$input.val().replaceAll(this.separatorChar,"")}handleSuggestion($input2){const suggestions=$input2.attr("data-suggestion")?JSON.parse($input2.attr("data-suggestion")):void 0,datalist=$(`#${$input2.attr("list")}`);datalist.empty(),suggestions&&suggestions.forEach((item,index)=>{datalist.append(`<option value='${item}'>${item}</option>`)})}handleInitialAutoFocus($input2){!0===this.autoFocus&&$input2.focus()}handleStep(direction){const value=this.rawVal();""!==value&&null!=value&&("up"===direction?this.$input.val(parseFloat(value)+parseFloat(this.step)).trigger("keypress").trigger("input").trigger("change"):"down"===direction&&this.$input.val(parseFloat(value)-parseFloat(this.step)).trigger("keypress").trigger("input").trigger("change"))}setupEvents(input){input.on("keypress",this.handleKeyPress.bind(this)).on("input",this.handleInput.bind(this)).on("keydown",this.handleKeyDown.bind(this)).on("paste",this.handlePaste.bind(this)).on("focusout",this.handleFocusOut.bind(this)).on("change",this.handleChange.bind(this)),input.closest(".x-number-input-component").find(".hot-key button").on("click",event=>{const direction=event.currentTarget.dataset.direction;this.handleStep(direction)}),this.$hiddenInput.on("input",this.handleSetValue.bind(this)),this.showAmountInWords&&this.$hiddenInput.on("change",this.handleAmountToTextConvert.bind(this));new MutationObserver(()=>{this.suppressInputEvent?this.suppressInputEvent=!1:this.$hiddenInput[0].dispatchEvent(new Event("input",{bubbles:!0}))}).observe(this.$hiddenInput[0],{attributes:!0,attributeFilter:["value"]})}handleKeyDown(event){this.caretPosition=event.currentTarget.selectionStart,this.previousValue=event.currentTarget.value,"ArrowUp"!==event.key&&"ArrowDown"!==event.key||(event.preventDefault(),this.handleStep("ArrowUp"===event.key?"up":"down"))}handlePaste(event){const pastedText=event.originalEvent.clipboardData.getData("text").replaceAll(this.separatorChar,"");this.isValidInput(pastedText)?setTimeout(()=>{const input=event.currentTarget;if(input&&"function"==typeof input.setSelectionRange){const length=input.value.length;input.setSelectionRange(length,length)}},0):event.preventDefault()}handleAmountToTextConvert(event){const value=event.currentTarget.value,text=convertAmountToText(Number(value)*Number(this.amountInWordsFactor),this.amountInWordsSuffix);this.$input.closest(".x-number-input-component").find(".amount-in-words").html(text)}isValidInput(text){return![...text].some(char=>!this.isValidCharacter(char))}handleSetValue(event){const value=this.$hiddenInput.val().trim();this.$input.attr("programatically-set-value",!0),this.suppressInputEvent=!0,this.$hiddenInput[0].value=value,this.$input.val(value).trigger("keypress").trigger("input").trigger("change")}handleCaretPosition(event){if(!this.showSeparator)return;const value=event.currentTarget.value,currentSeparators=(value.match(new RegExp(this.separatorChar,"g"))||[]).length,previousSeparators=(this.previousValue.match(new RegExp(this.separatorChar,"g"))||[]).length;let calculatedCaretPosition=this.caretPosition;value.length>this.previousValue.length?calculatedCaretPosition++:value.length<this.previousValue.length&&calculatedCaretPosition--,currentSeparators>previousSeparators?calculatedCaretPosition++:currentSeparators<previousSeparators&&calculatedCaretPosition--,this.$input[0].setSelectionRange(calculatedCaretPosition,calculatedCaretPosition)}handleFocusOut(event){const value=this.$input.val();value.endsWith(".")&&this.$input.val(value.replace(/\.$/,"")).trigger("keypress").trigger("input").trigger("change"),this.$hiddenInput.trigger("focusout")}handleChange(event){this.$hiddenInput.trigger("change"),this.handleCaretPosition(event)}handleInput(event){const value=this.$input.val().trim(),formattedValue=this.showSeparator?this.addSeparators(value):value;this.$input.val(formattedValue),this.validateInput(value),this.$hiddenInput.attr("data-formatted-value",formattedValue),this.$input.attr("programatically-set-value")||(this.$hiddenInput.val(this.rawVal()),void 0===this.$hiddenInput.closest("form").attr("ignore-change-validation")&&this.$hiddenInput.closest("form").length&&"function"==typeof this.$hiddenInput.valid&&this.$hiddenInput.valid()),this.$input.removeAttr("programatically-set-value")}validateInput(value){let isValid=!0;const parsedValue=parseFloat(value.replace(/[^0-9.-]/g,""));this.unsigned&&parsedValue<0&&(this.suppressLogicMessages||showComponentMessage({type:"error",targetElement:this.$input,message:__("positive"),title:__("error"),formValidation:!1}),isValid=!1),!this.allowDecimal&&value.includes(".")&&(this.suppressLogicMessages||showComponentMessage({type:"error",targetElement:this.$input,message:__("decimal"),title:__("error"),formValidation:!1}),isValid=!1),this.zeroFill||!value.startsWith("0")||"0"===value||value.includes(".")||(this.suppressLogicMessages||showComponentMessage({type:"error",targetElement:this.$input,message:__("leading_zeros"),title:__("error"),formValidation:!1}),isValid=!1),void 0!==this.min&&parsedValue<this.min&&(this.suppressLogicMessages||showComponentMessage({type:"error",targetElement:this.$input,message:__("min_value",{min:this.showSeparator?this.addSeparators(this.min.toString()):this.min}),title:__("error"),formValidation:!1}),isValid=!1),void 0!==this.max&&parsedValue>this.max&&(this.suppressLogicMessages||showComponentMessage({type:"error",targetElement:this.$input,message:__("max_value",{max:this.showSeparator?this.addSeparators(this.max.toString()):this.max}),title:__("error"),formValidation:!1}),isValid=!1),isValid&&clearComponentMessage(this.$input,!1),!isValid||hasFormComponentMessage(this.$input.parents("form"),"error",!0)||hasComponentMessage(this.$input.parents("form"),"error",!0)||clearComponentMessage(this.$input,!0)}handleKeyPress(event){const value=this.$input.val(),char=String.fromCharCode(event.which),selectionStart=this.$input[0].selectionStart,selectionEnd=this.$input[0].selectionEnd;this.isControlCharacter(event.which)||(this.shouldPreventInput(char,value,selectionStart,selectionEnd)?event.preventDefault():(this.handleZeroFill(char,value),this.isValidCharacter(char)||event.preventDefault()))}isControlCharacter(keyCode){return keyCode<32||8===keyCode}shouldPreventInput(char,value,selectionStart,selectionEnd){if(!this.isValidCharacter(char))return!0;const leadingZeros=(value.match(/^0+/)||[""])[0].length;return"0"===char&&!this.allowDecimal&&0===selectionStart&&value.length>1||(!this.zeroFill&&leadingZeros>0&&"."!==char&&selectionStart<2&&selectionEnd-selectionStart!==value.length||("-"===char?this.unsigned&&0===selectionStart||value.includes("-")||0!==selectionStart:"."===char&&(!this.allowDecimal||value.includes(".")||0===selectionStart)))}handleZeroFill(char,value){if(!this.zeroFill||this.zeroFillSize<=0||"-"===char)return;const rawValue=this.rawVal(),parts=rawValue.replace("-","").split(".");let integerPart=parts[0].replace(/^0+/,"")||"0";const decimalPart=parts.length>1?"."+parts[1]:"";integerPart.length<this.zeroFillSize&&(integerPart=rawValue.includes(".")||"."===char?integerPart.padStart(this.zeroFillSize,"0"):integerPart.padStart(this.zeroFillSize-1,"0"));const newValue=integerPart+decimalPart;this.$input.val(value.startsWith("-")?`-${newValue}`:newValue)}addSeparators(value){const parts=value.replaceAll(this.separatorChar,"").split("."),integerPart=parts[0],decimalPart=parts.length>1?"."+parts[1]:"",separatorChar=this.separatorChar||",";return integerPart.replace(/\B(?=(\d{3})+(?!\d))/g,separatorChar)+decimalPart}isValidCharacter(char){return/^[0-9\u0660-\u0669\u06F0-\u06F9-\.]$/.test(char)||"ArrowUp"===char||"ArrowDown"===char}};window.NumberInputBaseController=NumberInputBaseController,doravel.ready((context,e,zone)=>{$.fn.formattedVal=function(){if(this.hasClass("hidden-number-input"))return this.attr("data-formatted-value")}});let NumberInputController=class NumberInputController2 extends NumberInputBaseController{constructor(input){super(input)}};function initializeNumberInput(selector){const instance=new NumberInputController(selector);$(selector).data("instance",instance)}window.initializeNumberInput=initializeNumberInput,doravel.ready((context,e,zone)=>{$(".x-number-input-component .number-input",context).each((index,input)=>{initializeNumberInput(input)})});let ImagePickerBaseController=class ImagePickerBaseController2 extends BaseInputController{constructor(input){super(input),this.files=[],this.isCropping=!1,this.isRecropping=!1,this.$input=$(input),this.name=this.$input.attr("name"),this.fileToReplace={},this.quality=parseFloat(this.$input.data("quality")),this.maxWidth=parseFloat(this.$input.data("max-width"))||1/0,this.maxHeight=parseFloat(this.$input.data("max-height"))||1/0,this.minWidth=parseFloat(this.$input.data("min-width"))||0,this.minHeight=parseFloat(this.$input.data("min-height"))||0,this.minAspectRatio=parseFloat(this.$input.data("min-aspect-ratio"))||void 0,this.maxAspectRatio=parseFloat(this.$input.data("max-aspect-ratio"))||void 0,this.allowRecropping=!0===this.$input.data("allow-recropping"),this.cropper=void 0,this.previewContainer=this.$input.closest(".x-image-picker-component").find(".images-preview"),this.allowCropper=!0===this.$input.data("cropper"),this.setupEvents(this.$input),this.displayInitialMessage(this.$input),this.suppressLogicMessages=this.$input.data("suppress-logic-messages"),this.clearable=this.$input.data("clearable"),this.readonly=this.$input.data("readonly"),this.fileNameMaxLength=this.$input.data("file-name-max-length"),this.src=this.$input.data("src"),this.srcKey=this.$input.data("src-key"),this.srcID=this.$input.data("src-id"),this.srcName=this.$input.data("src-name"),this.srcSize=this.$input.data("src-size"),this.srcExtension=this.$input.data("src-extension"),this.status=Object.freeze({DELETED:"deleted",REPLACED:"replaced",UPLOADED:"uploaded",STORED:"stored"}),this.addInitialValues()}addInitialValues(){this.src&&(this.files=[{key:this.srcKey,id:this.srcID,status:this.status.STORED}]),this.updateInputFiles()}setupEvents($input2){const fileInputUploaderElement=this.$input.closest(".x-image-picker-component").find(".image-picker-uploader");$input2.on("change",event=>this.handleFileSelection(event));const componentContainer=this.$input.closest(".x-image-picker-component");if(componentContainer.on("click",".file-remove",event=>this.handleFileRemove(event)),componentContainer.on("click",".file-crop",event=>this.handleFileCrop(event)),componentContainer.on("click",".file-replace",event=>this.handleFileReplace(event)),componentContainer.on("dblclick",".file-name",event=>{this.$input.data("allow-rename")&&this.handleFileRename(event)}),fileInputUploaderElement.on("drop",event=>this.handleDragAndDrop(event)),$input2.on("focusin.validate focusout.validate",event=>{event.preventDefault(),event.stopPropagation(),event.stopImmediatePropagation()}),fileInputUploaderElement.on("drag dragstart dragend dragover dragenter dragleave drop",function(e){e.preventDefault(),e.stopPropagation()}),fileInputUploaderElement.on("dragover dragenter",function(){$(this).addClass("is-dragover")}),fileInputUploaderElement.on("dragleave dragend drop",function(){$(this).removeClass("is-dragover")}),this.allowCropper||this.allowRecropping){const image=this.$input.closest(".x-image-picker-component").find(".cropper-modal-container").find("img")[0];this.$input.closest(".x-image-picker-component").find(".cropper-modal-container").find(".btn-cancel-crop").on("click",()=>{this.isRecropping||this.$input.closest(".x-image-picker-component").find(".file-remove").trigger("click"),this.closeCropperModal()}),this.$input.closest(".x-image-picker-component").find(".cropper-modal-container").on("shown.bs.modal",()=>{const files=[...this.files];this.isRecropping||this.clearInput(),this.isCropping=!0;let isAdjustingCrop=!1;this.cropper=new Cropper(image,{autoCropArea:.8,viewMode:2,dragMode:"none",movable:!1,toggleDragModeOnDblclick:!1,ready:()=>{this.$input.closest(".x-image-picker-component").find(".cropper-modal-container").find(".btn-crop").one("click",e=>{this.files=[...files];const uploadedFile=this.files.filter(fileObj=>fileObj.status===this.status.UPLOADED||fileObj.status===this.status.REPLACED);this.updateInputFiles(),$(e.currentTarget).find(".loader").removeClass("d-none"),this.$input.closest(".x-image-picker-component").find(".modal-footer button").attr("disabled",!0);const originalFormat=uploadedFile[0].file.type.split("/")[1],originalName=uploadedFile[0].file.name,originalId=uploadedFile[0].id;new Promise(resolve=>{setTimeout(()=>{this.cropper.getCroppedCanvas({imageSmoothingEnabled:!1}).toBlob(blob=>{const file=new File([blob],originalName,{type:blob.type}),oldFile=this.files.find(fileObj=>fileObj.key===this.fileToReplace.key);oldFile?(this.files=this.files.filter(fileObj=>fileObj.key!==oldFile.key),this.files.push({file:file,id:originalId,key:this.fileToReplace?.key,status:oldFile.status===this.status.UPLOADED?this.status.UPLOADED:this.status.REPLACED})):this.files.push({file:file,id:originalId,status:this.status.UPLOADED}),this.updateInputFiles(),this.$input.trigger("change"),resolve()},`image/${originalFormat}`,this.quality)},200)}).then(()=>{this.closeCropperModal(),$(e.currentTarget).find(".loader").addClass("d-none")})}),this.$input.closest(".x-image-picker-component").find(".cropper-modal-container").find(".btn-skip-crop").one("click",()=>{this.files=[...files],this.updateInputFiles(),this.closeCropperModal()}),this.$input.closest(".x-image-picker-component").find(".cropper-modal-container").find(".btn-cancel-crop").one("click",()=>{this.isRecropping||this.clearInput(),this.closeCropperModal()}),this.$input.closest(".x-image-picker-component").find(".cropper-modal-container").on("hidden.bs.modal",()=>{this.cropper.destroy(),this.$input.closest(".x-image-picker-component").find(".modal-footer button").attr("disabled",!1)})},crop:event=>{if(isAdjustingCrop)return;const width=Math.round(event.detail.width),height=Math.round(event.detail.height),aspectRatio=width/height;if(this.minWidth||this.minHeight||this.maxWidth||this.maxHeight||this.minAspectRatio||this.maxAspectRatio){let adjustedWidth=width,adjustedHeight=height;this.minWidth&&(adjustedWidth=Math.max(this.minWidth,adjustedWidth),adjustedHeight=adjustedWidth/aspectRatio),this.maxWidth&&(adjustedWidth=Math.min(this.maxWidth,adjustedWidth),adjustedHeight=adjustedWidth/aspectRatio),this.minHeight&&(adjustedHeight=Math.max(this.minHeight,adjustedHeight),adjustedWidth=adjustedHeight*aspectRatio),this.maxHeight&&(adjustedHeight=Math.min(this.maxHeight,adjustedHeight),adjustedWidth=adjustedHeight*aspectRatio);const adjustedAspectRatio=adjustedWidth/adjustedHeight;this.minAspectRatio&&adjustedAspectRatio<this.minAspectRatio&&(adjustedHeight=adjustedWidth/this.minAspectRatio),this.maxAspectRatio&&adjustedAspectRatio>this.maxAspectRatio&&(adjustedWidth=adjustedHeight*this.maxAspectRatio),adjustedWidth===width&&adjustedHeight===height||(isAdjustingCrop=!0,this.cropper.setData({width:adjustedWidth,height:adjustedHeight}),isAdjustingCrop=!1)}}})})}}resetValue(clear=!0){if(this.$input.closest(".x-image-picker-component").find(".file-remove").trigger("click"),!clear){if(this.src){const preview=`\n                    <div class="file-preview" data-file-id="${this.srcID}" data-file-key="${this.srcKey}">\n                        <div class="image-preview">\n                            <a href="${this.src}" image-picker-fancy-box class="image-preview-link">\n                                <i class="fa-light fa-file-magnifying-glass"></i>\n                            </a>\n                            <img src="${this.src}" alt="${this.srcName}" class="image-preview-image" />\n                        </div>\n                        <div class="file-info">\n                            <div class="file-name" data-file-id="${this.srcID}" data-file-key="${this.srcKey}">\n                                <span class="file-name-text">${this.srcName}</span>\n                                <span class="file-extension">${this.srcExtension}</span>\n                            </div>\n                            <div class="file-additional-info">\n                                <div class="file-size">${this.formatFileSize(this.srcSize)}</div>\n                                <div class="file-actions ${this.readonly?"d-none":""}">\n                                    <button class="file-action file-replace" type="button" \n                                        data-file-id="${this.srcID}"\n                                        data-file-key="${this.srcKey}">\n                                        <i class="fa-regular ${doravel.config.image_picker.edit_icon}"></i>\n                                    </button>\n                                    <button class="file-action file-remove ${this.clearable?"":"d-none"}" \n                                        type="button" data-file-id="${this.srcID}" \n                                        data-file-key="${this.srcKey}">\n                                        <i class="fa-regular fa-trash-can"></i>\n                                    </button>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                `;this.previewContainer.html(preview),this.$input.closest(".x-image-picker-component").find(".image-picker-uploader").hide()}this.files=this.src?[{key:this.srcKey,id:this.srcID,status:this.status.STORED}]:[],this.updateInputFiles()}}handleDragAndDrop(event){event.preventDefault(),event.stopPropagation();const files=event.originalEvent.dataTransfer.files;let allValid=!0;Array.from(files).map(file=>({file:this.validateFileNameLength(this.$input,file),id:generateUUID()})).forEach(fileObj=>{this.validateFileExtension(this.$input,fileObj.file)&&this.validateFileSize(this.$input,fileObj.file)?(this.files.push(fileObj),this.createFilePreview(fileObj)):allValid=!1}),allValid&&clearComponentMessage(this.$input,!1),this.updateInputFiles()}handleFileSelection(event){const hasDefaultFile=!!this.fileToReplace.key;let oldFile=this.files[0];!oldFile&&hasDefaultFile&&(oldFile={file:null,key:this.fileToReplace.key,id:this.fileToReplace.id,status:this.status.UPLOADED});const file=event.target.files[0];if(!file)return;let allValid=!0;if(this.validateFileExtension(this.$input,file)&&this.validateFileSize(this.$input,file)){let fileObj={};oldFile?(this.files=this.files.filter(fileObj2=>fileObj2.status===this.status.DELETED),fileObj={file:file,id:oldFile.id??generateUUID(),status:oldFile.status!==this.status.UPLOADED||hasDefaultFile?this.status.REPLACED:this.status.UPLOADED},oldFile.key&&(fileObj.key=oldFile.key)):fileObj={file:file,id:generateUUID(),status:this.status.UPLOADED},this.files.push(fileObj),this.createFilePreview(fileObj)}else allValid=!1;allValid&&clearComponentMessage(this.$input,!1),this.updateInputFiles()}handleFileRemove(event){this.fileToReplace={id:$(event.currentTarget).data("file-id"),key:$(event.currentTarget).data("file-key")};const fileId=$(event.currentTarget).data("file-id"),fileKey=$(event.currentTarget).data("file-key");this.isCropping=!1,fileKey?(this.files=this.files.filter(fileObj=>fileObj.key!==fileKey),this.files.push({status:this.status.DELETED,key:fileKey,id:fileId})):this.files=this.files.filter(fileObj=>fileObj.id!==fileId),this.clearInput()}handleFileReplace(event){this.fileToReplace={id:$(event.currentTarget).data("file-id"),key:$(event.currentTarget).data("file-key")},this.isCropping=!1,this.$input.trigger("click")}handleFileCrop(event){this.isRecropping=!0,this.$input.trigger("change")}handleFileRename(event){const fileId=$(event.currentTarget).data("file-id"),$fileNameElement=$(event.currentTarget),currentName=$fileNameElement.text().replace(/\s+/g," ").trim(),currentExtension=currentName.split(".").pop(),currentNameWithoutExtension=currentName.slice(0,-currentExtension.length-1),$input2=$('<input type="text" class="rename-input">').val(currentNameWithoutExtension);$input2.attr("maxlength",this.fileNameMaxLength-(currentExtension.length+1)),$fileNameElement.replaceWith($input2),$input2.focus(),$input2.on("blur keydown",e=>{if("blur"===e.type||"Enter"===e.key){let newNameWithoutExtension=$input2.val().replace(/\s+/g," ").trim();const maxLength=this.fileNameMaxLength-(currentExtension.length+1);newNameWithoutExtension.length>maxLength&&(newNameWithoutExtension=newNameWithoutExtension.substring(0,maxLength));const newName=`${newNameWithoutExtension}.${currentExtension}`,fileIndex=this.files.findIndex(fileObj=>fileObj.id===fileId);-1!==fileIndex&&newNameWithoutExtension?(this.files[fileIndex].file=new File([this.files[fileIndex].file],newName,{type:this.files[fileIndex].file.type}),$input2.replaceWith(`\n                            <div class="file-name" data-file-id="${fileId}">\n                                <span class="file-name-text">${newNameWithoutExtension}</span>\n                                <span class="file-extension">.${currentExtension}</span>\n                            </div>\n                        `)):$input2.replaceWith(`\n                            <div class="file-name" data-file-id="${fileId}">\n                                <span class="file-name-text">${currentNameWithoutExtension}</span>\n                                <span class="file-extension">.${currentExtension}</span>\n                            </div>\n                        `),this.updateInputFiles()}})}updateInputFiles(){if(2===this.files.length){let deletedFile,uploadedFile;for(const file of this.files)file.status===this.status.DELETED?deletedFile=file:file.status!==this.status.UPLOADED&&file.status!==this.status.REPLACED||(uploadedFile=file);if(deletedFile&&uploadedFile){const mergedFile={key:deletedFile.key,id:deletedFile.id,file:uploadedFile.file,status:this.status.REPLACED};this.files=[mergedFile]}}const dataTransfer=new DataTransfer;this.files.forEach(fileObj=>{fileObj.status!==this.status.DELETED&&fileObj.status!==this.status.STORED&&dataTransfer.items.add(fileObj.file)}),this.$input[0].files=dataTransfer.files;const $hiddenInputs=this.$input.closest(".x-image-picker-component").find(".image-picker-hidden-inputs");$hiddenInputs.empty();let deletedIndex=0,uploadedIndex=0,storedIndex=0;this.files.forEach(fileObj=>{if(fileObj.status===this.status.DELETED)$hiddenInputs.append(`<input type="hidden" name="${this.name}[deleted][${deletedIndex++}]" value="${fileObj.key}" />`);else if(fileObj.status===this.status.REPLACED){const input=document.createElement("input");input.type="file",input.name=`${this.name}[replaced][${fileObj.key}]`,input.style.display="none";const dt=new DataTransfer;dt.items.add(fileObj.file),input.files=dt.files,$hiddenInputs.append(input)}else if(fileObj.status===this.status.UPLOADED){const input=document.createElement("input");input.type="file",input.name=`${this.name}[uploaded][${uploadedIndex++}]`,input.style.display="none";const dt=new DataTransfer;dt.items.add(fileObj.file),input.files=dt.files,$hiddenInputs.append(input)}else fileObj.status===this.status.STORED&&$hiddenInputs.append(`<input type="hidden" name="${this.name}[stored][${storedIndex++}]" value="${fileObj.key}" />`)})}clearInput(clearFiles=!0){this.$input.val(""),clearFiles&&(this.files=this.files.filter(fileObj=>fileObj.status===this.status.DELETED)),this.updateInputFiles(),this.previewContainer.html(""),this.$input.closest(".x-image-picker-component").find(".image-picker-uploader").show()}getFileSizeMessage($input2){const maxSize=parseInt($input2.data("max-size")),minSize=parseInt($input2.data("min-size")),minText=__("image_picker.minimum"),maxText=__("image_picker.maximum");return maxSize||minSize?__("image_picker.file_size")+(minSize?` ${minText} ${this.formatFileSize(1024*minSize)}`:"")+(maxSize?` ${maxText} ${this.formatFileSize(1024*maxSize)}`:""):""}getFileExtensionMessage($input2){const allowedExtensions=$input2.data("allowed-extensions")?$input2.data("allowed-extensions").toLowerCase():null,disallowedExtensions=$input2.data("disallowed-extensions")?$input2.data("disallowed-extensions").toLowerCase():null,allowedExtensionText=__("image_picker.allowed_extensions"),disallowedExtensionText=__("image_picker.disallowed_extensions");return allowedExtensions&&!disallowedExtensions?`${allowedExtensionText}: ${allowedExtensions}`:disallowedExtensions?`${disallowedExtensionText}: ${disallowedExtensions}`:""}validateFileSize($input2,file){const maxSize=parseInt($input2.data("max-size")),minSize=parseInt($input2.data("min-size")),fileSize=file.size/1024;return!(minSize&&fileSize<minSize||maxSize&&fileSize>maxSize&&!getSuppressLogicMessages($input2))||(showToast("error",__("file_picker_file_size",{name:file.name})),!1)}validateFileExtension($input2,file){const allowedExtensions=$input2.data("allowed-extensions")?$input2.data("allowed-extensions").toLowerCase():null,disallowedExtensions=$input2.data("disallowed-extensions")?$input2.data("disallowed-extensions").toLowerCase():null,fileExtension=file.name.split(".").pop().toLowerCase();return!(allowedExtensions&&!allowedExtensions.includes(fileExtension)||disallowedExtensions&&disallowedExtensions.includes(fileExtension)&&!getSuppressLogicMessages($input2))||(showToast("error",__("file_picker_file_extension",{name:file.name})),!1)}validateFileNameLength($input2,file){const maxLength=parseInt($input2.data("file-name-max-length"));if(!maxLength)return file;const fileName=file.name,extension=fileName.split(".").pop(),nameWithoutExtension=fileName.slice(0,-(extension.length+1));if(fileName.length>maxLength){const newNameWithoutExtension=nameWithoutExtension.substring(0,maxLength-(extension.length+1));return new File([file],`${newNameWithoutExtension}.${extension}`,{type:file.type})}return file}openCropperModal(){this.$input.closest(".x-image-picker-component").find(".cropper-modal-container").modal("show")}closeCropperModal(){this.$input.closest(".x-image-picker-component").find(".cropper-modal-container").modal("hide")}createFilePreview(fileObj,container){const{file:file,id:id}=fileObj,fileReader=new FileReader;fileReader.onload=async e=>{const imgSrc=this.getPreviewImageSrc(file,e),filePreview=await this.getFilePreviewTemplate(fileObj,imgSrc,e);filePreview&&(this.previewContainer.html(filePreview),this.$input.closest(".x-image-picker-component").find(".image-picker-uploader").hide())},fileReader.readAsDataURL(file)}getPreviewImageSrc(file,event){return`<div class="image-preview">\n                    <a href="${event.target.result}" image-picker-fancy-box class="image-preview-link">\n                        <i class="fa-light fa-file-magnifying-glass"></i>\n                    </a>\n                    <img src="${event.target.result}" alt="${file.name}" class="image-preview-image" />\n                </div>`}formatFileSize(sizeInBytes){const sizeInKB=sizeInBytes/1024,KBText=__("image_picker.sizes.kb"),MBText=__("image_picker.sizes.mb");if(sizeInKB<1024)return`${Intl.NumberFormat().format(Math.round(sizeInKB))} ${KBText}`;const sizeInMB=sizeInKB/1024;return`${Intl.NumberFormat().format(sizeInMB.toFixed(2))} ${MBText}`}getFilePreviewTemplate(fileObj,imgSrc,e){const{file:file,id:id,key:key}=fileObj,fileNameParts=file.name.split("."),fileName=fileNameParts.slice(0,-1).join("."),fileExtension=fileNameParts.pop();return new Promise((resolve,reject)=>{this.allowCropper||this.isRecropping?(this.$input.closest(".x-image-picker-component").find(".cropper-modal-container").find("img").attr("src",e.target.result),this.isCropping&&!this.isRecropping||this.openCropperModal(),this.$input.closest(".x-image-picker-component").find(".cropper-modal-container").on("hidden.bs.modal",()=>{this.isCropping=!1,this.isRecropping=!1,this.files.length>0?resolve():reject()})):resolve()}).then(()=>`\n                    <div class="file-preview" data-file-id="${id}" ${key?`data-file-key="${key}"`:""}>\n                        ${this.getPreviewImageSrc(file,e)}\n                        <div class="file-info">\n                            <div class="file-name" data-file-id="${id}" ${key?`data-file-key="${key}"`:""}>\n                                <span class="file-name-text">${fileName}</span><span class="file-extension">.${fileExtension}</span>\n                            </div>\n                            <div class="file-additional-info">\n                                <div class="file-size">${this.formatFileSize(file.size)}</div>\n                                    <div class="file-actions ${this.readonly?"d-none":""}"">\n                                        ${this.allowRecropping?`<button class="file-action file-crop" type="button" data-file-id="${id}" ${key?`data-file-key="${key}"`:""}><i class="fa-regular fa-crop-simple"></i></button>`:""}\n                                        <button class="file-action file-replace" type="button" data-file-id="${id}" ${key?`data-file-key="${key}"`:""}><i class="fa-regular ${doravel.config.image_picker.edit_icon}"></i></button>\n                                        <button class="file-action file-remove ${this.clearable?"":"d-none"}" type="button" data-file-id="${id}" ${key?`data-file-key="${key}"`:""}><i class="fa-regular fa-trash-can"></i></button>\n                                    </div>\n                            </div>\n                        </div>\n                    </div>\n                `).catch(()=>"")}setValue(value){if(!value)return;const requiredKeys=["src","name","key"];for(const key2 of requiredKeys)if(!value[key2]||""===value[key2])return void devConsoleLog({message:`The required value for key "${key2}" is missing or empty in the provided object.`,type:"error"});const{src:src="",key:key="",name:name="",extension:extension="",size:size="",clearable:clearable}=value,id=generateUUID();let formattedSize="";size&&(formattedSize=this.formatFileSize(size));const isClearable=void 0!==clearable?clearable:this.clearable,template=`\n            <div\n                class="file-preview"\n                data-file-id="${id}"\n                data-file-key="${key}"\n            >\n                <div class="image-preview">\n                    <a\n                        image-picker-fancy-box\n                        href="${src}"\n                        class="image-preview-link"\n                    >\n                        <i class="fa-light fa-file-magnifying-glass"></i>\n                    </a>\n                    <img\n                        src="${src}"\n                        alt=""\n                    >\n                </div>\n                <div class="file-info">\n                    <div\n                        class="file-name"\n                        data-file-id="${id}"\n                        data-file-key="${key}"\n                    >\n                        <span class="file-name-text">${name}</span>\n                        <span class="file-extension">${extension}</span>\n                    </div>\n                    <div class="file-additional-info">\n                        <div class="file-size">\n                            ${formattedSize}\n                        </div>\n                        \n                            <div class="file-actions ${this.readonly?"d-none":""}">\n                                <button\n                                    class="file-action file-replace"\n                                    type="button"\n                                    data-file-id="${id}"\n                                    data-file-key="${key}"\n                                >\n                                    <i class="fa-regular ${doravel.config.image_picker.edit_icon}"></i>\n                                </button>\n                               <button\n                                    class="file-action file-remove ${isClearable?"":"d-none"}"\n                                    type="button"\n                                    data-file-id="${id}"\n                                    data-file-key="${key}"\n                                >\n                                    <i class="fa-regular fa-trash-can"></i>\n                                </button>\n                            </div>\n                           \n                    </div>\n                </div>\n            </div>\n        `;this.previewContainer&&this.previewContainer.length&&(this.previewContainer.html(template),this.$input.closest(".x-image-picker-component").find(".image-picker-uploader").hide()),this.files=[{id:id,key:key,status:this.status.STORED}],this.updateInputFiles()}};window.ImagePickerBaseController=ImagePickerBaseController,doravel.ready(context=>{Fancybox.bind("[image-picker-fancy-box]",{l10n:Fancybox.l10n.fa,Toolbar:{display:{left:[],middle:["zoomIn","zoomOut","reset"],right:["close"]}},Images:{Panzoom:{maxScale:1.5}}})});class ImagePickerController extends ImagePickerBaseController{constructor(input){super(input)}}function initializeImagePicker(selector){const instance=new ImagePickerController(selector);$(selector).data("instance",instance)}window.initializeImagePicker=initializeImagePicker,doravel.ready(context=>{$(".x-image-picker-component .file-picker",context).each((index,input)=>{initializeImagePicker(input)})});let IconPickerBaseController=class IconPickerBaseController2 extends BaseInputController{constructor(input){super(),this.$input=$(input),this.$container=this.$input.closest(".x-icon-picker-component"),this.$scrollArea=this.$container.find(".icon-picker-items"),this.$searchInput=this.$container.find(".search-container input"),this.$preview=this.$container.find(".icon-picker-preview"),this.searchValue=void 0,this.currentPageForApi=1,this.totalPages=1,this.icons=[],this.allRenderedIconRows=[],this.iconsPerRow=7,this.debounceTimer=null,this.isLoading=!1,this.dropdownInstance=bootstrap.Dropdown.getInstance(this.$input),this.clusterize=null,this.displayInitialMessage(this.$input),this.init()}init(){this.initClusterize(),this.setupEvents()}initClusterize(){const uniqueIdSuffix=this.$input.attr("id"),scrollAreaId="scrollArea"+uniqueIdSuffix,contentAreaId="contentArea"+uniqueIdSuffix;this.clusterize=new Clusterize({rows:[],scrollId:scrollAreaId,contentId:contentAreaId,tag:"div",rows_in_block:10,no_data_text:"      ."})}setupEvents(){this.$input.on("focus",event=>{this.$input.blur()}),this.$input.on("shown.bs.dropdown",async event=>{this.$searchInput.focus()}),this.$input.on("show.bs.dropdown",async event=>{const isNewSearch=this.searchValue!==this.$searchInput.val();(0===this.clusterize.getRowsAmount()||isNewSearch)&&(this.searchValue=this.$searchInput.val(),this.currentPageForApi=1,await this.loadIcons(this.searchValue,this.currentPageForApi,!0))}),this.$searchInput.on("input",event=>{this.debounce(event)}),this.$scrollArea.on("scroll",()=>{this.handleInfiniteScroll()}),this.$scrollArea.on("click",".icon-picker-item",event=>{this.handleSelect(event)}),this.$container.on("click",".icon-picker-clear-icon",event=>{this.handleClear()})}handleSelect(event){const iconClass=$(event.target).attr("class").replace("icon-picker-item","").trim();this.$preview.html(`<i class="${iconClass}"></i>`),this.$input.val(iconClass),this.$input.trigger("change"),bootstrap.Dropdown.getInstance(this.$input).hide()}handleSearch(event){this.searchValue=$(event.target).val(),this.currentPageForApi=1,this.loadIcons(this.searchValue,this.currentPageForApi,!0)}handleClear(){this.$preview.empty(),this.$input.val(""),this.$searchInput.val(""),this.searchValue=void 0,this.currentPageForApi=1,this.$input.trigger("change"),this.loadIcons(this.searchValue,this.currentPageForApi,!0)}handleInfiniteScroll(){if(this.isLoading||this.currentPageForApi>this.totalPages)return;this.$scrollArea.scrollTop()+this.$scrollArea.height()>=this.$scrollArea[0].scrollHeight-100&&this.loadIcons(this.searchValue,this.currentPageForApi,!1)}toggleLoading(loading=!0){this.isLoading=loading,this.$container.find(".loading-container").toggleClass("loading-element",loading),this.$container.find(".x-loading-spinner").toggleClass("d-none",!loading)}loadIcons(search,pageToFetch,clear=!1){return this.toggleLoading(!0),clear&&(this.allRenderedIconRows=[],this.clusterize.update([]),this.totalPages=1,this.icons=[]),$.ajax({url:doravel.config.icon_picker.route,method:"GET",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{search:search,page:pageToFetch},success:res=>{if(1===res.code){const newlyFetchedIcons=[...res.data];this.totalPages=res.meta.pagination.pageCount;const newIconElements=[];newlyFetchedIcons.forEach(icon=>{icon.styles.forEach(style=>{const iconHtml=`<span class="icon-picker-item fa-${style} fa-${icon.icon_name}"></span>`;newIconElements.push(iconHtml)})}),this.updateRowsWithNewIcons(newIconElements,clear),this.renderIcons(),pageToFetch<this.totalPages?this.currentPageForApi=pageToFetch+1:this.currentPageForApi=this.totalPages+1}else showToast("error",res.message??"      ");this.toggleLoading(!1)},error:xhr=>{showToast("error","      "),this.toggleLoading(!1)}})}updateRowsWithNewIcons(newIconElements,clear=!1){clear&&(this.allRenderedIconRows=[]);let pendingIcons=[];if(!clear&&this.allRenderedIconRows.length>0){const lastRow=this.allRenderedIconRows[this.allRenderedIconRows.length-1];if((lastRow.match(/<span class="icon-picker-item/g)||[]).length<this.iconsPerRow){this.allRenderedIconRows.pop();const tempDiv=document.createElement("div");tempDiv.innerHTML=lastRow;tempDiv.querySelectorAll(".icon-picker-item").forEach(icon=>{pendingIcons.push(icon.outerHTML)})}}const allIcons=[...pendingIcons,...newIconElements];for(let i=0;i<allIcons.length;i+=this.iconsPerRow){const rowHtml=`<div class="icon-row">${allIcons.slice(i,i+this.iconsPerRow).join("")}</div>`;this.allRenderedIconRows.push(rowHtml)}}renderIcons(){this.clusterize.update(this.allRenderedIconRows)}debounce(event){clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{this.handleSearch(event)},1e3)}};window.IconPickerBaseController=IconPickerBaseController;class IconPickerController extends IconPickerBaseController{constructor(input){super(input)}}function initializeIconPicker(selector){const instance=new IconPickerController(selector);$(selector).data("instance",instance)}window.initializeIconPicker=initializeIconPicker,doravel.ready(context=>{$(".x-icon-picker-component .icon-picker-input",context).each((index,input)=>{initializeIconPicker(input)})});let FilePickerBaseController=class FilePickerBaseController2 extends BaseInputController{constructor(input){super(input),this.files=[],this.fileToReplace={},this.$input=$(input),this.$hiddenInput=this.$input.closest(".x-file-picker-component").find(".file-picker-exists-hidden"),this.name=this.$input.attr("name").replace("[]",""),this.clearable=this.$input.attr("data-clearable"),this.readonly=this.$input.data("readonly"),this.multiple=!!this.$input.attr("multiple"),this.previewContainer=this.$input.closest(".x-file-picker-component").find(".files-preview"),this.displayInitialMessage(this.$input),this.suppressLogicMessages=this.$input.data("suppress-logic-messages"),this.fileNameMaxLength=this.$input.data("file-name-max-length"),this.showPreviewPopup=this.$input.data("show-preview-popup"),this.showPreviewThumbnail=this.$input.data("show-preview-thumbnail"),this.value=this.$input.data("initial-value")?[this.$input.data("initial-value")].flat():[],this.status=Object.freeze({DELETED:"deleted",REPLACED:"replaced",UPLOADED:"uploaded",STORED:"stored"}),this.setupEvents(this.$input),this.addInitialValues()}addInitialValues(){this.files=this.value.map(file=>({key:file.key,id:file.id,status:this.status.STORED})),this.updateInputFiles()}resetValue(clear=!0){if(this.$input.closest(".x-file-picker-component").find(".file-remove").trigger("click"),!clear){this.files=this.value.map(file=>({key:file.key,id:file.id,status:this.status.STORED})),this.fileToReplace={};let preview="";const videoExtensions=["mp4","webm","ogg","avi","mov","wmv","flv","mkv","m4v","3gp","mpg","mpeg","ogv","ts","mts","m2ts"],imageExtensions=["jpg","jpeg","png","gif","bmp","webp","tiff","ico","heic","heif","avif"];this.value.forEach(item=>{const extension=(item.extension||"").toLowerCase(),isImage=imageExtensions.includes(extension),isVideo=videoExtensions.includes(extension);preview+=`\n                <div\n                    class="file-preview"\n                    data-file-id="${item.id}"\n                    data-file-key="${item.key}"\n                >\n                    ${isImage||isVideo?`\n                        <div class="file-preview-popup-container">\n                            ${this.showPreviewPopup?`\n                            <a\n                                file-picker-fancy-box\n                                ${isVideo?"file-picker-video-thumbnail":""}\n                                href="${item.url}"\n                                class="file-preview-link"\n                            >\n                                <i class="fa-light fa-file-magnifying-glass"></i>\n                            </a>\n                            `:""}\n                                    ${isImage?`\n                            <img\n                                src="${item.url}"\n                                alt="${item.url}"\n                            >\n                            `:""}\n                        </div>\n                        `:`\n                        <div class="file-extension-placeholder">\n                            <span>${item.extension}</span>\n                        </div>\n                        `}\n    \n                    <div class="file-info">\n                        <div class="file-name" data-file-id="${item.id}" data-file-key="${item.key}">\n                            <span class="file-name-text">${item.name}</span><span class="file-extension">.${item.extension}</span>\n                        </div>\n                        <div class="file-additional-info">\n                            <div class="file-size">${this.formatFileSize(item.size)}</div>\n                               <div class="file-actions ${this.readonly?"d-none":""}"">\n                                <button class="file-action file-replace" type="button" data-file-id="${item.id}" data-file-key="${item.key}">\n                <i class="fa-regular ${doravel.config.file_picker.edit_icon}"></i></button>\n    <button class="file-action file-remove ${this.clearable?"":"d-none"}" type="button" data-file-id="${item.id}"\n                    data-file-key="${item.key}"\n                ><i class="fa-regular fa-trash-can"></i></button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                </div>\n                `,this.previewContainer&&this.previewContainer.length&&(this.previewContainer.html(preview),this.multiple||this.$input.closest(".x-file-picker-component").find(".file-picker-uploader").hide()),$(".x-file-picker-component [file-picker-video-thumbnail]").each((index,item2)=>{const thumbnailSrc=$(item2).attr("href");getVideoThumbnail(thumbnailSrc).then(thumbnail=>{$(item2).closest(".file-preview-popup-container").css({"background-image":`url(${thumbnail})`})})})}),this.updateInputFiles()}}setupEvents($input2){const fileInputUploaderElement=this.$input.closest(".x-file-picker-component").find(".file-picker-uploader");$input2.on("change",event=>{this.handleFileSelection(event)}),$input2.on("focusin.validate focusout.validate",event=>{event.preventDefault(),event.stopPropagation(),event.stopImmediatePropagation()});const componentContainer=this.$input.closest(".x-file-picker-component");componentContainer.on("click",".file-remove",event=>this.handleFileRemove(event)),componentContainer.on("click",".file-replace",event=>this.handleFileReplace(event)),componentContainer.on("dblclick",".file-name",event=>{this.$input.data("allow-rename")&&this.handleFileRename(event)}),fileInputUploaderElement.on("click",event=>{this.fileToReplace={}}),fileInputUploaderElement.on("drop",event=>this.handleDragAndDrop(event)),fileInputUploaderElement.on("drag dragstart dragend dragover dragenter dragleave drop",function(e){e.preventDefault(),e.stopPropagation()}),fileInputUploaderElement.on("dragover dragenter",function(){$(this).addClass("is-dragover")}),fileInputUploaderElement.on("dragleave dragend drop",function(){$(this).removeClass("is-dragover")})}handleDragAndDrop(event){if(event.preventDefault(),event.stopPropagation(),this.readonly)return;const files=event.originalEvent.dataTransfer.files;if(!this.validateFileSelection(this.$input,this.files.length+files.length))return;let allValid=!0;Array.from(files).map(file=>({file:this.validateFileNameLength(this.$input,file),id:generateUUID(),status:this.status.UPLOADED})).forEach(fileObj=>{this.validateFileExtension(this.$input,fileObj.file)&&this.validateFileSize(this.$input,fileObj.file)?(this.files.push(fileObj),this.createFilePreview(fileObj)):allValid=!1}),clearComponentMessage(this.$input,!1),this.updateInputFiles()}handleFileSelection(event){if(this.readonly)return;console.log(event),clearComponentMessage(this.$input,!0);const files=event.target.files;let allValid=!0;if(0===Object.keys(this.fileToReplace).length){if(!this.validateFileSelection(this.$input,this.files.filter(item=>item.status===this.status.UPLOADED).length+files.length))return;Array.from(files).map(file=>({file:this.validateFileNameLength(this.$input,file),id:generateUUID(),status:this.status.UPLOADED})).forEach(fileObj=>{this.validateFileExtension(this.$input,fileObj.file)&&this.validateFileSize(this.$input,fileObj.file)?(this.files.push(fileObj),this.createFilePreview(fileObj)):allValid=!1})}else{const fileReplaceSelection=Array.from(files);if(fileReplaceSelection.length>1)return showToast("error",__("file_picker_replace_file")),this.updateInputFiles(),!1;if(!this.validateFileSelection(this.$input,this.files.filter(item=>item.status!==this.status.DELETED).length+files.length-1))return;fileReplaceSelection.map(file=>({file:this.validateFileNameLength(this.$input,file),id:generateUUID(),key:this.fileToReplace.key,status:this.fileToReplace.key?this.status.REPLACED:this.status.UPLOADED})).forEach(fileObj=>{this.validateFileExtension(this.$input,fileObj.file)&&this.validateFileSize(this.$input,fileObj.file)?(this.files=this.files.filter(fileObj2=>fileObj2.id!==this.fileToReplace.id),this.previewContainer.find(`.file-preview[data-file-id="${this.fileToReplace.id}"]`).remove(),this.files.unshift(fileObj),this.createFilePreview(fileObj)):(console.log(this.fileToReplace,this.files),allValid=!1)}),this.fileToReplace={}}allValid&&clearComponentMessage(this.$input,!1),this.updateInputFiles()}handleFileRemove(event){const fileId=$(event.currentTarget).data("file-id"),fileKey=$(event.currentTarget).data("file-key");fileKey?(this.files=this.files.filter(fileObj=>fileObj.key!==fileKey),this.files.push({status:this.status.DELETED,key:fileKey,id:fileId})):this.files=this.files.filter(fileObj=>fileObj.id!==fileId),this.updateInputFiles(),this.previewContainer.find(`.file-preview[data-file-id="${fileId}"]`).remove(),this.multiple||this.$input.closest(".x-file-picker-component").find(".file-picker-uploader").show(),this.files.length<parseInt(this.$input.data("min-selection-allowed"))&&!this.suppressLogicMessages&&showComponentMessage({type:"error",targetElement:$input,message:__("file_picker_min_selection_allowed",{count:minSelection}),title:__("error")})}handleFileReplace(event){this.fileToReplace={id:$(event.currentTarget).data("file-id"),key:$(event.currentTarget).data("file-key")},this.$input.trigger("click")}handleFileRename(event){const fileId=$(event.currentTarget).data("file-id"),$fileNameElement=$(event.currentTarget),currentName=$fileNameElement.text().replace(/\s+/g," ").trim(),currentExtension=currentName.split(".").pop(),currentNameWithoutExtension=currentName.slice(0,-currentExtension.length-1),$input2=$('<input type="text" class="rename-input">').val(currentNameWithoutExtension);$input2.attr("maxlength",this.fileNameMaxLength-(currentExtension.length+1)),$fileNameElement.replaceWith($input2),$input2.focus(),$input2.on("blur keydown",e=>{if("blur"===e.type||"Enter"===e.key){const newNameWithoutExtension=$input2.val().trim(),newName=`${newNameWithoutExtension}.${currentExtension}`,fileIndex=this.files.findIndex(fileObj=>fileObj.id===fileId);-1!==fileIndex&&newNameWithoutExtension?(this.files[fileIndex].file=new File([this.files[fileIndex].file],newName,{type:this.files[fileIndex].file.type}),$input2.replaceWith(`\n                            <div class="file-name" data-file-id="${fileId}">\n                                <span class="file-name-text">${newNameWithoutExtension}</span>\n                                <span class="file-extension">.${currentExtension}</span>\n                            </div>\n                        `)):$input2.replaceWith(`\n                            <div class="file-name" data-file-id="${fileId}">\n                                <span class="file-name-text">${currentNameWithoutExtension}</span>\n                                <span class="file-extension">.${currentExtension}</span>\n                            </div>\n                        `),this.updateInputFiles()}})}updateInputFiles(){if(!this.multiple&&2===this.files.length){let deletedFile,uploadedFile;for(const file of this.files)file.status===this.status.DELETED?deletedFile=file:file.status===this.status.UPLOADED&&(uploadedFile=file);if(deletedFile&&uploadedFile){const mergedFile={key:deletedFile.key,id:deletedFile.id,file:uploadedFile.file,status:this.status.REPLACED};this.files=[mergedFile]}}const dataTransfer=new DataTransfer;this.files.forEach(fileObj=>{fileObj.status!==this.status.DELETED&&fileObj.status!==this.status.STORED&&dataTransfer.items.add(fileObj.file)}),this.$input[0].files=dataTransfer.files;const $hiddenInputs=this.$input.closest(".x-file-picker-component").find(".file-picker-hidden-inputs");$hiddenInputs.empty();let deletedIndex=0,uploadedIndex=0,storedIndex=0;this.files.forEach(fileObj=>{if(fileObj.status===this.status.DELETED)$hiddenInputs.append(`<input type="hidden" name="${this.name}[deleted][${deletedIndex++}]" value="${fileObj.key}" />`);else if(fileObj.status===this.status.REPLACED){const input=document.createElement("input");input.type="file",input.name=`${this.name}[replaced][${fileObj.key}]`,input.style.display="none";const dt=new DataTransfer;dt.items.add(fileObj.file),input.files=dt.files,$hiddenInputs.append(input)}else if(fileObj.status===this.status.UPLOADED){const input=document.createElement("input");input.type="file",input.name=`${this.name}[uploaded][${uploadedIndex++}]`,input.style.display="none";const dt=new DataTransfer;dt.items.add(fileObj.file),input.files=dt.files,$hiddenInputs.append(input)}else fileObj.status===this.status.STORED&&$hiddenInputs.append(`<input type="hidden" name="${this.name}[stored][${storedIndex++}]" value="${fileObj.key}" />`)})}getFileSizeMessage($input2){const maxSize=parseInt($input2.data("max-size")),minSize=parseInt($input2.data("min-size")),minText=__("file_picker.minimum"),maxText=__("file_picker.maximum");return maxSize||minSize?__("file_picker.file_size")+(minSize?` ${minText} ${this.formatFileSize(1024*minSize)}`:"")+(maxSize?` ${maxText} ${this.formatFileSize(1024*maxSize)}`:""):""}getFileExtensionMessage($input2){const allowedExtensions=$input2.data("allowed-extensions")?$input2.data("allowed-extensions").toLowerCase():null,disallowedExtensions=$input2.data("disallowed-extensions")?$input2.data("disallowed-extensions").toLowerCase():null,allowedExtensionText=__("file_picker.allowed_extensions"),disallowedExtensionText=__("file_picker.disallowed_extensions");return allowedExtensions&&!disallowedExtensions?`${allowedExtensionText}: ${allowedExtensions}`:disallowedExtensions?`${disallowedExtensionText}: ${disallowedExtensions}`:""}validateFileNameLength($input2,file){const maxLength=parseInt($input2.data("file-name-max-length"));if(!maxLength)return file;const fileName=file.name,extension=fileName.split(".").pop(),nameWithoutExtension=fileName.slice(0,-(extension.length+1));if(fileName.length>maxLength){const newNameWithoutExtension=nameWithoutExtension.substring(0,maxLength-(extension.length+1));return new File([file],`${newNameWithoutExtension}.${extension}`,{type:file.type})}return file}validateFileSize($input2,file){const maxSize=parseInt($input2.data("max-size")),minSize=parseInt($input2.data("min-size")),fileSize=file.size/1024;return!(minSize&&fileSize<minSize||maxSize&&fileSize>maxSize&&!getSuppressLogicMessages($input2))||(showToast("error",__("file_picker_file_size",{name:file.name})),!1)}validateFileExtension($input2,file){const allowedExtensions=$input2.data("allowed-extensions")?$input2.data("allowed-extensions").toLowerCase():null,disallowedExtensions=$input2.data("disallowed-extensions")?$input2.data("disallowed-extensions").toLowerCase():null,fileExtension=file.name.split(".").pop().toLowerCase();return!(allowedExtensions&&!allowedExtensions.includes(fileExtension)||disallowedExtensions&&disallowedExtensions.includes(fileExtension)&&!getSuppressLogicMessages($input2))||(showToast("error",__("file_picker_file_extension",{name:file.name})),!1)}validateFileSelection($input2,selectedCount){const minSelection2=parseInt($input2.data("min-selection-allowed")),maxSelection=parseInt($input2.data("max-selection-allowed"));return minSelection2&&selectedCount<minSelection2&&!getSuppressLogicMessages($input2)?(showToast("error",__("file_picker_min_selection_allowed",{count:minSelection2})),!1):!(maxSelection&&selectedCount>maxSelection&&!getSuppressLogicMessages($input2))||(showToast("error",__("file_picker_max_selection_allowed",{count:maxSelection})),!1)}createFilePreview(fileObj,container){const{file:file,id:id}=fileObj;if(file.type.startsWith("video/"))return void getVideoThumbnail(file).then(thumbnail=>{const filePreview=this.getFilePreviewTemplate(fileObj,thumbnail);this.previewContainer.append(filePreview),this.multiple||this.$input.closest(".x-file-picker-component").find(".file-picker-uploader").hide()});const fileReader=new FileReader;fileReader.onload=e=>{const imgSrc=this.getPreviewImageSrc(file,e),filePreview=this.getFilePreviewTemplate(fileObj,imgSrc,e);this.previewContainer.append(filePreview),this.multiple||this.$input.closest(".x-file-picker-component").find(".file-picker-uploader").hide()},fileReader.readAsDataURL(file)}getPreviewImageSrc(file,event,source){const fileExtension=file.name.split(".").pop().toLowerCase(),isImage=["jpg","jpeg","png","gif","bmp","webp","tiff","ico","heic","heif","avif"].includes(fileExtension),isVideo=["mp4","webm","ogg","avi","mov","wmv","flv","mkv","m4v","3gp","mpg","mpeg","ogv","ts","mts","m2ts"].includes(fileExtension);if(isImage)return`\n            <div class="file-preview-popup-container">\n                ${this.showPreviewPopup?`\n                                                                <a\n                                                                    file-picker-fancy-box\n                                                                    href="${event.target.result}"\n                                                                    class="file-preview-link"\n                                                                >\n                                                                    <i class="fa-light fa-file-magnifying-glass"></i>\n                                                                </a>\n                                                                `:""}\n                <img\n                    src="${event.target.result}"\n                    alt=""\n                >\n            </div>`;if(source&&isVideo){const video=URL.createObjectURL(file),id=generateUUID();return`\n            <div class="file-preview-popup-container">\n                ${this.showPreviewPopup?`\n                                                                <a\n                                                                    data-fancybox\n                                                                    data-src="#video-${id}"\n                                                                    href="${video}"\n                                                                    class="file-preview-link"\n                                                                >\n                                                                    <i class="fa-light fa-file-magnifying-glass"></i>\n                                                                </a>\n                                                                `:""}\n                <div id="video-${id}" style="display: none;">\n                    <video class="f-html5video" controls autoplay playsinline>\n                        <source src="${video}" type="${file.type}">\n                    </video>\n                </div>\n                <img\n                    src="${source}"\n                    alt=""\n                >\n            </div>`}return`\n                    <div class="file-extension-placeholder">\n                        <span>${fileExtension.toUpperCase()}</span>\n                    </div>\n                `}formatFileSize(sizeInBytes){const sizeInKB=sizeInBytes/1024,KBText=__("file_picker.sizes.kb"),MBText=__("file_picker.sizes.mb");if(sizeInKB<1024)return`${Intl.NumberFormat().format(Math.round(sizeInKB))} ${KBText}`;const sizeInMB=sizeInKB/1024;return`${Intl.NumberFormat().format(sizeInMB.toFixed(2))} ${MBText}`}getFilePreviewTemplate(fileObj,imgSrc,e){const{file:file,id:id,key:key}=fileObj,fileNameParts=file.name.split("."),fileName=fileNameParts.slice(0,-1).join("."),fileExtension=fileNameParts.pop();return`\n            <div class="file-preview" data-file-id="${id}" ${key?`data-file-key="${key}"`:""}>\n                ${this.getPreviewImageSrc(file,e,imgSrc)}\n                <div class="file-info">\n                    <div class="file-name" data-file-id="${id}" ${key?`data-file-key="${key}"`:""}>\n                        <span class="file-name-text">${fileName}</span><span class="file-extension">.${fileExtension}</span>\n                    </div>\n                    <div class="file-additional-info">\n                        <div class="file-size">${this.formatFileSize(file.size)}</div>\n                           <div class="file-actions ${this.readonly?"d-none":""}"">\n                            <button class="file-action file-replace" type="button" data-file-id="${id}" ${key?`data-file-key="${key}"`:""} ><i class="fa-regular ${doravel.config.file_picker.edit_icon}"></i></button>\n<button class="file-action file-remove ${this.clearable?"":"d-none"}" type="button" data-file-id="${id}"  ${key?`data-file-key="${key}"`:""}><i class="fa-regular fa-trash-can"></i></button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `}setValue(value){if(!value)return;const files=Array.isArray(value)?value:[value],videoExtensions=["mp4","webm","ogg","avi","mov","wmv","flv","mkv","m4v","3gp","mpg","mpeg","ogv","ts","mts","m2ts"],imageExtensions=["jpg","jpeg","png","gif","bmp","webp","tiff","ico","heic","heif","avif"];let preview="";this.value=files.map(file=>({id:generateUUID(),extension:file.extension||(file.name.split(".").pop()||"").toLowerCase(),key:file.key,name:file.name,url:file.src,size:file.size})),this.files=files.map(file=>({id:generateUUID(),key:file.key,status:this.status.STORED})),this.value.forEach(item=>{const clearable=void 0!==item.clearable?item.clearable:this.clearable,extension=(item.extension||"").toLowerCase(),isImage=imageExtensions.includes(extension),isVideo=videoExtensions.includes(extension);preview+=`\n            <div\n                class="file-preview"\n                data-file-id="${item.id}"\n                data-file-key="${item.key}"\n            >\n                ${isImage||isVideo?`\n                    <div class="file-preview-popup-container">\n                        ${this.showPreviewPopup?`\n                        <a\n                            file-picker-fancy-box\n                            ${isVideo?"file-picker-video-thumbnail":""}\n                            href="${item.url}"\n                            class="file-preview-link"\n                        >\n                            <i class="fa-light fa-file-magnifying-glass"></i>\n                        </a>\n                        `:""}\n                                ${isImage?`\n                        <img\n                            src="${item.url}"\n                            alt="${item.url}"\n                        >\n                        `:""}\n                    </div>\n                    `:`\n                    <div class="file-extension-placeholder">\n                        <span>${item.extension}</span>\n                    </div>\n                    `}\n\n                <div class="file-info">\n                    <div class="file-name" data-file-id="${item.id}" data-file-key="${item.key}">\n                        <span class="file-name-text">${item.name}</span><span class="file-extension">.${item.extension}</span>\n                    </div>\n                    <div class="file-additional-info">\n                        <div class="file-size">${this.formatFileSize(item.size)}</div>\n                           <div class="file-actions ${this.readonly?"d-none":""}"">\n                            <button class="file-action file-replace" type="button" data-file-id="${item.id}" data-file-key="${item.key}">\n            <i class="fa-regular ${doravel.config.file_picker.edit_icon}"></i></button>\n<button class="file-action file-remove ${clearable?"":"d-none"}" type="button" data-file-id="${item.id}"\n                data-file-key="${item.key}"\n            ><i class="fa-regular fa-trash-can"></i></button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            </div>\n            `}),this.previewContainer&&this.previewContainer.length&&(this.previewContainer.html(preview),this.multiple||this.$input.closest(".x-file-picker-component").find(".file-picker-uploader").hide()),$(".x-file-picker-component [file-picker-video-thumbnail]").each((index,item)=>{const thumbnailSrc=$(item).attr("href");getVideoThumbnail(thumbnailSrc).then(thumbnail=>{$(item).closest(".file-preview-popup-container").css({"background-image":`url(${thumbnail})`})})}),this.updateInputFiles()}};window.FilePickerBaseController=FilePickerBaseController,doravel.ready(context=>{Fancybox.bind("[file-picker-fancy-box]",{l10n:Fancybox.l10n.fa,Toolbar:{display:{left:[],middle:["zoomIn","zoomOut","reset"],right:["close"]}},Images:{Panzoom:{maxScale:1.5}}}),Fancybox.bind("[data-fancybox]",{})});class FilePickerController extends FilePickerBaseController{constructor(input){super(input)}}function initializeFilePicker(selector){const instance=new FilePickerController(selector);$(selector).data("instance",instance),$(".x-file-picker-component [file-picker-video-thumbnail]").each((index,item)=>{const thumbnailSrc=$(item).attr("href");getVideoThumbnail(thumbnailSrc).then(thumbnail=>{$(item).closest(".file-preview-popup-container").css({"background-image":`url(${thumbnail})`})})})}window.initializeFilePicker=initializeFilePicker,doravel.ready(context=>{$(".x-file-picker-component .file-picker",context).each((index,input)=>{initializeFilePicker(input)})});let EmailInputBaseController=class EmailInputBaseController2 extends BaseInputController{constructor(input){super(),this.$input=$(input),this.suppressLogicMessages=this.$input.data("suppress-logic-messages"),this.setupEvents(this.$input),this.handleSuffix(this.$input),this.handlePrefix(this.$input),this.handleSuggestion(this.$input),this.handleInitialAutoFocus(this.$input),this.handleTrim(this.$input),this.displayInitialMessage(this.$input)}setupEvents($input2){$input2.on("blur",()=>{this.validateInput($input2)})}validateInput($input2){const maxLength=$input2.data("max-length"),minLength=$input2.data("min-length"),required=$input2.data("required");void 0===$input2.data("trim")||$input2.data("trim");let isValid=!0;const value=$input2.val().trim();required&&!value||!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(value)&&value&&(getSuppressLogicMessages($input2)||showComponentMessage({type:"error",targetElement:$input2,message:__("email"),title:__("error")}),isValid=!1),void 0!==minLength&&value.length<minLength&&(getSuppressLogicMessages($input2)||showComponentMessage({type:"error",targetElement:$input2,message:__("min",{min:minLength}),title:__("error")}),isValid=!!this.suppressLogicMessages),void 0!==maxLength&&value.length>maxLength&&(getSuppressLogicMessages($input2)||showComponentMessage({type:"error",targetElement:$input2,message:__("max",{max:maxLength}),title:__("error")}),isValid=!!this.suppressLogicMessages),this.handleTrim($input2),!isValid||hasFormComponentMessage($input2.parents("form"),"error",!0)||hasComponentMessage($input2.parents("form"),"error",!0)||clearComponentMessage($input2,!0),isValid&&clearComponentMessage($input2,!1)}handleSuggestion($input2){const suggestions=$input2.attr("data-suggestion")?JSON.parse($input2.attr("data-suggestion")):void 0,datalist=$(`#${$input2.attr("list")}`);datalist.empty(),suggestions&&suggestions.forEach((item,index)=>{datalist.append(`<option value='${item}'>${item}</option>`)})}handleTrim($input2){$input2.val($input2.val().trim().replace(/\s+/g,""))}handleInitialAutoFocus($input2){!0===$input2.data("auto-focus")&&$input2.focus()}};window.EmailInputBaseController=EmailInputBaseController;class EmailInputController extends EmailInputBaseController{constructor(input){super(input)}}function initializeEmailInput(selector){const instance=new EmailInputController(selector);$(selector).data("instance",instance)}window.initializeEmailInput=initializeEmailInput,doravel.ready(context=>{$(".x-email-input-component .email-input",context).each((index,input)=>{new EmailInputController(input)})});let ColorInputBaseController=class ColorInputBaseController2 extends BaseInputController{constructor(input){super(),this.$input=$(input),this.setupEvents(this.$input),this.handleSuffix(this.$input),this.handlePrefix(this.$input),this.handleInitialAutoFocus(this.$input),this.displayInitialMessage(this.$input),$(this.$input).attr("readonly")&&this.handleReadonly(this.$input),this.suppressLogicMessages=this.$input.data("suppress-logic-messages")}setupEvents($input2){$input2.on("blur",()=>{this.validateInput($input2)}),$input2.on("focus",e=>{$input2.trigger("blur")})}validateInput($input2){hasFormComponentMessage($input2.parents("form"),"error",!0)||hasComponentMessage($input2.parents("form"),"error",!0)||clearComponentMessage($input2,!0),clearComponentMessage($input2,!1)}handleInitialAutoFocus($input2){!0===$input2.data("auto-focus")&&$input2.focus()}handleReadonly($input2){$input2.attr("readonly")&&$input2.addClass("palette-readonly")}};window.ColorInputBaseController=ColorInputBaseController;class ColorInputController extends ColorInputBaseController{constructor(input){super(input)}}function initializeColorInput(selector){const instance=new ColorInputController(selector);$(selector).data("instance",instance);const $input2=$(selector);Coloris.setInstance(`#${$input2.attr("id")}`,{swatchesOnly:$input2.data("only-presets"),swatches:$input2.data("preset-colors")?JSON.parse($input2.attr("data-preset-colors")):[getComputedStyle(document.documentElement).getPropertyValue("--bs-primary").trim(),getComputedStyle(document.documentElement).getPropertyValue("--bs-secondary").trim(),getComputedStyle(document.documentElement).getPropertyValue("--bs-success").trim(),getComputedStyle(document.documentElement).getPropertyValue("--bs-warning").trim(),getComputedStyle(document.documentElement).getPropertyValue("--bs-danger").trim(),getComputedStyle(document.documentElement).getPropertyValue("--bs-info").trim(),getComputedStyle(document.documentElement).getPropertyValue("--x-info-2").trim(),getComputedStyle(document.documentElement).getPropertyValue("--bs-dark").trim(),getComputedStyle(document.documentElement).getPropertyValue("--bs-light").trim()]})}window.initializeColorInput=initializeColorInput,doravel.ready(context=>{$(".x-color-input-component .color-input",context).each((index,input)=>{initializeColorInput(input)})});let EditorBaseController=class EditorBaseController2 extends BaseInputController{constructor(input,type,mode){super(),this.$input=$(input),this.id=this.$input.attr("id"),this.type=type,this.$input.each((index,item)=>{this.displayInitialMessage($(item)),this.suppressLogicMessages=$(item).data("suppress-logic-messages")}),this.config=$(input).data("config")??{},this.toolbar=$(input).data("toolbar")??[],this.setupEvents(this.$input)}setupEvents(){if("ckeditor"===this.type){const{ClassicEditor:ClassicEditor,Alignment:Alignment,Autoformat:Autoformat,AutoImage:AutoImage,AutoLink:AutoLink,Autosave:Autosave,BlockQuote:BlockQuote,Bold:Bold,Bookmark:Bookmark,Code:Code,CodeBlock:CodeBlock,Essentials:Essentials,FindAndReplace:FindAndReplace,FontBackgroundColor:FontBackgroundColor,FontColor:FontColor,FontFamily:FontFamily,FontSize:FontSize,FullPage:FullPage,GeneralHtmlSupport:GeneralHtmlSupport,Heading:Heading,Highlight:Highlight,HorizontalLine:HorizontalLine,HtmlComment:HtmlComment,HtmlEmbed:HtmlEmbed,ImageBlock:ImageBlock,ImageCaption:ImageCaption,ImageInline:ImageInline,ImageInsert:ImageInsert,ImageInsertViaUrl:ImageInsertViaUrl,ImageResize:ImageResize,ImageStyle:ImageStyle,ImageTextAlternative:ImageTextAlternative,ImageToolbar:ImageToolbar,ImageUpload:ImageUpload,Indent:Indent,IndentBlock:IndentBlock,Italic:Italic,Link:Link,LinkImage:LinkImage,List:List,ListProperties:ListProperties,Markdown:Markdown,MediaEmbed:MediaEmbed,PageBreak:PageBreak,Paragraph:Paragraph,PasteFromMarkdownExperimental:PasteFromMarkdownExperimental,PasteFromOffice:PasteFromOffice,RemoveFormat:RemoveFormat,ShowBlocks:ShowBlocks,SimpleUploadAdapter:SimpleUploadAdapter,SourceEditing:SourceEditing,SpecialCharacters:SpecialCharacters,SpecialCharactersArrows:SpecialCharactersArrows,SpecialCharactersCurrency:SpecialCharactersCurrency,SpecialCharactersEssentials:SpecialCharactersEssentials,SpecialCharactersLatin:SpecialCharactersLatin,SpecialCharactersMathematical:SpecialCharactersMathematical,SpecialCharactersText:SpecialCharactersText,Strikethrough:Strikethrough,Style:Style,Subscript:Subscript,Superscript:Superscript,Table:Table,TableCaption:TableCaption,TableCellProperties:TableCellProperties,TableColumnResize:TableColumnResize,TableProperties:TableProperties,TableToolbar:TableToolbar,TextPartLanguage:TextPartLanguage,TextTransformation:TextTransformation,TodoList:TodoList,Underline:Underline,WordCount:WordCount}=window.CKEDITOR;window.ckeditorInstances={};const simpleConfig={licenseKey:"GPL",language:"fa",plugins:[Alignment,Autoformat,AutoImage,AutoLink,Autosave,BlockQuote,Bold,Bookmark,Code,CodeBlock,Essentials,FindAndReplace,FontBackgroundColor,FontColor,FontFamily,FontSize,FullPage,GeneralHtmlSupport,Heading,Highlight,HorizontalLine,HtmlComment,HtmlEmbed,ImageBlock,ImageCaption,ImageInline,ImageInsert,ImageInsertViaUrl,ImageResize,ImageStyle,ImageTextAlternative,ImageToolbar,ImageUpload,Indent,IndentBlock,Italic,Link,LinkImage,List,ListProperties,Markdown,MediaEmbed,PageBreak,Paragraph,PasteFromMarkdownExperimental,PasteFromOffice,RemoveFormat,ShowBlocks,SimpleUploadAdapter,SourceEditing,SpecialCharacters,SpecialCharactersArrows,SpecialCharactersCurrency,SpecialCharactersEssentials,SpecialCharactersLatin,SpecialCharactersMathematical,SpecialCharactersText,Strikethrough,Style,Subscript,Superscript,Table,TableCaption,TableCellProperties,TableColumnResize,TableProperties,TableToolbar,TextPartLanguage,TextTransformation,TodoList,Underline,WordCount],toolbar:{items:this.toolbar.length?this.toolbar:["sourceEditing","heading","fontSize","bold","italic","underline","strikethrough","link","insertImage","alignment","bulletedList","numberedList"]},heading:{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h1",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h2",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h3",title:"Heading 3",class:"ck-heading_heading3"},{model:"heading4",view:"h4",title:"Heading 4",class:"ck-heading_heading4"},{model:"heading5",view:"h5",title:"Heading 5",class:"ck-heading_heading5"},{model:"heading6",view:"h6",title:"Heading 6",class:"ck-heading_heading6"}]},fontSize:{options:[8,9,10,11,12,13,14,16,18,20,22,24,28,32,36,40,48,56,64,72,80,88,96],supportAllValues:!0},...this.config},fullConfig={...simpleConfig,toolbar:{items:this.toolbar.length?this.toolbar:["sourceEditing","showBlocks","findAndReplace","|","heading","style","|","fontSize","fontFamily","fontColor","fontBackgroundColor","|","bold","italic","underline","strikethrough","subscript","superscript","code","removeFormat","|","specialCharacters","horizontalLine","pageBreak","link","bookmark","insertImage","mediaEmbed","insertTable","highlight","blockQuote","codeBlock","htmlEmbed","|","alignment","|","bulletedList","numberedList","todoList","outdent","indent"],shouldNotGroupWhenFull:!0}};this.$input.each((index,item)=>{const config="simple"===$(item).data("mode")?simpleConfig:fullConfig,maxLength=$(item).data("max-length");ClassicEditor.create(item,{...config,wordCount:{maxCharCount:10,onUpdate:stats=>{$(item).closest(".x-editor-component").find(".max-length-counter #charCount").text(maxLength?Math.min(maxLength,stats.characters):stats.characters)}}}).then(editor=>{editor.model.document.on("change:data",()=>{const charCount=editor.plugins.get("WordCount").characters;maxLength&&charCount>maxLength&&editor.execute("delete")}),$(editor.sourceElement).data("initial-value",editor.getData()),editor.model.document.on("change:data",()=>{const charCount=editor.plugins.get("WordCount").characters,$editorElement=$(editor.sourceElement);let editorData=editor.getData();0===charCount&&(editorData=""),$editorElement.val(editorData).trigger("change")}),editor.editing.view.document.on("keydown",(event,data)=>{const charCount=editor.plugins.get("WordCount").characters;maxLength&&charCount>=maxLength&&13===data.keyCode&&data.preventDefault()}),$("[data-cke-tooltip-text]").each((index2,item2)=>{$(item2).tooltip({trigger:"hover",title:$(item2).attr("data-cke-tooltip-text")}),$(item2).removeAttr("data-cke-tooltip-text")}),$(".ck-dropdown__button").on("click",function(){$("[data-cke-tooltip-text]").each((index2,item2)=>{$(item2).removeAttr("data-cke-tooltip-text")})}),window.ckeditorInstances[$(item).attr("id")]=editor,$(item).data("disabled")&&editor.enableReadOnlyMode("ckeditor")}).catch(error=>{console.error(error)})})}else"tinymce"===this.type&&($(".tinymce[data-mode='full']").length&&tinymce.init({selector:".tinymce[data-mode='full']",language:"fa",resize:!1,statusbar:!1,min_height:500,plugins:"autoresize preview wordcount importcss searchreplace autolink autosave save directionality code visualblocks visualchars fullscreen image link media codesample table charmap pagebreak nonbreaking anchor insertdatetime advlist lists charmap emoticons accordion",menubar:!1,toolbar_mode:"wrap",toolbar:this.toolbar.length?this.toolbar.join(" "):"undo redo accordion accordionremove blocks fontsize bold italic underline strikethrough align numlist bullist link image table media lineheight outdent indent forecolor backcolor removeformat charmap emoticons code fullscreen preview save print pagebreak anchor codesample ltr rtl",font_size_formats:"8px 9px 10px 11px 12px 13px 14px 16px 18px 20px 22px 24px 28px 32px 36px 40px 48px 56px 64px 72px 80px 88px 96px",content_css:doravel.config.editor.content_css,content_style:"body { padding: 8px !important; }",init_instance_callback:editor=>{$(editor.editorContainer).find("[aria-label]").each((index,item)=>{$(item).tooltip({trigger:"hover",title:$(item).attr("aria-label")})}),$(editor.targetElm).data("initial-value",editor.getContent()),$(editor.targetElm).data("disabled")&&(editor.readonly=!0),$(editor.targetElm).data("auto-resize")||editor.options.set("max_height",500);const maxLength=$(editor.targetElm).data("max-length"),wordcount=tinymce.activeEditor.plugins.wordcount,updateCharCount=()=>{const updatedWordCount=wordcount.body.getCharacterCount();$(editor.editorContainer).closest(".x-editor-component").find(".max-length-counter #charCount").text(updatedWordCount)};updateCharCount(),editor.on("input",()=>{editor.undoManager.transact(()=>{const charCount=wordcount.body.getCharacterCount();maxLength&&charCount>maxLength&&editor.undoManager.undo()}),updateCharCount()}),editor.on("change",function(){const $editorElement=$(editor.getElement());let editorData=editor.getContent();0===wordcount.body.getCharacterCount()&&(editorData=""),$editorElement.val(editorData).trigger("change")})},...this.config}),$(".tinymce[data-mode='simple']").length&&tinymce.init({selector:".tinymce[data-mode='simple']",language:"fa",resize:!1,statusbar:!1,min_height:500,toolbar:this.toolbar.length?this.toolbar.join(" "):"code blocks fontsize bold italic underline strikethrough link image align numlist bullist",plugins:"autoresize preview wordcount importcss searchreplace autolink autosave save directionality code visualblocks visualchars fullscreen image link media codesample table charmap pagebreak nonbreaking anchor insertdatetime advlist lists charmap quickbars emoticons accordion",menubar:!1,font_size_formats:"8px 9px 10px 11px 12px 13px 14px 16px 18px 20px 22px 24px 28px 32px 36px 40px 48px 56px 64px 72px 80px 88px 96px",content_css:doravel.config.editor.content_css,content_style:"body { padding: 8px !important; }",init_instance_callback:editor=>{$(editor.editorContainer).find("[aria-label]").each((index,item)=>{$(item).tooltip({trigger:"hover",title:$(item).attr("aria-label")})}),$(editor.targetElm).data("initial-value",editor.getContent()),$(editor.targetElm).data("disabled")&&(editor.readonly=!0),$(editor.targetElm).data("auto-resize")&&editor.options.set("max_height",500);const maxLength=$(editor.targetElm).data("max-length"),wordcount=tinymce.activeEditor.plugins.wordcount,updateCharCount=()=>{const updatedWordCount=wordcount.body.getCharacterCount();$(editor.editorContainer).closest(".x-editor-component").find(".max-length-counter #charCount").text(updatedWordCount)};updateCharCount(),editor.on("input",()=>{editor.undoManager.transact(()=>{const charCount=wordcount.body.getCharacterCount();maxLength&&charCount>maxLength&&editor.undoManager.undo()}),updateCharCount()}),editor.on("change",function(){const $editorElement=$(editor.getElement());let editorData=editor.getContent();0===wordcount.body.getCharacterCount()&&(editorData=""),$editorElement.val(editorData).trigger("change")})},...this.config}))}resetValue(clear=!0){const initialData=this.$input.data("initial-value");"ckeditor"===this.type?window.ckeditorInstances[this.id].setData(clear?"":initialData):"tinymce"===this.type&&(tinymce.get(this.id).setContent(clear?"":initialData),setTimeout(()=>{const wordcount=tinymce.get(this.id).plugins.wordcount;if(wordcount){const charCount=wordcount.body.getCharacterCount();this.$input.closest(".x-editor-component").find(".max-length-counter #charCount").text(charCount)}},300))}};window.EditorBaseController=EditorBaseController,doravel.ready(context=>{$.fn.getVal=function(){const elementId=this.attr("id");return this.hasClass("ckeditor")?window.ckeditorInstances[elementId].getData():this.hasClass("tinymce")?tinymce.get(elementId).getContent():this.val()}});class EditorController extends EditorBaseController{constructor(input,type){super(input,type)}}function initializeEditor(selector,type){$(".max-length-counter").removeClass("d-none").addClass("d-block");const instance=new EditorController(selector,type);$(selector).data("instance",instance)}window.initializeEditor=initializeEditor,doravel.ready(context=>{$(".x-editor-component .editor-component.ckeditor",context).each((index,item)=>{initializeEditor($(item),"ckeditor")}),$(".x-editor-component .editor-component.tinymce",context).each((index,item)=>{initializeEditor($(item),"tinymce")})});let CheckBoxGroupBaseController=class CheckBoxGroupBaseController2 extends BaseInputController{constructor(input){super(),this.$input=$(input),this.setupEvents(this.$input),this.displayInitialMessage(this.$input.closest(".checkbox-component-wrapper"));const readOnly=this.$input.data("readonly");this.suppressLogicMessages=this.$input.closest(".checkbox-component-wrapper").data("suppress-logic-messages"),readOnly&&this.$input.click(()=>!1)}setupEvents($input2){$input2.on("blur",()=>{this.validateInput($input2)})}validateInput($input2){hasFormComponentMessage($input2.parents("form"),"error",!0)||hasComponentMessage($input2.parents("form"),"error",!0)||clearComponentMessage($input2,!0),clearComponentMessage($input2,!1)}};window.CheckBoxGroupBaseController=CheckBoxGroupBaseController;class CheckBoxGroupController extends CheckBoxGroupBaseController{constructor(input){super(input)}}function initializeCheckBoxGroup(selector){const instance=new CheckBoxGroupController(selector);$(selector).data("instance",instance)}window.initializeCheckBoxGroup=initializeCheckBoxGroup,doravel.ready(context=>{$(".x-checkbox-group-component .form-check-input",context).each((index,input)=>{initializeCheckBoxGroup(input)})});let CheckBoxBaseController=class CheckBoxBaseController2 extends BaseInputController{constructor(input){super(),this.$input=$(input),this.setupEvents(this.$input),this.displayInitialMessage(this.$input.closest(".checkbox-component-wrapper"));const readOnly=this.$input.data("readonly");this.suppressLogicMessages=this.$input.closest(".checkbox-component-wrapper").data("suppress-logic-messages"),readOnly&&this.$input.click(()=>!1)}setupEvents($input2){$input2.on("blur",()=>{this.validateInput($input2)})}validateInput($input2){hasFormComponentMessage($input2.parents("form"),"error",!0)||hasComponentMessage($input2.parents("form"),"error",!0)||clearComponentMessage($input2,!0),clearComponentMessage($input2,!1)}};window.CheckBoxBaseController=CheckBoxBaseController;class CheckBoxController extends CheckBoxBaseController{constructor(input){super(input)}}function initializeCheckBox(selector){const instance=new CheckBoxController(selector);$(selector).data("instance",instance)}window.initializeCheckBox=initializeCheckBox,doravel.ready(context=>{$(".x-checkbox-component .form-check-input",context).each((index,input)=>{initializeCheckBox(input)})});let ItemCollectorBaseController=class ItemCollectorBaseController2{constructor(element){this.$element=$(element),this.name=this.$element.data("name"),this.input=this.$element.find(".item-collector-input"),this.max=this.$element.data("max-items"),this.clearable=this.$element.data("clearable"),this.editable=this.$element.data("editable"),this.orientation=this.$element.data("orientation"),this.title=this.$element.data("items-title"),this.values=this.$element.data("values")??[],this.results=this.$element.next(),this.inputsContainer=this.$element.find(".item-collector-inputs-container"),this.actionsContainer=this.$element.find(".item-collector-actions"),this.addButton=this.$element.find(".item-collector-add-btn button"),this.editButton=this.$element.find(".item-collector-edit-btn button"),this.cancelButton=this.$element.find(".item-collector-cancel-btn button"),this.suppressLogicMessages=this.$element.data("suppress-logic-messages"),this.formData=[],this.editingIndex=-1,this.formUtils=handleFormAction(),this.setupEvents(),this.renderInitialValues()}setupEvents(){this.addButton.on("click",async()=>{if(this.checkRequiredFields()||!this.checkDuplicateValues())return;await this.checkElementsValidation()&&((!this.max||this.max&&this.formData.length<this.max)&&(this.formData.push(this.collectFormData()),this.renderAllItems(),this.setHiddenInputValue(),this.formUtils.processForm(this.$element.find(".item-collector-grid"),!0)),this.toggleButtonAvailability())}),this.cancelButton.on("click",()=>{this.exitEditMode()}),this.editButton.on("click",async()=>{if(this.checkRequiredFields()||!this.checkDuplicateValues())return;await this.checkElementsValidation()&&(this.formData[this.editingIndex]=this.collectFormData(),this.exitEditMode())}),this.results.on("click",".item-collector-item-remove-btn",e=>{const $item=$(e.currentTarget).closest(".x-item-collector-item"),idx=$item.data("index"),tooltipInstance=bootstrap.Tooltip.getInstance($item[0]);if(tooltipInstance&&(tooltipInstance.dispose(),$item.removeAttr("data-bs-toggle data-bs-placement title")),this.editingIndex===idx?this.exitEditMode():this.editingIndex>idx&&this.editingIndex--,this.max&&this.formData.length===this.max){this.addButton.prop("disabled",!1);const $container=this.addButton.parent(),tooltipInstance2=bootstrap.Tooltip.getInstance($container[0]);tooltipInstance2&&tooltipInstance2.dispose(),$container.removeAttr("data-bs-toggle").removeAttr("data-bs-placement").removeAttr("title")}this.formData.splice(idx,1),this.renderAllItems(),this.setHiddenInputValue()}),this.results.on("click",".item-collector-item-edit-btn",e=>{const idx=$(e.currentTarget).closest(".x-item-collector-item").data("index");this.enterEditMode(idx)})}toggleButtonAvailability(){this.max&&this.formData.length===this.max&&(this.addButton.prop("disabled",!0),this.addButton.parent().attr("data-bs-toggle","tooltip").attr("data-bs-placement","top").attr("title",__("tag_collector_max_count",{count:this.max})),new bootstrap.Tooltip(this.addButton.parent()[0]))}renderInitialValues(){this.formData=[...this.values],this.renderAllItems(),this.toggleButtonAvailability()}enterEditMode(index){this.editingIndex>=0&&this.exitEditMode(),this.editingIndex=index;const item=this.formData[index.toString()];Object.entries(item).forEach(([name,data])=>{clearComponentMessage($(`[name="${name}"]`));const value=Array.isArray(data.value)?data.value.map(v=>v.value):data.value;$(`[name="${name}"]`).setValue(value)}),$("html, body").animate({scrollTop:$(this.$element).offset().top-100},300),this.updateEditModeUI(),this.renderAllItems()}exitEditMode(){this.editingIndex=-1,this.formUtils.processForm(this.$element.find(".item-collector-grid"),!0),this.updateEditModeUI(),this.renderAllItems(),this.setHiddenInputValue()}updateEditModeUI(){this.actionsContainer.toggleClass("editing",this.editingIndex>=0)}checkRequiredFields(){const formElements=this.$element.find("input, select, textarea").filter(function(){return 0===$(this).closest(".item-collector-inputs-container").length});let hasEmptyRequiredField=!1,areAllFieldsEmpty=!0;return formElements.each((index,element)=>{const $el=$(element),name=$el.hasClass("number-input")?$el.attr("data-name"):$el.attr("name");if(!name||name===this.name)return;const value=$el.val(),requiredLabel=$el.closest(".x-form-component").find("label.required");(!Array.isArray(value)&&""!==value||Array.isArray(value)&&value.length>0)&&(areAllFieldsEmpty=!1),requiredLabel.length&&(""===value||Array.isArray(value)&&0===value.length)&&(hasEmptyRequiredField=!0,getSuppressLogicMessages($el)||this.suppressLogicMessages||showComponentMessage({type:"error",targetElement:$el.closest(".x-form-component"),message:requiredLabel.text()?__("required_label",{label:requiredLabel.text()}):__("required")}))}),hasEmptyRequiredField||areAllFieldsEmpty}checkDuplicateValues(){let hasDuplicates=!1;return this.$element.find("input, select, textarea").filter(function(){return 0===$(this).closest(".item-collector-inputs-container").length}).each((index,element)=>{const $el=$(element),name=$el.hasClass("number-input")?$el.attr("data-name"):$el.attr("name");$el.attr("data-prevent-duplicates")&&this.formData.some(data=>{if(void 0===data[name]||!Array.isArray(data[name].value)&&""===data[name].value||Array.isArray(data[name].value)&&0===data[name].value.length)return!1;const value=Array.isArray(data[name].value)?data[name].value.map(item=>item.value):data[name].value,currentValue="select"!==element.tagName.toLowerCase()||element.multiple?$el.val():[$el.val()];return!!(Array.isArray(value)&&Array.isArray(currentValue)&&JSON.stringify(value)===JSON.stringify(currentValue)||!Array.isArray(value)&&!Array.isArray(currentValue)&&value===currentValue)})&&(hasDuplicates=!0,getSuppressLogicMessages($el)||this.suppressLogicMessages||showComponentMessage({type:"error",targetElement:$el.closest(".x-form-component"),message:__("duplicate_tag")}))}),!hasDuplicates}async checkElementsValidation(){const formElements=this.$element.find("input, select, textarea").filter(function(){return 0===$(this).closest(".item-collector-inputs-container").length}),validator=this.$element.closest("form").validate();return!validator||(formElements.each((index,element)=>{const $el=$(element),name=$el.hasClass("number-input")?$el.attr("data-name"):$el.attr("name");name&&name!==this.name&&($el.attr("force-validate","true"),validator.check($el),$el.removeAttr("force-validate"))}),new Promise(resolve=>{const poll=()=>{if(0===window.remoteRequestsCount){const isValid=!hasFormComponentError(this.$element.find(".item-collector-grid"));resolve(isValid)}else setTimeout(poll,200)};poll()}))}collectFormData(){const formData={};return this.$element.find("input, select, textarea").filter(function(){return 0===$(this).closest(".item-collector-inputs-container").length}).each((index,element)=>{const $el=$(element),name=$el.hasClass("number-input")?$el.attr("data-name"):$el.attr("name");if(!name||name===this.name)return;const inputLabel=this.getInputLabel($el);if("select"===element.tagName.toLowerCase())if(element.multiple){const selectedOptions=[];$el.find("option:selected").each((i,option)=>{selectedOptions.push({label:$.trim(option.text),value:option.value})}),formData[name]={text:inputLabel,value:selectedOptions}}else{const selectedOptions=[],selectedOption=$el.find("option:selected");selectedOption.length>0&&""!==selectedOption.val()&&selectedOptions.push({label:$.trim(selectedOption.text()),value:selectedOption.val()}),formData[name]={text:inputLabel,value:selectedOptions}}else switch(element.type){case"checkbox":formData[name]={text:inputLabel,value:$el.is(":checked")};break;case"radio":$el.is(":checked")&&(formData[name]={text:inputLabel,value:$el.val()});break;case"file":formData[name]={text:inputLabel,value:element.files?Array.from(element.files):null};break;default:formData[name]={text:inputLabel,value:$.trim($el.formattedVal()??$el.val())}}}),formData}setHiddenInputValue(triggerChange=!0){if(this.formData.length?this.input.val(["1"]):this.input.val([]),triggerChange){clearComponentMessage(this.input);const validator=this.input.closest("form").data("validator");validator&&validator.resetInternals(),this.input.trigger("change")}}renderHiddenInputs(){this.inputsContainer.empty(),this.formData.forEach((item,index)=>{for(const[name,info]of Object.entries(item)){const isArray=Array.isArray(info.value),baseName=name.endsWith("[]")?name.slice(0,-2):name,fieldName=isArray?`${this.name}[${index}][${baseName}][]`:`${this.name}[${index}][${baseName}]`;if(isArray)(info.value??[]).forEach(v=>{const input=$("<input>").attr("type","text").attr("name",fieldName).val(void 0!==v.value?v.value:void 0!==v.label?v.label:v);this.inputsContainer.append($("<div>").addClass("x-form-component").append(input).append('<div class="x-component-message"></div>'))});else{const input=$("<input>").attr("type","text").attr("name",fieldName).val(info.value??"");this.inputsContainer.append($("<div>").addClass("x-form-component").append(input).append('<div class="x-component-message"></div>'))}}})}renderAllItems(){this.results.empty(),this.formData.forEach((item,index)=>{const isEditing=this.editingIndex===index,fields=Object.entries(item).map(([_,info])=>{const value=Array.isArray(info.value)?info.value.map(v=>v.label??v).join(" - "):info.value;return`\n                    <div class="item-collector-item">\n                        <div class="item-collector-item-label">${info.text}:</div>\n                        <div class="item-collector-item-value">${value||"-"}</div>\n                    </div>\n                `}).join(""),editingClass=isEditing?" editing":"",editButtonState=isEditing?"disabled":"";this.results.append(`\n                <div class="col">\n                    <div class="x-item-collector-item${editingClass}" data-index="${index}">\n                        <div class="item-collector-item-info" data-orientation="${this.orientation}">\n                            ${this.title?`<div class="item-collector-item-title">${this.title} ${index+1}</div>`:""} \n                            <div class="item-collector-item-grid">${fields}</div>\n                        </div>\n                        <div class="item-collector-item-actions">\n                            ${this.editable?`<button class="x-component x-component-button btn btn-none-info btn-xs rounded item-collector-item-edit-btn" type="button" ${editButtonState}>\n                                            <span class="x-component-button-icon far fa-pen-to-square"></span>\n                                        </button>`:""}\n                            ${this.clearable?'<button class="x-component x-component-button btn btn-none-danger btn-xs rounded item-collector-item-remove-btn" type="button">\n                                        <span class="x-component-button-icon far fa-trash-alt"></span>\n                                    </button>':""}\n                        </div>\n                    </div>\n                </div>\n            `)}),this.results.find(".x-item-collector-item.editing").attr({"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"     ."}).each(function(){new bootstrap.Tooltip(this)}),this.renderHiddenInputs()}getInputLabel($element){let label="";const elementId=$element.attr("id");if(elementId){const $associatedLabel=$(`label[for="${elementId}"]`);$associatedLabel.length>0&&(label=$.trim($associatedLabel.text()))}return label}setValues(values){this.values=[...values],this.formData=[...values],this.renderAllItems(),this.setHiddenInputValue(),this.toggleButtonAvailability()}resetValues(clear=!0){this.formData=clear?[]:[...this.values],this.renderAllItems(),this.setHiddenInputValue(!1),this.toggleButtonAvailability()}};window.ItemCollectorBaseController=ItemCollectorBaseController;class ItemCollectorController extends ItemCollectorBaseController{constructor(element){super(element)}}function initializeItemCollector(selector){const instance=new ItemCollectorController(selector);$(selector).data("instance",instance)}window.initializeItemCollector=initializeItemCollector,doravel.ready(context=>{$(".x-item-collector-component",context).each((index,element)=>{initializeItemCollector(element)})});let ButtonBaseController=class ButtonBaseController2{constructor(element){this.element=$(element),this.container=this.element.closest(".x-component-button-container"),this.disabled="true"===this.container.attr("data-disabled")||"1"===this.container.attr("data-disabled"),this.tooltip=this.container.attr("data-tooltip"),this.variant=this.container.attr("data-variant"),this.disabledVariant=this.container.attr("data-disabled-variant"),this.disabledTooltip=this.container.attr("data-disabled-tooltip"),this.init()}init(){this.hasConfirmation()&&this.element.on("click",this.handleButtonClick.bind(this)),this.handleInitialState()}handleInitialState(){this.container.tooltip&&(this.container.tooltip("dispose"),this.container.removeAttr("data-bs-toggle"),this.container.removeAttr("data-bs-title")),(this.tooltip||this.disabledTooltip&&this.disabled)&&this.container.attr("data-bs-toggle","tooltip"),this.disabled?(this.element.prop("disabled",!0),this.element.addClass("disabled"),this.disabledTooltip?this.container.attr("data-bs-title",this.disabledTooltip):this.tooltip&&this.container.attr("data-bs-title",this.tooltip),this.disabledVariant&&this.element.removeClass(this.variant).addClass(this.disabledVariant)):(this.element.prop("disabled",!1),this.element.removeClass("disabled"),this.tooltip&&this.container.attr("data-bs-title",this.tooltip),this.element.removeClass(this.disabledVariant).addClass(this.variant)),$('[data-bs-toggle="tooltip"]').tooltip({trigger:"hover",html:!0})}handleButtonClick(e){const $link=this.element.is("a")?this.element:this.element.find("a"),modalClass=this.element.attr("data-bs-target").slice(1);if(!this.disabled&&$link.length&&$link.attr("href")){e.preventDefault();const href=$link.attr("href"),method=($link.attr("method")||"get").toLowerCase();setTimeout(()=>{$(`.${modalClass} .btn-confirm-modal`).off("click").on("click",function(){if(href.startsWith("#")&&$(href).length&&$(href).hasClass("x-modal-component")){const $modal=$(href),modalInstance=bootstrap.Modal.getOrCreateInstance($modal);setTimeout(()=>{modalInstance.show()},0)}else if("get"===method)window.location.href=href;else{const $form=$("<form>",{action:href,method:"post",style:"display: none"});"get"!==method&&$form.append($("<input>",{type:"hidden",name:"_method",value:method})),$form.append($("<input>",{type:"hidden",name:"_token",value:$('meta[name="csrf-token"]').attr("content")})),$("body").append($form),$form.submit(),$form.remove()}})},100)}}hasConfirmation(){if(!this.element.attr("data-bs-target"))return!1;const modalClass=this.element.attr("data-bs-target").slice(1);return"confirmation-modal"===this.element.attr("data-bs-toggle")&&void 0!==modalClass}};window.ButtonBaseController=ButtonBaseController;class ButtonController extends ButtonBaseController{constructor(input){super(input)}}function initializeButton(selector){const instance=new ButtonController(selector);$(selector).data("instance",instance)}function showConfirmationModal(triggerElement){const modalId=$(triggerElement).attr("data-bs-target"),config=$(modalId),isClosable=config.data("closable"),isCloseButtonVisible=config.data("close-button-visibility"),type=config.data("type"),icon=config.data("icon"),message=config.data("message"),confirmButtonText=config.data("confirm-button-text"),cancelButtonText=config.data("cancel-button-text"),confirmButtonClass=config.data("confirm-button-class")||`btn-${type}`,cancelButtonClass=config.data("cancel-button-class")||"btn-secondary",footerClass=config.data("footer-class"),containerClass=config.data("container-class"),confirmCallback=config.data("confirm-callback");Swal.fire({html:`\n            <div class="icon-container mb-4 text-bg-light-${type}">\n                <i class="${icon} fs-30 text-${type}"></i>\n            </div>\n            <h3>${message}</h3>\n            <hr class="border-gray-400 mt-14">\n        `,width:500,allowOutsideClick:isClosable,allowEscapeKey:isClosable,showCloseButton:isCloseButtonVisible&&isClosable,closeButtonHtml:'<span class="fa-solid fa-xmark fs-3"></span>',showConfirmButton:!0,confirmButtonText:confirmButtonText,keydownListenerCapture:!0,showCancelButton:isClosable,cancelButtonText:cancelButtonText,reverseButtons:!0,customClass:{container:`x-modal-confirmation ${modalId.slice(1)} ${containerClass}`,confirmButton:`btn btn-confirm-modal ${confirmButtonClass}`,cancelButton:`btn btn-cancel-modal ${cancelButtonClass}`,actions:footerClass},returnFocus:!1}).then(result=>{if(result.isConfirmed&&confirmCallback)try{new Function(confirmCallback)()}catch(error){console.error("Error executing confirmation callback:",error)}})}function initDataCardFancyBox(){Fancybox.bind("[image-card-fancy-box]",{l10n:Fancybox.l10n.fa,Toolbar:{display:{left:[],middle:["zoomIn","zoomOut","reset"],right:["close"]}},Images:{Panzoom:{maxScale:1.5}}})}function updateGridBorders(){$(".x-data-display").each(function(){const $grid=$(this),$items=$grid.find(".x-data-item");if($items.removeClass("border-0 shadow-none"),!$grid.is(":visible"))return;$items.filter(function(){return $(this).position().top===$items.first().position().top}).addClass("border-0 shadow-none"),$grid.find(".data-item-line-top").remove();$items.filter(function(){return $(this).position().top===$items.last().position().top}).addClass("border-0"),$grid.find(".data-item-line-bottom").remove()})}window.initializeButton=initializeButton,doravel.ready(context=>{$(".x-component-button",context).each((index,input)=>{initializeButton(input)})}),$(document).on("click","[data-bs-toggle='confirmation-modal'][data-bs-target]",e=>{$(e.currentTarget).find("button:disabled").length>0||$(e.currentTarget).is("[type='submit']")||showConfirmationModal(e.currentTarget)}),doravel.ready(()=>{initDataCardFancyBox(),$(".x-data-card-component").each((index,item)=>{const previewContainer=$(item).find(".data-card-preview-container");if(!previewContainer.length)return;const thumbnailSrc=previewContainer.attr("data-preview-src");thumbnailSrc&&(toggleLoading(previewContainer,!0),getVideoThumbnail(thumbnailSrc).then(thumbnail=>{previewContainer.css({"background-image":`url(${thumbnail})`})}).catch(e=>{console.log(e);const icon=previewContainer.find(".data-card-preview-icon");icon&&(icon.removeAttr("href").removeAttr("image-card-fancy-box"),icon.find("i").removeClass().addClass("fa-light fa-video-slash")),toggleLoading(previewContainer,!1)}).finally(()=>{toggleLoading(previewContainer,!1)}))})}),doravel.ready(()=>{updateGridBorders(),$(document).on("shown.bs.tab shown.bs.collapse",function(){updateGridBorders()})}),$(window).resize(updateGridBorders);let DropdownItemBaseController=class DropdownItemBaseController2{static eventsInitialized=!1;constructor(element){this.element=$(element),this.item=this.element.find(".dropdown-menu-item"),this.disabled="true"===this.element.attr("data-disabled")||"1"===this.element.attr("data-disabled"),this.tooltip=this.element.attr("data-tooltip"),this.disabledTooltip=this.element.attr("data-disabled-tooltip"),this.init(),DropdownItemBaseController2.initGlobalEvents()}init(){this.handleInitialState()}handleInitialState(){this.element.tooltip&&(this.element.tooltip("dispose"),this.element.removeAttr("data-bs-toggle data-bs-title")),(this.tooltip||this.disabledTooltip&&this.disabled)&&this.element.attr("data-bs-toggle","tooltip"),this.disabled?(this.item.addClass("disabled"),this.element.attr("data-bs-title",this.disabledTooltip||this.tooltip||"")):(this.item.removeClass("disabled"),this.tooltip&&this.element.attr("data-bs-title",this.tooltip)),$('[data-bs-toggle="tooltip"]').tooltip({trigger:"hover",html:!0})}static initGlobalEvents(){DropdownItemBaseController2.eventsInitialized||(DropdownItemBaseController2.eventsInitialized=!0,doravel.ready(()=>{const activePageCount=$(".x-dropdown-button-component .btn-outline-light span").eq(1).text();$(".x-dropdown-item-component span.dropdown-menu-item").each((_,el)=>{const $span=$(el),matches=$span.text().match(/\d+/);matches&&matches[0]==activePageCount&&$span.addClass("active-page-count")})}),$(document).on("click",".x-dropdown-item-component .dropdown-menu-item[href][method]:not([data-bs-toggle='confirmation-modal']):not([download]):not(.disabled):not(.x-table-bulk-operation-button-item)",function(e){const href=$(this).attr("href"),method=$(this).attr("method").toLowerCase();if(!method||"get"===method)return;e.preventDefault();const $form=$("<form>",{action:href,method:"get"===method?"get":"post",style:"display: none"});$form.append($("<input>",{type:"hidden",name:"_method",value:method})),$form.append($("<input>",{type:"hidden",name:"_token",value:$('meta[name="csrf-token"]').attr("content")})),$("body").append($form),$form.submit().remove()}),$(document).on("click",".x-dropdown-item-component .dropdown-menu-item[href][method][data-bs-toggle='confirmation-modal']:not(.disabled)",function(e){const element=$(this);if("confirmation-modal"===element.attr("data-bs-toggle")&&void 0!==element.attr("data-bs-target")){const confirmationModalClass=element.attr("data-bs-target").slice(1),href=$(this).attr("href"),method=$(this).attr("method").toLowerCase();setTimeout(()=>{$(`.${confirmationModalClass} .btn-confirm-modal`).one("click",function(){if(href.startsWith("#")&&$(href).length&&$(href).hasClass("x-modal-component")){e.preventDefault();const $modal=$(href);bootstrap.Modal.getOrCreateInstance($modal).show()}else{const $form=$("<form>",{action:href,method:"get"===method?"get":"post",style:"display: none"});"get"!==method&&($form.append($("<input>",{type:"hidden",name:"_method",value:method})),$form.append($("<input>",{type:"hidden",name:"_token",value:$('meta[name="csrf-token"]').attr("content")}))),$("body").append($form),$form.submit().remove()}})},100)}}))}};window.DropdownItemBaseController=DropdownItemBaseController;class DropdownItemController extends DropdownItemBaseController{constructor(input){super(input)}}function initializeDropdownItem(selector){const instance=new DropdownItemController(selector);$(selector).data("instance",instance)}function initImageFancyBox(){Fancybox.bind("[image-card-fancy-box]",{l10n:Fancybox.l10n.fa,Toolbar:{display:{left:[],middle:["zoomIn","zoomOut","reset"],right:["close"]}},Images:{Panzoom:{maxScale:1.5}}})}window.initializeDropdownItem=initializeDropdownItem,doravel.ready(context=>{$(".x-dropdown-item-component",context).each((index,input)=>{initializeDropdownItem(input)})}),doravel.ready(()=>{initImageFancyBox()}),doravel.ready(()=>{$(".x-minimal-tab-component").each(function(){const $tabPanel=$(this),$navTabs=$tabPanel.find(".nav-tabs"),$tabItems=$tabPanel.find(".tab-content .x-minimal-tab-item-component"),$skeletonLoader=$tabPanel.find(".skeleton-loader");$($navTabs).empty(),$tabItems.each(function(){const $tabItem=$(this),tabId=$tabItem.attr("id"),tabBadge=$tabItem.data("badge"),tabTitle=$tabItem.find(".x-minimal-tab-item-title").text().trim(),isActive=$tabItem.hasClass("active"),$navLink=$("<button>",{class:"nav-link "+(isActive?"active":""),"data-bs-toggle":"tab","data-bs-target":`#${tabId}`,type:"button",text:tabTitle});tabBadge&&$navLink.append(`<span class="badge badge-sm badge-light-secondary rounded-pill">${tabBadge}</span>`),$("<li>",{class:"nav-item"}).append($navLink).appendTo($navTabs);const observer=new MutationObserver(mutationsList=>{for(const mutation of mutationsList)if("attributes"===mutation.type){$(mutation.target).closest(".x-minimal-tab-item-component").find('.x-component-message[data-message-type="error"]:not(:empty):not(.display-none)').length>0?$navLink.addClass("nav-link-error"):$navLink.removeClass("nav-link-error")}});$tabItem.find(".x-component-message").each(function(){observer.observe(this,{attributes:!0})})}),$skeletonLoader.remove()})});const modalFormUtils=handleFormAction();$(".modal").on("show.bs.modal",function(e){const form=$(this).find("form");e.relatedTarget&&e.relatedTarget.blur(),form&&clearFormMessages(form)}),$(".modal").on("hidden.bs.modal",async function(e){const actionType=$(this).data("on-close-action"),form=$(this).find("form");form.length&&actionType&&modalFormUtils.processForm(form,"clear"===actionType)});const formUtils=handleFormAction();$(".btn-reset-form").click(function(e){const actionType=$(this).data("action-type"),form=$(this).closest("form").length?$(this).closest("form"):$(`form[id="${$(this).attr("form")}"]`);form.length&&(e.preventDefault(),formUtils.processForm(form,"clear"===actionType))});let SearchInputBaseController=class SearchInputBaseController2 extends BaseInputController{constructor(input){super(),this.$input=$(input),this.displayInitialMessage(this.$input),this.suppressLogicMessages=this.$input.data("suppress-logic-messages"),this.targetId=this.$input.data("target-id"),this.itemsSelector=this.$input.data("items-selector"),this.mode=this.$input.data("mode"),this.qsParam=this.$input.data("qs-param-key")||"search",this.setupEvents(this.$input),"qs"===this.mode&&this.handleDefaultQueryStringSearchValue()}setupEvents($input2){$input2.on("input",()=>{const searchValue=$input2.val().toLowerCase().trim();"livewire"===this.mode?this.debouncedDispatch(searchValue):"qs"===this.mode||this.handleSearch(searchValue)}),"qs"===this.mode&&($input2.on("keydown",e=>{"Enter"===e.key&&(e.preventDefault(),this.handleQueryStringSearch())}),$input2.closest(".x-search-input-component").find(".search-input-action-icon").on("click",()=>{this.handleQueryStringSearch()}))}debouncedDispatch=debounce(function(searchValue){if(!this.targetId)return;const tableEl=document.getElementById(this.targetId);if(tableEl){const wireId=tableEl.getAttribute("wire:id");wireId&&Livewire.find(wireId).call("handleSearchUpdated",searchValue)}},300);handleSearch(searchValue){if(!this.targetId)return;$(`#${this.targetId}`).find(this.itemsSelector).each((index,item)=>{const $item=$(item),itemText=$item.text().toLowerCase();""===searchValue||itemText.includes(searchValue)?$item.show():$item.hide()})}handleQueryStringSearch(){const searchValue=this.$input.val().trim(),url=new URL(window.location);searchValue?url.searchParams.set(this.qsParam,searchValue):url.searchParams.delete(this.qsParam),window.location.href=url.toString()}handleDefaultQueryStringSearchValue(){const searchValue=new URL(window.location).searchParams.get(this.qsParam);this.$input.val(searchValue)}};window.SearchInputBaseController=SearchInputBaseController;class SearchInputController extends SearchInputBaseController{constructor(input){super(input)}}function initializeSearchInput(selector){const instance=new SearchInputController(selector);$(selector).data("instance",instance)}window.initializeSearchInput=initializeSearchInput,doravel.ready(context=>{$(".x-search-input-component .search-input",context).each((index,input)=>{initializeSearchInput(input)})}),doravel.ready(context=>{$(".x-tab-panel-component",context).each(function(){const $tabPanel=$(this),$navTabs=$tabPanel.find(".nav-tabs"),$tabItems=$tabPanel.find(".tab-content .x-tab-item-component"),$skeletonLoader=$tabPanel.find(".skeleton-loader");$tabItems.each(function(){const $tabItem=$(this),tabId=$tabItem.attr("id"),tabBadge=$tabItem.data("badge"),tabTitle=$tabItem.find(".x-tab-item-title").text().trim(),isActive=$tabItem.hasClass("active"),$navLink=$("<button>",{class:"nav-link "+(isActive?"active":""),"data-bs-toggle":"tab","data-bs-target":`#${tabId}`,type:"button",text:tabTitle});tabBadge&&$navLink.append(`<span class="badge badge-sm badge-light-secondary rounded-pill">${tabBadge}</span>`),$("<li>",{class:"nav-item"}).append($navLink).appendTo($navTabs);const observer=new MutationObserver(mutationsList=>{for(const mutation of mutationsList)if("attributes"===mutation.type){$(mutation.target).closest(".x-tab-item-component").find('.x-component-message[data-message-type="error"]:not(:empty):not(.display-none)').length>0?$navLink.addClass("nav-link-error"):$navLink.removeClass("nav-link-error")}});$tabItem.find(".x-component-message").each(function(){observer.observe(this,{attributes:!0})})}),$skeletonLoader.remove()})});let VideoBaseController=class VideoBaseController2{constructor(element,options={}){this.element=$(element),this.id=this.element.attr("id"),this.player=null,this.options={controls:void 0!==options.controls?options.controls:this.element.data("controls"),autoplay:void 0!==options.autoplay?options.autoplay:this.element.data("autoplay"),loop:void 0!==options.loop?options.loop:this.element.data("loop"),muted:void 0!==options.muted?options.muted:this.element.data("muted"),poster:void 0!==options.poster?options.poster:this.element.data("poster"),enableSmoothSeeking:!0,responsive:!0,fluid:!0,restoreEl:!0},options.src&&(this.options.sources=[{src:options.src,type:"video/mp4"}]),this.init()}init(){this.player=videojs(this.id,this.options),this.player.on("canplay",()=>{$(this.player.el()).closest(".x-video-component").addClass("video-loaded")})}};window.VideoBaseController=VideoBaseController;class VideoController extends VideoBaseController{constructor(input,options){super(input,options)}}function initializeVideo(selector,options){const player=videojs.getPlayer(selector);player&&player.dispose();const instance=new VideoController(selector,options);$(selector).data("instance",instance)}function setupTables(){document.querySelectorAll(".x-table-component").forEach(tableElement=>{if(tableElement.closest("[wire\\:id]")){processTableConditions(tableElement);new MutationObserver(mutations=>{processTableConditions(tableElement)}).observe(tableElement,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style","class"]})}})}function handleTableChanges(){$("form[data-table-target]").each(function(){const $form=$(this),target=$form.attr("data-table-target"),$tableEl=$(`#${target}`);function submitToLivewire(){const formDataArray=$form.serializeArray(),values={},operators={};if($.each(formDataArray,function(_,field){if("form_validation"!==field.name){values[field.name]=field.value;const operator=$form.find(`[name="${field.name}"]`).data("table-filter-operator");operators[field.name]=operator??"like"}}),values.filter_operators=JSON.stringify(operators),$tableEl.length){const wireId=$tableEl.attr("wire:id");wireId&&Livewire.find(wireId).call("handleSearchUpdated",values).then(()=>{handleSubmitButtonState($form,{loadingState:!1,errorState:!1,validationState:!1})})}}$form.on("submit",function(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),handleSubmitButtonState($form,{loadingState:!0});const validator=$form.data("validator");if(validator){validator.form();const isValid=!hasFormComponentError($form);0===window.remoteRequestsCount&&isValid?(clearFormMessages($form),submitToLivewire()):window.remoteRequestsCount>0&&window.addEventListener("remoteRequestsCountChanged",e2=>{0===e2.detail.value&&!1===$(e2.target).prop("disabled")&&isValid&&(clearFormMessages($form),submitToLivewire())})}else submitToLivewire()})}),$("select[data-table-target]").each(function(){const $select=$(this),target=$select.attr("data-table-target"),$tableEl=$(`#${target}`);$select.on("change",function(){if($tableEl.length){const wireId=$tableEl.attr("wire:id");wireId&&Livewire.find(wireId).call("updatePerPage",+$select.val())}})})}function processTableConditions(tableEl){tableEl&&tableEl.querySelectorAll("[condition]").forEach(element=>{const condition2=element.getAttribute("condition");try{new Function("return "+condition2)()||element.remove()}catch(e){console.error("Error evaluating condition:",condition2,e)}})}window.initializeVideo=initializeVideo,doravel.ready(context=>{$(".x-video-component video:has(source)",context).each((index,input)=>{initializeVideo(input)})}),doravel.ready(()=>{setupTables()}),handleTableChanges();let StepperBase=class StepperBase2{constructor(stepperEl){this.stepperEl=stepperEl,this.headerEl=stepperEl.querySelector(".x-stepper-component-header"),this.id=stepperEl.id,this.totalSteps=stepperEl.querySelectorAll(".x-stepper-component-step").length,this.stepperItems=Array.from(stepperEl.querySelectorAll(".x-stepper-component-step")).map((item,index)=>({id:item.dataset.targetStep,step:index+1,title:item.dataset.title,icon:item.dataset.icon,active:item.classList.contains("active"),targetModal:item.dataset.targetModal||null,headerSlot:item.querySelector(".x-stepper-component-step-header-slot")?item.querySelector(".x-stepper-component-step-header-slot").innerHTML:null})),this.allowBackTracking=$(stepperEl).data("allow-back-tracking"),this.nextButton=$(document).find(`[stepper-id="${this.id}"][stepper-action="next"]`),this.prevButton=$(document).find(`[stepper-id="${this.id}"][stepper-action="prev"]`),this.init()}init(){this.setupEvents(),this.generateStepperHeaders()}generateStepperHeaders(){this.stepperItems.forEach((item,index)=>{const{id:id,step:step,title:title,icon:icon,active:active,headerSlot:headerSlot,targetModal:targetModal}=item,renderedStep=`\n                    <div\n                        class="x-stepper-component-header-item ${active?"active":""}"\n                        data-step="${step}"\n                        id="${id}"\n                    >\n                        <div class="x-stepper-component-header-item-icon" ${targetModal?`data-bs-toggle="modal" data-bs-target="#${targetModal}"`:""}>\n                            <i class="step-icon ${icon}"></i>\n                            <i class="step-completed-icon fa-solid fa-check"></i>\n                        </div>\n                        <div class="x-stepper-component-header-item-title">\n                            ${title}\n                        </div>\n                        ${headerSlot??""}\n                    </div>\n                `;$(this.headerEl).append(renderedStep),step<this.stepperItems.length&&$(this.headerEl).append('<div class="x-stepper-component-header-separator"></div>')}),$(this.stepperEl).find(".x-stepper-component-step-header-slot").remove();$(this.stepperEl).getCurrentStep()||$(this.stepperEl).goToStep(1)}setupEvents(){$(this.stepperEl).on("click",".x-stepper-component-header-item",e=>{const currentActive=$(this.stepperEl).getCurrentStep(),step=$(e.currentTarget).data("step");(e.target.classList.contains("x-stepper-component-header-item-icon")||e.target.classList.contains("x-stepper-component-header-item-title"))&&this.allowBackTracking&&step<currentActive&&$(this.stepperEl).goToStep(step)}),$(this.nextButton).on("click",e=>{const currentActive=$(this.stepperEl).getCurrentStep(),form=$(this.nextButton).closest("form");if(0===form.length)return void $(this.stepperEl).goToNextStep();currentActive<this.stepperItems.length&&form.attr("stepper-form","true");form.data("validator").checkForm();const isValid=!hasFormComponentError(form);0===window.remoteRequestsCount&&isValid?(clearFormMessages(form),$(this.stepperEl).getCurrentStep()===this.totalSteps&&form.removeAttr("stepper-form"),$(this.stepperEl).goToNextStep(),handleSubmitButtonState(form,{loadingState:!1,errorState:!1,validationState:!1})):window.remoteRequestsCount>0&&window.addEventListener("remoteRequestsCountChanged",e2=>{0===e2.detail.value&&!1===$(e2.target).prop("disabled")&&isValid&&($(this.stepperEl).getCurrentStep()===this.totalSteps&&form.removeAttr("stepper-form"),clearFormMessages(form),setTimeout(()=>{$(this.stepperEl).goToNextStep(),handleSubmitButtonState(form,{loadingState:!1,errorState:!1,validationState:!1})},100))})}),$(this.prevButton).on("click",()=>{$(this.stepperEl).goToPrevStep()})}};doravel.ready(()=>{$.fn.goToNextStep=function(){const stepperEl=this[0];this.hasClass("x-stepper-component")||devConsoleLog({type:"error",message:"This element is not a stepper component"});const stepperItems=stepperEl.querySelectorAll(".x-stepper-component-header-item"),currentActive=this.getCurrentStep();currentActive<stepperItems.length&&this.goToStep(currentActive+1)},$.fn.goToPrevStep=function(){const stepperEl=this[0];this.hasClass("x-stepper-component")||devConsoleLog({type:"error",message:"This element is not a stepper component"});stepperEl.querySelectorAll(".x-stepper-component-header-item");const currentActive=this.getCurrentStep();currentActive>1&&this.goToStep(currentActive-1)},$.fn.getCurrentStep=function(){const stepperEl=this[0];this.hasClass("x-stepper-component")||devConsoleLog({type:"error",message:"This element is not a stepper component"});const activeItem=stepperEl.querySelector(".x-stepper-component-header-item.active");return activeItem?parseInt(activeItem.dataset.step):null},$.fn.goToStep=function(stepIndex){const stepperEl=this[0];if(!stepIndex)return void devConsoleLog({type:"error",message:"Step index is required"});if(!this.hasClass("x-stepper-component"))return void devConsoleLog({type:"error",message:"This element is not a stepper component"});const stepperItems=stepperEl.querySelectorAll(".x-stepper-component-header-item");stepIndex>stepperItems.length||stepIndex<1?devConsoleLog({type:"error",message:"Step index is out of range"}):stepperItems.forEach(item=>{const itemStep=parseInt(item.dataset.step),activeId=item.id,content=stepperEl.querySelector(`[data-target-step='${activeId}']`);if(itemStep===stepIndex){item.classList.add("active"),content.classList.add("active");const nextButtonText=content.getAttribute("data-next-button");nextButtonText&&$(document).find(`[stepper-id="${stepperEl.id}"][stepper-action="next"]`).find(".x-component-button-title").text(nextButtonText);const prevButtonText=content.getAttribute("data-prev-button");prevButtonText&&$(document).find(`[stepper-id="${stepperEl.id}"][stepper-action="prev"]`).find(".x-component-button-title").text(prevButtonText)}else item.classList.remove("active"),content.classList.remove("active")})}}),window.StepperBase=StepperBase;class Stepper extends StepperBase{constructor(input){super(input)}}function initializeStepper(selector){const instance=new Stepper(selector);$(selector).data("instance",instance)}doravel.ready(context=>{$(".x-stepper-component",context).each((index,stepper)=>{initializeStepper(stepper)})});let FileBaseController=class FileBaseController2{constructor(element){this.element=$(element),this.iconContainer=this.element.find(".file-icon"),this.loadingElement=this.element.find(".file-picker-loading"),this.video=this.element.find("video"),this.width=this.element.data("width"),this.height=this.element.data("height"),this.src=this.element.data("src"),this.init()}toggleLoading(show){this.loadingElement&&this.loadingElement.length&&(void 0===show?this.loadingElement.toggle():this.loadingElement.toggle(!!show))}init(){if(this.video&&this.video.length&&this.initializeVideo(),this.src){const type=this.getFileType(this.src);if("image"===type){const img=this.element.find("img");img.length?(img.off("load.dornica").on("load.dornica",()=>this.toggleLoading(!1)),img[0].complete&&this.toggleLoading(!1)):this.toggleLoading(!1)}else if("doc"===type){const embed=this.element.find("embed");if(embed.length>0){let loaded=!1;embed.off("load.embed").on("load.embed",()=>{loaded||(loaded=!0,this.toggleLoading(!1))}),setTimeout(()=>{loaded||this.toggleLoading(!1)},4e3)}else this.toggleLoading(!1)}else if("other"===type){let extension="";const match=this.src.match(/\.([a-zA-Z0-9]+)(?:\?|#|$)/);match&&(extension=match[1].toLowerCase()),this.element.find(".file-icon").text(extension),this.toggleLoading(!1)}}else this.toggleLoading(!1)}initializeVideo(){const player=videojs(this.video.attr("id"),{controls:!0,responsive:!0,fluid:!0,restoreEl:!0});player.on("canplay",()=>{$(player.el()).closest(".file-video-container").addClass("video-loaded"),this.toggleLoading(!1)})}formatFileSize(sizeInBytes){const sizeInKB=sizeInBytes/1024,KBText=__("image_picker.sizes.kb"),MBText=__("image_picker.sizes.mb");if(sizeInKB<1024)return`${Intl.NumberFormat().format(Math.round(sizeInKB))} ${KBText}`;const sizeInMB=sizeInKB/1024;return`${Intl.NumberFormat().format(sizeInMB.toFixed(2))} ${MBText}`}getFileType(src){let extension="";if("string"==typeof src){const match=src.match(/\.([a-zA-Z0-9]+)(?:\?|#|$)/);match&&(extension=match[1].toLowerCase())}return["jpg","jpeg","png","gif","webp","bmp","svg","ico","tiff","avif","heic","heif","raw","cr2","nef","orf","sr2","tif"].includes(extension)?"image":["mp4","webm","ogg","ogv","mov","m4v","avi","wmv","flv","mkv","3gp","mpeg","mpg","m2v","m4p","m4v","f4v","f4p","vob"].includes(extension)?"video":["pdf"].includes(extension)?"doc":"other"}setValue(src,name,size){this.video=null,this.src=src,this.toggleLoading(!0);const type=this.getFileType(src);if(this.element.children().not(".file-picker-loading").remove(),"image"===type)this.element.append(`\n                <img\n                    src="${src}"\n                    width="${this.width}"\n                    height="${this.height}"\n                >\n            `);else if("video"===type){const videoId=`video-${Math.random().toString(36).substr(2,9)}`;this.element.append(`\n                <div class="file-video-container">\n                    <video\n                        class="video-js vjs-theme-plyr"\n                        id="${videoId}"\n                        width="${this.width}"\n                        height="${this.height}"\n                    >\n                        <source src="${src}">\n                    </video>\n                </div>\n            `),this.video=this.element.find("video")}else"doc"===type?this.element.append(`\n                <embed\n                    src="${src}"\n                    width="${this.width}"\n                    height="${this.height}"\n                >\n            `):"other"===type&&this.element.append(`\n                <a\n                    href="${src}"\n                    download\n                    class="unknown-file-container"\n                >\n                    <div class="file-icon"></div>\n                    <div>\n                        <div class="file-name">${name||src}</div>\n                        ${size?`<div class="file-size">${this.formatFileSize(size)}</div>`:""}\n                    </div>\n                </a>\n            `);this.init()}};window.FileBaseController=FileBaseController;class FileController extends FileBaseController{constructor(input){super(input)}}function initializeFile(selector){const instance=new FileController(selector);$(selector).data("instance",instance)}window.initializeFile=initializeFile,doravel.ready(context=>{$(".x-file-component",context).each((index,element)=>{initializeFile(element)})}),doravel.ready(()=>{$(".x-chat-component").each((index,item)=>{$(item).animate({scrollTop:$(item)[0].scrollHeight},400)})});
